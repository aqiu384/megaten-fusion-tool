"use strict";(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[970],{5939:(P,S,o)=>{o.d(S,{RL:()=>v,gQ:()=>f});var O=o(7548),e=o(6404),l=o(4769),C=o(6814);function D(t,d){if(1&t&&(l.TgZ(0,"tr")(1,"th"),l._uU(2),l.qZA()()),2&t){const r=d.$implicit;l.xp6(2),l.Oqu(r)}}let T=(()=>{class t{ngOnChanges(){if(this.compendium&&this.pairChart&&(this.trioChart||!this.trioCalculator)){const r=[];for(const m of this.compendium.allDemons.filter(p=>!p.isEnemy)){const p=this.compendium.getSpecialNameEntries(m.name);if(p.length>0){r.push(`${m.name} = ${p.join(" x ")}`);continue}const u=this.pairCalculator.getFusions(m.name,this.compendium,this.pairChart).map(y=>(0,e.S6)(y,this.compendium));if(u.length>0&&(u.filter(y=>y.race1!==m.race).length>0||!this.trioCalculator||0===this.trioCalculator.getFusions(m.name,this.compendium,this.trioChart).length)){u.sort((_,k)=>_.price-k.price);const y=u.slice(0,3).map(_=>`${_.name1} x ${_.name2}`).join(", ");r.push(`${m.name} = ${y}`+(u.length>3?`, ${u.length-3} more...`:""))}else{if(this.trioCalculator){const y=this.trioCalculator.getFusions(m.name,this.compendium,this.trioChart).map(_=>(0,e.Aw)(_,this.compendium)).filter(_=>_.d1.race!==m.race);if(y.length>0){y.sort((k,h)=>k.price-h.price);const _=y.slice(0,3).map(k=>`${k.d1.name} x ${k.d2.name} x ${k.d3.name}`).join(", ");r.push(`${m.name} = ${_}`+(y.length>3?`, ${y.length-3} more...`:""));continue}}r.push(m.prereq?`${m.name} = ${m.prereq}`:`${m.name} = No fusions found!`)}}this.fissionPreviews=r}}static#e=this.\u0275fac=function(m){return new(m||t)};static#s=this.\u0275cmp=l.Xpm({type:t,selectors:[["app-fission-preview-table"]],inputs:{pairCalculator:"pairCalculator",trioCalculator:"trioCalculator",pairChart:"pairChart",trioChart:"trioChart",compendium:"compendium"},features:[l.TTD],decls:6,vars:1,consts:[[1,"entry-table"],[1,"title"],[4,"ngFor","ngForOf"]],template:function(m,p){1&m&&(l.TgZ(0,"table",0)(1,"tbody")(2,"tr")(3,"th",1),l._uU(4,"Fission Previews"),l.qZA()(),l.YNc(5,D,3,1,"tr",2),l.qZA()()),2&m&&(l.xp6(5),l.Q6J("ngForOf",p.fissionPreviews))},dependencies:[C.sg],encapsulation:2,changeDetection:0})}return t})(),v=(()=>{class t{constructor(r){this.fusionDataService=r,this.subscriptions=[]}ngOnInit(){this.calculator=this.fusionDataService.fissionCalculator,this.subscriptions.push(this.fusionDataService.compendium.subscribe(r=>{this.compendium=r})),this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(r=>{this.fusionChart=r}))}ngOnDestroy(){for(const r of this.subscriptions)r.unsubscribe()}static#e=this.\u0275fac=function(m){return new(m||t)(l.Y36(O.vE))};static#s=this.\u0275cmp=l.Xpm({type:t,selectors:[["app-smt-fission-preview"]],decls:2,vars:3,consts:[[3,"pairCalculator","pairChart","compendium"]],template:function(m,p){1&m&&(l.TgZ(0,"app-fission-preview-table",0),l._UZ(1,"app-fission-preview-table"),l.qZA()),2&m&&l.Q6J("pairCalculator",p.calculator)("pairChart",p.fusionChart)("compendium",p.compendium)},dependencies:[T],encapsulation:2,changeDetection:0})}return t})(),f=(()=>{class t{constructor(r){this.fusionTrioService=r,this.subscriptions=[]}ngOnInit(){this.pairCalculator=this.fusionTrioService.fissionCalculator,this.trioCalculator=this.fusionTrioService.triFissionCalculator,this.subscriptions.push(this.fusionTrioService.compendium.subscribe(r=>{this.compendium=r})),this.subscriptions.push(this.fusionTrioService.squareChart.subscribe(r=>{this.fusionChart=r}))}ngOnDestroy(){for(const r of this.subscriptions)r.unsubscribe()}static#e=this.\u0275fac=function(m){return new(m||t)(l.Y36(O.Ir))};static#s=this.\u0275cmp=l.Xpm({type:t,selectors:[["app-trio-fission-preview"]],decls:2,vars:5,consts:[[3,"pairCalculator","trioCalculator","pairChart","trioChart","compendium"]],template:function(m,p){1&m&&(l.TgZ(0,"app-fission-preview-table",0),l._UZ(1,"app-fission-preview-table"),l.qZA()),2&m&&l.Q6J("pairCalculator",p.pairCalculator)("trioCalculator",p.trioCalculator)("pairChart",p.fusionChart.normalChart)("trioChart",p.fusionChart)("compendium",p.compendium)},dependencies:[T],encapsulation:2,changeDetection:0})}return t})()},9052:(P,S,o)=>{o.d(S,{m:()=>C});var O=o(7548),e=o(4769),l=o(8615);let C=(()=>{class D{constructor(v,f){this.changeDetectorRef=v,this.fusionTrioService=f,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.fusionTrioService.squareChart.subscribe(v=>{this.normChart=v.normalChart,this.tripChart=v.tripleChart}))}ngOnDestroy(){for(const v of this.subscriptions)v.unsubscribe()}static#e=this.\u0275fac=function(f){return new(f||D)(e.Y36(e.sBO),e.Y36(O.Ir))};static#s=this.\u0275cmp=e.Xpm({type:D,selectors:[["app-triple-fusion-chart"]],decls:1,vars:4,consts:[[3,"normChart","tripChart","normTitle","tripTitle"]],template:function(f,t){1&f&&e._UZ(0,"app-fusion-chart",0),2&f&&e.Q6J("normChart",t.normChart)("tripChart",t.tripChart)("normTitle","Normal Fusions")("tripTitle","Triple Fusions")},dependencies:[l.R],encapsulation:2,changeDetection:0})}return D})()},2812:(P,S,o)=>{o.d(S,{t:()=>e});var O=o(6262);class e extends O.g{constructor(C,D,T){super(),this.elementDemons=[],this.lvlModifier=.5,this.initCharts(C,T)}initCharts(C,D){const T=C.races,v=C.table,f=[];for(let t=0;t<T.length;t++)f.push(v[t].slice(D?0:t,D?t+1:T.length)),D||(f[t][0]="-");this.races=T,this.lvlModifier=D?4.25:.5,this.fissionChart=O.g.loadFissionTableJson(T,this.elementDemons,f),this.fusionChart=O.g.loadFusionTableJson(T,f),this.elementChart={}}}},4806:(P,S,o)=>{o.d(S,{V:()=>W});var O=o(4487),e=o(4769),l=o(8166),C=o(6814),D=o(5390);let T=(()=>{class a{constructor(s){this.appCssClasses=s.compConfig.appCssClasses,this.otherLinks=[{title:"Shadow List",link:"shadows"}],s.compConfig.hasManualInheritance&&this.otherLinks.push({title:"Recipe Generator",link:"recipes"})}static#e=this.\u0275fac=function(c){return new(c||a)(e.Y36(l.Y))};static#s=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-p4-compendium"]],decls:1,vars:4,consts:[[3,"ngClass","hasSettings","mainList","otherLinks"]],template:function(c,n){1&c&&e._UZ(0,"app-demon-compendium",0),2&c&&e.Q6J("ngClass",n.appCssClasses)("hasSettings",!1)("mainList","persona")("otherLinks",n.otherLinks)},dependencies:[C.mk,D.e],styles:[".p3 div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p3 div.element-icon.i4107,.p3 div.element-icon.sla{background-image:url(/assets/images/p5/sword.png)}.p3 div.element-icon.i2059,.p3 div.element-icon.str{background-image:url(/assets/images/p5/phys.png)}.p3 div.element-icon.i1035,.p3 div.element-icon.pie{background-image:url(/assets/images/p5/gun.png)}.p3 div.element-icon.i7743,.p3 div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p3 div.element-icon.i7487,.p3 div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p3 div.element-icon.i7359,.p3 div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p3 div.element-icon.i7295,.p3 div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p3 div.element-icon.i1003,.p3 div.element-icon.lig{background-image:url(/assets/images/p5/bless.png)}.p3 div.element-icon.i8156,.p3 div.element-icon.dar{background-image:url(/assets/images/p5/curse.png)}.p3 div.element-icon.i989,.p3 div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.p3 div.element-icon.i1007,.p3 div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p3 div.element-icon.i8191,.p3 div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p3 div.element-icon.i1023,.p3 div.element-icon.spe{background-image:url(/assets/images/p5/trait.png)}.p3 div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p3 div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.p3 th.title,.p3 th.nav.active,.p3 th.nav.active a{color:#000;background-color:#4372aa}.p4 div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p4 div.element-icon.i1083,.p4 div.element-icon.phy{background-image:url(/assets/images/p5/phys.png)}.p4 div.element-icon.i1791,.p4 div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p4 div.element-icon.i1535,.p4 div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p4 div.element-icon.i1983,.p4 div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p4 div.element-icon.i1919,.p4 div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p4 div.element-icon.i1003,.p4 div.element-icon.lig{background-image:url(/assets/images/p5/bless.png)}.p4 div.element-icon.i981,.p4 div.element-icon.dar{background-image:url(/assets/images/p5/curse.png)}.p4 div.element-icon.i989,.p4 div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.p4 div.element-icon.i1007,.p4 div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p4 div.element-icon.i2047,.p4 div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p3 div.element-icon.spe{background-image:url(/assets/images/p5/trait.png)}.p4 div.element-icon.i2039,.p4 div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p4 div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.p4 th.title,.p4 th.nav.active,.p4 th.nav.active a{color:#000;background-color:#ffe600}\n"],encapsulation:2,changeDetection:0})}return a})();var v=o(1032),f=o(6593),t=o(4101);let d=(()=>{class a extends v.l{constructor(s,c,n,F){super(s,n,F),this.showAllies=!c.snapshot.data.showShadows,this.showEnemies=!this.showAllies,this.compConfig=F.compConfig,this.defaultSortFun=(w,M)=>200*(this.compConfig.raceOrder[w.race]-this.compConfig.raceOrder[M.race])+M.lvl-w.lvl,this.appName=`List of Personas - ${F.appName}`,this.statHeaders=this.compConfig.baseStats,this.resistHeaders=this.compConfig.resistElems,this.inheritOrder=this.compConfig.elemOrder,this.showEnemies&&(this.appName=`List of Shadows - ${F.appName}`,this.statHeaders=this.compConfig.enemyStats,this.resistHeaders=this.compConfig.enemyResists,this.inheritOrder=null)}static#e=this.\u0275fac=function(c){return new(c||a)(e.Y36(f.Dx),e.Y36(O.gz),e.Y36(e.sBO),e.Y36(l.Y))};static#s=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-demon-list-container"]],features:[e.qOj],decls:2,vars:9,consts:[[3,"isEnemy","hasCurrLvl","raceOrder","statHeaders","resistHeaders","inheritOrder","rowData"]],template:function(c,n){1&c&&(e._UZ(0,"app-smt-demon-list",0),e.ALo(1,"async")),2&c&&e.Q6J("isEnemy",n.showEnemies)("hasCurrLvl",!n.showEnemies)("raceOrder",n.compConfig.raceOrder)("statHeaders",n.statHeaders)("resistHeaders",n.resistHeaders)("inheritOrder",n.inheritOrder)("rowData",e.lcZ(1,7,n.demons))},dependencies:[t.Q,C.Ov],encapsulation:2,changeDetection:0})}return a})();var r=o(4330),m=o(3934);let p=(()=>{class a extends r.e{constructor(s,c,n){super(s,c,n),this.compConfig=n.compConfig,this.appName=`List of Skills - ${n.appName}`,this.transferTitle=this.compConfig.hasSkillCards?"Skill Card":"",this.defaultSortFun=(F,w)=>1e4*(this.compConfig.elemOrder[F.element]-this.compConfig.elemOrder[w.element])+F.rank-w.rank}static#e=this.\u0275fac=function(c){return new(c||a)(e.Y36(f.Dx),e.Y36(e.sBO),e.Y36(l.Y))};static#s=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-skill-list-container"]],features:[e.qOj],decls:2,vars:7,consts:[[3,"elemOrder","isPersona","transferTitle","hasTarget","rowData"]],template:function(c,n){1&c&&(e._UZ(0,"app-smt-skill-list",0),e.ALo(1,"async")),2&c&&e.Q6J("elemOrder",n.compConfig.elemOrder)("isPersona",!0)("transferTitle",n.transferTitle)("hasTarget",!0)("rowData",e.lcZ(1,5,n.skills))},dependencies:[m.J,C.Ov],encapsulation:2,changeDetection:0})}return a})();var u=o(7880),E=o(8520),y=o(1009),_=o(755),k=o(9012),h=o(4069),b=o(8711);const i=function(){return["HP","MP"]};let g=(()=>{class a{static#e=this.\u0275fac=function(c){return new(c||a)};static#s=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-enemy-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig"},decls:19,vars:15,consts:[[3,"title","statHeaders","stats"],[1,"entry-table"],["colspan","2",1,"title"],[3,"resistHeaders","resists","ailmentHeaders","ailments"],[3,"hasRank","hasTarget","elemOrder","compendium","skillLevels"]],template:function(c,n){1&c&&(e._UZ(0,"app-demon-stats",0),e.TgZ(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),e._uU(5,"Appearances"),e.qZA()(),e.TgZ(6,"tr")(7,"th"),e._uU(8,"Areas"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Drops"),e.qZA()()(),e.TgZ(11,"tbody")(12,"tr")(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA()()()(),e._UZ(17,"app-demon-resists",3)(18,"app-demon-skills",4)),2&c&&(e.Q6J("title","Lvl "+n.demon.lvl+" "+n.demon.race+" "+n.demon.name)("statHeaders",e.DdM(14,i).concat(n.compConfig.baseStats))("stats",n.demon.stats.concat(n.demon.estats)),e.xp6(14),e.Oqu(n.demon.area),e.xp6(2),e.Oqu(n.demon.drop),e.xp6(1),e.Q6J("resistHeaders",n.compConfig.resistElems)("resists",n.demon.resists)("ailmentHeaders",n.compConfig.ailmentElems)("ailments",n.demon.ailments),e.xp6(1),e.Q6J("hasRank",!0)("hasTarget",!0)("elemOrder",n.compConfig.elemOrder)("compendium",n.compendium)("skillLevels",n.demon.skills))},dependencies:[E.O,y.I,_.n],encapsulation:2,changeDetection:0})}return a})();function L(a,R){if(1&a&&(e.ynx(0),e._UZ(1,"app-demon-stats",2)(2,"app-demon-resists",3)(3,"app-demon-inherits",4)(4,"app-demon-skills",5)(5,"app-smt-fusions",6),e.BQk()),2&a){const s=e.oxw();e.xp6(1),e.Q6J("title","Lvl "+s.demon.lvl+" "+s.demon.race+" "+s.demon.name)("price",s.demon.price)("statHeaders",s.compConfig.baseStats)("stats",s.demon.stats)("inherits",s.demon.inherits),e.xp6(1),e.Q6J("resistHeaders",s.compConfig.resistElems)("resists",s.demon.resists),e.xp6(1),e.Q6J("hasChance",!s.compConfig.hasManualInheritance)("inheritHeaders",s.compConfig.affinityElems)("inherits",s.demon.affinities),e.xp6(1),e.Q6J("hasRank",!0)("hasTarget",!0)("elemOrder",s.compConfig.elemOrder)("compendium",s.compendium)("skillLevels",s.demon.skills),e.xp6(1),e.Q6J("hasTripleFusion",!0)}}function A(a,R){if(1&a&&e._UZ(0,"app-demon-missing",7),2&a){const s=e.oxw();e.Q6J("name",s.name)}}function Z(a,R){if(1&a&&e._UZ(0,"app-demon-entry",1),2&a){const s=e.oxw();e.Q6J("name",s.name)("demon",s.demon)("compConfig",s.compConfig)("compendium",s.compendium)}}function U(a,R){if(1&a&&e._UZ(0,"app-enemy-entry",1),2&a){const s=e.oxw();e.Q6J("name",s.name)("demon",s.demon)("compConfig",s.compConfig)("compendium",s.compendium)}}let J=(()=>{class a{static#e=this.\u0275fac=function(c){return new(c||a)};static#s=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"title","price","statHeaders","stats","inherits"],[3,"resistHeaders","resists"],[3,"hasChance","inheritHeaders","inherits"],[3,"hasRank","hasTarget","elemOrder","compendium","skillLevels"],[3,"hasTripleFusion"],[3,"name"]],template:function(c,n){1&c&&(e.YNc(0,L,6,16,"ng-container",0),e.YNc(1,A,1,1,"app-demon-missing",1)),2&c&&(e.Q6J("ngIf",n.demon),e.xp6(1),e.Q6J("ngIf",!n.demon))},dependencies:[C.O5,u.t,E.O,y.I,_.n,k.N,h.O],encapsulation:2,changeDetection:0})}return a})(),I=(()=>{class a{constructor(s,c,n,F){this.route=s,this.title=c,this.currentDemonService=n,this.fusionDataService=F,this.subscriptions=[],this.appName="Test App",this.appName=F.appName,this.compConfig=F.compConfig}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const s of this.subscriptions)s.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(s=>{this.compendium=s,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(s=>{this.name=s,this.getDemonEntry()})),this.route.params.subscribe(s=>{this.currentDemonService.nextCurrentDemon(s.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(`${this.name} - ${this.appName}`),this.demon=this.compendium.getDemon(this.name))}static#e=this.\u0275fac=function(c){return new(c||a)(e.Y36(O.gz),e.Y36(f.Dx),e.Y36(b.s),e.Y36(l.Y))};static#s=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-demon-entry-container"]],decls:2,vars:2,consts:[[3,"name","demon","compConfig","compendium",4,"ngIf"],[3,"name","demon","compConfig","compendium"]],template:function(c,n){1&c&&(e.YNc(0,Z,1,4,"app-demon-entry",0),e.YNc(1,U,1,4,"app-enemy-entry",0)),2&c&&(e.Q6J("ngIf",!n.demon||!n.demon.isEnemy),e.xp6(1),e.Q6J("ngIf",n.demon&&n.demon.isEnemy))},dependencies:[C.O5,J,g],encapsulation:2,changeDetection:0})}return a})();var Y=o(4436);let $=(()=>{class a{constructor(s,c){this.fusionDataService=s,this.title=c,this.subscriptions=[],this.maxSkills=8;const n=this.fusionDataService.compConfig;this.recipeConfig={fissionCalculator:this.fusionDataService.fissionCalculator,fusionCalculator:this.fusionDataService.fusionCalculator,races:n.races,skillElems:n.skillElems,inheritElems:n.affinityElems,displayElems:{},restrictInherits:!0,triExclusiveRaces:["Fool","Fortune","Tower","Judgement","Aeon","Jester"],triFissionCalculator:this.fusionDataService.triFissionCalculator,triFusionCalculator:this.fusionDataService.triFusionCalculator,defaultDemon:"Pixie"}}ngOnInit(){this.setTitle(),this.subscribeAll()}ngOnDestroy(){this.unsubscribeAll()}setTitle(){this.title.setTitle(`Recipe Generator - ${this.fusionDataService.appName}`)}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(s=>{this.compendium=s})),this.subscriptions.push(this.fusionDataService.squareChart.subscribe(s=>{this.squareChart=s}))}unsubscribeAll(){for(const s of this.subscriptions)s.unsubscribe()}static#e=this.\u0275fac=function(c){return new(c||a)(e.Y36(l.Y),e.Y36(f.Dx))};static#s=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-recipe-generator-container"]],decls:1,vars:4,consts:[[3,"maxSkills","compendium","squareChart","recipeConfig"]],template:function(c,n){1&c&&e._UZ(0,"app-recipe-generator",0),2&c&&e.Q6J("maxSkills",n.maxSkills)("compendium",n.compendium)("squareChart",n.squareChart)("recipeConfig",n.recipeConfig)},dependencies:[Y.X],encapsulation:2,changeDetection:0})}return a})();var Q=o(5939),B=o(5657),N=o(4689),j=o(6857),H=o(4170);const K=[{path:"",redirectTo:"personas",pathMatch:"full"},{path:"",component:T,data:{fusionTool:"chart"},children:[{path:"chart",component:o(9052).m}]},{path:"",component:T,children:[{path:"shadows/:demonName",component:I},{path:"personas/:demonName",component:I,children:[{path:"fissions/triple",component:j.p},{path:"fusions/triple",component:H.n},{path:"fissions",component:B.t},{path:"fusions",component:N.$},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"personas",component:d},{path:"shadows",component:d,data:{showShadows:!0}},{path:"skills",component:p},{path:"recipes",component:$},{path:"previews",component:Q.gQ}]},{path:"**",redirectTo:"personas",pathMatch:"full"}];let W=(()=>{class a{static#e=this.\u0275fac=function(c){return new(c||a)};static#s=this.\u0275mod=e.oAB({type:a});static#t=this.\u0275inj=e.cJS({imports:[O.Bz.forChild(K),O.Bz]})}return a})()},8166:(P,S,o)=>{o.d(S,{Y:()=>v});var O=o(5619);class e{constructor(t){this.compConfig=t,this.specialRecipes={},this.initImportedData(),this.updateDerivedData()}initImportedData(){const t={},d={},r={},m={},p={},u={},E={},y={},_="-".repeat(this.compConfig.ailmentElems.length);for(const[h,b]of Object.entries(this.compConfig.resistCodes))E[h]=(b/1e4|0)<<10,y[h]=b%1e4/2.5|0;const k=(h,b,i)=>(h||b).split("").map((g,L)=>E[g]+(i?.[L]/2.5|0||y[g]));for(const h of this.compConfig.demonData)for(const[b,i]of Object.entries(h))t[b]={name:b,race:i.race,lvl:i.lvl,currLvl:i.lvl,cardLvl:i.cardlvl||0,price:Math.pow(i.stats.reduce((g,L)=>L+g,0),2)+2e3,inherits:parseInt((i.affinities||[0]).map(g=>g>0?1:0).join(""),2),affinities:i.affinities,stats:i.stats,resists:k(i.resists,i.resists,i.resmods),ailments:k(i.ailments,_,i.ailmods),skills:i.skills,fusion:i.fusion||"normal",prereq:i.prereq||""};for(const h of this.compConfig.enemyData)for(const[b,i]of Object.entries(h)){let g=[];i.material&&"-"!==i.material&&g.push(i.material),i.gem&&"-"!==i.gem&&g.push(i.gem),i.drops&&(g=g.concat(i.drops)),g.length||g.push("-"),d[b]={name:b,race:i.race,lvl:i.lvl,currLvl:i.lvl,cardLvl:0,price:0,inherits:0,stats:i.stats.slice(0,2),estats:i.stats.slice(2),resists:k(i.resists,i.resists,i.resmods),ailments:k(i.ailments,_,i.ailmods),skills:i.skills.reduce((L,A)=>(L[A]=0,L),{}),fusion:"normal",area:i.area,drop:g.join(", "),isEnemy:!0}}for(const h of this.compConfig.skillData)for(const[b,i]of Object.entries(h))r[b]={name:b,element:i.element,cost:i.cost||0,rank:i.rank||99,effect:i.power?"\u221a"+i.power+" power"+(i.effect?", "+i.effect:""):i.effect,target:i.target||"Self",learnedBy:[],transfer:[],level:0},i.card&&(r[b].transfer=i.card.split(", ").map(g=>({demon:g,level:t[g]?t[g].cardLvl:-100})));for(const[h,b]of Object.entries(this.compConfig.specialRecipes)){const i=b;if(m[h]=i,t[h].fusion="special",2===i.length)for(const g of i)u[g]||(u[g]=[]),u[g].push(h)}for(const h of this.compConfig.races)p[h]={};for(const h of Object.values(t).sort((b,i)=>b.lvl-i.lvl)){"party"!==h.fusion&&(p[h.race][h.lvl]=h.name);for(const[b,i]of Object.entries(h.skills))r[b].learnedBy.push({demon:h.name,level:i})}this.demons=t,this.enemies=d,this.skills=r,this.specialRecipes=m,this.invertedDemons=p,this.invertedSpecials=u}updateDerivedData(){const t={},d={},r=[];for(const u of Object.values(this.skills))u.learnedBy.length<1?u.rank=99:r.push(u);for(const u of this.compConfig.races)t[u]=[],d[u]=[];for(const[u,E]of Object.entries(this.demons))"party"!==E.fusion&&(t[E.race].push(E.lvl),this.specialRecipes.hasOwnProperty(u)||d[E.race].push(E.lvl));for(const u of this.compConfig.races)t[u].sort((E,y)=>E-y),d[u].sort((E,y)=>E-y);const m=Object.keys(this.demons).map(u=>this.demons[u]),p=Object.keys(this.enemies).map(u=>this.enemies[u]);this._allDemons=p.concat(m),this._allSkills=r,this.allIngredients=t,this.allResults=d}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return Object.keys(this.specialRecipes).map(t=>this.demons[t])}getDemon(t){return this.demons[t]||this.enemies[t]}getSkill(t){return this.skills[t]}getSkills(t){const d=this.compConfig.elemOrder,r=t.map(m=>this.skills[m]);return r.sort((m,p)=>1e4*(d[m.element]-d[p.element])+m.rank-p.rank),r}getIngredientDemonLvls(t){return this.allIngredients[t]||[]}getResultDemonLvls(t){return this.allResults[t]||[]}getSpecialNameEntries(t){return this.specialRecipes[t]||[]}getSpecialNamePairs(t){return[]}reverseLookupDemon(t,d){return this.invertedDemons[t][d]}reverseLookupSpecial(t){return this.invertedSpecials[t]||[]}isElementDemon(t){return!1}updateFusionSettings(t){}}var l=o(2812),C=o(7548),D=o(4769),T=o(4487);let v=(()=>{class f{constructor(d,r){this.fissionCalculator=C.Bz,this.fusionCalculator=C.wC,this.triFissionCalculator=C.nL,this.triFusionCalculator=C.RD;const m=r.url.split("/")[1];this.compConfig=d.configs[d.configs[m]?m:"p4"],this.appName=this.compConfig.appTitle+" Fusion Calculator",this._compendium=new e(this.compConfig),this._compendium$=new O.X(this._compendium),this.compendium=this._compendium$.asObservable(),this._fusionChart=new l.t(this.compConfig.normalTable,this.compConfig.races),this._fusionChart$=new O.X(this._fusionChart),this.fusionChart=this._fusionChart$.asObservable(),this._tripleChart=new l.t(this.compConfig.normalTable,this.compConfig.races,!0),this._squareChart$=new O.X({normalChart:this._fusionChart,tripleChart:this._tripleChart,raceOrder:this.compConfig.raceOrder}),this.squareChart=this._squareChart$.asObservable()}updateFusionSettings(d){}static#e=this.\u0275fac=function(r){return new(r||f)(D.LFG(C.I7),D.LFG(T.F0))};static#s=this.\u0275prov=D.Yz7({token:f,factory:f.\u0275fac})}return f})()},8970:(P,S,o)=>{o.d(S,{R:()=>T});var O=o(6814),e=o(6208),l=o(8325),C=o(4806),D=o(4769);let T=(()=>{class v{static forRoot(){return{ngModule:v}}static#e=this.\u0275fac=function(d){return new(d||v)};static#s=this.\u0275mod=D.oAB({type:v});static#t=this.\u0275inj=D.cJS({imports:[O.ez,e.m,l.SharedCompendiumModule,C.V]})}return v})()}}]);