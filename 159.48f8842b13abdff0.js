"use strict";(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[159],{5990:(Z,V,a)=>{a.d(V,{D:()=>P});var j=a(8063);class P extends j.p{constructor(e,R,D){super(),this.lvlModifier=.5,this.initCharts(e,R,D)}initCharts(e,R,D){const G=e.races,S=e.table,_=R?.elems||[],U=R?.races||[],A=R?.table||[],B=[];for(let L=0;L<G.length;L++)B.push(S[L].slice(D?0:L,D?L+1:G.length)),D||(B[L][0]="-");this.races=G,this.elementDemons=_,this.lvlModifier=D?4.25:.5,this.fusionChart=j.p.loadFusionTableJson(G,1===S[0].length?S:B),this.fissionChart=j.p.loadFissionTableJson(G,_,1===S[0].length?S:B),this.elementChart=_.length?j.p.loadElementTableJson(U,_,A):{}}}},7277:(Z,V,a)=>{a.d(V,{S:()=>Ve});var j=a(8935),P=a(2755),$=a(1090),e=a(2598),R=a(2721),D=a(177),G=a(5583);let S=(()=>{class s{constructor(n){this.appCssClasses=n.compConfig.appCssClasses;const t=n.compConfig,i=$.fu;this.otherLinks=[],t.hasEnemies&&this.otherLinks.push({title:(0,P.oO)(i.ShadowList,t.lang),link:"shadows"}),!t.hasQrcodes&&t.hasManualInheritance&&this.otherLinks.push({title:(0,P.oO)(i.RecipGenerator,t.lang),link:"recipes"}),t.hasQrcodes&&this.otherLinks.push({title:"QR Code Generator",link:"qrcodes"})}static{this.\u0275fac=function(t){return new(t||s)(e.rXU(R.i))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-pq2-compendium"]],decls:1,vars:3,consts:[[3,"ngClass","mainList","otherLinks"]],template:function(t,i){1&t&&e.nrm(0,"app-demon-compendium",0),2&t&&e.Y8G("ngClass",i.appCssClasses)("mainList","persona")("otherLinks",i.otherLinks)},dependencies:[D.YU,G.f],styles:[".p3 div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p3 div.element-icon.i28716,.p3 div.element-icon.sla{background-image:url(/assets/images/p5/sword.png)}.p3 div.element-icon.i28717,.p3 div.element-icon.str{background-image:url(/assets/images/p5/phys.png)}.p3 div.element-icon.i28718,.p3 div.element-icon.pie{background-image:url(/assets/images/p5/gun.png)}.p3 div.element-icon.i30972,.p3 div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p3 div.element-icon.i29948,.p3 div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p3 div.element-icon.i29436,.p3 div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p3 div.element-icon.i29180,.p3 div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p3 div.element-icon.i4012,.p3 div.element-icon.lig{background-image:url(/assets/images/p5/bless.png)}.p3 div.element-icon.i32624,.p3 div.element-icon.dar{background-image:url(/assets/images/p5/curse.png)}.p3 div.element-icon.i3956,.p3 div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.p3 div.element-icon.i4093,.p3 div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p3 div.element-icon.i32764,.p3 div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p3 div.element-icon.i4092,.p3 div.element-icon.spa,.p3 div.element-icon.spb,.p3 div.element-icon.spe{background-image:url(/assets/images/p5/trait.png)}.p3 div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p3 div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.p3 th.title,.p3 th.nav.active,.p3 th.nav.active a{color:#000;background-color:#4372aa}.p4 div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p4 div.element-icon.i2166,.p4 div.element-icon.phy{background-image:url(/assets/images/p5/phys.png)}.p4 div.element-icon.i3582,.p4 div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p4 div.element-icon.i3070,.p4 div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p4 div.element-icon.i3966,.p4 div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p4 div.element-icon.i3838,.p4 div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p4 div.element-icon.i2006,.p4 div.element-icon.lig{background-image:url(/assets/images/p5/bless.png)}.p4 div.element-icon.i1978,.p4 div.element-icon.dar{background-image:url(/assets/images/p5/curse.png)}.p4 div.element-icon.i1979,.p4 div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.p4 div.element-icon.i2014,.p4 div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p4 div.element-icon.i4094,.p4 div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p4 div.element-icon.spa,.p4 div.element-icon.spe{background-image:url(/assets/images/p5/trait.png)}.p4 div.element-icon.i4095,.p4 div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p4 div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.p4 th.title,.p4 th.nav.active,.p4 th.nav.active a{color:#000;background-color:#ffe600}.p5 div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p5 div.element-icon.phy{background-image:url(/assets/images/p5/phys.png)}.p5 div.element-icon.i3075{background-image:url(/assets/images/p5/phys.png)}.p5 div.element-icon.gun{background-image:url(/assets/images/p5/gun.png)}.p5 div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p5 div.element-icon.i3839{background-image:url(/assets/images/p5/fire.png)}.p5 div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p5 div.element-icon.i3583{background-image:url(/assets/images/p5/ice.png)}.p5 div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p5 div.element-icon.i4031{background-image:url(/assets/images/p5/elec.png)}.p5 div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p5 div.element-icon.i3967{background-image:url(/assets/images/p5/wind.png)}.p5 div.element-icon.psy{background-image:url(/assets/images/p5/psy.png)}.p5 div.element-icon.i4079{background-image:url(/assets/images/p5/psy.png)}.p5 div.element-icon.nuk{background-image:url(/assets/images/p5/nuke.png)}.p5 div.element-icon.i4063{background-image:url(/assets/images/p5/nuke.png)}.p5 div.element-icon.ble{background-image:url(/assets/images/p5/bless.png)}.p5 div.element-icon.i1017{background-image:url(/assets/images/p5/bless.png)}.p5 div.element-icon.cur{background-image:url(/assets/images/p5/curse.png)}.p5 div.element-icon.i1014{background-image:url(/assets/images/p5/curse.png)}.p5 div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.p5 div.element-icon.i4086{background-image:url(/assets/images/p5/ailment.png)}.p5 div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p5 div.element-icon.i1019{background-image:url(/assets/images/p5/healing.png)}.p5 div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p5 div.element-icon.i4095{background-image:url(/assets/images/p5/almighty.png)}.p5 div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p5 div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.p5 div.element-icon.i0{background-image:url(/assets/images/p5/passive.png)}.p5 div.element-icon.tra{background-image:url(/assets/images/p5/trait.png)}.p5 th.title,.p5 th.nav.active,.p5 th.nav.active a{color:#fff;background-color:#f41000}.pq div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.pq div.element-icon.cut{background-image:url(/assets/images/p5/sword.png)}.pq div.element-icon.i3584,.pq div.element-icon.i3591,.pq div.element-icon.bas{background-image:url(/assets/images/p5/phys.png)}.pq div.element-icon.sta{background-image:url(/assets/images/p5/gun.png)}.pq div.element-icon.i376,.pq div.element-icon.i383,.pq div.element-icon.i3960,.pq div.element-icon.i3967,.pq div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.pq div.element-icon.i248,.pq div.element-icon.i255,.pq div.element-icon.i3832,.pq div.element-icon.i3839,.pq div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.pq div.element-icon.i472,.pq div.element-icon.i479,.pq div.element-icon.i4056,.pq div.element-icon.i4063,.pq div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.pq div.element-icon.i440,.pq div.element-icon.i447,.pq div.element-icon.i4024,.pq div.element-icon.i4031,.pq div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.pq div.element-icon.i496,.pq div.element-icon.i503,.pq div.element-icon.i4080,.pq div.element-icon.i4087,.pq div.element-icon.lig{background-image:url(/assets/images/p5/bless.png)}.pq div.element-icon.i488,.pq div.element-icon.i495,.pq div.element-icon.i4072,.pq div.element-icon.i4079,.pq div.element-icon.dar{background-image:url(/assets/images/p5/curse.png)}.pq div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.pq div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.pq div.element-icon.i504,.pq div.element-icon.i511,.pq div.element-icon.i4088,.pq div.element-icon.i4095,.pq div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.pq div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.pq div.element-icon.nav{background-image:url(/assets/images/p5/trait.png)}.pq div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.pq th.title,.pq th.nav.active,.pq th.nav.active a{color:#000;background-color:#aa1ca9}.pq2 div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.pq2 div.element-icon.i2055,.pq2 div.element-icon.phy{background-image:url(/assets/images/p5/phys.png)}.pq2 div.element-icon.i3583,.pq2 div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.pq2 div.element-icon.i3071,.pq2 div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.pq2 div.element-icon.i3967,.pq2 div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.pq2 div.element-icon.i3839,.pq2 div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.pq2 div.element-icon.i4063,.pq2 div.element-icon.psy{background-image:url(/assets/images/p5/psy.png)}.pq2 div.element-icon.i4031,.pq2 div.element-icon.nuk{background-image:url(/assets/images/p5/nuke.png)}.pq2 div.element-icon.i4087,.pq2 div.element-icon.ble{background-image:url(/assets/images/p5/bless.png)}.pq2 div.element-icon.i4079,.pq2 div.element-icon.cur{background-image:url(/assets/images/p5/curse.png)}.pq2 div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.pq2 div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.pq2 div.element-icon.i4095,.pq2 div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.pq2 div.element-icon.i2047,.pq2 div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.pq2 div.element-icon.nav{background-image:url(/assets/images/p5/trait.png)}.pq2 div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.pq2 th.title,.pq2 th.nav.active,.pq2 th.nav.active a{color:#fff;background-color:#ff4800}.p5t div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p5t div.element-icon.phy{background-image:url(/assets/images/p5/phys.png)}.p5t div.element-icon.gun{background-image:url(/assets/images/p5/gun.png)}.p5t div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p5t div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p5t div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p5t div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p5t div.element-icon.psy{background-image:url(/assets/images/p5/psy.png)}.p5t div.element-icon.nuk{background-image:url(/assets/images/p5/nuke.png)}.p5t div.element-icon.ble{background-image:url(/assets/images/p5/bless.png)}.p5t div.element-icon.cur{background-image:url(/assets/images/p5/curse.png)}.p5t div.element-icon.i1023,.p5t div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p5t div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p5t div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p5t div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.p5t th.title,.p5t th.nav.active,.p5t th.nav.active a{color:#fff;background-color:#f41000}.p3r div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p3r div.element-icon.i3583,.p3r div.element-icon.i3585,.p3r div.element-icon.sla{background-image:url(/assets/images/p5/sword.png)}.p3r div.element-icon.i2047,.p3r div.element-icon.i3615,.p3r div.element-icon.str{background-image:url(/assets/images/p5/phys.png)}.p3r div.element-icon.i3071,.p3r div.element-icon.i4065,.p3r div.element-icon.pie{background-image:url(/assets/images/p5/gun.png)}.p3r div.element-icon.i3967,.p3r div.element-icon.i3843,.p3r div.element-icon.i3955,.p3r div.element-icon.i3949,.p3r div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p3r div.element-icon.i3839,.p3r div.element-icon.i3715,.p3r div.element-icon.i3827,.p3r div.element-icon.i3821,.p3r div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p3r div.element-icon.i4063,.p3r div.element-icon.i3651,.p3r div.element-icon.i4051,.p3r div.element-icon.i4045,.p3r div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p3r div.element-icon.i4031,.p3r div.element-icon.i3619,.p3r div.element-icon.i4019,.p3r div.element-icon.i4013,.p3r div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p3r div.element-icon.i4083,.p3r div.element-icon.i3603,.p3r div.element-icon.lig{background-image:url(/assets/images/p5/bless.png)}.p3r div.element-icon.i4077,.p3r div.element-icon.i3597,.p3r div.element-icon.dar{background-image:url(/assets/images/p5/curse.png)}.p3r div.element-icon.i493,.p3r div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.p3r div.element-icon.i499,.p3r div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p3r div.element-icon.i4095,.p3r div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p3r div.element-icon.i511,.p3r div.element-icon.i4088,.p3r div.element-icon.spe{background-image:url(/assets/images/p5/trait.png)}.p3r div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p3r div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.p3r th.title,.p3r th.nav.active,.p3r th.nav.active a{color:#000;background-color:#4372aa}\n"],encapsulation:2,changeDetection:0})}}return s})();var _=a(9404),U=a(345),A=a(9629);let B=(()=>{class s extends _.M{constructor(n,t,i,l){super(n,i,l),this.showAllies=!t.snapshot.data.showShadows,this.showEnemies=!this.showAllies,this.compConfig=l.compConfig,this.defaultSortFun=(g,b)=>200*(this.compConfig.raceOrder[g.race]-this.compConfig.raceOrder[b.race])+b.lvl-g.lvl,this.appName=(0,P.oO)($.vC.AppPersonas,this.compConfig.lang)+l.appName,this.statHeaders=this.compConfig.baseStats,this.resistHeaders=this.compConfig.hasDemonResists?this.compConfig.resistElems:[],this.inheritOrder=this.compConfig.elemOrder,this.showEnemies&&(this.appName=(0,P.oO)($.vC.AppShadows,this.compConfig.lang)+l.appName,this.statHeaders=this.compConfig.enemyStats,this.resistHeaders=this.compConfig.resistElems,this.inheritOrder=null)}static{this.\u0275fac=function(t){return new(t||s)(e.rXU(U.hE),e.rXU(j.nX),e.rXU(e.gRc),e.rXU(R.i))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-demon-list-container"]],features:[e.Vt3],decls:2,vars:10,consts:[[3,"lang","isEnemy","hasCurrLvl","raceOrder","statHeaders","resistHeaders","inheritOrder","rowData"]],template:function(t,i){1&t&&(e.nrm(0,"app-smt-demon-list",0),e.nI1(1,"async")),2&t&&e.Y8G("lang",i.compConfig.lang)("isEnemy",i.showEnemies)("hasCurrLvl",!i.showEnemies&&i.compConfig.hasTripleFusion)("raceOrder",i.compConfig.raceOrder)("statHeaders",i.statHeaders)("resistHeaders",i.resistHeaders)("inheritOrder",i.inheritOrder)("rowData",e.bMT(1,8,i.demons))},dependencies:[A.F,D.Jj],encapsulation:2,changeDetection:0})}}return s})();var L=a(9454),N=a(2940);let J=(()=>{class s extends L.E{constructor(n,t,i){super(n,t,i),this.compConfig=i.compConfig,this.appName=(0,P.oO)($.vf.AppTitle,this.compConfig.lang)+i.appName,this.transferTitle=this.compConfig.hasSkillCards?"Skill Card":"",this.defaultSortFun=(l,g)=>1e4*(this.compConfig.elemOrder[l.element]-this.compConfig.elemOrder[g.element])+l.rank-g.rank}static{this.\u0275fac=function(t){return new(t||s)(e.rXU(U.hE),e.rXU(e.gRc),e.rXU(R.i))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-skill-list-container"]],features:[e.Vt3],decls:2,vars:9,consts:[[3,"lang","elemOrder","hasRank","hasTarget","isPersona","transferTitle","rowData"]],template:function(t,i){1&t&&(e.nrm(0,"app-smt-skill-list",0),e.nI1(1,"async")),2&t&&e.Y8G("lang",i.compConfig.lang)("elemOrder",i.compConfig.elemOrder)("hasRank",i.compConfig.hasSkillRanks)("hasTarget",!0)("isPersona",!0)("transferTitle",i.transferTitle)("rowData",e.bMT(1,7,i.skills))},dependencies:[N.p,D.Jj],encapsulation:2,changeDetection:0})}}return s})();var x=a(5692),K=a(3679),z=a(2223),c=a(302),r=a(9436),v=a(6122),h=a(8696);let f=(()=>{class s{constructor(){this.lang="en"}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-enemy-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig",lang:"lang"},decls:19,vars:14,consts:[[3,"title","statHeaders","stats"],[1,"entry-table"],["colspan","2",1,"title"],[3,"resistHeaders","resists","ailmentHeaders","ailments"],[3,"hasTarget","hasLvl","elemOrder","compendium","skillLevels"]],template:function(t,i){1&t&&(e.nrm(0,"app-demon-stats",0),e.j41(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),e.EFF(5,"Appearances"),e.k0s()(),e.j41(6,"tr")(7,"th"),e.EFF(8,"Areas"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Drops"),e.k0s()()(),e.j41(11,"tbody")(12,"tr")(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s()()()(),e.nrm(17,"app-demon-resists",3)(18,"app-demon-skills",4)),2&t&&(e.Y8G("title","Lvl "+i.demon.lvl+" "+i.demon.race+" "+i.demon.name)("statHeaders",i.compConfig.enemyStats)("stats",i.demon.stats),e.R7$(14),e.JRh(i.demon.area),e.R7$(2),e.JRh(i.demon.drop),e.R7$(1),e.Y8G("resistHeaders",i.compConfig.resistElems)("resists",i.demon.resists)("ailmentHeaders",i.compConfig.ailmentElems)("ailments",i.demon.ailments),e.R7$(1),e.Y8G("hasTarget",!0)("hasLvl",!1)("elemOrder",i.compConfig.elemOrder)("compendium",i.compendium)("skillLevels",i.demon.skills))},dependencies:[K.C,z.w,c.F],encapsulation:2,changeDetection:0})}}return s})();function E(s,d){if(1&s&&e.nrm(0,"app-demon-resists",7),2&s){const n=e.XpG(2);e.Y8G("lang",n.lang)("resistHeaders",n.compConfig.resistElems)("resists",n.demon.resists)}}function C(s,d){if(1&s&&(e.qex(0),e.nrm(1,"app-demon-stats",2),e.DNE(2,E,1,3,"app-demon-resists",3),e.nrm(3,"app-demon-inherits",4)(4,"app-demon-skills",5)(5,"app-smt-fusions",6),e.bVm()),2&s){const n=e.XpG();e.R7$(1),e.Y8G("lang",n.lang)("title","Lvl "+n.demon.lvl+" "+n.demon.race+" "+n.demon.name)("price",n.demon.price)("statHeaders",n.compConfig.baseStats)("stats",n.demon.stats)("inherits",n.demon.inherits),e.R7$(1),e.Y8G("ngIf",n.compConfig.hasDemonResists),e.R7$(1),e.Y8G("hasChance",!n.compConfig.hasManualInheritance)("inheritHeaders",n.compConfig.inheritElems)("inherits",n.demon.affinities),e.R7$(1),e.Y8G("lang",n.lang)("hasRank",n.compConfig.hasSkillRanks)("hasTarget",!0)("elemOrder",n.compConfig.elemOrder)("compendium",n.compendium)("skillLevels",n.demon.skills),e.R7$(1),e.Y8G("lang",n.lang)("hasTripleFusion",n.compConfig.hasTripleFusion)("excludedDlc","excluded"===n.demon.fusion)}}function O(s,d){if(1&s&&e.nrm(0,"app-demon-missing",8),2&s){const n=e.XpG();e.Y8G("name",n.name)}}function m(s,d){if(1&s&&e.nrm(0,"app-demon-entry",1),2&s){const n=e.XpG();e.Y8G("lang",n.compConfig.lang)("name",n.name)("demon",n.demon)("compConfig",n.compConfig)("compendium",n.compendium)}}function k(s,d){if(1&s&&e.nrm(0,"app-enemy-entry",1),2&s){const n=e.XpG();e.Y8G("lang",n.compConfig.lang)("name",n.name)("demon",n.demon)("compConfig",n.compConfig)("compendium",n.compendium)}}let T=(()=>{class s{constructor(){this.lang="en"}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig",lang:"lang"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"lang","title","price","statHeaders","stats","inherits"],[3,"lang","resistHeaders","resists",4,"ngIf"],[3,"hasChance","inheritHeaders","inherits"],[3,"lang","hasRank","hasTarget","elemOrder","compendium","skillLevels"],[3,"lang","hasTripleFusion","excludedDlc"],[3,"lang","resistHeaders","resists"],[3,"name"]],template:function(t,i){1&t&&(e.DNE(0,C,6,19,"ng-container",0),e.DNE(1,O,1,1,"app-demon-missing",1)),2&t&&(e.Y8G("ngIf",i.demon),e.R7$(1),e.Y8G("ngIf",!i.demon))},dependencies:[D.bT,x.X,K.C,z.w,c.F,r.d,v.L],encapsulation:2,changeDetection:0})}}return s})(),Y=(()=>{class s{constructor(n,t,i,l){this.route=n,this.title=t,this.currentDemonService=i,this.fusionDataService=l,this.subscriptions=[],this.appName="Test App",this.appName=l.appName,this.compConfig=l.compConfig}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const n of this.subscriptions)n.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(n=>{this.compendium=n,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(n=>{this.name=n,this.getDemonEntry()})),this.route.params.subscribe(n=>{this.currentDemonService.nextCurrentDemon(n.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(`${this.name} - ${this.appName}`),this.demon=this.compendium.getDemon(this.name))}static{this.\u0275fac=function(t){return new(t||s)(e.rXU(j.nX),e.rXU(U.hE),e.rXU(h.i),e.rXU(R.i))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-demon-entry-container"]],decls:2,vars:2,consts:[[3,"lang","name","demon","compConfig","compendium",4,"ngIf"],[3,"lang","name","demon","compConfig","compendium"]],template:function(t,i){1&t&&(e.DNE(0,m,1,5,"app-demon-entry",0),e.DNE(1,k,1,5,"app-enemy-entry",0)),2&t&&(e.Y8G("ngIf",!i.demon||!i.demon.isEnemy),e.R7$(1),e.Y8G("ngIf",i.demon&&i.demon.isEnemy))},dependencies:[D.bT,T,f],encapsulation:2,changeDetection:0})}}return s})();var I=a(9023);let H=(()=>{class s{constructor(n){this.fusionDataService=n,this.subscriptions=[],this.mitaTable=[]}ngOnInit(){const n=this.fusionDataService.compConfig;this.hasTripleFusion=n.hasTripleFusion,this.hasMitamaFusion=n.elementTable.elems.length>0,this.subscriptions.push(this.fusionDataService.squareChart.subscribe(t=>{this.normChart=t.normalChart,this.tripChart=t.tripleChart,this.updateMitamas()})),this.hasMitamaFusion&&this.subscriptions.push(this.fusionDataService.compendium.subscribe(t=>{this.compendium=t,this.updateMitamas()}))}ngOnDestroy(){for(const n of this.subscriptions)n.unsubscribe()}updateMitamas(){if(!this.hasMitamaFusion||!this.compendium||!this.normChart)return;const n=this.normChart.elementDemons.map(i=>this.compendium.getDemon(i).race),t=[];for(let i=0;i<n.length;i++){const l=n[i];t.push(n.slice(0,i+1).map(g=>this.normChart.getRaceFusion(l,g)))}this.mitaTable=t}static{this.\u0275fac=function(t){return new(t||s)(e.rXU(R.i))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-fusion-chart-container"]],decls:1,vars:6,consts:[[3,"normChart","tripChart","normTitle","tripTitle","mitaTable","isPersona"]],template:function(t,i){1&t&&e.nrm(0,"app-fusion-chart",0),2&t&&e.Y8G("normChart",i.normChart)("tripChart",i.hasTripleFusion?i.tripChart:null)("normTitle","Normal Fusions")("tripTitle",i.hasTripleFusion?"Triple Fusions":null)("mitaTable",i.hasMitamaFusion?i.mitaTable:null)("isPersona",!0)},dependencies:[I.q],encapsulation:2,changeDetection:0})}}return s})();const p=Array(24).fill(0);function u(s,d){return s.split("").map(n=>n.charCodeAt(0)).concat(Array(d-s.length).fill(0))}p[0]=4,p[2]=50,p[4]=50,p[6]=50,p[7]=50,p[8]=50,p[12]=50,p[16]=50,p[20]=50;const o=[].concat(u("aqiu384.github.io",21),u("https://youtu.be/b1KfNEPKncQ",33)),F="kitaro",w="bancho",Q=[].concat(u(F,17),u(w,17)),te=[].concat(u(F,29),u(w,29)),ie=[].concat(u(F,17),u(w,17),u("renren",17),u("hamuko",17)),oe=[].concat([34,50],Array(36).fill(31),[31,0,31,0,0,0,1,128]),ae=[].concat([34,50],Array(54).fill(31),[31,0,1,0]);var M=a(4341);let pe=(()=>{class s{constructor(){this.byteArray=[],this.errorLvl="L",this.typeNum=10,this.qrFactory=qrcode(this.typeNum,this.errorLvl),this.qrImg=null}ngOnChanges(){this.createQrcode()}createQrcode(){this.qrFactory=qrcode(this.typeNum,this.errorLvl),this.qrFactory.addData(this.byteArray.map(n=>String.fromCharCode(n)).join("")),this.qrFactory.make(),this.qrImg=this.qrFactory.createImgTag(5)}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-qrcode"]],inputs:{byteArray:"byteArray",errorLvl:"errorLvl",typeNum:"typeNum"},features:[e.OA$],decls:1,vars:1,consts:[[3,"innerHtml"]],template:function(t,i){1&t&&e.nrm(0,"div",0),2&t&&e.Y8G("innerHtml",i.qrImg,e.npT)},encapsulation:2,changeDetection:0})}}return s})();var ne=a(4207);function me(s,d){if(1&s&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&s){const n=d.index;e.Y8G("value",n+1),e.R7$(1),e.JRh(n+1)}}function ue(s,d){if(1&s&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&s){const n=d.index;e.Y8G("value",n+1),e.R7$(1),e.JRh(n+1)}}function de(s,d){if(1&s&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&s){const n=d.index;e.Y8G("value",n+1),e.R7$(1),e.JRh(n+1)}}function ge(s,d){if(1&s&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&s){const n=d.$implicit;e.Y8G("value",n),e.R7$(1),e.JRh(n)}}function he(s,d){if(1&s&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&s){const n=d.$implicit;e.Y8G("value",n.name),e.R7$(1),e.JRh(n.name)}}function fe(s,d){if(1&s&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&s){const n=d.$implicit;e.Y8G("value",n),e.R7$(1),e.JRh(n)}}function ve(s,d){if(1&s&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&s){const n=d.$implicit;e.Y8G("value",n.name),e.R7$(1),e.JRh(n.name)}}function Ce(s,d){if(1&s&&(e.qex(0),e.j41(1,"td"),e.EFF(2),e.nI1(3,"skillCostToString"),e.k0s(),e.j41(4,"td"),e.EFF(5),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.bVm()),2&s){const n=d.$implicit;e.R7$(1),e.xc7("color",n.cost?null:"transparent"),e.R7$(1),e.JRh(e.bMT(3,5,n.cost)),e.R7$(3),e.JRh(n.effect),e.R7$(2),e.JRh(n.target)}}function be(s,d){1&s&&(e.j41(0,"td"),e.EFF(1,"-"),e.k0s(),e.j41(2,"td"),e.EFF(3,"-"),e.k0s(),e.j41(4,"td"),e.EFF(5,"-"),e.k0s())}const ke=function(s){return{unique:s}};function Fe(s,d){if(1&s){const n=e.RV6();e.qex(0,18),e.j41(1,"tr",19)(2,"td")(3,"select",20),e.bIt("change",function(){const l=e.eBV(n).$implicit,g=e.XpG();return e.Njj(l.controls.name.setValue(g.skills[l.controls.elem.value][0].name))}),e.j41(4,"option",21),e.EFF(5,"-"),e.k0s(),e.DNE(6,fe,2,2,"option",9),e.k0s()(),e.j41(7,"td")(8,"select",22),e.DNE(9,ve,2,2,"option",9),e.k0s()(),e.DNE(10,Ce,8,7,"ng-container",23),e.DNE(11,be,6,0,"ng-template",null,24,e.C5r),e.k0s(),e.bVm()}if(2&s){const n=d.$implicit,t=d.index,i=e.sdS(12),l=e.XpG();e.Y8G("formGroupName",t),e.R7$(1),e.Y8G("ngClass",e.eq3(6,ke,(l.compendium.getSkill(n.controls.name.value)||l.blankSkill).rank>90)),e.R7$(5),e.Y8G("ngForOf",l.elems),e.R7$(3),e.Y8G("ngForOf",l.skills[n.controls.elem.value]),e.R7$(1),e.Y8G("ngIf",l.compendium.getSkill(n.controls.name.value))("ngIfElse",i)}}let ye=(()=>{class s{constructor(n){this.fb=n,this.defaultRace="Fool",this.defaultDemon="Slime",this.demons={},this.skills={},this.dcodes={},this.scodes={},this.range99=Array(99),this.range299=Array(299),this.price=0,this.blankSkill={code:0,cost:0,level:0,rank:0,target:"Self",name:"-",element:"-",inherit:"-",effect:"-",learnedBy:[],transfer:[]},this.createForm()}ngOnChanges(){this.initDropdowns()}createForm(){const n=[];for(let t=0;t<6;t++)n.push(this.fb.group({elem:"-",name:"-"}));this.form=this.fb.group({language:"eng",lvl:1,hp:1,mp:1,race:this.defaultRace,demon:this.defaultDemon,skills:this.fb.array(n)}),this.form.valueChanges.subscribe(t=>{if(this.form.valid){const i=this.compendium.getDemon(t.demon),l=t.skills.map(y=>this.compendium.getSkill(y.name)||this.blankSkill),g={language:t.language,demonCode:i.code,lvl:parseInt(t.lvl,10),exp:-1,hp:parseInt(t.hp,10),mp:parseInt(t.mp,10),skillCodes:l.map(y=>y.code)},b=g.skillCodes.reduce((y,q)=>0!==q?y+1:y,0);this.price=10*Math.floor((800+120*g.lvl)*(1+.25*b)/10),this.passBytes=function re(s,d){return d&&d.includes("2")?function ce(s){const d=p.slice(),n=Array(25).fill(0),t=s.lvl,i=Math.floor((((-.0479755766*t+9.28700353)*t+71.9694228)*t-81.1026214)*t+.120783542),l=s.exp<0?i:s.exp;"jpn"!==s.language&&(d[6]=256-d[6]),n[0]=s.demonCode%256,n[1]=2*s.lvl+Math.floor(s.demonCode/256),n[2]=l%256,n[3]=Math.floor(l/256)%256,n[4]=Math.floor(l/65536);for(let g=0;g<6;g++)n[6+2*g]=s.skillCodes[g]%256,n[6+2*g+1]=Math.floor(s.skillCodes[g]/256);return n[22]=10*s.hp%256,n[23]=10*s.mp%16*16+Math.floor(s.hp/25.6),n[24]=Math.floor(s.mp/1.6),[].concat(d,o,ie,ae,n,Array(21).fill(0))}(s):function le(s){const d="jpn"===s.language?Q:te,n=Array(30).fill(0),t=s.lvl,i=Math.floor((((-.07600161*t+14.0603287)*t-.02256972)*t+.59031556)*t-1.87981906),l=s.exp<0?i:s.exp;n[0]=s.demonCode,n[2]=s.lvl,n[6]=l%256,n[7]=Math.floor(l/256)%256,n[8]=Math.floor(l/65536);for(let g=0;g<6;g++)n[10+2*g]=s.skillCodes[g]%256,n[10+2*g+1]=Math.floor(s.skillCodes[g]/256);return n[26]=10*s.hp%256,n[27]=Math.floor(s.hp/25.6),n[28]=10*s.mp%256,n[29]=Math.floor(s.mp/25.6),[].concat(p,o,d,oe,n,Array(40).fill(0))}(s)}(g,this.compConfig.appTitle)}})}initDropdowns(){if(this.demons={},this.skills={"-":[this.blankSkill]},this.dcodes={},this.scodes={0:this.blankSkill},this.compConfig&&this.compendium){for(const n of this.compendium.allDemons.filter(t=>t.code))this.demons[n.race]||(this.demons[n.race]=[]),this.demons[n.race].push(n),this.dcodes[n.code]=n;for(const n of this.compendium.allSkills.filter(t=>t.code))this.skills[n.element]||(this.skills[n.element]=[]),this.skills[n.element].push(n),this.scodes[n.code]=n;for(const n of Object.values(this.demons))n.sort((t,i)=>i.lvl-t.lvl);for(const n of Object.values(this.skills))n.sort((t,i)=>t.rank-i.rank);this.races=this.compConfig.races.filter(n=>this.demons[n]),this.elems=this.compConfig.skillElems.filter(n=>this.skills[n]),this.setDefaultValues(this.defaultDemon)}}changeRace(n){const t=this.demons[n][0];this.form.controls.demon.setValue(t.name),this.setDefaultValues(t.name)}setDefaultValues(n){const t=Array(6).fill(this.blankSkill),i=this.compendium.getDemon(n);let l=0;for(const[g,b]of Object.entries(i.skills))0===b&&(t[l++]=this.compendium.getSkill(g));this.form.patchValue({lvl:Math.floor(i.lvl),hp:i.stats[0],mp:i.stats[1],race:i.race,demon:i.name,skills:t.map(g=>({elem:g.element,name:g.name}))})}static{this.\u0275fac=function(t){return new(t||s)(e.rXU(M.ok))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-password-generator"]],inputs:{defaultRace:"defaultRace",defaultDemon:"defaultDemon",compendium:"compendium",compConfig:"compConfig"},features:[e.OA$],decls:69,vars:9,consts:[[3,"formGroup"],[1,"entry-table"],["colspan","2",1,"title"],[3,"byteArray"],["colspan","7",1,"title"],["formControlName","language"],["value","jpn"],["value","eng"],["formControlName","lvl"],[3,"value",4,"ngFor","ngForOf"],["formControlName","hp"],["formControlName","mp"],["formControlName","race",3,"change"],["formControlName","demon",3,"change"],["formArrayName","skills",1,"list-table"],["colspan","5",1,"title"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"value"],[3,"formGroupName"],[3,"ngClass"],["formControlName","elem",3,"change"],["value","-"],["formControlName","name"],[4,"ngIf","ngIfElse"],["noEntry",""]],template:function(t,i){1&t&&(e.j41(0,"form",0)(1,"h2"),e.EFF(2,"QR Code Generator"),e.k0s(),e.j41(3,"table",1)(4,"tr")(5,"th",2),e.EFF(6,"QR Code"),e.k0s()(),e.j41(7,"tr")(8,"td"),e.nrm(9,"app-qrcode",3),e.k0s()()(),e.j41(10,"table",1)(11,"tr")(12,"th",4),e.EFF(13,"Persona Entry"),e.k0s()(),e.j41(14,"tr")(15,"th"),e.EFF(16,"Price"),e.k0s(),e.j41(17,"th"),e.EFF(18,"Language"),e.k0s(),e.j41(19,"th"),e.EFF(20,"Level"),e.k0s(),e.j41(21,"th"),e.EFF(22,"HP"),e.k0s(),e.j41(23,"th"),e.EFF(24,"MP"),e.k0s(),e.j41(25,"th"),e.EFF(26,"Race"),e.k0s(),e.j41(27,"th"),e.EFF(28,"Demon"),e.k0s()(),e.j41(29,"tr")(30,"td"),e.EFF(31),e.k0s(),e.j41(32,"td")(33,"select",5)(34,"option",6),e.EFF(35,"Japanese"),e.k0s(),e.j41(36,"option",7),e.EFF(37,"English"),e.k0s()()(),e.j41(38,"td")(39,"select",8),e.DNE(40,me,2,2,"option",9),e.k0s()(),e.j41(41,"td")(42,"select",10),e.DNE(43,ue,2,2,"option",9),e.k0s()(),e.j41(44,"td")(45,"select",11),e.DNE(46,de,2,2,"option",9),e.k0s()(),e.j41(47,"td")(48,"select",12),e.bIt("change",function(){return i.changeRace(i.form.controls.race.value)}),e.DNE(49,ge,2,2,"option",9),e.k0s()(),e.j41(50,"td")(51,"select",13),e.bIt("change",function(){return i.setDefaultValues(i.form.controls.demon.value)}),e.DNE(52,he,2,2,"option",9),e.k0s()()()(),e.j41(53,"table",14)(54,"tr")(55,"th",15),e.EFF(56,"Learned Skills"),e.k0s()(),e.j41(57,"tr")(58,"th"),e.EFF(59,"Element"),e.k0s(),e.j41(60,"th"),e.EFF(61,"Name"),e.k0s(),e.j41(62,"th"),e.EFF(63,"Cost"),e.k0s(),e.j41(64,"th"),e.EFF(65,"Effect"),e.k0s(),e.j41(66,"th"),e.EFF(67,"Target"),e.k0s()(),e.DNE(68,Fe,13,8,"ng-container",16),e.k0s()()),2&t&&(e.Y8G("formGroup",i.form),e.R7$(9),e.Y8G("byteArray",i.passBytes),e.R7$(22),e.JRh(i.price),e.R7$(9),e.Y8G("ngForOf",i.range99),e.R7$(3),e.Y8G("ngForOf",i.range299),e.R7$(3),e.Y8G("ngForOf",i.range99),e.R7$(3),e.Y8G("ngForOf",i.races),e.R7$(3),e.Y8G("ngForOf",i.demons[i.form.controls.race.value]),e.R7$(16),e.Y8G("ngForOf",i.form.controls.skills.controls))},dependencies:[D.YU,D.Sq,D.bT,M.qT,M.xH,M.y7,M.wz,M.BC,M.cb,M.j4,M.JD,M.$R,M.v8,pe,ne.X2],styles:["td[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}input[_ngcontent-%COMP%]{width:95%;border-width:3px}input.ng-valid[_ngcontent-%COMP%]{border-color:#0f0}input.ng-invalid[_ngcontent-%COMP%]{border-color:red}"],changeDetection:0})}}return s})(),De=(()=>{class s{constructor(n,t){this.fusionDataService=n,this.title=t,this.subscriptions=[],this.compConfig=this.fusionDataService.compConfig}ngOnInit(){this.setTitle(),this.subscribeAll()}ngOnDestroy(){this.unsubscribeAll()}setTitle(){this.title.setTitle(`QR Code Generator - ${this.fusionDataService.appName}`)}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(n=>{this.compendium=n}))}unsubscribeAll(){for(const n of this.subscriptions)n.unsubscribe()}static{this.\u0275fac=function(t){return new(t||s)(e.rXU(R.i),e.rXU(U.hE))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-password-generator-container"]],decls:1,vars:2,consts:[[3,"compendium","compConfig"]],template:function(t,i){1&t&&e.nrm(0,"app-password-generator",0),2&t&&e.Y8G("compendium",i.compendium)("compConfig",i.compConfig)},dependencies:[ye],encapsulation:2,changeDetection:0})}}return s})();var Ee=a(6567),Te=a(860);let Re=(()=>{class s extends Ee.I{constructor(n,t){super(n,t),this.changeDetector=n,this.fusionDataService=t,this.appTitle=t.appName,this.lang=t.compConfig.lang}static{this.\u0275fac=function(t){return new(t||s)(e.rXU(e.gRc),e.rXU(R.i))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-fusion-settings-container"]],features:[e.Vt3],decls:1,vars:3,consts:[[3,"lang","appTitle","fusionSettings","toggledName"]],template:function(t,i){1&t&&(e.j41(0,"app-fusion-settings",0),e.bIt("toggledName",function(g){return i.toggleName(g)}),e.k0s()),2&t&&e.Y8G("lang",i.lang)("appTitle",i.appTitle)("fusionSettings",i.fusionSettings)},dependencies:[Te.B],encapsulation:2,changeDetection:0})}}return s})();var Se=a(1289);let Oe=(()=>{class s{constructor(n,t){this.fusionDataService=n,this.title=t,this.subscriptions=[],this.lang="en";const i=this.fusionDataService.compConfig,l=i.translations.en.indexOf(i.lang);this.maxSkills=i.maxSkillSlots,this.lang=i.lang,this.recipeConfig={fissionCalculator:this.fusionDataService.fissionCalculator,fusionCalculator:this.fusionDataService.fusionCalculator,races:i.races,skillElems:i.skillElems,inheritElems:i.inheritElems,displayElems:i.skillElems.reduce((b,y)=>(b[y]=(b=>-1===l?b:(i.translations[b]||[])[l]||b)(y),b),{}),restrictInherits:!0,triExclusiveRaces:i.hasTripleFusion?["Fool","Tower","Moon","Sun","Judgement"]:[],triFissionCalculator:this.fusionDataService.triFissionCalculator,triFusionCalculator:this.fusionDataService.triFusionCalculator,defaultDemon:i.defaultDemon}}ngOnInit(){this.setTitle(),this.subscribeAll()}ngOnDestroy(){this.unsubscribeAll()}setTitle(){this.title.setTitle((0,P.oO)($.hV.AppTitle,this.lang)+this.fusionDataService.appName)}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(n=>{this.compendium=n})),this.subscriptions.push(this.fusionDataService.squareChart.subscribe(n=>{this.squareChart=n}))}unsubscribeAll(){for(const n of this.subscriptions)n.unsubscribe()}static{this.\u0275fac=function(t){return new(t||s)(e.rXU(R.i),e.rXU(U.hE))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-recipe-generator-container"]],decls:1,vars:5,consts:[[3,"lang","maxSkills","compendium","squareChart","recipeConfig"]],template:function(t,i){1&t&&e.nrm(0,"app-recipe-generator",0),2&t&&e.Y8G("lang",i.lang)("maxSkills",i.maxSkills)("compendium",i.compendium)("squareChart",i.squareChart)("recipeConfig",i.recipeConfig)},dependencies:[Se.h],encapsulation:2,changeDetection:0})}}return s})();var je=a(2649),Pe=a(3515),Ge=a(1538),we=a(1540);function $e(s,d){if(1&s&&(e.j41(0,"table",3)(1,"thead")(2,"tr")(3,"th",4),e.EFF(4),e.nI1(5,"translateComp"),e.k0s()()(),e.j41(6,"tbody")(7,"tr")(8,"td"),e.EFF(9),e.k0s()()()()),2&s){const n=e.XpG();e.R7$(4),e.JRh(e.i5U(5,2,n.msgs.SpecialFusionCondition,n.lang)),e.R7$(5),e.JRh(n.fusionPrereq)}}function Ne(s,d){if(1&s&&(e.nrm(0,"app-fusion-entry-table",5),e.nI1(1,"translateComp")),2&s){const n=e.XpG();e.Y8G("lang",n.lang)("title",e.i5U(1,5,n.msgs.SpecialFusionIngredients,n.lang)+n.currentDemon)("baseUrl",n.hasFissionFromDemons?"../../demons":"../..")("rowData",n.fusionEntries)("isFusion",!0)}}function Ie(s,d){if(1&s&&(e.nrm(0,"app-fusion-pair-table",6),e.nI1(1,"translateComp"),e.nI1(2,"translateComp"),e.nI1(3,"translateComp")),2&s){const n=e.XpG();e.Y8G("lang",n.lang)("title",e.i5U(1,7,n.msgs.Title,n.lang)+n.currentDemon)("leftHeader",e.i5U(2,10,n.msgs.LeftHeader,n.lang))("rightHeader",e.i5U(3,13,n.msgs.RightHeader,n.lang))("leftBaseUrl",n.hasFissionFromDemons?"../../demons":"../..")("rightBaseUrl",n.hasFissionFromDemons?"../../demons":"../..")("rowData",n.fusionPairs)}}let Me=(()=>{class s extends je.J{getFusionPairs(){const n=this.calculator.getFusions(this.currentDemon,this.compendium,this.fusionChart).map(this.toFusionPair(this.currentDemon));if(this.fusionChart.elementDemons.length>0)for(const t of(0,Pe.iB)(this.currentDemon,this.compendium,this.fusionChart)){const i=(Math.floor(t.lvl1)<<10)+t.lvl2;for(const l of t.names1){const{race:g,lvl:b}=this.compendium.getDemon(l);for(const y of t.names2){const{race:q,lvl:ee,price:Xe}=this.compendium.getDemon(y);n.push({price:t.price+Xe-b,race1:g,lvl1:i,name1:l,race2:q,lvl2:ee,name2:y})}}}return n}static{this.\u0275fac=function(){let n;return function(i){return(n||(n=e.xGo(s)))(i||s)}}()}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-p5-fission-table"]],features:[e.Vt3],decls:3,vars:3,consts:[["class","list-table",4,"ngIf"],[3,"lang","title","baseUrl","rowData","isFusion",4,"ngIf"],[3,"lang","title","leftHeader","rightHeader","leftBaseUrl","rightBaseUrl","rowData",4,"ngIf"],[1,"list-table"],[1,"title"],[3,"lang","title","baseUrl","rowData","isFusion"],[3,"lang","title","leftHeader","rightHeader","leftBaseUrl","rightBaseUrl","rowData"]],template:function(t,i){1&t&&(e.DNE(0,$e,10,5,"table",0),e.DNE(1,Ne,2,8,"app-fusion-entry-table",1),e.DNE(2,Ie,4,16,"app-fusion-pair-table",2)),2&t&&(e.Y8G("ngIf",i.fusionPrereq),e.R7$(1),e.Y8G("ngIf",i.fusionEntries.length),e.R7$(1),e.Y8G("ngIf",i.fusionPairs.length||!i.fusionEntries.length))},dependencies:[D.bT,Ge.a,we.cK,ne.uz],encapsulation:2,changeDetection:0})}}return s})();var qe=a(6947),se=a(4660);function Ue(s,d){if(1&s&&(e.j41(0,"tr")(1,"th"),e.EFF(2),e.k0s()()),2&s){const n=d.$implicit;e.R7$(2),e.JRh(n)}}let Ae=(()=>{class s{ngOnChanges(){if(this.compendium&&this.pairChart&&(this.trioChart||!this.trioCalculator)){const n=[];for(const t of this.compendium.allDemons.filter(i=>!i.isEnemy)){const i=this.compendium.getSpecialNameEntries(t.name);if(i.length>0){n.push(`${t.name} = ${i.join(" x ")}`);continue}const l=this.pairCalculator.getFusions(t.name,this.compendium,this.pairChart).map(b=>(0,se.on)(b,this.compendium));if(l.length>0&&(l.filter(b=>b.race1!==t.race).length>0||!this.trioCalculator||0===this.trioCalculator.getFusions(t.name,this.compendium,this.trioChart).length)){l.sort((y,q)=>y.price-q.price);const b=l.slice(0,3).map(y=>`${y.name1} x ${y.name2}`).join(", ");n.push(`${t.name} = ${b}`+(l.length>3?`, ${l.length-3} more...`:""))}else{if(this.trioCalculator){const b=this.trioCalculator.getFusions(t.name,this.compendium,this.trioChart).map(y=>(0,se.f7)(y,this.compendium)).filter(y=>y.d1.race!==t.race);if(b.length>0){b.sort((q,ee)=>q.price-ee.price);const y=b.slice(0,3).map(q=>`${q.d1.name} x ${q.d2.name} x ${q.d3.name}`).join(", ");n.push(`${t.name} = ${y}`+(b.length>3?`, ${b.length-3} more...`:""));continue}}n.push(t.prereq?`${t.name} = ${t.prereq}`:`${t.name} = No fusions found!`)}}this.fissionPreviews=n}}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-fission-preview-table"]],inputs:{pairCalculator:"pairCalculator",trioCalculator:"trioCalculator",pairChart:"pairChart",trioChart:"trioChart",compendium:"compendium"},features:[e.OA$],decls:6,vars:1,consts:[[1,"entry-table"],[1,"title"],[4,"ngFor","ngForOf"]],template:function(t,i){1&t&&(e.j41(0,"table",0)(1,"tbody")(2,"tr")(3,"th",1),e.EFF(4,"Fission Previews"),e.k0s()(),e.DNE(5,Ue,3,1,"tr",2),e.k0s()()),2&t&&(e.R7$(5),e.Y8G("ngForOf",i.fissionPreviews))},dependencies:[D.Sq],encapsulation:2,changeDetection:0})}}return s})(),Le=(()=>{class s{constructor(n){this.fusionDataService=n,this.subscriptions=[]}ngOnInit(){this.calculator=this.fusionDataService.fissionCalculator,this.subscriptions.push(this.fusionDataService.compendium.subscribe(n=>{this.compendium=n})),this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(n=>{this.fusionChart=n}))}ngOnDestroy(){for(const n of this.subscriptions)n.unsubscribe()}static{this.\u0275fac=function(t){return new(t||s)(e.rXU(qe.iJ))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-smt-fission-preview"]],decls:2,vars:3,consts:[[3,"pairCalculator","pairChart","compendium"]],template:function(t,i){1&t&&(e.j41(0,"app-fission-preview-table",0),e.nrm(1,"app-fission-preview-table"),e.k0s()),2&t&&e.Y8G("pairCalculator",i.calculator)("pairChart",i.fusionChart)("compendium",i.compendium)},dependencies:[Ae],encapsulation:2,changeDetection:0})}}return s})();var Ye=a(3452),_e=a(6188),Be=a(131);const He=[{path:"",redirectTo:"personas",pathMatch:"full"},{path:"",component:S,data:{fusionTool:"chart"},children:[{path:"chart",component:H}]},{path:"",component:S,children:[{path:"personas/:demonName",component:Y,children:[{path:"fissions/triple",component:_e.X},{path:"fusions/triple",component:Be.W},{path:"fissions",component:Me},{path:"fusions",component:Ye.y},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"shadows/:demonName",component:Y},{path:"personas",component:B},{path:"shadows",component:B,data:{showShadows:!0}},{path:"skills",component:J},{path:"qrcodes",component:De},{path:"recipes",component:Oe},{path:"settings",component:Re},{path:"previews",component:Le}]},{path:"**",redirectTo:"personas",pathMatch:"full"}];let Ve=(()=>{class s{static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[j.iI.forChild(He),j.iI]})}}return s})()},2721:(Z,V,a)=>{a.d(V,{i:()=>z});var j=a(4412);class P{constructor(r,v){this.compConfig=r,this.specialRecipes={},this.initImportedData(),this.updateDerivedData(v)}initImportedData(){const r={},v={},h={},f={},E={},C={},O={},m={},k=this.compConfig.hasDemonResists,T=this.compConfig.appCssClasses.includes("p5r"),Y="-".repeat(this.compConfig.resistElems.length),I="-".repeat(this.compConfig.ailmentElems.length);for(const[p,u]of Object.entries(this.compConfig.resistCodes))O[p]=(u/1e4|0)<<10,m[p]=u%1e4/2.5|0;const H=(p,u,o)=>(p||u).split("").map((F,w)=>O[F]+(o?.[w]/2.5|0||m[F]));for(const p of this.compConfig.demonData)for(const[u,o]of Object.entries(p)){const F=Object.values(o.skills).reduce((X,Q)=>0===Q?X+1:X,0),w=10*Math.floor((800+120*o.lvl)*(1+.25*F)/10),W=this.compConfig.inheritTypes[o.inherit||o.inherits];r[u]={name:u,race:o.race,lvl:o.lvl,currLvl:o.lvl,price:o.price||w,inherits:W.reduce((X,Q)=>2*X+(Q>0?1:0),0),affinities:W,stats:o.stats,resists:k?H(o.resists,Y,o.resmods):[],ailments:k?H(o.ailments,I,o.ailmods):[],skills:o.skills,drop:o.item||"",code:o.code||0,fusion:o.fusion||"normal",prereq:o.prereq||""},T&&(r[u].skills[o.trait||"Agi"]=0)}for(const p of this.compConfig.skillData)for(const[u,o]of Object.entries(p))h[u]={name:u,element:o.elem||o.element,cost:o.cost||0,rank:o.unique?99:o.rank||(1023&o.cost)/100||1,effect:o.effect,target:o.target||"Self",learnedBy:[],transfer:[],code:o.code||0,level:0},o.card&&(h[u].transfer=o.card.split(", ").map(F=>({demon:F,level:r[F]?0:-100})));for(const p of this.compConfig.enemyData)for(const[u,o]of Object.entries(p))if(v[u]={name:u,race:o.race,lvl:o.lvl,currLvl:o.lvl,price:0,inherits:0,stats:o.stats,resists:H(o.resists,Y,o.resmods),ailments:H(o.ailments,I,o.ailmods),skills:o.skills.reduce((F,w)=>(F[w]=0,F),{}),area:o.area,drop:o.drops?.join(", ")||"-",code:0,fusion:"normal",isEnemy:!0},v[u].drop){const F=v[u].drop.split(", "),w=F[F.length-1];h[w]&&h[w].transfer.unshift({demon:o.persona,level:5275})}for(const{conditions:p}of this.compConfig.demonUnlocks)for(const[u,o]of Object.entries(p))for(const F of u.split(","))r[F].prereq=o;for(const[p,u]of Object.entries(this.compConfig.specialRecipes)){const o=u;if(f[p]=o,r[p].fusion=o.length>0?"special":"accident",2===o.length)for(const F of o)C[F]||(C[F]=[]),C[F].push(p)}for(const p of this.compConfig.races)E[p]={};for(const p of Object.values(r).sort((u,o)=>u.lvl-o.lvl)){if(p.drop){const[u,o]=p.drop.split(", ");h[u]&&h[u].transfer.unshift({demon:p.name,level:0}),h[o]&&h[o].transfer.unshift({demon:p.name,level:3865})}"party"!==p.fusion&&(E[p.race][p.lvl]=p.name);for(const[u,o]of Object.entries(p.skills))h[u].learnedBy.push({demon:p.name,level:o})}this.demons=r,this.enemies=v,this.skills=h,this.specialRecipes=f,this.invertedDemons=E,this.invertedSpecials=C}updateDerivedData(r){const v=Object.assign({},this.demons),h=[],f={},E={};for(const m of Object.values(this.skills))m.learnedBy.length<1&&m.transfer.length<1?m.rank=99:h.push(m);for(const m of this.compConfig.races)f[m]=[],E[m]=[];for(const[m,k]of Object.entries(this.demons))"party"!==k.fusion&&(this.isElementDemon(m)||f[k.race].push(k.lvl),this.specialRecipes.hasOwnProperty(m)||E[k.race].push(k.lvl));for(const m of this.compConfig.races)f[m].sort((k,T)=>k-T),E[m].sort((k,T)=>k-T);for(const[m,k]of Object.entries(r))if(!k){const{race:T,lvl:Y}=this.demons[m];delete v[m],f[T]=f[T].filter(I=>I!==Y),E[T]=E[T].filter(I=>I!==Y)}const C=Object.keys(v).map(m=>v[m]),O=Object.keys(this.enemies).map(m=>this.enemies[m]);this._allDemons=O.concat(C),this._allSkills=h,this.allIngredients=f,this.allResults=E}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return Object.keys(this.specialRecipes).filter(r=>!this.isElementDemon(r)).map(r=>this.demons[r])}getDemon(r){return this.demons[r]||this.enemies[r]}getSkill(r){return this.skills[r]}getSkills(r){const v=this.compConfig.elemOrder,h=r.map(f=>this.skills[f]);return h.sort((f,E)=>1e4*(v[f.element]-v[E.element])+f.rank-E.rank),h}getIngredientDemonLvls(r){return this.allIngredients[r]||[]}getResultDemonLvls(r){return this.allResults[r]||[]}getSpecialNameEntries(r){return this.specialRecipes[r]||[]}getSpecialNamePairs(r){return[]}reverseLookupDemon(r,v){return this.invertedDemons[r][v]}reverseLookupSpecial(r){return this.invertedSpecials[r]||[]}isElementDemon(r){return this.specialRecipes.hasOwnProperty(r)&&0===this.specialRecipes[r].length}updateFusionSettings(r){this.updateDerivedData(r)}}var $=a(5990),e=a(6947),R=a(7605),D=a(9910),G=a(7101);function S(c,r,v){const h=[],{race:f,lvl:E}=r.getDemon(c);for(const C of v.elementDemons.filter(O=>O!==c)){const{race:O,lvl:m}=r.getDemon(C),k=v.getRaceFusions(f)[O],T=r.getResultDemonLvls(k),I=T.reduce((p,u)=>E+m>=2*u?p+1:p,0),H=r.reverseLookupDemon(k,I===T.length?T[T.length-1]:T[I]);h.push({name1:C,name2:H})}return h}var _=a(7178),U=a(3515),A=a(7396),B=a(609),L=a(1939),N=a(2755),x=a(2598),K=a(8935);let z=(()=>{class c extends B.d{constructor(v,h){const f=h.url.split("/"),E=Object.keys(v.configs)[0],C=v.configs[f[2]||f[1]]||v.configs[f[1]]||v.configs[E],O=C.translations.en.includes(f[1])?f[1]:"en",m="en"===O?C:function J(c,r){const v=c.translations.en.indexOf(r);if(-1===v)return c;const h=Object.entries(c.translations).reduce((C,[O,m])=>(C[O]=m[v],C),{}),f=C=>h[C]||C,E=c.races.map(f);return{appTitle:f(c.appTitle),translations:c.translations,lang:r,races:E,raceOrder:c.raceOrder,appCssClasses:c.appCssClasses,skillData:c.skillData.map(C=>(0,N.en)(C,h)),skillElems:c.skillElems,ailmentElems:c.ailmentElems,elemOrder:c.elemOrder,resistCodes:c.resistCodes,demonData:c.demonData.map(C=>(0,N.C_)(C,h)),baseStats:c.baseStats.map(f),resistElems:c.resistElems,inheritTypes:c.inheritTypes,inheritElems:c.inheritElems,demonUnlocks:(0,N.tQ)(c.demonUnlocks,h),enemyData:c.enemyData.map(C=>(0,N.C_)(C,h)),enemyStats:c.enemyStats.map(f),normalTable:(0,N.ji)(c.normalTable,h),elementTable:(0,N.ji)(c.elementTable,h),specialRecipes:(0,N.Fr)(c.specialRecipes,h),maxSkillSlots:c.maxSkillSlots,hasTripleFusion:c.hasTripleFusion,hasDemonResists:c.hasDemonResists,hasSkillRanks:c.hasSkillRanks,hasEnemies:c.hasEnemies,hasQrcodes:c.hasQrcodes,hasSkillCards:c.hasSkillCards,hasManualInheritance:c.hasManualInheritance,defaultDemon:f(c.defaultDemon),settingsKey:`${c.settingsKey}-${r}`,settingsVersion:c.settingsVersion}}(C,O),k=new $.D(m.normalTable,m.elementTable),T=new L.U(m.demonUnlocks,[]);super(new P(m,T.demonToggles),k,T,m.settingsKey,m.settingsVersion),this.fissionCalculator=e.RT,this.fusionCalculator=e.Se,this.triFissionCalculator=e.I4,this.triFusionCalculator=e.zm,this.compConfig=m,this.appName=m.appTitle+" Fusion Calculator",this._tripleChart=new $.D(m.normalTable,m.elementTable,!0),this._squareChart$=new j.t({normalChart:k,tripleChart:this._tripleChart,raceOrder:m.raceOrder}),this.squareChart=this._squareChart$.asObservable(),m.appCssClasses.includes("p5t")&&(this.fissionCalculator=new A.s([_.Hr],[]),this.fusionCalculator=new A.s([R.Cx],[])),m.appCssClasses.includes("p5")&&(this.fissionCalculator=new A.s([_.Hr,U.gt],[]),this.fusionCalculator=new A.s([R.Cx,D.H,R.GW],[G.Dy,G.sk,S]))}static{this.\u0275fac=function(h){return new(h||c)(x.KVO(e.HI),x.KVO(K.Ix))}}static{this.\u0275prov=x.jDH({token:c,factory:c.\u0275fac})}}return c})()},159:(Z,V,a)=>{a.d(V,{v:()=>G});var j=a(4341),P=a(177),$=a(3887),e=a(9447),R=a(7277),D=a(2598);let G=(()=>{class S{static forRoot(){return{ngModule:S}}static{this.\u0275fac=function(A){return new(A||S)}}static{this.\u0275mod=D.$C({type:S})}static{this.\u0275inj=D.G2t({imports:[P.MD,$.G,j.X1,e.$,R.S]})}}return S})()}}]);