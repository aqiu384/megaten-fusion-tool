"use strict";(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[495],{8664:(N,E,i)=>{i.d(E,{G:()=>e});var a=i(5619);class e{constructor(t,d,C,D,L){this.settingsKey=D,this.settingsVersion=L,this._compendium=t,this._compendium$=new a.X(this._compendium),this.compendium=this._compendium$.asObservable(),this._fusionChart=d,this._fusionChart$=new a.X(this._fusionChart),this.fusionChart=this._fusionChart$.asObservable(),this._fusionSettings=C,this._fusionSettings$=new a.X(this._fusionSettings),this.fusionSettings=this._fusionSettings$.asObservable();const x=JSON.parse(localStorage.getItem(this.settingsKey));x&&x.version&&x.version>=this.settingsVersion&&this.updateFusionSettings(x.settings),window.addEventListener("storage",this.onStorageUpdated.bind(this))}updateToggledSettings(t){this._fusionSettings.updateSaveFile(t),this._compendium.updateFusionSettings(this._fusionSettings.demonToggles),this._compendium$.next(this._compendium),this._fusionSettings$.next(this._fusionSettings)}onStorageUpdated(t){t.key===this.settingsKey&&this.updateToggledSettings(JSON.parse(t.newValue).settings)}updateFusionSettings(t){this.updateToggledSettings(t),localStorage.setItem(this.settingsKey,JSON.stringify({version:this.settingsVersion,settings:this._fusionSettings.saveFile}))}}},8520:(N,E,i)=>{i.d(E,{O:()=>c});var a=i(627),e=i(4769),v=i(6814),t=i(2173);function d(n,r){if(1&n&&(e.TgZ(0,"h2"),e._uU(1),e.qZA()),2&n){const l=e.oxw();e.xp6(1),e.Oqu(l.title)}}function C(n,r){if(1&n&&(e.TgZ(0,"th"),e._uU(1),e.ALo(2,"translateComp"),e.qZA()),2&n){const l=e.oxw();e.xp6(1),e.Oqu(e.xi3(2,1,l.msgs.Price,l.lang))}}function D(n,r){if(1&n&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&n){const l=r.$implicit;e.xp6(1),e.Oqu(l)}}function L(n,r){1&n&&(e.TgZ(0,"th"),e._uU(1,"Inherits"),e.qZA())}function x(n,r){if(1&n&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&n){const l=r.$implicit;e.xp6(1),e.Oqu(l)}}function O(n,r){if(1&n&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&n){const l=e.oxw();e.xp6(1),e.Oqu(l.price)}}function S(n,r){if(1&n&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&n){const l=r.$implicit;e.xp6(1),e.Oqu(l)}}function k(n,r){if(1&n&&(e.TgZ(0,"td")(1,"div"),e._uU(2),e.qZA()()),2&n){const l=e.oxw();e.xp6(1),e.Gre("element-icon i",l.inherits,""),e.xp6(1),e.Oqu(l.inherits)}}const Z=["*"];let c=(()=>{class n{constructor(){this.title="Demon Entry",this.statHeaders=[],this.stats=[],this.fusionHeaders=[],this.price=0,this.lang="en",this.msgs=a.Ou}static#t=this.\u0275fac=function(f){return new(f||n)};static#s=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-demon-stats"]],inputs:{title:"title",statHeaders:"statHeaders",stats:"stats",fusionHeaders:"fusionHeaders",inherits:"inherits",price:"price",lang:"lang"},ngContentSelectors:Z,decls:20,vars:13,consts:[[4,"ngIf"],[1,"entry-table"],[1,"title"],[4,"ngFor","ngForOf"]],template:function(f,h){1&f&&(e.F$t(),e.ynx(0),e.YNc(1,d,2,1,"h2",0),e.TgZ(2,"table",1)(3,"thead")(4,"tr")(5,"th",2),e._uU(6),e.ALo(7,"translateComp"),e.qZA()(),e.TgZ(8,"tr"),e.YNc(9,C,3,4,"th",0),e.YNc(10,D,2,1,"th",3),e.YNc(11,L,2,0,"th",0),e.YNc(12,x,2,1,"th",3),e.qZA()(),e.TgZ(13,"tbody")(14,"tr"),e.YNc(15,O,2,1,"td",0),e.YNc(16,S,2,1,"td",3),e.YNc(17,k,3,4,"td",0),e.Hsn(18),e.qZA()()(),e.GkF(19),e.BQk()),2&f&&(e.xp6(1),e.Q6J("ngIf",h.title.includes("Lvl")),e.xp6(4),e.uIk("colSpan",h.stats.length+h.fusionHeaders.length+(h.inherits?1:0)+(h.price?1:0)),e.xp6(1),e.hij(" ",h.title.includes("Lvl")?e.xi3(7,10,h.msgs.Stats,h.lang):h.title," "),e.xp6(3),e.Q6J("ngIf",h.price),e.xp6(1),e.Q6J("ngForOf",h.statHeaders),e.xp6(1),e.Q6J("ngIf",h.inherits),e.xp6(1),e.Q6J("ngForOf",h.fusionHeaders),e.xp6(3),e.Q6J("ngIf",h.price),e.xp6(1),e.Q6J("ngForOf",h.stats),e.xp6(1),e.Q6J("ngIf",h.inherits))},dependencies:[v.sg,v.O5,t.zi],encapsulation:2,changeDetection:0})}return n})()},9822:(N,E,i)=>{i.d(E,{j:()=>x});var a=i(4769),e=i(3184),v=i(627),t=i(6593),d=i(6814),C=i(2173);function D(O,S){if(1&O){const k=a.EpF();a.TgZ(0,"tr")(1,"td")(2,"label"),a._uU(3),a.TgZ(4,"input",3),a.NdJ("change",function(){const n=a.CHM(k).$implicit,r=a.oxw(2);return a.KtG(r.toggledName.emit(n.name))}),a.qZA()()()()}if(2&O){const k=S.$implicit;a.xp6(3),a.hij("",k.caption," "),a.xp6(1),a.Q6J("checked",k.enabled)}}function L(O,S){if(1&O&&(a.ynx(0),a.TgZ(1,"tr")(2,"th"),a._uU(3),a.qZA()(),a.YNc(4,D,5,2,"tr",2),a.BQk()),2&O){const k=S.$implicit;a.xp6(3),a.Oqu(k.category),a.xp6(1),a.Q6J("ngForOf",k.settings)}}let x=(()=>{class O{constructor(k){this.title=k,this.lang="en",this.toggledName=new a.vpe,this.msgs=v.jI}set appTitle(k){this.title.setTitle((0,e.y0)(this.msgs.AppTitle,this.lang)+k)}static#t=this.\u0275fac=function(Z){return new(Z||O)(a.Y36(t.Dx))};static#s=this.\u0275cmp=a.Xpm({type:O,selectors:[["app-fusion-settings"]],inputs:{dlcDemons:"dlcDemons",lang:"lang",fusionSettings:"fusionSettings",appTitle:"appTitle"},outputs:{toggledName:"toggledName"},decls:11,vars:5,consts:[[1,"entry-table"],[1,"title"],[4,"ngFor","ngForOf"],["type","checkbox",3,"checked","change"]],template:function(Z,c){1&Z&&(a.ynx(0),a.TgZ(1,"h2"),a._uU(2),a.ALo(3,"translateComp"),a.qZA(),a.TgZ(4,"table",0)(5,"thead")(6,"tr")(7,"th",1),a._uU(8,"Unlock Conditions"),a.qZA()()(),a.TgZ(9,"tbody"),a.YNc(10,L,5,2,"ng-container",2),a.qZA()(),a.BQk()),2&Z&&(a.xp6(2),a.Oqu(a.xi3(3,2,c.msgs.DlcTitle,c.lang)),a.xp6(8),a.Q6J("ngForOf",c.fusionSettings.displayHeaders))},dependencies:[d.sg,C.zi],encapsulation:2,changeDetection:0})}return O})()},4069:(N,E,i)=>{i.d(E,{O:()=>Z});var a=i(3247),e=i(3808),v=i(627),t=i(4769),d=i(6814),C=i(4487),D=i(2173);const L=function(){return{exact:!0}};function x(c,n){if(1&c&&(t.TgZ(0,"th",4)(1,"a",5),t._uU(2),t.ALo(3,"translateComp"),t.qZA()()),2&c){const r=n.$implicit,l=t.oxw();t.Udp("width",100/l.fusionOptions.length,"%"),t.Q6J("routerLink",r.link)("routerLinkActiveOptions",t.DdM(9,L)),t.xp6(1),t.Q6J("routerLink",r.link),t.xp6(1),t.Oqu(t.xi3(3,6,r.title,l.lang))}}function O(c,n){if(1&c&&(t.TgZ(0,"tr")(1,"th",6),t._uU(2),t.ALo(3,"translateComp"),t.qZA()()),2&c){const r=t.oxw();t.xp6(1),t.uIk("colspan",r.fusionOptions.length),t.xp6(1),t.hij(" ",t.xi3(3,2,r.msgs.DlcExcluded,r.lang)," ")}}function S(c,n){if(1&c&&(t.TgZ(0,"tr")(1,"th",6),t.Hsn(2),t.qZA()()),2&c){const r=t.oxw();t.xp6(1),t.uIk("colspan",r.fusionOptions.length)}}const k=["*"];let Z=(()=>{class c{constructor(){this.hasTripleFusion=!1,this.showFusionAlert=!1,this.excludedDlc=!1,this.lang="en",this.msgs=v.Od,this.fusionOptions=[{title:this.msgs.NormalFissions,link:"fissions"},{title:this.msgs.NormalFusions,link:"fusions"}]}ngOnInit(){this.hasTripleFusion&&(this.fusionOptions=[{title:this.msgs.DoubleFissions,link:"fissions"},{title:this.msgs.TripleFissions,link:"fissions/triple"},{title:this.msgs.TripleFusions,link:"fusions/triple"},{title:this.msgs.DoubleFusions,link:"fusions"}])}ngOnChanges(){setTimeout(()=>this.stickyTable.nextEdges())}static#t=this.\u0275fac=function(l){return new(l||c)};static#s=this.\u0275cmp=t.Xpm({type:c,selectors:[["app-smt-fusions"]],viewQuery:function(l,f){if(1&l&&t.Gf(e.v,5),2&l){let h;t.iGM(h=t.CRH())&&(f.stickyTable=h.first)}},inputs:{hasTripleFusion:"hasTripleFusion",showFusionAlert:"showFusionAlert",excludedDlc:"excludedDlc",lang:"lang"},features:[t._Bn([a.L]),t.TTD],ngContentSelectors:k,decls:11,vars:3,consts:[["appPositionSticky","",1,"list-table"],["stickyTable",""],["class","nav","routerLinkActive","active",3,"routerLink","width","routerLinkActiveOptions",4,"ngFor","ngForOf"],[4,"ngIf"],["routerLinkActive","active",1,"nav",3,"routerLink","routerLinkActiveOptions"],[3,"routerLink"],[1,"title"]],template:function(l,f){1&l&&(t.F$t(),t.TgZ(0,"div")(1,"table",0,1)(3,"thead")(4,"tr"),t.YNc(5,x,4,10,"th",2),t.qZA(),t.YNc(6,O,4,5,"tr",3),t._UZ(7,"tr"),t.YNc(8,S,3,1,"tr",3),t._UZ(9,"tr"),t.qZA()(),t._UZ(10,"router-outlet"),t.qZA()),2&l&&(t.xp6(5),t.Q6J("ngForOf",f.fusionOptions),t.xp6(1),t.Q6J("ngIf",f.excludedDlc),t.xp6(2),t.Q6J("ngIf",f.showFusionAlert))},dependencies:[d.sg,d.O5,C.lC,C.rH,C.Od,e.v,D.zi],encapsulation:2,changeDetection:0})}return c})()},103:(N,E,i)=>{i.d(E,{s:()=>e});var a=i(4769);let e=(()=>{class v{constructor(d,C){this.changeDetector2=d,this.fusionDataService2=C,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.fusionDataService2.compendium.subscribe(d=>{this.changeDetector2.markForCheck(),this.compendium=d})),this.subscriptions.push(this.fusionDataService2.fusionSettings.subscribe(d=>{this.fusionSettings=d}))}ngOnDestroy(){for(const d of this.subscriptions)d.unsubscribe()}toggleName(d){const C={};C[d]=!this.fusionSettings.isEnabled(d),this.fusionDataService2.updateFusionSettings(C)}static#t=this.\u0275fac=function(C){a.$Z()};static#s=this.\u0275dir=a.lG2({type:v})}return v})()},9778:(N,E,i)=>{i.d(E,{V:()=>a});class a{constructor(v,t,d=","){this.separator=d,this._displayHeaders=[],this._demonToggles={},this._subappToggles={};for(const{category:D,unlocked:L,conditions:x}of v){const O=[];this._displayHeaders.push({category:D,settings:O});for(const S of Object.keys(x))this._demonToggles[S]=L,O.push({name:S,caption:S.split(d).join(", "),enabled:L})}const C=[];t.length>0&&this._displayHeaders.push({category:"Subapps",settings:C});for(const D of t)this._subappToggles[D]=!1,C.push({name:D,caption:D,enabled:!1})}get displayHeaders(){for(const v of this._displayHeaders)for(const t of v.settings)t.enabled=this.saveFile[t.name];return this._displayHeaders}get subappToggles(){return this._subappToggles}get demonToggles(){const v={};for(const[t,d]of Object.entries(this._demonToggles))for(const C of t.split(this.separator))v[C]=d;return v}get saveFile(){return Object.assign({},this._demonToggles,this._subappToggles)}isEnabled(v){return this._demonToggles[v]||this._subappToggles[v]||!1}updateSaveFile(v){for(const t of[this._demonToggles,this._subappToggles])for(const[d,C]of Object.entries(v))t[d]===!C&&(t[d]=C)}}},6502:(N,E,i)=>{i.d(E,{V:()=>nt});var a=i(4487),e=i(3184),v=i(627),t=i(4769),d=i(329),C=i(6814),D=i(5390);let L=(()=>{class o{constructor(s){this.appCssClasses=["smt4","smt4f"],this.appCssClasses=s.compConfig.appCssClasses,this.otherLinks=[{title:(0,e.y0)(v.e2.RecipGenerator,s.compConfig.lang),link:"recipes"}]}static#t=this.\u0275fac=function(p){return new(p||o)(t.Y36(d.Y))};static#s=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-smt4f-compendium"]],decls:1,vars:2,consts:[[3,"ngClass","otherLinks"]],template:function(p,m){1&p&&t._UZ(0,"app-demon-compendium",0),2&p&&t.Q6J("ngClass",m.appCssClasses)("otherLinks",m.otherLinks)},dependencies:[C.mk,D.e],styles:[".smt4 div.element-icon{height:12px;background-size:12px;background-repeat:no-repeat;background-position:center;color:transparent}.smt4 div.element-icon.phy{background-image:url(/assets/images/smtsj/phy.png)}.smt4 div.element-icon.gun{background-image:url(/assets/images/smt4f/gun.png)}.smt4 div.element-icon.fir{background-image:url(/assets/images/smtsj/fir.png)}.smt4 div.element-icon.ice{background-image:url(/assets/images/smtsj/ice.png)}.smt4 div.element-icon.ele{background-image:url(/assets/images/smtsj/ele.png)}.smt4 div.element-icon.for{background-image:url(/assets/images/smt4f/force.png)}.smt4 div.element-icon.lig{background-image:url(/assets/images/smtsj/exp.png)}.smt4 div.element-icon.dar{background-image:url(/assets/images/smtsj/cur.png)}.smt4 div.element-icon.ail{background-image:url(/assets/images/smtsj/ail.png)}.smt4 div.element-icon.rec{background-image:url(/assets/images/smtsj/rec.png)}.smt4 div.element-icon.alm{background-image:url(/assets/images/smtsj/alm.png)}.smt4 div.element-icon.sup{background-image:url(/assets/images/smtsj/sup.png)}.smt4 div.element-icon.pas{background-image:url(/assets/images/smtsj/pas.png)}.smt4 div.element-icon.oth{background-image:url(/assets/images/smtsj/spe.png)}.smt4 div.element-icon.spe{background-image:url(/assets/images/smtsj/spe.png)}.smt4 div.element-icon.sab{background-image:url(/assets/images/smtsj/spe.png)}.smt4 div.element-icon.com{background-image:url(/assets/images/smtsj/sup.png)}.smt4 div.element-icon.inn{background-image:url(/assets/images/smtsj/spe.png)}.smt4 td.affinity-9,.smt4 td.affinity-8{color:red}.smt4 td.affinity-7{color:#ff4500}.smt4 td.affinity-6{color:tomato}.smt4 td.affinity-5{color:coral}.smt4 td.affinity-4{color:#ff8c00}.smt4 td.affinity-3{color:orange}.smt4 td.affinity-2{color:#ffa07a}.smt4 td.affinity-1{color:gold}.smt4 td.affinity0{color:transparent}.smt4 td.affinity1{color:#7cfc00}.smt4 td.affinity2{color:#0f0}.smt4 td.affinity3{color:#00ff7f}.smt4 td.affinity4{color:#00fa9a}.smt4 td.affinity5{color:#32cd32}.smt4 td.affinity6{color:#3cb371}.smt4 td.affinity7{color:#2e8b57}.smt4 td.affinity8,.smt4 td.affinity9{color:#228b22}.smt4f th.title,.smt4f th.nav.active,.smt4f th.nav.active a{background-color:#fff;color:#000}.smt5 th.title,.smt5 th.nav.active,.smt5 th.nav.active a{background-color:#363361;color:#fff}.sh2 th.title,.sh2 th.nav.active,.sh2 th.nav.active a{background-color:#693cbe;color:#fff}\n"],encapsulation:2,changeDetection:0})}return o})();var x=i(1032),O=i(6593),S=i(4101);let k=(()=>{class o extends x.l{constructor(s,p,m){super(s,p,m),this.compConfig=m.compConfig,this.appName=(0,e.y0)(v.B3.AppTitle,this.compConfig.lang)+m.appName,this.defaultSortFun=(b,M)=>200*(this.compConfig.raceOrder[b.race]-this.compConfig.raceOrder[M.race])+M.lvl-b.lvl}static#t=this.\u0275fac=function(p){return new(p||o)(t.Y36(O.Dx),t.Y36(t.sBO),t.Y36(d.Y))};static#s=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-demon-list-container"]],features:[t.qOj],decls:2,vars:8,consts:[[3,"lang","raceOrder","statHeaders","resistHeaders","affinityHeaders","rowData"]],template:function(p,m){1&p&&(t._UZ(0,"app-smt-demon-list",0),t.ALo(1,"async")),2&p&&t.Q6J("lang",m.compConfig.lang)("raceOrder",m.compConfig.raceOrder)("statHeaders",m.compConfig.baseStats)("resistHeaders",m.compConfig.resistElems)("affinityHeaders",m.compConfig.affinityElems)("rowData",t.lcZ(1,6,m.demons))},dependencies:[S.Q,C.Ov],encapsulation:2,changeDetection:0})}return o})();var Z=i(4330),c=i(3934);let n=(()=>{class o extends Z.e{constructor(s,p,m){super(s,p,m),this.appName=`List of Skills - ${m.appName}`,this.compConfig=m.compConfig,this.appName=(0,e.y0)(v.oI.AppTitle,this.compConfig.lang)+m.appName,this.compConfig=m.compConfig,this.defaultSortFun=(b,M)=>1e4*(this.compConfig.elemOrder[b.element]-this.compConfig.elemOrder[M.element])+b.rank-M.rank}static#t=this.\u0275fac=function(p){return new(p||o)(t.Y36(O.Dx),t.Y36(t.sBO),t.Y36(d.Y))};static#s=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-skill-list-container"]],features:[t.qOj],decls:2,vars:6,consts:[[3,"lang","elemOrder","hasTarget","rowData"]],template:function(p,m){1&p&&(t._UZ(0,"app-smt-skill-list",0),t.ALo(1,"async")),2&p&&t.Q6J("lang",m.compConfig.lang)("elemOrder",m.compConfig.elemOrder)("hasTarget",!0)("rowData",t.lcZ(1,4,m.skills))},dependencies:[c.J,C.Ov],encapsulation:2,changeDetection:0})}return o})();var r=i(103),l=i(9822);let f=(()=>{class o extends r.s{constructor(s,p){super(s,p),this.changeDetector=s,this.fusionDataService=p,this.appTitle=p.appName,this.lang=p.compConfig.lang}static#t=this.\u0275fac=function(p){return new(p||o)(t.Y36(t.sBO),t.Y36(d.Y))};static#s=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-fusion-settings-container"]],features:[t.qOj],decls:1,vars:3,consts:[[3,"lang","appTitle","fusionSettings","toggledName"]],template:function(p,m){1&p&&(t.TgZ(0,"app-fusion-settings",0),t.NdJ("toggledName",function(M){return m.toggleName(M)}),t.qZA()),2&p&&t.Q6J("lang",m.lang)("appTitle",m.appTitle)("fusionSettings",m.fusionSettings)},dependencies:[l.j],encapsulation:2,changeDetection:0})}return o})();var h=i(7880),T=i(8520),y=i(1009),A=i(9012),I=i(4537),U=i(4069),P=i(2173),H=i(8711);function K(o,j){if(1&o&&t._UZ(0,"app-demon-inherits",10),2&o){const s=t.oxw(2);t.Q6J("lang",s.compConfig.lang)("hasLvls",!0)("inheritHeaders",s.compConfig.affinityElems)("inherits",s.demon.affinities)}}const W=function(o){return{unique:o}};function J(o,j){if(1&o&&(t.TgZ(0,"tr",11)(1,"td")(2,"div"),t._uU(3),t.qZA()(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"skillCostToString"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.ALo(17,"skillLevelToString"),t.qZA()()),2&o){const s=j.$implicit;t.Q6J("ngClass",t.VKq(19,W,s.skill.rank>90)),t.xp6(2),t.Gre("element-icon ",s.skill.element,""),t.xp6(1),t.Oqu(s.skill.element),t.xp6(2),t.Oqu(s.skill.name+(s.lvl?" +"+s.lvl:"")),t.xp6(1),t.Udp("color",s.cost?null:"transparent"),t.xp6(1),t.Oqu(t.lcZ(8,15,s.cost)),t.xp6(3),t.Oqu(s.skill.effect+(s.upgrade?" (+"+s.upgrade+"%)":"")),t.xp6(2),t.Oqu(s.skill.target||"Self"),t.xp6(1),t.Udp("color",99!==s.skill.rank?null:"transparent"),t.xp6(1),t.Oqu(s.skill.rank),t.xp6(2),t.Oqu(t.lcZ(17,17,s.skill.level))}}function Q(o,j){if(1&o&&(t.TgZ(0,"tr")(1,"td",12),t._uU(2),t.ALo(3,"translateComp"),t.qZA()()),2&o){const s=t.oxw(2);t.xp6(2),t.Oqu(t.xi3(3,1,s.skillMsgs.NoLearnedSkills,s.lang))}}const Y=function(o){return[o]};function _(o,j){if(1&o&&(t._UZ(0,"app-fusion-entry-table",13),t.ALo(1,"translateComp")),2&o){const s=t.oxw(2);t.Q6J("title",t.xi3(1,4,s.statMsgs.EvolvesFrom,s.lang))("lang",s.compConfig.lang)("baseUrl","..")("rowData",t.VKq(7,Y,s.demon.evolvesFrom))}}function u(o,j){if(1&o&&(t._UZ(0,"app-fusion-entry-table",13),t.ALo(1,"translateComp")),2&o){const s=t.oxw(2);t.Q6J("title",t.xi3(1,4,s.statMsgs.EvolvesTo,s.lang))("lang",s.compConfig.lang)("baseUrl","..")("rowData",t.VKq(7,Y,s.demon.evolvesTo))}}function g(o,j){if(1&o&&(t.ynx(0),t._UZ(1,"app-demon-stats",2)(2,"app-demon-resists",3),t.YNc(3,K,1,4,"app-demon-inherits",4),t.TgZ(4,"table",5)(5,"thead")(6,"tr")(7,"th",6),t._uU(8),t.ALo(9,"translateComp"),t.qZA()(),t.TgZ(10,"tr")(11,"th"),t._uU(12),t.ALo(13,"translateComp"),t.qZA(),t.TgZ(14,"th"),t._uU(15),t.ALo(16,"translateComp"),t.qZA(),t.TgZ(17,"th"),t._uU(18),t.ALo(19,"translateComp"),t.qZA(),t.TgZ(20,"th"),t._uU(21),t.ALo(22,"translateComp"),t.qZA(),t.TgZ(23,"th"),t._uU(24),t.ALo(25,"translateComp"),t.qZA(),t.TgZ(26,"th"),t._uU(27),t.ALo(28,"translateComp"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"Lvl"),t.qZA()()(),t.TgZ(31,"tbody"),t.YNc(32,J,18,21,"tr",7),t.YNc(33,Q,4,4,"tr",0),t._UZ(34,"tr"),t.qZA()(),t.YNc(35,_,2,9,"app-fusion-entry-table",8),t.YNc(36,u,2,9,"app-fusion-entry-table",8),t._UZ(37,"app-smt-fusions",9),t.BQk()),2&o){const s=t.oxw();t.xp6(1),t.Q6J("lang",s.compConfig.lang)("title","Lvl "+s.demon.lvl+" "+s.demon.race+" "+s.demon.name)("price",s.demon.price)("statHeaders",s.compConfig.baseStats)("stats",s.demon.stats),t.xp6(1),t.Q6J("lang",s.compConfig.lang)("resistHeaders",s.compConfig.resistElems)("resists",s.demon.resists)("ailmentHeaders",s.compConfig.ailmentElems)("ailments",s.demon.ailments),t.xp6(1),t.Q6J("ngIf",s.demon.affinities),t.xp6(5),t.Oqu(t.xi3(9,24,s.skillMsgs.LearnedSkills,s.lang)),t.xp6(4),t.Oqu(t.xi3(13,27,s.skillMsgs.Elem,s.lang)),t.xp6(3),t.Oqu(t.xi3(16,30,s.skillMsgs.Name,s.lang)),t.xp6(3),t.Oqu(t.xi3(19,33,s.skillMsgs.Cost,s.lang)),t.xp6(3),t.Oqu(t.xi3(22,36,s.skillMsgs.Effect,s.lang)),t.xp6(3),t.Oqu(t.xi3(25,39,s.skillMsgs.Target,s.lang)),t.xp6(3),t.Oqu(t.xi3(28,42,s.skillMsgs.Rank,s.lang)),t.xp6(5),t.Q6J("ngForOf",s.skillLvls),t.xp6(1),t.Q6J("ngIf",!s.skillLvls.length),t.xp6(2),t.Q6J("ngIf",s.demon.evolvesFrom),t.xp6(1),t.Q6J("ngIf",s.demon.evolvesTo),t.xp6(1),t.Q6J("lang",s.compConfig.lang)("excludedDlc","excluded"===s.demon.fusion)}}function F(o,j){if(1&o&&t._UZ(0,"app-demon-missing",14),2&o){const s=t.oxw();t.Q6J("name",s.name)}}let R=(()=>{class o{constructor(){this.lang="en",this.statMsgs=v.Ou,this.skillMsgs=v.oI,this.skillLvls=[]}ngOnChanges(){if(this.demon){this.skillLvls=[];for(const s of Object.keys(this.demon.skills)){const m=this.compendium.getSkill(s),b=this.compConfig.affinityElems.indexOf(m.element),M=this.compConfig.affinityBonuses,B=(this.demon.affinities||[])[b];this.skillLvls.push(B&&M.costs[b]&&(64512&m.cost)<=3072?{skill:m,cost:(64512&m.cost)+Math.floor((100-M.costs[b][B-1])/100*(1023&m.cost)),lvl:B,upgrade:M.upgrades[b][B-1]}:{skill:m,cost:m.cost,lvl:0,upgrade:0})}for(const s of this.skillLvls)s.skill.level=this.demon.skills[s.skill.name];this.skillLvls.sort((s,p)=>200*(s.skill.level-p.skill.level)+this.compConfig.elemOrder[s.skill.element]-this.compConfig.elemOrder[p.skill.element])}}static#t=this.\u0275fac=function(p){return new(p||o)};static#s=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",compConfig:"compConfig",compendium:"compendium",lang:"lang"},features:[t.TTD],decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"lang","title","price","statHeaders","stats"],[3,"lang","resistHeaders","resists","ailmentHeaders","ailments"],[3,"lang","hasLvls","inheritHeaders","inherits",4,"ngIf"],[1,"entry-table"],["colSpan","7",1,"title"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"title","lang","baseUrl","rowData",4,"ngIf"],[3,"lang","excludedDlc"],[3,"lang","hasLvls","inheritHeaders","inherits"],[3,"ngClass"],["colSpan","7"],[3,"title","lang","baseUrl","rowData"],[3,"name"]],template:function(p,m){1&p&&(t.YNc(0,g,38,45,"ng-container",0),t.YNc(1,F,1,1,"app-demon-missing",1)),2&p&&(t.Q6J("ngIf",m.demon),t.xp6(1),t.Q6J("ngIf",!m.demon))},dependencies:[C.mk,C.sg,C.O5,h.t,T.O,y.I,A.N,I.P,U.O,P.zi,P.tq,P.NL],encapsulation:2,changeDetection:0})}return o})(),$=(()=>{class o{constructor(s,p,m,b){this.route=s,this.title=p,this.currentDemonService=m,this.fusionDataService=b,this.subscriptions=[],this.appName=b.appName,this.compConfig=b.compConfig}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const s of this.subscriptions)s.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(s=>{this.compendium=s,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(s=>{this.name=s,this.getDemonEntry()})),this.route.params.subscribe(s=>{this.currentDemonService.nextCurrentDemon(s.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(`${this.name} - ${this.appName}`),this.demon=this.compendium.getDemon(this.name))}static#t=this.\u0275fac=function(p){return new(p||o)(t.Y36(a.gz),t.Y36(O.Dx),t.Y36(H.s),t.Y36(d.Y))};static#s=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-demon-entry-container"]],decls:1,vars:5,consts:[[3,"lang","name","demon","compConfig","compendium"]],template:function(p,m){1&p&&t._UZ(0,"app-demon-entry",0),2&p&&t.Q6J("lang",m.compConfig.lang)("name",m.name)("demon",m.demon)("compConfig",m.compConfig)("compendium",m.compendium)},dependencies:[R],encapsulation:2,changeDetection:0})}return o})();var q=i(8615);function G(o,j){if(1&o&&t._UZ(0,"app-fusion-chart",2),2&o){const s=t.oxw();t.Q6J("lang",s.lang)("normChart",s.normChart)("tripChart",s.normChart)("normTitle","Light and Neutral Normal Fusions")("tripTitle","Dark Normal Fusions")}}function V(o,j){if(1&o&&t._UZ(0,"app-fusion-chart",3),2&o){const s=t.oxw();t.Q6J("lang",s.lang)("filterDarks",!1)("normChart",s.normChart)}}let X=(()=>{class o{constructor(s,p){this.changeDetectorRef=s,this.fusionDataService=p,this.subscriptions=[],this.lang="en"}ngOnInit(){this.lang=this.fusionDataService.compConfig.lang,this.hasLightDark=!this.fusionDataService.compConfig.appCssClasses.includes("sh2"),this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(s=>{this.changeDetectorRef.markForCheck(),this.normChart=s}))}ngOnDestroy(){for(const s of this.subscriptions)s.unsubscribe()}static#t=this.\u0275fac=function(p){return new(p||o)(t.Y36(t.sBO),t.Y36(d.Y))};static#s=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-fusion-chart-container"]],decls:2,vars:2,consts:[[3,"lang","normChart","tripChart","normTitle","tripTitle",4,"ngIf"],[3,"lang","filterDarks","normChart",4,"ngIf"],[3,"lang","normChart","tripChart","normTitle","tripTitle"],[3,"lang","filterDarks","normChart"]],template:function(p,m){1&p&&(t.YNc(0,G,1,5,"app-fusion-chart",0),t.YNc(1,V,1,3,"app-fusion-chart",1)),2&p&&(t.Q6J("ngIf",m.hasLightDark),t.xp6(1),t.Q6J("ngIf",!m.hasLightDark))},dependencies:[C.O5,q.R],encapsulation:2,changeDetection:0})}return o})();var w=i(4436);let z=(()=>{class o{constructor(s,p){this.fusionDataService=s,this.title=p,this.subscriptions=[],this.maxSkills=8,this.lang="en";const m=this.fusionDataService.compConfig,b=m.appCssClasses.includes("sh2");this.lang=m.lang,this.appName=(0,e.y0)(v.XE.AppTitle,this.lang)+s.appName,this.maxSkills=b?6:8,this.recipeConfig={fissionCalculator:this.fusionDataService.fissionCalculator,fusionCalculator:this.fusionDataService.fusionCalculator,races:m.races,skillElems:m.skillElems,inheritElems:m.affinityElems,displayElems:{},restrictInherits:b,triExclusiveRaces:[],triFissionCalculator:null,triFusionCalculator:null,defaultDemon:m.defaultRecipeDemon}}ngOnInit(){this.title.setTitle(this.appName),this.subscribeAll()}ngOnDestroy(){this.unsubscribeAll()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(s=>{this.compendium=s})),this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(s=>{this.squareChart={normalChart:s,tripleChart:s,raceOrder:this.fusionDataService.compConfig.raceOrder}}))}unsubscribeAll(){for(const s of this.subscriptions)s.unsubscribe()}static#t=this.\u0275fac=function(p){return new(p||o)(t.Y36(d.Y),t.Y36(O.Dx))};static#s=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-recipe-generator-container"]],decls:1,vars:5,consts:[[3,"maxSkills","compendium","squareChart","recipeConfig","lang"]],template:function(p,m){1&p&&t._UZ(0,"app-recipe-generator",0),2&p&&t.Q6J("maxSkills",m.maxSkills)("compendium",m.compendium)("squareChart",m.squareChart)("recipeConfig",m.recipeConfig)("lang",m.lang)},dependencies:[w.X],encapsulation:2,changeDetection:0})}return o})();var tt=i(5657),st=i(4689);const et=[{path:"",redirectTo:"demons",pathMatch:"full"},{path:"",component:L,data:{fusionTool:"chart"},children:[{path:"chart",component:X}]},{path:"",component:L,children:[{path:"demons/:demonName",component:$,children:[{path:"fissions",component:tt.t},{path:"fusions",component:st.$},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"demons",component:k},{path:"skills",component:n},{path:"recipes",component:z},{path:"settings",component:f}]},{path:"**",redirectTo:"demons",pathMatch:"full"}];let nt=(()=>{class o{static#t=this.\u0275fac=function(p){return new(p||o)};static#s=this.\u0275mod=t.oAB({type:o});static#e=this.\u0275inj=t.cJS({imports:[a.Bz.forChild(et),a.Bz]})}return o})()},329:(N,E,i)=>{i.d(E,{Y:()=>Z});var a=i(3184);function v(c,n){const r={};for(const[l,f]of Object.entries(c))r[n[l]||l]={lvl:f.lvl,result:n[f.result]||f.result};return r}class t{constructor(n,r){this.compConfig=n,this.initImportedData(),this.updateDerivedData(r)}initImportedData(){const n={},r={},l={},f={},h={},T={},y={},A={},I="-".repeat(this.compConfig.ailmentElems.length);for(const[_,u]of Object.entries(this.compConfig.fusionSpells))for(const g of u)l[g]=_;for(const[_,u]of Object.entries(this.compConfig.resistCodes))y[_]=(u/1e3|0)<<10,A[_]=u%1e3/2.5|0;const U=(_,u,g)=>(_||u).split("").map((F,R)=>y[F]+(g?.[R]/2.5|0||A[F])),P="en"===this.compConfig.lang,H=P?"Innate resistance":"",K=P?"Self":"\u81ea\u8eab",W=P?["Weak ","Resist ","Null "]:["\u5f31","\u5f37","\u7121"],J={},Q={},Y=this.compConfig.appCssClasses.includes("smt5v");for(const[_,u]of"wsn".split("").entries())J[y[u]>>10]=[],Q[y[u]>>10]=W[_];for(const[_,u]of Object.entries(Q))for(const g of this.compConfig.ailmentElems)J[_].push({name:u+g,element:"pas",effect:H,target:K,cost:0,rank:99,learnedBy:[],level:0});for(const _ of this.compConfig.demonData)for(const[u,g]of Object.entries(_)){const F=g.race;n[u]={name:u,race:F,lvl:g.lvl,currLvl:g.currLvl||g.lvl,skills:g.skills,price:2*g.price,stats:g.stats,resists:U(g.resists,g.resists,g.resmods),ailments:U(g.ailments,I,g.ailmods),inherits:parseInt((g.affinities||[-10]).map(R=>R>-10?"1":"0").join(""),2),affinities:g.affinities,fusion:g.fusion||"normal",prereq:g.prereq||""},l[F]&&(n[u].skills[l[F]]=5278),Y&&"-"!==g.innate&&(n[u].price=2*g.innatePrice,n[u].skills=Object.assign({},g.skills),n[u].skills[g.innate]=0,l[u]&&(n[u].skills[l[u]]=4884))}for(const _ of this.compConfig.demonUnlocks)for(const[u,g]of Object.entries(_.conditions))for(const F of u.split(","))n[F].prereq=g;for(const _ of this.compConfig.skillData)for(const[u,g]of Object.entries(_))r[u]={name:u,element:g.element,rank:g.rank,effect:g.effect,damage:g.damage||"",target:g.target||"Self",hits:g.hits||"",cost:g.cost||0,learnedBy:[],level:0},r[u].rank||(r[u].rank=99);for(const _ of Object.values(J))for(const u of _)r[u.name]=u;for(const[_,u]of Object.entries(this.compConfig.specialRecipes)){const g=[],F=[];for(const R of u)if(R.includes(" x")){const[$,q]=R.split(" x ");F.push({name1:$,name2:q})}else g.push(R);g.length>0&&(f[_]=g),F.length>0&&(h[_]=F),"normal"===n[_].fusion&&(n[_].fusion="special")}for(const[_,u]of Object.entries(this.compConfig.evolveData)){const g=u.result;n[_].evolvesTo={price:n[g].price,race1:n[g].race,lvl1:u.lvl,name1:g},n[g].evolvesFrom={price:n[_].price,race1:n[_].race,lvl1:u.lvl,name1:_}}for(const _ of this.compConfig.races)T[_]={};for(const[_,u]of Object.entries(n))T[u.race][u.lvl]=_;for(const _ of Object.values(n).sort((u,g)=>u.currLvl-g.currLvl))if("enemy"!==_.fusion){for(const u of Object.keys(_.skills))r[u].learnedBy.push({demon:_.name,level:_.skills[u]});for(let u=0;u<_.ailments.length;u++)J[_.ailments[u]>>10]&&J[_.ailments[u]>>10][u].learnedBy.push({demon:_.name,level:0})}this.demons=n,this.skills=r,this.specialRecipes=f,this.specialPairRecipes=h,this.invertedDemons=T}updateDerivedData(n){const r=Object.assign({},this.demons),l=Object.keys(this.skills).map(T=>this.skills[T]),f={},h={};for(const T of this.compConfig.races)f[T]=[],h[T]=[];for(const[T,y]of Object.entries(this.demons))!this.isElementDemon(T)&&!this.isOverlappingResult(T)&&f[y.race].push(y.lvl),this.specialRecipes.hasOwnProperty(T)||h[y.race].push(y.lvl);for(const T of this.compConfig.races)f[T].sort((y,A)=>y-A),h[T].sort((y,A)=>y-A);for(const T of this.compConfig.races){const y=f[T],A=h[T],I=y.length,U=A.length;I&&U&&y[I-1]!==A[U-1]&&A.push(100)}for(const[T,y]of Object.entries(n))if(!y){const{race:A,lvl:I}=this.demons[T];delete r[T],f[A]=f[A].filter(U=>U!==I),h[A]=h[A].filter(U=>U!==I)}this._allDemons=Object.keys(r).map(T=>r[T]),this._allSkills=l.filter(T=>T.rank<99||T.learnedBy.length>0),this.allIngredients=f,this.allResults=h}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return Object.keys(this.specialRecipes).map(n=>this.demons[n])}getDemon(n){return this.demons[n]}getSkill(n){return this.skills[n]}getSkills(n){const r=this.compConfig.elemOrder,l=n.map(f=>this.skills[f]);return l.sort((f,h)=>1e4*(r[f.element]-r[h.element])+f.rank-h.rank),l}getIngredientDemonLvls(n){return this.allIngredients[n]||[]}getResultDemonLvls(n){return this.allResults[n]||[]}getSpecialNameEntries(n){return this.specialRecipes[n]||[]}getSpecialNamePairs(n){return this.specialPairRecipes[n]||[]}reverseLookupDemon(n,r){return this.invertedDemons[n][r]}reverseLookupSpecial(n){return[]}isElementDemon(n){return this.demons[n].race===this.compConfig.elementRace}isOverlappingResult(n){return!1}updateFusionSettings(n){this.updateDerivedData(n)}}var d=i(6262);let C=(()=>{class c extends d.g{static#t=this.LIGHT_RACES=["Herald","Megami","Avian","Tree","Deity","Avatar","Holy","Genma","Fury","Lady","Dragon","Kishin","Enigma","Entity","Wargod","Amatsu","Kunitsu","Godly","Chaos","\u5927\u5929\u4f7f","\u5973\u795e","\u970a\u9ce5","\u795e\u6a39","\u9b54\u795e","\u795e\u7363","\u8056\u7363","\u5e7b\u9b54","\u7834\u58ca\u795e","\u5730\u6bcd\u795e","\u9f8d\u795e","\u9b3c\u795e","\u79d8\u795e","\u5a01\u970a","\u8ecd\u795e","\u5929\u6d25\u795e","\u56fd\u6d25\u795e","\u795e\u970a","\u6df7\u6c8c\u738b"];static#s=this.DARK_RACES=["Vile","Raptor","Wood","Reaper","Wilder","Jaki","Vermin","Tyrant","Drake","Spirit","Haunt","Ghost","Zealot","\u90aa\u795e","\u51f6\u9ce5","\u5996\u6a39","\u6b7b\u795e","\u5996\u7363","\u90aa\u9b3c","\u5e7d\u866b","\u9b54\u738b","\u90aa\u9f8d","\u60aa\u970a","\u5e7d\u9b3c","\u5e7d\u9b3c","\u72c2\u795e"];constructor(r){super(),this.initCharts(r)}initCharts(r){const l=r.normalTable.races,f=r.normalTable.table,h=r.elementTable.elems,T=r.elementTable.races,y=r.elementTable.table;this.lvlModifier=r.lvlModifier,this.elementDemons=h,this.fusionChart=d.g.loadFusionTableJson(l,f),this.fissionChart=d.g.loadFissionTableJson(l,h,f),this.elementChart=d.g.loadElementTableJson(T,h,y),this.races=l}getLightDark(r){return-1!==c.LIGHT_RACES.indexOf(r)?1:-1!==c.DARK_RACES.indexOf(r)?-1:0}}return c})();var D=i(7548),L=i(8664),x=i(9778),O=i(627),S=i(4769),k=i(4487);let Z=(()=>{class c extends L.G{constructor(r,l){const f=l.url.includes("/ja/")?function e(c){const n=Object.entries(c.jaNames).reduce((l,[f,h])=>(l[h]=f,l),{}),r=c.races.map(l=>n[l]||l);return{appTitle:n[c.appTitle]||c.appTitle,races:r,raceOrder:r.reduce((l,f,h)=>(l[f]=h,l),{}),appCssClasses:c.appCssClasses,lang:"ja",jaNames:c.jaNames,affinityElems:c.affinityElems,skillData:c.skillData.map(l=>(0,a.B3)(l,n)),skillElems:c.skillElems,elemOrder:c.elemOrder,resistCodes:c.resistCodes,affinityBonuses:c.affinityBonuses,lvlModifier:c.lvlModifier,demonData:c.demonData.map(l=>(0,a.k)(l,n)),fusionSpells:(0,a.yW)(c.fusionSpells,n),evolveData:v(c.evolveData,n),baseStats:c.baseStats.map(l=>n[l]||l),resistElems:c.resistElems,ailmentElems:c.ailmentElems.map(l=>n[l]||l),demonUnlocks:(0,a.yH)(c.demonUnlocks,n),normalTable:(0,a.Qc)(c.normalTable,n),elementTable:(0,a.Qc)(c.elementTable,n),specialRecipes:(0,a.yW)(c.specialRecipes,n),settingsKey:c.settingsKey.replace("-ja","")+"-ja",settingsVersion:c.settingsVersion,defaultRecipeDemon:n[c.defaultRecipeDemon]||c.defaultRecipeDemon,elementRace:n[c.elementRace]||c.elementRace}}(r):r,h=new x.V(f.demonUnlocks,[]);super(new t(f,h.demonToggles),new C(f),h,f.settingsKey,f.settingsVersion),this.fissionCalculator=D.uC,this.fusionCalculator=D.YP,this.compConfig=f,this.appName=this.compConfig.appTitle+(0,a.y0)(O.e2.FusionCalculator,f.lang)}static#t=this.\u0275fac=function(l){return new(l||c)(S.LFG(D.I7),S.LFG(k.F0))};static#s=this.\u0275prov=S.Yz7({token:c,factory:c.\u0275fac})}return c})()},3495:(N,E,i)=>{i.d(E,{D:()=>C});var a=i(6814),e=i(6208),v=i(8325),t=i(6502),d=i(4769);let C=(()=>{class D{static forRoot(){return{ngModule:D}}static#t=this.\u0275fac=function(O){return new(O||D)};static#s=this.\u0275mod=d.oAB({type:D});static#e=this.\u0275inj=d.cJS({imports:[a.ez,e.m,v.SharedCompendiumModule,t.V]})}return D})()}}]);