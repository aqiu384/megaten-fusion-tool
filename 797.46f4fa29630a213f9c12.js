(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[797],{7967:(e,t,s)=>{"use strict";s.d(t,{R:()=>u});var n=s(5614),i=s(9624),a=s(3522),o=s(1116);function r(e,t){if(1&e&&(n.TgZ(0,"th"),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.xp6(1),n.Oqu(e.slice(0,4))}}const l=function(e,t){return[e,t]};function c(e,t){if(1&e&&(n.TgZ(0,"td",4),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("ngClass",n.WLB(2,l,e.slice(0,4),e.slice(4,8))),n.xp6(1),n.Oqu(e.slice(4,8))}}function m(e,t){if(1&e&&(n.TgZ(0,"tr"),n.TgZ(1,"th"),n._uU(2),n.qZA(),n.YNc(3,c,2,5,"td",3),n.TgZ(4,"th"),n._uU(5),n.qZA(),n.qZA()),2&e){const e=t.$implicit;n.xp6(2),n.Oqu(e[0]),n.xp6(1),n.Q6J("ngForOf",e.slice(1,e.length-1)),n.xp6(2),n.Oqu(e[e.length-1])}}function g(e,t){if(1&e&&(n.TgZ(0,"th"),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.xp6(1),n.Oqu(e.slice(0,4))}}function p(e,t){if(1&e&&(n.TgZ(0,"tr"),n.TgZ(1,"th",0),n._uU(2),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.uIk("colspan",e.table[0].length),n.xp6(1),n.AsE("",e.appName," - ",e.tripTitle,"")}}let u=(()=>{class e{constructor(e,t){this.title2=e,this.route=t,this.normTitle="Normal Fusions",this.tripTitle="",this.isPersona=!1,this.filterDarks=!0,this.subscriptions=[],this.table=[]}ngOnInit(){this.subscriptions.push(this.route.parent.data.subscribe(e=>{this.appName=e.appName||"Shin Megami Tensei",this.title2.setTitle(`Fusion Chart - ${this.appName} Fusion Calculator`)}))}ngOnChanges(){this.normChart&&this.fillFusionChart()}ngOnDestroy(){for(const e of this.subscriptions)e.unsubscribe()}fillFusionChart(){const e="None",t=this.normChart.elementDemons;let s=[],n=this.normChart.races,i=[];this.filterDarks&&(s=this.normChart.races.filter(e=>this.normChart.getLightDark(e)>0),n=this.normChart.races.filter(e=>0===this.normChart.getLightDark(e)),i=this.normChart.races.filter(e=>-1===this.normChart.getLightDark(e)),0===i.length&&s.length>0&&(s=this.normChart.races.filter(e=>this.normChart.getLightDark(e)>-1),n=[],i=this.normChart.races.filter(e=>this.normChart.getLightDark(e)<-1)));const a=s.length-i.length,o=s.concat(n,t),r=i.length?i.concat(Array(o.length-i.length).fill("")):o,l=this.mitaTable?o:s.concat(n,Array(t.length).fill("")),c=this.mitaTable||i.length?Array(a).fill("").concat(i,n,t):o;this.table=[[""].concat(o,[""])];for(let m=0;m<c.length;m++){const s=Array(o.length+2).fill("Empt-"),n=c[m],i=l[m],g=-1!==t.indexOf(n),p=-1!==t.indexOf(i);this.table.push(s),s[0]=n,s[s.length-1]=i;for(let a=m;a<o.length;a++){const n=o[a],r=-1!==t.indexOf(n);if(r&&p){const o=t.indexOf(i),r=t.indexOf(n);s[a+1]="mita"+(this.mitaTable[o][r-o-1]||e)}else if(r&&i){const e=this.normChart.getElemFusions(n)[i],t=e?e.toString():"";s[a+1]=e?(e>0?"ran"+t+"+":"ra"+t)+t:"rankNone"}else if(n&&i){const t=this.isPersona&&n===i?n:this.normChart.getRaceFusion(n,i);s[a+1]=(n===i?"elem":"norm")+(t||e)}}if(this.tripChart)for(let t=0;t<=m-a;t++){const i=r[t];if(i&&g){const e=this.tripChart.getElemFusions(n)[i],a=e?e.toString():"";s[t+1]=e?(e>0?"ran"+a+"+":"ra"+a)+a:"rankNone"}else if(i&&n){const a=this.tripChart.getRaceFusion(i,n);s[t+1]=(i===n?"elem":"trip")+(a||e)}}if(-1!==n.indexOf(" x ")){const[e,t]=n.split(" x "),i=e.slice(0,3)+"x"+t.slice(0,3);s[0]=i,s[s.length-1]=i}else if(-1!==n.indexOf(" ")){const e=n.split(" ")[0];s[0]=e,s[s.length-1]=e}}for(let m=0;m<this.table[0].length;m++){const e=this.table[0][m];if(-1!==e.indexOf(" x ")){const[t,s]=e.split(" x ");this.table[0][m]=t.slice(0,2)+s.slice(0,2)}}this.table.push([""].concat(r,[""]))}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(i.Dx),n.Y36(a.gz))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-fusion-chart"]],inputs:{normChart:"normChart",tripChart:"tripChart",mitaTable:"mitaTable",normTitle:"normTitle",tripTitle:"tripTitle",isPersona:"isPersona",filterDarks:"filterDarks",counter:"counter"},features:[n.TTD],decls:12,vars:7,consts:[[1,"title"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(e,t){1&e&&(n.TgZ(0,"table"),n.TgZ(1,"tbody"),n.TgZ(2,"tr"),n.TgZ(3,"th",0),n._uU(4),n.qZA(),n.qZA(),n.TgZ(5,"tr"),n.YNc(6,r,2,1,"th",1),n.qZA(),n.YNc(7,m,6,3,"tr",1),n.TgZ(8,"tr"),n.YNc(9,g,2,1,"th",1),n.qZA(),n.YNc(10,p,3,3,"tr",2),n.qZA(),n._UZ(11,"tbody"),n.qZA()),2&e&&(n.xp6(3),n.uIk("colspan",t.table[0].length),n.xp6(1),n.AsE("",t.appName," - ",t.normTitle,""),n.xp6(2),n.Q6J("ngForOf",t.table[0]),n.xp6(1),n.Q6J("ngForOf",t.table.slice(1,t.table.length-1)),n.xp6(2),n.Q6J("ngForOf",t.table[t.table.length-1]),n.xp6(1),n.Q6J("ngIf",t.tripTitle))},directives:[o.sg,o.O5,o.mk],styles:["table[_ngcontent-%COMP%]{width:auto;margin:0 auto}td.elem[_ngcontent-%COMP%]{color:#0f0}td.trip[_ngcontent-%COMP%]{color:#d3d3d3}td.ra-2[_ngcontent-%COMP%]{color:orange}td.ra-1[_ngcontent-%COMP%]{color:red}td.ran1[_ngcontent-%COMP%]{color:#0f0}td.ran2[_ngcontent-%COMP%]{color:#0ff}td.None[_ngcontent-%COMP%]{color:transparent}td.Ara[_ngcontent-%COMP%], td.Fien[_ngcontent-%COMP%], td.Flae[_ngcontent-%COMP%], td.Sala[_ngcontent-%COMP%]{color:red}td.Aqua[_ngcontent-%COMP%], td.Enig[_ngcontent-%COMP%], td.Nigi[_ngcontent-%COMP%], td.Undi[_ngcontent-%COMP%]{color:#0ff}td.Aero[_ngcontent-%COMP%], td.Kusi[_ngcontent-%COMP%], td.Sylp[_ngcontent-%COMP%], td.UMA[_ngcontent-%COMP%]{color:#0f0}td.Erth[_ngcontent-%COMP%], td.Gnom[_ngcontent-%COMP%], td.Rand[_ngcontent-%COMP%], td.Saki[_ngcontent-%COMP%]{color:orange}td.Empt[_ngcontent-%COMP%]{background-color:initial;color:transparent}"],changeDetection:0}),e})()},1792:(e,t,s)=>{"use strict";s.d(t,{V:()=>E});var n=s(3522),i=s(5614),a=s(8645),o=s(7089),r=s(1116);let l=(()=>{class e{constructor(e){this.appCssClasses=["smtnes","smt1"],this.appCssClasses=e.compConfig.appCssClasses}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(a.Y))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-smt1-compendium"]],decls:1,vars:2,consts:[[3,"ngClass","hasSettings"]],template:function(e,t){1&e&&i._UZ(0,"app-demon-compendium",0),2&e&&i.Q6J("ngClass",t.appCssClasses)("hasSettings",!1)},directives:[o.e,r.mk],styles:[".devilsum div.element-icon,.smtnes div.element-icon{height:12px;background-size:12px;background-repeat:no-repeat;background-position:50%;color:transparent}.smtnes div.element-icon.sword{background-image:url(/assets/images/smt4f/sword.png)}.smtnes div.element-icon.gun{background-image:url(/assets/images/smtsj/gun.png)}.smtnes div.element-icon.fire{background-image:url(/assets/images/smtsj/fir.png)}.smtnes div.element-icon.ice{background-image:url(/assets/images/smtsj/ice.png)}.smtnes div.element-icon.elec{background-image:url(/assets/images/smtsj/ele.png)}.smtnes div.element-icon.force{background-image:url(/assets/images/smtsj/win.png)}.smtnes div.element-icon.nerve{background-image:url(/assets/images/smt4f/panic.png)}.smtnes div.element-icon.almighty{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.expel{background-image:url(/assets/images/smtsj/exp.png)}.smtnes div.element-icon.death{background-image:url(/assets/images/smtsj/cur.png)}.smtnes div.element-icon.curse{background-image:url(/assets/images/smt4f/poison.png)}.smtnes div.element-icon.bind{background-image:url(/assets/images/smt4f/bind.png)}.smtnes div.element-icon.rush{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.punch{background-image:url(/assets/images/smt4f/sword.png)}.smtnes div.element-icon.kick{background-image:url(/assets/images/smtsj/gun.png)}.smtnes div.element-icon.flying{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.energy{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.recovery{background-image:url(/assets/images/smtsj/rec.png)}.smtnes div.element-icon.support{background-image:url(/assets/images/smtsj/sup.png)}.smtnes div.element-icon.special{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.attack{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.tech{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.slash{background-image:url(/assets/images/smt4f/sword.png)}.smtnes div.element-icon.charge{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.blunt{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.handgun{background-image:url(/assets/images/smtsj/gun.png)}.smtnes div.element-icon.penetrate{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.spread{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.mystic{background-image:url(/assets/images/smt4f/poison.png)}.smtnes div.element-icon.mind{background-image:url(/assets/images/smt4f/bind.png)}.smtnes div.element-icon.suicide{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.passive{background-image:url(/assets/images/smtsj/pas.png)}.smtnes div.element-icon.defend{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.phys{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.gro{background-image:url(/assets/images/smt4f/sword.png)}.smtnes div.element-icon.air{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.fir{background-image:url(/assets/images/smtsj/fir.png)}.smtnes div.element-icon.ele{background-image:url(/assets/images/smtsj/ele.png)}.smtnes div.element-icon.for{background-image:url(/assets/images/smtsj/win.png)}.smtnes div.element-icon.gig{background-image:url(/assets/images/smt4f/bind.png)}.smtnes div.element-icon.alm{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.lig{background-image:url(/assets/images/smtsj/exp.png)}.smtnes div.element-icon.dar{background-image:url(/assets/images/smtsj/cur.png)}.smtnes div.element-icon.phy{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.ail{background-image:url(/assets/images/smtsj/ail.png)}.smtnes div.element-icon.rec{background-image:url(/assets/images/smtsj/rec.png)}.smtnes div.element-icon.sup{background-image:url(/assets/images/smtsj/sup.png)}.smtnes div.element-icon.psy{background-image:url(/assets/images/smt4f/panic.png)}.smtnes div.element-icon.spear{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.thrown{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.ailment{background-image:url(/assets/images/smtsj/ail.png)}.smtnes div.element-icon.quad{background-image:url(/assets/images/smt4f/curse.png)}.smtnes div.element-icon.elem,.smtnes div.element-icon.none{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.strike{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.skill{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.temp{background-image:url(/assets/images/smt4f/smirk.png)}.smtnes div.element-icon.dark{background-image:url(/assets/images/smt4f/curse.png)}.smtnes div.element-icon.witch{background-image:url(/assets/images/smtsj/ail.png)}.smtnes div.element-icon.rea{background-image:url(/assets/images/smtsj/rec.png)}.smtnes div.element-icon.reb{background-image:url(/assets/images/smtsj/sup.png)}.smtnes div.element-icon.area,.smtnes div.element-icon.autorec,.smtnes div.element-icon.element,.smtnes div.element-icon.explore,.smtnes div.element-icon.hero,.smtnes div.element-icon.phase,.smtnes div.element-icon.plugin,.smtnes div.element-icon.self,.smtnes div.element-icon.starter,.smtnes div.element-icon.universe{background-image:url(/assets/images/smtsj/spe.png)}.smtnes td.align.dl,.smtnes td.align.ll,.smtnes td.align.nl{color:#0ff}.smtnes td.align.dc,.smtnes td.align.lc,.smtnes td.align.nc{color:tomato}.smtnes td.align.el{color:#0f0}.smtnes td.align.ec{color:gold}.smt1 th.nav.active,.smt1 th.nav.active a,.smt1 th.title{background-color:#608341;color:#fff}.smt2 th.nav.active,.smt2 th.nav.active a,.smt2 th.title{background-color:#2f4f4f;color:#fff}.smtif th.nav.active,.smtif th.nav.active a,.smtif th.title{background-color:#8fbc8f;color:#000}.dsum th.nav.active,.dsum th.nav.active a,.dsum th.title{background-color:#4372aa;color:#fff}.dssh th.nav.active,.dssh th.nav.active a,.dssh th.title{background-color:#302878;color:#fff}.mjn2 th.nav.active,.mjn2 th.nav.active a,.mjn2 th.title{background-color:#514f7e;color:#fff}.smt9 th.nav.active,.smt9 th.nav.active a,.smt9 th.title{background-color:#693cbe;color:#fff}.smtim th.nav.active,.smtim th.nav.active a,.smtim th.title{background-color:#009d96;color:#fff}"],encapsulation:2,changeDetection:0}),e})();var c=s(5438),m=s(9624),g=s(4008);let p=(()=>{class e extends c.l{constructor(e,t,s){super(e,t,s),this.appName=`List of Demons - ${s.appName}`,this.compConfig=s.compConfig,this.defaultSortFun=(e,t)=>200*(this.compConfig.raceOrder[e.race]-this.compConfig.raceOrder[t.race])+t.lvl-e.lvl}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(m.Dx),i.Y36(i.sBO),i.Y36(a.Y))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-demon-list-container"]],features:[i.qOj],decls:2,vars:7,consts:[[3,"raceOrder","statHeaders","resistHeaders","inheritOrder","rowData"]],template:function(e,t){1&e&&(i._UZ(0,"app-smt-demon-list",0),i.ALo(1,"async")),2&e&&i.Q6J("raceOrder",t.compConfig.raceOrder)("statHeaders",t.compConfig.baseStats)("resistHeaders",t.compConfig.resistElems)("inheritOrder",t.compConfig.elemOrder)("rowData",i.lcZ(1,5,t.demons))},directives:[g.Q],pipes:[r.Ov],encapsulation:2,changeDetection:0}),e})();var u=s(9261),h=s(3787);let d=(()=>{class e extends u.e{constructor(e,t,s){super(e,t,s),this.appName=`List of Skills - ${s.appName}`,this.compConfig=s.compConfig,this.defaultSortFun=(e,t)=>1e4*(this.compConfig.elemOrder[e.element]-this.compConfig.elemOrder[t.element])+e.rank-t.rank}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(m.Dx),i.Y36(i.sBO),i.Y36(a.Y))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-skill-list-container"]],features:[i.qOj],decls:2,vars:6,consts:[[3,"elemOrder","hasRank","hasTarget","rowData"]],template:function(e,t){1&e&&(i._UZ(0,"app-smt-skill-list",0),i.ALo(1,"async")),2&e&&i.Q6J("elemOrder",t.compConfig.elemOrder)("hasRank",!1)("hasTarget",!0)("rowData",i.lcZ(1,4,t.skills))},directives:[h.J],pipes:[r.Ov],encapsulation:2,changeDetection:0}),e})();var f=s(7967);function b(e,t){if(1&e&&(i.TgZ(0,"th"),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.Oqu(e.slice(0,4))}}function C(e,t){if(1&e&&(i.TgZ(0,"td"),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.Oqu(e.slice(0,4))}}function v(e,t){if(1&e&&(i.TgZ(0,"tr"),i.TgZ(1,"th"),i._uU(2),i.qZA(),i.YNc(3,C,2,1,"td",1),i.TgZ(4,"th"),i._uU(5),i.qZA(),i.qZA()),2&e){const e=t.$implicit;i.xp6(2),i.Oqu(e[0]),i.xp6(1),i.Q6J("ngForOf",e.slice(1,e.length-1)),i.xp6(2),i.Oqu(e[e.length-1])}}function k(e,t){if(1&e&&(i.TgZ(0,"th"),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.Oqu(e.slice(0,4))}}let O=(()=>{class e{constructor(){this.table=[]}ngOnChanges(){this.fillFusionChart()}fillFusionChart(){this.table=[];const e=this.speciesChart.races,t=[""].concat(e,[""]);this.table.push(t);for(let s=0;s<e.length;s++)for(let t=s+1;t<e.length;t++){const n="3"+e[s]+"|3"+e[t];this.table.push([e[s]].concat(e.map(e=>this.speciesChart.getRaceFusion("3"+e,n)),[e[t]]))}this.table.push(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-species-triple-chart"]],inputs:{speciesChart:"speciesChart",title:"title"},features:[i.TTD],decls:9,vars:5,consts:[[1,"title"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(i.TgZ(0,"table"),i.TgZ(1,"tr"),i.TgZ(2,"th",0),i._uU(3),i.qZA(),i.qZA(),i.TgZ(4,"tr"),i.YNc(5,b,2,1,"th",1),i.qZA(),i.YNc(6,v,6,3,"tr",1),i.TgZ(7,"tr"),i.YNc(8,k,2,1,"th",1),i.qZA(),i.qZA()),2&e&&(i.xp6(2),i.uIk("colspan",t.table[0].length),i.xp6(1),i.Oqu(t.title),i.xp6(2),i.Q6J("ngForOf",t.table[0]),i.xp6(1),i.Q6J("ngForOf",t.table.slice(1,t.table.length-1)),i.xp6(2),i.Q6J("ngForOf",t.table[t.table.length-1]))},directives:[r.sg],styles:["table[_ngcontent-%COMP%]{width:auto;margin:0 auto}td.elem[_ngcontent-%COMP%]{color:#0f0}td.trip[_ngcontent-%COMP%]{color:#d3d3d3}td.ra-2[_ngcontent-%COMP%]{color:orange}td.ra-1[_ngcontent-%COMP%]{color:red}td.ran1[_ngcontent-%COMP%]{color:#0f0}td.ran2[_ngcontent-%COMP%]{color:#0ff}td.None[_ngcontent-%COMP%]{color:#222}td.Ara[_ngcontent-%COMP%], td.Fien[_ngcontent-%COMP%], td.Flae[_ngcontent-%COMP%], td.Sala[_ngcontent-%COMP%]{color:red}td.Aqua[_ngcontent-%COMP%], td.Enig[_ngcontent-%COMP%], td.Nigi[_ngcontent-%COMP%], td.Undi[_ngcontent-%COMP%]{color:#0ff}td.Aero[_ngcontent-%COMP%], td.Kusi[_ngcontent-%COMP%], td.Sylp[_ngcontent-%COMP%], td.UMA[_ngcontent-%COMP%]{color:#0f0}td.Erth[_ngcontent-%COMP%], td.Gnom[_ngcontent-%COMP%], td.Rand[_ngcontent-%COMP%], td.Saki[_ngcontent-%COMP%]{color:orange}td.Empt[_ngcontent-%COMP%]{background-color:#000;color:transparent}"],changeDetection:0}),e})();function D(e,t){if(1&e&&(i.ynx(0),i._UZ(1,"app-fusion-chart",1),i._UZ(2,"app-fusion-chart",1),i.BQk()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("normChart",e.normChart)("tripChart",e.normChart)("mitaTable",e.mitamaTable)("normTitle","Light and Neutral Normal Fusions")("tripTitle","Dark Normal Fusions"),i.xp6(1),i.Q6J("normChart",e.tripChart)("tripChart",e.tripChart)("mitaTable",e.tripleMitamaTable)("normTitle","Light and Neutral Triple Fusions")("tripTitle","Dark Triple Fusions")}}function T(e,t){if(1&e&&(i.ynx(0),i._UZ(1,"app-fusion-chart",2),i._UZ(2,"app-species-triple-chart",3),i.BQk()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("normChart",e.fullChart)("mitaTable",e.mitamaTable)("filterDarks",!1)("normTitle","Normal Fusions"),i.xp6(1),i.Q6J("speciesChart",e.tripChart)("title",e.appName+" - Triple Fusions")}}function x(e,t){if(1&e&&(i.ynx(0),i._UZ(1,"app-fusion-chart",1),i._UZ(2,"app-species-triple-chart",3),i.BQk()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("normChart",e.fullChart)("tripChart",e.fullChart)("mitaTable",e.mitamaTable)("normTitle","Light and Neutral Normal Fusions")("tripTitle","Dark Normal Fusions"),i.xp6(1),i.Q6J("speciesChart",e.tripChart)("title",e.appName+" - Triple Fusions")}}let _=(()=>{class e{constructor(e){this.fusionDataService=e,this.subscriptions=[]}ngOnInit(){const e=this.fusionDataService.compConfig;this.appName=e.appTitle,this.mitamaTable=e.mitamaTable,this.tripleMitamaTable=e.tripleMitamaTable,this.hasDarkRanks=e.darknessRecipes,this.fusionDataService.compConfig.useSpeciesFusion&&this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(e=>{this.fullChart=e})),this.subscriptions.push(this.fusionDataService.squareChart.subscribe(e=>{this.normChart=e.normalChart,this.tripChart=e.tripleChart}))}ngOnDestroy(){for(const e of this.subscriptions)e.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(a.Y))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-fusion-chart-container"]],decls:3,vars:3,consts:[[4,"ngIf"],[3,"normChart","tripChart","mitaTable","normTitle","tripTitle"],[3,"normChart","mitaTable","filterDarks","normTitle"],[3,"speciesChart","title"]],template:function(e,t){1&e&&(i.YNc(0,D,3,10,"ng-container",0),i.YNc(1,T,3,6,"ng-container",0),i.YNc(2,x,3,7,"ng-container",0)),2&e&&(i.Q6J("ngIf",!t.fullChart),i.xp6(1),i.Q6J("ngIf",t.fullChart&&!t.hasDarkRanks),i.xp6(1),i.Q6J("ngIf",t.fullChart&&t.hasDarkRanks))},directives:[r.O5,f.R,O],encapsulation:2,changeDetection:0}),e})();var M=s(2573),F=s(858),Z=s(4209),j=s(4354),y=s(4897),L=s(3966);function A(e,t){if(1&e&&i._UZ(0,"app-demon-stats",8),2&e){const e=i.oxw(2);i.Q6J("title","Attacks")("statHeaders",e.compConfig.baseAtks)("stats",e.demon.atks)}}function N(e,t){if(1&e&&i._UZ(0,"app-demon-skills",5),2&e){const e=i.oxw(2);i.Q6J("title","Inheritable Skills")("hasTarget",!0)("hasLvl",!1)("elemOrder",e.compConfig.elemOrder)("compendium",e.compendium)("skillLevels",e.compConfig.inheritSkills[e.demon.inherit])}}const P=function(){return["Drop"]};function w(e,t){if(1&e&&(i.ynx(0),i.TgZ(1,"app-demon-stats",2),i.TgZ(2,"td"),i._uU(3),i.qZA(),i.qZA(),i.YNc(4,A,1,3,"app-demon-stats",3),i._UZ(5,"app-demon-resists",4),i._UZ(6,"app-demon-skills",5),i.YNc(7,N,1,6,"app-demon-skills",6),i._UZ(8,"app-smt-fusions",7),i.BQk()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("title","Lvl "+e.demon.lvl+" "+e.demon.race+" "+e.demon.name)("price",e.demon.price)("statHeaders",e.compConfig.baseStats)("fusionHeaders",i.DdM(18,P))("stats",e.demon.stats)("inherit",e.demon.inherit),i.xp6(2),i.Oqu(e.demon.drop),i.xp6(1),i.Q6J("ngIf",e.compConfig.baseAtks.length),i.xp6(1),i.Q6J("resistHeaders",e.compConfig.resistElems)("resists",e.demon.resists),i.xp6(1),i.Q6J("title","Innate Skills")("hasTarget",!0)("hasLvl",!1)("elemOrder",e.compConfig.elemOrder)("compendium",e.compendium)("skillLevels",e.demon.skills),i.xp6(1),i.Q6J("ngIf",e.compConfig.inheritSkills),i.xp6(1),i.Q6J("hasTripleFusion",!0)}}function q(e,t){if(1&e&&i._UZ(0,"app-demon-missing",9),2&e){const e=i.oxw();i.Q6J("name",e.name)}}let S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"title","price","statHeaders","fusionHeaders","stats","inherit"],[3,"title","statHeaders","stats",4,"ngIf"],[3,"resistHeaders","resists"],[3,"title","hasTarget","hasLvl","elemOrder","compendium","skillLevels"],[3,"title","hasTarget","hasLvl","elemOrder","compendium","skillLevels",4,"ngIf"],[3,"hasTripleFusion"],[3,"title","statHeaders","stats"],[3,"name"]],template:function(e,t){1&e&&(i.YNc(0,w,9,19,"ng-container",0),i.YNc(1,q,1,1,"app-demon-missing",1)),2&e&&(i.Q6J("ngIf",t.demon),i.xp6(1),i.Q6J("ngIf",!t.demon))},directives:[r.O5,M.O,F.I,Z.n,j.O,y.t],encapsulation:2,changeDetection:0}),e})(),R=(()=>{class e{constructor(e,t,s,n){this.route=e,this.title=t,this.currentDemonService=s,this.fusionDataService=n,this.subscriptions=[],this.appName="Test App",this.appName=n.appName,this.compConfig=n.compConfig}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const e of this.subscriptions)e.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(e=>{this.compendium=e,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(e=>{this.name=e,this.getDemonEntry()})),this.route.params.subscribe(e=>{this.currentDemonService.nextCurrentDemon(e.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(`${this.name} - ${this.appName}`),this.demon=this.compendium.getDemon(this.name))}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(n.gz),i.Y36(m.Dx),i.Y36(L.s),i.Y36(a.Y))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-demon-entry-container"]],decls:1,vars:4,consts:[[3,"name","demon","compConfig","compendium"]],template:function(e,t){1&e&&i._UZ(0,"app-demon-entry",0),2&e&&i.Q6J("name",t.name)("demon",t.demon)("compConfig",t.compConfig)("compendium",t.compendium)},directives:[S],encapsulation:2,changeDetection:0}),e})();var I=s(5946),J=s(2060),Q=s(6926),Y=s(6100);const U=[{path:"",redirectTo:"demons",pathMatch:"full"},{path:"",component:l,data:{fusionTool:"chart"},children:[{path:"chart",component:_}]},{path:"",component:l,children:[{path:"demons/:demonName",component:R,children:[{path:"fissions/triple",component:Q.p},{path:"fusions/triple",component:Y.n},{path:"fissions",component:I.t},{path:"fusions",component:J.$},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"demons",component:p},{path:"skills",component:d}]},{path:"**",redirectTo:"demons",pathMatch:"full"}];let E=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[n.Bz.forChild(U)],n.Bz]}),e})()},8645:(e,t,s)=>{"use strict";s.d(t,{Y:()=>_});var n=s(8512);class i{constructor(e){this.pairRecipes={},this.dlcDemons={},this.initImportedData(e),this.updateDerivedData(e)}initImportedData(e){const t={},s={},n={},i={},a=e.baseStats.length,o=e.resistElems.length;for(const[r,l]of Object.entries(e.demonData)){const s="Shin Megami Tensei IMAGINE"!==e.appTitle?l.skills.reduce((e,t,s)=>(t&&(e[t.replace("*","")]=s-8),e),{}):l.skills;t[r]={name:r,race:l.race,lvl:l.lvl,currLvl:l.lvl,fusion:"normal",inherit:l.inherit||"special",drop:l.drop||"-",price:Math.pow(l.lvl,3),stats:l.stats.slice(0,a),atks:l.atks||[],resists:l.resists.substring(0,o).split("").map(t=>e.resistCodes[t]),align:l.align||e.alignData.races[l.race],skills:s}}for(const[r,l]of Object.entries(e.skillData)){const e="recovery"===l.element?" Rec ":" Dmg ";s[r]={name:r,element:l.element,power:l.power||0,cost:l.cost||0,rank:(l.enemy?99:0)+(l.cost/1e3||0),effect:(l.power?l.power.toString()+e:" ")+(l.effect||""),target:l.target,level:0,learnedBy:[]}}for(const[r,l]of Object.entries(t))for(const[e,t]of Object.entries(l.skills))s[e].learnedBy.push({demon:r,level:t});if(e.specialRecipes)for(const[r,l]of Object.entries(e.specialRecipes))t[r].fusion=l.fusion||"special",l.prereq&&(t[r].prereq=l.prereq),l.special&&(n[r]=l.special),l.pairs&&(i[r]=l.pairs.map(e=>{const[t,s]=e.split(" x ");return{name1:t,name2:s}}));this.demons=t,this.skills=s,this.elementDemons=e.elementTable.elems,this.specialRecipes=n,this.pairRecipes=i}updateDerivedData(e){const t={},s={},n={};for(const i of e.races)t[i]={},s[i]=[],n[i]=[];for(const[i,a]of Object.entries(this.demons))t[a.race][a.lvl]=i,s[a.race].push(a.lvl),"normal"===a.fusion&&n[a.race].push(a.lvl);for(const[i,a]of Object.entries(e.species)){const o="3"+i;t[i]={},s[i]=[],n[i]=[],t[o]={},s[o]=[],n[o]=[];for(let r=a.length;r>0;r--){const l=a[r-1];let c=a.length-r;"d"==e.alignData.races[l].charAt(0)?c-=400:(Object.assign(t[i],t[l]),s[i]=s[i].concat(s[l]),n[i]=n[i].concat(n[l]));for(const[e,i]of Object.entries(t[l])){const a=(100*parseInt(e)+c)/100;t[o][a]=i.toString(),s[o].push(a),n[o].push(a)}}}for(const i of Object.keys(s))s[i].sort((e,t)=>e-t),n[i].sort((e,t)=>e-t);this._allDemons=Object.values(this.demons),this._allSkills=Object.values(this.skills),this.invertedDemons=t,this.allIngredients=s,this.allResults=n}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return Object.keys(this.specialRecipes).map(e=>this.demons[e])}getDemon(e){return this.demons[e]}getSkill(e){return this.skills[e]}getSkills(e){const t=e.map(e=>this.skills[e]);return t.sort((e,t)=>1e4*(this.compConfig.elemOrder[e.element]-this.compConfig.elemOrder[t.element])+e.rank-t.rank),t}getIngredientDemonLvls(e){return this.allIngredients[e]||[]}getResultDemonLvls(e){return this.allResults[e]||[]}getSpecialNameEntries(e){return this.specialRecipes[e]||[]}getSpecialNamePairs(e){return this.pairRecipes[e]||[]}reverseLookupDemon(e,t){return this.invertedDemons[e][t]}reverseLookupSpecial(e){return[]}isElementDemon(e){return-1!==this.elementDemons.indexOf(e)}}var a=s(6829);class o extends a.g{constructor(e,t){super(),this.elementDemons=[],this.lvlModifier=1.5,this.hasDarkTable=!1,this.initCharts(e,t)}initCharts(e,t){this.alignments=e.alignData.races,this.speciesLookup=e.speciesLookup,this.elementDemons=t?e.tripleElementTable.elems:e.elementTable.elems;const s=t?e.tripleTable.races:e.normalTable.races,n=t?e.tripleTable.table:e.normalTable.table,i=a.g.loadFusionTableJson(s,n),o=a.g.loadFissionTableJson(s,[],n);if(this.lvlModifier=t?e.tripleLvlModifier:e.normalLvlModifier,e.darkTable){this.hasDarkTable=!0;const n=t&&e.tripleDarkTable?e.tripleDarkTable.races:e.darkTable.races,r=t&&e.tripleDarkTable?e.tripleDarkTable.table:e.darkTable.table,l=a.g.loadFusionTableJson(n,r),c=a.g.loadFissionTableJson(n,[],r);this.races=s.concat(n.filter(e=>this.getLightDark(e)<0)),this.fusionChart=a.g.mergeFusionTables(i,l),this.fissionChart=a.g.mergeFissionTables(o,c)}else this.races=s,this.fusionChart=i,this.fissionChart=o;if(e.darknessRecipes)for(const[a,r]of Object.entries(e.darknessRecipes)){const e=r;this.fusionChart[a]={},this.fusionChart[a][a]=e,this.fissionChart[e]={},this.fissionChart[e][a]=[a],this.races.includes(a)||this.races.push(a)}if(e.useSpeciesFusion)for(const a of this.races){const e=this.getRaceFissions(a);for(const[t,s]of Object.entries(this.getRaceFissions(this.speciesLookup[a]))){e[t]||(e[t]=[]);for(const n of s)e[t].push(n)}}this.elementChart=a.g.loadElementTableJson(e.elementTable.races,this.elementDemons,t?e.tripleElementTable.table:e.elementTable.table)}getLightDark(e){return"l"==this.alignments[e].charAt(0)?1:"d"==this.alignments[e].charAt(0)?-1:"D"==this.alignments[e].charAt(0)?-2:0}getRaceFissions(e){return this.fissionChart[e]||{}}getRaceFusions(e){return this.fusionChart[e]||{}}getRaceFusion(e,t){return this.getRaceFusions(e)[t]||""}}class r{constructor(e){this.lvlModifier=7.5,this.elementDemons=[],this.initCharts(e)}initCharts(e){const t=e.tripleTable.races,s=e.tripleTable.table,n=t.map(e=>"3"+e);this.speciesLookup=e.speciesLookup,this.fissionChart={},this.fusionChart={},this.races=t;for(const a of n)this.fusionChart[a]={};let i=-1;for(let a=0;a<n.length;a++)for(let e=a+1;e<n.length;e++){const t=n[a],o=n[e],r=t+"|"+o;i+=1,this.fissionChart[r]={},this.fusionChart[r]={},this.fissionChart[r][t]=[o],this.fusionChart[t][o]=r,this.fusionChart[o][t]=r;for(let e=0;e<n.length;e++){const t=n[e],a=s[i][e];this.fissionChart[a]||(this.fissionChart[a]={}),this.fissionChart[a][r]=[t],this.fusionChart[r][t]=a,this.fusionChart[t][r]=a}}}getRaceFissions(e){return this.fissionChart[e]||{}}getRaceFusions(e){const t=this.speciesLookup[e];return t?this.fusionChart["3"+t]||{}:this.fusionChart[e]||{}}getRaceFusion(e,t){return this.getRaceFusions(e)[t]||""}getLightDark(e){return 0}getElemModifiers(e){return{}}getElemFusions(e){return{}}isConvertedRace(e){return!1}}var l=s(4693),c=s(3152),m=s(115),g=s(3613),p=s(4809);const u=["Deity","Megami","Fury","Lady"],h=["Vile","Tyrant","Reaper"],d=["Entity","Zealot"];function f(e,t,s){const n=[],{race:i,lvl:a}=t.getDemon(e),o=2*(s.lvlModifier-3),r=t.getResultDemonLvls(i),l=r.indexOf(a);if(-1===d.indexOf(i)||-1===l)return n;const c=r[l-1]?2*r[l-1]-o:0,m=r[l+1]?2*a-o:200;for(const g of u)for(const e of t.getIngredientDemonLvls(g)){const s=t.reverseLookupDemon(g,e),i=c-e,a=m-e;for(const e of h)for(const o of t.getIngredientDemonLvls(e)){const r=t.reverseLookupDemon(e,o);i<o&&o<=a&&n.push({name1:s,name2:r})}}return n}function b(e,t,s){const n=[],{race:i,lvl:a}=t.getDemon(e),o=3*(s.tripleChart.lvlModifier-1),r=t.getResultDemonLvls(i),l=r.indexOf(a);if(-1===d.indexOf(i)||-1===l)return n;const c=r[l-1]?3*r[l-1]-o:0,m=3*a-o;for(const g of u)for(const e of t.getIngredientDemonLvls(g)){const s=t.reverseLookupDemon(g,e),i=c-e,a=m-e;for(const e of h)for(const o of t.getIngredientDemonLvls(e)){const r=t.reverseLookupDemon(e,o),l=i-o,c=a-o;for(const e of u)for(const i of t.getIngredientDemonLvls(e)){const a=t.reverseLookupDemon(e,i);l<i&&i<=c&&s.localeCompare(a)<0&&n.push({name1:s,name2:r,name3:a})}for(const e of h)for(const i of t.getIngredientDemonLvls(e)){const a=t.reverseLookupDemon(e,i);l<i&&i<=c&&r.localeCompare(a)<0&&n.push({name1:s,name2:r,name3:a})}}}return n}var C=s(6149);function v(e,t,s){const{normalChart:n,tripleChart:i,raceOrder:a}=s,o=[];for(const r of Object.keys(i.getRaceFissions(e)))for(const e of t.getIngredientDemonLvls(r)){const s=t.reverseLookupDemon(r,e);for(const[i,l]of Object.entries(n.getRaceFissions(r)))for(const n of t.getIngredientDemonLvls(i))if(e>n||e===n&&a[r]<a[i]){const c=t.reverseLookupDemon(i,n);for(const n of l)for(const i of t.getIngredientDemonLvls(n))if(e>i||e===i&&a[r]<a[n]){const e=t.reverseLookupDemon(n,i);o.push({name1:s,name2:c,name3:e})}}}return o}function k(e,t,s){const{tripleChart:n}=s,i=[];for(const a of Object.keys(n.getRaceFissions(e))){const e=t.getIngredientDemonLvls(a);for(let s=0;s<e.length;s++){const n=t.reverseLookupDemon(a,e[s]);for(let o=s+1;o<e.length;o++){const s=t.reverseLookupDemon(a,e[o]);for(let r=o+1;r<e.length;r++){const o=t.reverseLookupDemon(a,e[r]);i.push({name1:n,name2:s,name3:o})}}}}return i}var O=s(4351);function D(e,t,s){const n=s.tripleChart.elementDemons.filter(t=>t.indexOf(e)>-1);let i=[];for(const a of n){const n=a.replace(e,"").replace(" x ",""),o=(0,O.Eh)(a,t,s.tripleChart).concat((0,O.s0)(a,t,s.tripleChart));i=i.concat(o.map(e=>({name1:n,name2:e.name1,name3:e.name2})))}return i}var T=s(8847),x=s(5614);let _=(()=>{class e{constructor(e){this.fusionCalculator=m.YP,this.fissionCalculator=m.uC,this.triFusionCalculator=new c.e([T.UN,T.jm],[]),this.triFissionCalculator=new c.e([C.Mg],[]),this.compConfig=e,this.appName=e.appTitle+" Fusion Calculator",this.compendium=new n.X(new i(e)).asObservable();const t=new o(e);let s,a;e.useSpeciesFusion?(s=new r(e),a=s):(s=t,a=new o(e,!0)),this.fusionChart=new n.X(new o(e)).asObservable(),this.squareChart=new n.X({normalChart:s,tripleChart:a,raceOrder:e.raceOrder}).asObservable(),e.darknessRecipes&&(this.fusionCalculator=m.Q0,this.fissionCalculator=m.oA),e.tripleElementTable&&(this.triFissionCalculator=new c.e([C.Mg,C.D4],[])),-1!==e.appTitle.indexOf("Soul Hackers")&&(this.fissionCalculator=new l.N([g.M,g.A,f],[p.Q]),this.triFusionCalculator=new c.e([T.UN,T.jm,T.e7,T.Hd],[D]),this.triFissionCalculator=new c.e([C.Mg,C.D4,b],[v,k]))}nextDlcDemons(e){return{}}}return e.\u0275fac=function(t){return new(t||e)(x.LFG(m.I7))},e.\u0275prov=x.Yz7({token:e,factory:e.\u0275fac}),e})()},1797:(e,t,s)=>{"use strict";s.d(t,{p:()=>l});var n=s(1116),i=s(5425),a=s(6487),o=s(1792),r=s(5614);let l=(()=>{class e{static forRoot(){return{ngModule:e}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[n.ez,i.m,a.a,o.V]]}),e})()}}]);