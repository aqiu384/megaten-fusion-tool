"use strict";(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[814],{755:(M,A,m)=>{m.d(A,{n:()=>d});var t=m(4769),i=m(6814),a=m(3934);function O(s,e){1&s&&(t.TgZ(0,"th"),t._uU(1,"Target"),t.qZA())}function k(s,e){1&s&&(t.TgZ(0,"th"),t._uU(1,"Rank"),t.qZA())}function E(s,e){1&s&&(t.TgZ(0,"th"),t._uU(1,"Inherit"),t.qZA())}function D(s,e){1&s&&(t.TgZ(0,"th"),t._uU(1,"Level"),t.qZA())}const b=function(s,e){return{extra:s,unique:e}};function T(s,e){if(1&s&&t._UZ(0,"tr",4),2&s){const n=e.$implicit,o=t.oxw();t.Q6J("hasTarget",o.hasTarget)("hasRank",o.hasRank)("hasInherit",o.hasInherit)("hasLearned",!1)("hasLvl",o.hasLvl)("skillLvl",n.level)("data",n)("ngClass",t.WLB(8,b,n.rank>70&&n.rank<90,n.rank>90))}}function c(s,e){if(1&s&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA()()),2&s){const n=t.oxw();t.xp6(1),t.uIk("colspan",n.skillHeaderLen),t.xp6(1),t.hij("No ",n.title," Found")}}let d=(()=>{var s;class e{constructor(){this.title="Learned Skills",this.hasInherit=!1,this.hasTarget=!1,this.hasRank=!1,this.hasLvl=!0,this.skillHeaderLen=5}ngOnInit(){this.nextColIndices()}ngOnChanges(){this.nextSkills()}nextColIndices(){this.hasInherit&&(this.skillHeaderLen+=1),this.hasTarget&&(this.skillHeaderLen+=1),this.hasRank&&(this.skillHeaderLen+=1)}nextSkills(){this.skills=Object.keys(this.skillLevels).map(o=>this.compendium.getSkill(o));for(const o of this.skills)o.level=this.skillLevels[o.name];this.elemOrder&&this.skills.sort((o,u)=>200*(o.level-u.level)+this.elemOrder[o.element]-this.elemOrder[u.element])}}return(s=e).\u0275fac=function(o){return new(o||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-demon-skills"]],inputs:{title:"title",hasInherit:"hasInherit",hasTarget:"hasTarget",hasRank:"hasRank",hasLvl:"hasLvl",compendium:"compendium",elemOrder:"elemOrder",skillLevels:"skillLevels"},features:[t.TTD],decls:22,vars:8,consts:[[1,"entry-table"],[1,"title"],[4,"ngIf"],["class","app-smt-skill-list-row",3,"hasTarget","hasRank","hasInherit","hasLearned","hasLvl","skillLvl","data","ngClass",4,"ngFor","ngForOf"],[1,"app-smt-skill-list-row",3,"hasTarget","hasRank","hasInherit","hasLearned","hasLvl","skillLvl","data","ngClass"]],template:function(o,u){1&o&&(t.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),t._uU(4),t.qZA()(),t.TgZ(5,"tr")(6,"th"),t._uU(7,"Elem"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Name"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Cost"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Effect"),t.qZA(),t.YNc(14,O,2,0,"th",2),t.YNc(15,k,2,0,"th",2),t.YNc(16,E,2,0,"th",2),t.YNc(17,D,2,0,"th",2),t.qZA()(),t.TgZ(18,"tbody"),t.YNc(19,T,1,11,"tr",3),t.YNc(20,c,3,2,"tr",2),t._UZ(21,"tr"),t.qZA()()),2&o&&(t.xp6(3),t.uIk("colSpan",u.skillHeaderLen),t.xp6(1),t.Oqu(u.title),t.xp6(10),t.Q6J("ngIf",u.hasTarget),t.xp6(1),t.Q6J("ngIf",u.hasRank),t.xp6(1),t.Q6J("ngIf",u.hasInherit),t.xp6(1),t.Q6J("ngIf",u.hasLvl),t.xp6(2),t.Q6J("ngForOf",u.skills),t.xp6(1),t.Q6J("ngIf",!u.skills.length))},dependencies:[i.mk,i.sg,i.O5,a.W],encapsulation:2,changeDetection:0}),e})()},8520:(M,A,m)=>{m.d(A,{O:()=>s});var t=m(4769),i=m(6814);function a(e,n){if(1&e&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Oqu(o.title)}}function O(e,n){if(1&e&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Oqu(o.langEn?"Price":"\u4fa1\u683c")}}function k(e,n){if(1&e&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o)}}function E(e,n){1&e&&(t.TgZ(0,"th"),t._uU(1,"Inherits"),t.qZA())}function D(e,n){if(1&e&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o)}}function b(e,n){if(1&e&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Oqu(o.price)}}function T(e,n){if(1&e&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o)}}function c(e,n){if(1&e&&(t.TgZ(0,"td")(1,"div"),t._uU(2),t.qZA()()),2&e){const o=t.oxw();t.xp6(1),t.Gre("element-icon i",o.inherits,""),t.xp6(1),t.Oqu(o.inherits)}}const d=["*"];let s=(()=>{var e;class n{constructor(){this.title="Demon Entry",this.statHeaders=[],this.stats=[],this.fusionHeaders=[],this.price=0,this.langEn=!0}}return(e=n).\u0275fac=function(u){return new(u||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-demon-stats"]],inputs:{title:"title",statHeaders:"statHeaders",stats:"stats",fusionHeaders:"fusionHeaders",inherits:"inherits",price:"price",langEn:"langEn"},ngContentSelectors:d,decls:19,vars:10,consts:[[4,"ngIf"],[1,"entry-table"],[1,"title"],[4,"ngFor","ngForOf"]],template:function(u,h){1&u&&(t.F$t(),t.ynx(0),t.YNc(1,a,2,1,"h2",0),t.TgZ(2,"table",1)(3,"thead")(4,"tr")(5,"th",2),t._uU(6),t.qZA()(),t.TgZ(7,"tr"),t.YNc(8,O,2,1,"th",0),t.YNc(9,k,2,1,"th",3),t.YNc(10,E,2,0,"th",0),t.YNc(11,D,2,1,"th",3),t.qZA()(),t.TgZ(12,"tbody")(13,"tr"),t.YNc(14,b,2,1,"td",0),t.YNc(15,T,2,1,"td",3),t.YNc(16,c,3,4,"td",0),t.Hsn(17),t.qZA()()(),t.GkF(18),t.BQk()),2&u&&(t.xp6(1),t.Q6J("ngIf",h.title.includes("Lvl")),t.xp6(4),t.uIk("colSpan",h.stats.length+h.fusionHeaders.length+(h.inherits?1:0)+(h.price?1:0)),t.xp6(1),t.hij(" ",h.title.includes("Lvl")?h.langEn?"Stats":"\u30b9\u30c6\u30fc\u30bf\u30b9":h.title," "),t.xp6(2),t.Q6J("ngIf",h.price),t.xp6(1),t.Q6J("ngForOf",h.statHeaders),t.xp6(1),t.Q6J("ngIf",h.inherits),t.xp6(1),t.Q6J("ngForOf",h.fusionHeaders),t.xp6(3),t.Q6J("ngIf",h.price),t.xp6(1),t.Q6J("ngForOf",h.stats),t.xp6(1),t.Q6J("ngIf",h.inherits))},dependencies:[i.sg,i.O5],encapsulation:2,changeDetection:0}),n})()},8615:(M,A,m)=>{m.d(A,{R:()=>d});var k,t=m(4769),i=m(6593),a=m(4487),O=m(6814);function E(s,e){if(1&s&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&s){const n=e.$implicit,o=t.oxw();t.xp6(1),t.Oqu(n.slice(0,o.nameCut))}}function D(s,e){if(1&s&&(t.TgZ(0,"td",4),t._uU(1),t.qZA()),2&s){const n=e.$implicit,o=t.oxw(2);t.Q6J("ngClass",n.slice(0,4)),t.xp6(1),t.Oqu(n.slice(4,o.nameCut+4))}}function b(s,e){if(1&s&&(t.TgZ(0,"tr")(1,"th"),t._uU(2),t.qZA(),t.YNc(3,D,2,2,"td",3),t.TgZ(4,"th"),t._uU(5),t.qZA()()),2&s){const n=e.$implicit;t.xp6(2),t.Oqu(n[0]),t.xp6(1),t.Q6J("ngForOf",n.slice(1,n.length-1)),t.xp6(2),t.Oqu(n[n.length-1])}}function T(s,e){if(1&s&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&s){const n=e.$implicit,o=t.oxw();t.xp6(1),t.Oqu(n.slice(0,o.nameCut))}}function c(s,e){if(1&s&&(t.TgZ(0,"tr")(1,"th",0),t._uU(2),t.qZA()()),2&s){const n=t.oxw();t.xp6(1),t.uIk("colspan",n.table[0].length),t.xp6(1),t.AsE("",n.appName," ",n.tripTitle,"")}}class d{constructor(e,n){this.title2=e,this.route=n,this.normTitle="Normal Fusions",this.tripTitle="",this.isPersona=!1,this.filterDarks=!0,this.langEn=!0,this.subscriptions=[],this.table=[],this.nameCut=4}ngOnInit(){this.subscriptions.push(this.route.parent.data.subscribe(e=>{this.appName=e.appName||"Shin Megami Tensei",this.nameCut=this.langEn?4:2,this.title2.setTitle(this.langEn?`Fusion Chart - ${this.appName} Fusion Calculator`:`\u5408\u4f53\u8868 ${this.appName} \u5408\u4f53\u30a2\u30d7\u30ea`)}))}ngOnChanges(){this.normChart&&this.fillFusionChart()}ngOnDestroy(){for(const e of this.subscriptions)e.unsubscribe()}fillFusionChart(){const e="noneNone",o=d.RESULT_COLORS.reduce((_,[v,x])=>x.reduce((F,P)=>(F[P]=v,F),_),{}),u=this.normChart.elementDemons;let h=[],f=this.normChart.races,L=[];this.filterDarks&&(h=this.normChart.races.filter(_=>this.normChart.getLightDark(_)>0),f=this.normChart.races.filter(_=>0===this.normChart.getLightDark(_)),L=this.normChart.races.filter(_=>-1===this.normChart.getLightDark(_)),0===L.length&&h.length>0&&(h=this.normChart.races.filter(_=>this.normChart.getLightDark(_)>-1),f=[],L=this.normChart.races.filter(_=>this.normChart.getLightDark(_)<-1)));const R=h.length-L.length,y=h.concat(f,u),I=L.length?L.concat(Array(y.length-L.length).fill("")):y,N=this.mitaTable?y:h.concat(f,Array(u.length).fill("")),U=this.mitaTable||L.length?Array(R).fill("").concat(L,f,u):y;this.table=[[""].concat(y,[""])];for(let _=0;_<U.length;_++){const v=Array(y.length+2).fill("empt-"),x=U[_],F=N[_],P=-1!==u.indexOf(x),J=-1!==u.indexOf(F);this.table.push(v),v[0]=x,v[v.length-1]=F;for(let r=_;r<y.length;r++){const g=y[r],p=-1!==u.indexOf(g);if(p&&J){const l=u.indexOf(F),C=u.indexOf(g),Z=this.mitaTable[l][C-l-1];v[r+1]=Z?(o[Z]||"norm")+Z:e}else if(p&&F){const l=this.normChart.getElemFusions(g)[F];v[r+1]=l?(o[l]||"rank")+(l>0?"+":"")+l.toString():e}else if(g&&F){const l=this.isPersona&&g===F?g:this.normChart.getRaceFusion(g,F);v[r+1]=l?(o[l]||(g===F?"elem":"norm"))+l:e}}if(this.tripChart)for(let r=0;r<=_-R;r++){const g=I[r];if(g&&P){const p=this.tripChart.getElemFusions(x)[g];v[r+1]=p?(o[p]||"rank")+(p>0?"+":"")+p.toString():e}else if(g&&x){const p=this.tripChart.getRaceFusion(g,x);v[r+1]=p?(o[p]||(g===x?"elem":"trip"))+p:e}}if(-1!==x.indexOf(" x ")){const[r,g]=x.split(" x "),p=r.slice(0,3)+"x"+g.slice(0,3);v[0]=p,v[v.length-1]=p}else if(-1!==x.indexOf(" ")){const r=x.split(" ")[0];v[0]=r,v[v.length-1]=r}}for(let _=0;_<this.table[0].length;_++){const v=this.table[0][_];if(-1!==v.indexOf(" x ")){const[x,F]=v.split(" x ");this.table[0][_]=x.slice(0,2)+F.slice(0,2)}}this.table.push([""].concat(I,[""]))}}(k=d).RESULT_COLORS=Object.entries({oran:["-2","Erthys","Gnome","Saki","Saki Mitama","Random","\u30a2\u30fc\u30b7\u30fc\u30ba","\u30ce\u30fc\u30e0","\u30b5\u30ad\u30df\u30bf\u30de"],redd:["-1","Flaemis","Salamander","Ara ","Ara Mitama","Fiend","\u30d5\u30ec\u30a4\u30df\u30fc\u30ba","\u30b5\u30e9\u30de\u30f3\u30c0\u30fc","\u30a2\u30e9\u30df\u30bf\u30de"],gree:["1","Aeros","Sylph","Kusi","Kusi Mitama","UMA","\u30a8\u30a2\u30ed\u30b9","\u30b7\u30eb\u30ad\u30fc","\u30af\u30b7\u30df\u30bf\u30de"],blue:["2","Aquans","Undine","Nigi","Nigi Mitama","Enigma","\u30a2\u30af\u30a2\u30f3\u30ba","\u30a6\u30f3\u30c7\u30a3\u30fc\u30cd","\u30cb\u30ae\u30df\u30bf\u30de"]}),k.\u0275fac=function(e){return new(e||k)(t.Y36(i.Dx),t.Y36(a.gz))},k.\u0275cmp=t.Xpm({type:k,selectors:[["app-fusion-chart"]],inputs:{normChart:"normChart",tripChart:"tripChart",mitaTable:"mitaTable",normTitle:"normTitle",tripTitle:"tripTitle",isPersona:"isPersona",filterDarks:"filterDarks",langEn:"langEn",counter:"counter"},features:[t.TTD],decls:12,vars:7,consts:[[1,"title"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(e,n){1&e&&(t.TgZ(0,"table")(1,"tbody")(2,"tr")(3,"th",0),t._uU(4),t.qZA()(),t.TgZ(5,"tr"),t.YNc(6,E,2,1,"th",1),t.qZA(),t.YNc(7,b,6,3,"tr",1),t.TgZ(8,"tr"),t.YNc(9,T,2,1,"th",1),t.qZA(),t.YNc(10,c,3,3,"tr",2),t.qZA(),t._UZ(11,"tbody"),t.qZA()),2&e&&(t.xp6(3),t.uIk("colspan",n.table[0].length),t.xp6(1),t.AsE("",n.appName," ",n.normTitle,""),t.xp6(2),t.Q6J("ngForOf",n.table[0]),t.xp6(1),t.Q6J("ngForOf",n.table.slice(1,n.table.length-1)),t.xp6(2),t.Q6J("ngForOf",n.table[n.table.length-1]),t.xp6(1),t.Q6J("ngIf",n.tripTitle))},dependencies:[O.mk,O.sg,O.O5],styles:["table[_ngcontent-%COMP%]{width:auto;margin:0 auto;white-space:nowrap}td.elem[_ngcontent-%COMP%]{color:#0f0}td.trip[_ngcontent-%COMP%]{color:#d3d3d3}td.oran[_ngcontent-%COMP%]{color:orange}td.redd[_ngcontent-%COMP%]{color:red}td.gree[_ngcontent-%COMP%]{color:#0f0}td.blue[_ngcontent-%COMP%]{color:#0ff}td.none[_ngcontent-%COMP%]{color:transparent}td.empt[_ngcontent-%COMP%]{background-color:transparent;color:transparent}"],changeDetection:0})},4069:(M,A,m)=>{m.d(A,{O:()=>d});var t=m(3247),i=m(3808),a=m(4769),O=m(6814),k=m(4487);const E=function(){return{exact:!0}};function D(s,e){if(1&s&&(a.TgZ(0,"th",4)(1,"a",5),a._uU(2),a.qZA()()),2&s){const n=e.$implicit,o=a.oxw();a.Udp("width",100/o.fusionOptions.length,"%"),a.Q6J("routerLink",n.link)("routerLinkActiveOptions",a.DdM(6,E)),a.xp6(1),a.Q6J("routerLink",n.link),a.xp6(1),a.Oqu(n.title)}}function b(s,e){if(1&s&&(a.TgZ(0,"tr")(1,"th",6),a._uU(2),a.qZA()()),2&s){const n=a.oxw();a.xp6(1),a.uIk("colspan",n.fusionOptions.length),a.xp6(1),a.hij(" ",n.langEn?"DLC marked as excluded in fusion settings, results may be inaccurate!":"DLC\u306a\u3057"," ")}}function T(s,e){if(1&s&&(a.TgZ(0,"tr")(1,"th",6),a.Hsn(2),a.qZA()()),2&s){const n=a.oxw();a.xp6(1),a.uIk("colspan",n.fusionOptions.length)}}const c=["*"];let d=(()=>{var s;class e{constructor(){this.hasTripleFusion=!1,this.showFusionAlert=!1,this.excludedDlc=!1,this.langEn=!0,this.fusionOptions=e.NORMAL_FUSIONS_EN}ngOnInit(){this.fusionOptions=this.hasTripleFusion?e.TRIPLE_FUSIONS:this.langEn?e.NORMAL_FUSIONS_EN:e.NORMAL_FUSIONS_JA}ngOnChanges(){setTimeout(()=>this.stickyTable.nextEdges())}}return(s=e).NORMAL_FUSIONS_EN=[{title:"Reverse Fusions",link:"fissions"},{title:"Forward Fusions",link:"fusions"}],s.NORMAL_FUSIONS_JA=[{title:"\u9006\u5f15\u304d\u5408\u4f53",link:"fissions"},{title:"2\u8eab\u5408\u4f53",link:"fusions"}],s.TRIPLE_FUSIONS=[{title:"Normal Reverse Fusions",link:"fissions"},{title:"Triple Reverse Fusions",link:"fissions/triple"},{title:"Triple Forward Fusions",link:"fusions/triple"},{title:"Normal Forward Fusions",link:"fusions"}],s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=a.Xpm({type:s,selectors:[["app-smt-fusions"]],viewQuery:function(o,u){if(1&o&&a.Gf(i.v,5),2&o){let h;a.iGM(h=a.CRH())&&(u.stickyTable=h.first)}},inputs:{hasTripleFusion:"hasTripleFusion",showFusionAlert:"showFusionAlert",excludedDlc:"excludedDlc",langEn:"langEn"},features:[a._Bn([t.L]),a.TTD],ngContentSelectors:c,decls:11,vars:3,consts:[["appPositionSticky","",1,"list-table"],["stickyTable",""],["class","nav","routerLinkActive","active",3,"routerLink","width","routerLinkActiveOptions",4,"ngFor","ngForOf"],[4,"ngIf"],["routerLinkActive","active",1,"nav",3,"routerLink","routerLinkActiveOptions"],[3,"routerLink"],[1,"title"]],template:function(o,u){1&o&&(a.F$t(),a.TgZ(0,"div")(1,"table",0,1)(3,"thead")(4,"tr"),a.YNc(5,D,3,7,"th",2),a.qZA(),a.YNc(6,b,3,2,"tr",3),a._UZ(7,"tr"),a.YNc(8,T,3,1,"tr",3),a._UZ(9,"tr"),a.qZA()(),a._UZ(10,"router-outlet"),a.qZA()),2&o&&(a.xp6(5),a.Q6J("ngForOf",u.fusionOptions),a.xp6(1),a.Q6J("ngIf",u.excludedDlc),a.xp6(2),a.Q6J("ngIf",u.showFusionAlert))},dependencies:[O.sg,O.O5,k.lC,k.rH,k.Od,i.v],encapsulation:2,changeDetection:0}),e})()},3917:(M,A,m)=>{m.d(A,{V:()=>J});var t=m(4487),i=m(4769),a=m(5553),O=m(6814),k=m(5390);let E=(()=>{var r;class g{constructor(l){this.appCssClasses=l.compConfig.appCssClasses}}return(r=g).\u0275fac=function(l){return new(l||r)(i.Y36(a.Y))},r.\u0275cmp=i.Xpm({type:r,selectors:[["app-smt1-compendium"]],decls:1,vars:2,consts:[[3,"ngClass","hasSettings"]],template:function(l,C){1&l&&i._UZ(0,"app-demon-compendium",0),2&l&&i.Q6J("ngClass",C.appCssClasses)("hasSettings",!1)},dependencies:[O.mk,k.e],styles:[".kuzu div.element-icon{height:12px;background-size:12px;background-repeat:no-repeat;background-position:center;color:transparent}.kuzu div.element-icon.phy{background-image:url(/assets/images/smtsj/phy.png)}.kuzu div.element-icon.gun{background-image:url(/assets/images/smtsj/gun.png)}.kuzu div.element-icon.fir{background-image:url(/assets/images/smtsj/fir.png)}.kuzu div.element-icon.ice{background-image:url(/assets/images/smtsj/ice.png)}.kuzu div.element-icon.ele{background-image:url(/assets/images/smtsj/ele.png)}.kuzu div.element-icon.for{background-image:url(/assets/images/smtsj/win.png)}.kuzu div.element-icon.dea{background-image:url(/assets/images/smtsj/cur.png)}.kuzu div.element-icon.min{background-image:url(/assets/images/smt4f/panic.png)}.kuzu div.element-icon.alm{background-image:url(/assets/images/smtsj/alm.png)}.kuzu div.element-icon.rec{background-image:url(/assets/images/smtsj/rec.png)}.kuzu div.element-icon.sup{background-image:url(/assets/images/smtsj/sup.png)}.kuzu div.element-icon.pas{background-image:url(/assets/images/smtsj/pas.png)}.kuzu div.element-icon.inv{background-image:url(/assets/images/smtsj/spe.png)}.kuzu div.element-icon.bos{background-image:url(/assets/images/smtsj/spe.png)}.kuzu div.element-icon.phys{background-image:url(/assets/images/smtsj/phy.png)}.kuzu div.element-icon.fire{background-image:url(/assets/images/smtsj/fir.png)}.kuzu div.element-icon.ice{background-image:url(/assets/images/smtsj/ice.png)}.kuzu div.element-icon.elec{background-image:url(/assets/images/smtsj/ele.png)}.kuzu div.element-icon.force{background-image:url(/assets/images/smtsj/win.png)}.kuzu div.element-icon.curse{background-image:url(/assets/images/smt4f/curse.png)}.kuzu div.element-icon.strike{background-image:url(/assets/images/smtsj/phy.png)}.kuzu div.element-icon.almighty{background-image:url(/assets/images/smtsj/alm.png)}.kuzu div.element-icon.recovery{background-image:url(/assets/images/smtsj/rec.png)}.kuzu div.element-icon.support{background-image:url(/assets/images/smtsj/sup.png)}.kuzu div.element-icon.passive{background-image:url(/assets/images/smtsj/pas.png)}.kuzu div.element-icon.auto{background-image:url(/assets/images/smtsj/spe.png)}.kuzu div.element-icon.racial{background-image:url(/assets/images/smtsj/spe.png)}.kuzu div.element-icon.none{background-image:url(/assets/images/smtsj/spe.png)}.krch th.title,.krch th.nav.active,.krch th.nav.active a{color:#000;background-color:#856363}.krao th.title,.krao th.nav.active,.krao th.nav.active a{color:#fff;background-color:#8e283d}.mjn1 th.title,.mjn1 th.nav.active,.mjn1 th.nav.active a{color:#fff;background-color:#004381}.ds1 th.title,.ds1 th.nav.active,.ds1 th.nav.active a{color:#fff;background-color:#e83145}.ds2 th.title,.ds2 th.nav.active,.ds2 th.nav.active a{color:#fff;background-color:#0078e8}\n"],encapsulation:2,changeDetection:0}),g})();var D=m(1032),b=m(6593),T=m(4101);let c=(()=>{var r;class g extends D.l{constructor(l,C,Z){super(l,C,Z),this.appName=`List of Demons - ${Z.appName}`,this.compConfig=Z.compConfig,this.defaultSortFun=(S,j)=>200*(this.compConfig.raceOrder[S.race]-this.compConfig.raceOrder[j.race])+j.lvl-S.lvl}}return(r=g).\u0275fac=function(l){return new(l||r)(i.Y36(b.Dx),i.Y36(i.sBO),i.Y36(a.Y))},r.\u0275cmp=i.Xpm({type:r,selectors:[["app-demon-list-container"]],features:[i.qOj],decls:2,vars:6,consts:[[3,"raceOrder","statHeaders","resistHeaders","rowData"]],template:function(l,C){1&l&&(i._UZ(0,"app-smt-demon-list",0),i.ALo(1,"async")),2&l&&i.Q6J("raceOrder",C.compConfig.raceOrder)("statHeaders",C.compConfig.baseStats)("resistHeaders",C.compConfig.resistElems)("rowData",i.lcZ(1,4,C.demons))},dependencies:[T.Q,O.Ov],encapsulation:2,changeDetection:0}),g})();var d=m(4330),s=m(3934);let e=(()=>{var r;class g extends d.e{constructor(l,C,Z){super(l,C,Z),this.appName=`List of Skills - ${Z.appName}`,this.compConfig=Z.compConfig,this.defaultSortFun=(S,j)=>1e4*(this.compConfig.elemOrder[S.element]-this.compConfig.elemOrder[j.element])+S.rank-j.rank}}return(r=g).\u0275fac=function(l){return new(l||r)(i.Y36(b.Dx),i.Y36(i.sBO),i.Y36(a.Y))},r.\u0275cmp=i.Xpm({type:r,selectors:[["app-skill-list-container"]],features:[i.qOj],decls:2,vars:6,consts:[[3,"elemOrder","hasRank","hasTarget","rowData"]],template:function(l,C){1&l&&(i._UZ(0,"app-smt-skill-list",0),i.ALo(1,"async")),2&l&&i.Q6J("elemOrder",C.compConfig.elemOrder)("hasRank",!1)("hasTarget",!0)("rowData",i.lcZ(1,4,C.skills))},dependencies:[s.J,O.Ov],encapsulation:2,changeDetection:0}),g})();var n=m(8615);let o=(()=>{var r;class g{constructor(l){this.fusionDataService=l,this.subscriptions=[]}ngOnInit(){const l=this.fusionDataService.compConfig;this.appName=l.appTitle,this.mitamaTable=l.mitamaTable,this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(C=>{this.normChart=C}))}ngOnDestroy(){for(const l of this.subscriptions)l.unsubscribe()}}return(r=g).\u0275fac=function(l){return new(l||r)(i.Y36(a.Y))},r.\u0275cmp=i.Xpm({type:r,selectors:[["app-fusion-chart-container"]],decls:1,vars:2,consts:[[3,"normChart","mitaTable"]],template:function(l,C){1&l&&i._UZ(0,"app-fusion-chart",0),2&l&&i.Q6J("normChart",C.normChart)("mitaTable",C.mitamaTable)},dependencies:[n.R],encapsulation:2,changeDetection:0}),g})();var u=m(7880),h=m(8520),f=m(1009),L=m(755),R=m(4069),y=m(8711);const I=function(){return["Personality"]};function N(r,g){if(1&r&&(i.ynx(0),i.TgZ(1,"app-demon-stats",2)(2,"td"),i._uU(3),i.qZA()(),i._UZ(4,"app-demon-resists",3)(5,"app-demon-skills",4)(6,"app-smt-fusions"),i.BQk()),2&r){const p=i.oxw();i.xp6(1),i.Q6J("title","Lvl "+p.demon.lvl+" "+p.demon.race+" "+p.demon.name)("price",p.demon.price)("statHeaders",p.compConfig.baseStats)("fusionHeaders",i.DdM(13,I))("stats",p.demon.stats),i.xp6(2),i.Oqu(p.demon.person),i.xp6(1),i.Q6J("resistHeaders",p.compConfig.resistElems)("resists",p.demon.resists),i.xp6(1),i.Q6J("title","Innate Skills")("hasTarget",!0)("elemOrder",p.compConfig.elemOrder)("compendium",p.compendium)("skillLevels",p.demon.skills)}}function U(r,g){if(1&r&&i._UZ(0,"app-demon-missing",5),2&r){const p=i.oxw();i.Q6J("name",p.name)}}let _=(()=>{var r;class g{}return(r=g).\u0275fac=function(l){return new(l||r)},r.\u0275cmp=i.Xpm({type:r,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"title","price","statHeaders","fusionHeaders","stats"],[3,"resistHeaders","resists"],[3,"title","hasTarget","elemOrder","compendium","skillLevels"],[3,"name"]],template:function(l,C){1&l&&(i.YNc(0,N,7,14,"ng-container",0),i.YNc(1,U,1,1,"app-demon-missing",1)),2&l&&(i.Q6J("ngIf",C.demon),i.xp6(1),i.Q6J("ngIf",!C.demon))},dependencies:[O.O5,u.t,h.O,f.I,L.n,R.O],encapsulation:2,changeDetection:0}),g})(),v=(()=>{var r;class g{constructor(l,C,Z,S){this.route=l,this.title=C,this.currentDemonService=Z,this.fusionDataService=S,this.subscriptions=[],this.appName="Test App",this.appName=S.appName,this.compConfig=S.compConfig}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const l of this.subscriptions)l.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(l=>{this.compendium=l,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(l=>{this.name=l,this.getDemonEntry()})),this.route.params.subscribe(l=>{this.currentDemonService.nextCurrentDemon(l.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(`${this.name} - ${this.appName}`),this.demon=this.compendium.getDemon(this.name))}}return(r=g).\u0275fac=function(l){return new(l||r)(i.Y36(t.gz),i.Y36(b.Dx),i.Y36(y.s),i.Y36(a.Y))},r.\u0275cmp=i.Xpm({type:r,selectors:[["app-demon-entry-container"]],decls:1,vars:4,consts:[[3,"name","demon","compConfig","compendium"]],template:function(l,C){1&l&&i._UZ(0,"app-demon-entry",0),2&l&&i.Q6J("name",C.name)("demon",C.demon)("compConfig",C.compConfig)("compendium",C.compendium)},dependencies:[_],encapsulation:2,changeDetection:0}),g})();var x=m(5657),F=m(4689);const P=[{path:"",redirectTo:"demons",pathMatch:"full"},{path:"",component:E,data:{fusionTool:"chart"},children:[{path:"chart",component:o}]},{path:"",component:E,children:[{path:"demons/:demonName",component:v,children:[{path:"fissions",component:x.t},{path:"fusions",component:F.$},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"demons",component:c},{path:"skills",component:e}]},{path:"**",redirectTo:"demons",pathMatch:"full"}];let J=(()=>{var r;class g{}return(r=g).\u0275fac=function(l){return new(l||r)},r.\u0275mod=i.oAB({type:r}),r.\u0275inj=i.cJS({imports:[t.Bz.forChild(P),t.Bz]}),g})()},5553:(M,A,m)=>{m.d(A,{Y:()=>b});var t=m(5619);class i{constructor(c){this.compConfig=c,this.pairRecipes={},this.entryRecipes={},this.dlcDemons={},this.initImportedData(),this.updateDerivedData()}estimateKuzuPrice(c){return Math.floor(Math.pow(c.slice(c.length-4).reduce((d,s)=>s+d,0),2)/20)}estimateDesuPrice(c){const d=c.slice(c.length-4).reduce((s,e)=>e+s,0);return Math.floor(((-.01171*d+5.0625)*d-129)*d)+1115}initImportedData(){const c={},d={},s={},e={},n={},o=this.compConfig.isDesu;for(const u of this.compConfig.demonData)for(const[h,f]of Object.entries(u))c[h]={name:h,race:f.race,lvl:f.lvl,currLvl:f.lvl,price:o?this.estimateDesuPrice(f.stats):100*(this.estimateKuzuPrice(f.stats)+f.lvl),inherits:0,stats:f.stats,resists:(f.nresists||f.resists).split("").map(L=>this.compConfig.resistCodes[L]),skills:f.nskills||f.skills,person:f.person||"",fusion:"normal",prereq:f.prereq||""};for(const u of this.compConfig.skillData)for(const[h,f]of Object.entries(u))d[h]={name:h,rank:f.rank||f.cost/100||0,cost:f.cost||0,effect:f.effect||"",target:f.prereq||f.target||"Self",element:f.elem,learnedBy:[],level:0};for(const u of this.compConfig.races)n[u]={};for(const u of Object.values(c).sort((h,f)=>h.lvl-f.lvl)){n[u.race][u.lvl]=u.name;for(const[h,f]of Object.entries(u.skills))d[h].learnedBy.push({demon:u.name,level:f})}for(const[u,h]of Object.entries(this.compConfig.specialRecipes)){const f=h,L=[],R=[],y=c[u];y.fusion=f.length>1?"special":"accident",e[u]=L,s[u]=R;for(const I of f)if(I.includes(" x ")){const[N,U]=I.split(" x ");R.push({name1:N,name2:U}),y.fusion="special"}else L.push(I)}this.demons=c,this.skills=d,this.pairRecipes=s,this.entryRecipes=e,this.invertedDemons=n}updateDerivedData(){const c=Object.assign({},this.demons),d=Object.keys(this.skills).map(n=>this.skills[n]),s={},e={};for(const n of this.compConfig.races)s[n]=[],e[n]=[];for(const[n,o]of Object.entries(this.demons))this.isElementDemon(n)||s[o.race].push(o.lvl),!this.pairRecipes[n]&&!this.entryRecipes[n]&&e[o.race].push(o.lvl);for(const n of this.compConfig.races)s[n].sort((o,u)=>o-u),e[n].sort((o,u)=>o-u);this._allDemons=Object.keys(c).map(n=>c[n]),this._allSkills=d,this.allIngredients=s,this.allResults=e}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return[]}getDemon(c){return this.demons[c]}getSkill(c){return this.skills[c]}getSkills(c){const d=c.map(s=>this.skills[s]);return d.sort((s,e)=>1e4*(this.compConfig.elemOrder[s.element]-this.compConfig.elemOrder[e.element])+s.rank-e.rank),d}getIngredientDemonLvls(c){return this.allIngredients[c]||[]}getResultDemonLvls(c){return this.allResults[c]||[]}getSpecialNameEntries(c){return this.entryRecipes[c]||[]}getSpecialNamePairs(c){return this.pairRecipes[c]||[]}reverseLookupDemon(c,d){return this.invertedDemons[c][d]}reverseLookupSpecial(c){return[]}isElementDemon(c){return-1!==this.compConfig.elementTable.elems.indexOf(c)}}var a=m(6262);class O extends a.g{constructor(c){super(),this.initCharts(c)}initCharts(c){const d=c.normalTable.races,s=c.normalTable.table,e=c.elementTable.elems,n=c.elementTable.races,o=c.elementTable.table;this.races=d,this.elementDemons=e,this.lvlModifier=c.fusionLvlMod,this.fusionChart=a.g.loadFusionTableJson(d,s),this.fissionChart=a.g.loadFissionTableJson(d,[],s),this.elementChart={},this.elementChart=e.length?a.g.loadElementTableJson(n,e,o):d.reduce((u,h)=>(u[h]=[],u),{})}getLightDark(c){return 0}getRaceFusions(c){return Object.assign({},super.getRaceFusions(c))}}var k=m(7548),E=m(4769),D=m(4487);let b=(()=>{var T;class c{constructor(s,e){const n=e.url.split("/")[1];this.compConfig=s.configs[s.configs[n]?n:"krch"],this.appName=this.compConfig.appTitle+" Fusion Calculator",this.fissionCalculator=this.compConfig.fissionCalculator,this.fusionCalculator=this.compConfig.fusionCalculator,this.compendium=new t.X(new i(this.compConfig)).asObservable(),this.fusionChart=new t.X(new O(this.compConfig)).asObservable()}nextDlcDemons(s){return{}}}return(T=c).\u0275fac=function(s){return new(s||T)(E.LFG(k.I7),E.LFG(D.F0))},T.\u0275prov=E.Yz7({token:T,factory:T.\u0275fac}),c})()},2814:(M,A,m)=>{m.d(A,{y:()=>E});var t=m(6814),i=m(6208),a=m(8325),O=m(3917),k=m(4769);let E=(()=>{var D;class b{static forRoot(){return{ngModule:b}}}return(D=b).\u0275fac=function(c){return new(c||D)},D.\u0275mod=k.oAB({type:D}),D.\u0275inj=k.cJS({imports:[t.ez,i.m,a.a,O.V]}),b})()}}]);