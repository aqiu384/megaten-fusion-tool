(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[428],{628:(e,t,s)=>{"use strict";s.d(t,{N:()=>C});var n=s(5614),i=s(1116),r=s(6101);function a(e,t){if(1&e&&(n.TgZ(0,"th",4),n._uU(1,"Inheritable Skills"),n.qZA()),2&e){const e=n.oxw();n.uIk("colspan",e.inheritHeaders.length)}}function o(e,t){if(1&e&&(n.TgZ(0,"th",4),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.uIk("colspan",e.inheritHeaders.length),n.xp6(1),n.hij(" ",e.langEn?"Skill Affinities":"\u30b9\u30ad\u30eb\u9069\u6b63"," ")}}function c(e,t){if(1&e&&(n.ynx(0),n._uU(1),n.BQk()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.Oqu(e)}}function l(e,t){if(1&e&&(n.TgZ(0,"div"),n._uU(1),n.qZA()),2&e){const e=n.oxw().$implicit;n.Gre("element-icon ",e,""),n.xp6(1),n.Oqu(e)}}function p(e,t){if(1&e&&(n.TgZ(0,"th"),n.YNc(1,c,2,1,"ng-container",3),n.YNc(2,l,2,4,"div",5),n.qZA()),2&e){const e=n.oxw();n.Udp("width",100/e.inheritHeaders.length,"%"),n.xp6(1),n.Q6J("ngIf",!e.hasIcons),n.xp6(1),n.Q6J("ngIf",e.hasIcons)}}function m(e,t){if(1&e&&(n.TgZ(0,"td"),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Udp("color",e?null:"transparent"),n.xp6(1),n.hij(" ",e?"yes":"no"," ")}}function h(e,t){if(1&e&&(n.TgZ(0,"tr"),n.YNc(1,m,2,3,"td",6),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.inherits)}}function g(e,t){if(1&e&&(n.TgZ(0,"td"),n.ALo(1,"roundInheritPercent"),n._uU(2),n.qZA()),2&e){const e=t.$implicit;n.Gre("affinity",n.lcZ(1,4,100*e),""),n.xp6(2),n.hij(" ",100*e,"% ")}}function u(e,t){if(1&e&&(n.TgZ(0,"tr"),n.YNc(1,g,3,6,"td",7),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.inherits)}}function d(e,t){if(1&e&&(n.TgZ(0,"td"),n._uU(1),n.ALo(2,"affinityToString"),n.qZA()),2&e){const e=t.$implicit;n.Gre("affinity",e,""),n.xp6(1),n.hij(" ",n.lcZ(2,4,e)," ")}}function f(e,t){if(1&e&&(n.TgZ(0,"tr"),n.YNc(1,d,3,6,"td",7),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.inherits)}}let C=(()=>{class e{constructor(){this.inheritHeaders=[],this.inherits=[],this.hasChance=!1,this.hasIcons=!0,this.hasLvls=!1,this.langEn=!0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-demon-inherits"]],inputs:{inheritHeaders:"inheritHeaders",inherits:"inherits",hasChance:"hasChance",hasIcons:"hasIcons",hasLvls:"hasLvls",langEn:"langEn"},decls:11,vars:6,consts:[[1,"entry-table"],["class","title",4,"ngIf"],[3,"width",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"title"],[3,"class",4,"ngIf"],[3,"color",4,"ngFor","ngForOf"],[3,"class",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(n.TgZ(0,"table",0),n.TgZ(1,"thead"),n.TgZ(2,"tr"),n.YNc(3,a,2,1,"th",1),n.YNc(4,o,2,2,"th",1),n.qZA(),n.TgZ(5,"tr"),n.YNc(6,p,3,4,"th",2),n.qZA(),n.qZA(),n.TgZ(7,"tbody"),n.YNc(8,h,2,1,"tr",3),n.YNc(9,u,2,1,"tr",3),n.YNc(10,f,2,1,"tr",3),n.qZA(),n.qZA()),2&e&&(n.xp6(3),n.Q6J("ngIf",!t.hasLvls),n.xp6(1),n.Q6J("ngIf",t.hasLvls&&t.inheritHeaders.length),n.xp6(2),n.Q6J("ngForOf",t.inheritHeaders),n.xp6(2),n.Q6J("ngIf",!t.hasLvls&&!t.hasChance),n.xp6(1),n.Q6J("ngIf",t.hasChance),n.xp6(1),n.Q6J("ngIf",t.hasLvls))},directives:[i.O5,i.sg],pipes:[r.DY,r.JZ],encapsulation:2,changeDetection:0}),e})()},7967:(e,t,s)=>{"use strict";s.d(t,{R:()=>h});var n=s(5614),i=s(9624),r=s(9185),a=s(1116);function o(e,t){if(1&e&&(n.TgZ(0,"th"),n._uU(1),n.qZA()),2&e){const e=t.$implicit,s=n.oxw();n.xp6(1),n.Oqu(e.slice(0,s.nameCut))}}function c(e,t){if(1&e&&(n.TgZ(0,"td",4),n._uU(1),n.qZA()),2&e){const e=t.$implicit,s=n.oxw(2);n.Q6J("ngClass",e.slice(0,4)),n.xp6(1),n.Oqu(e.slice(4,s.nameCut+4))}}function l(e,t){if(1&e&&(n.TgZ(0,"tr"),n.TgZ(1,"th"),n._uU(2),n.qZA(),n.YNc(3,c,2,2,"td",3),n.TgZ(4,"th"),n._uU(5),n.qZA(),n.qZA()),2&e){const e=t.$implicit;n.xp6(2),n.Oqu(e[0]),n.xp6(1),n.Q6J("ngForOf",e.slice(1,e.length-1)),n.xp6(2),n.Oqu(e[e.length-1])}}function p(e,t){if(1&e&&(n.TgZ(0,"th"),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.xp6(1),n.Oqu(e.slice(0,4))}}function m(e,t){if(1&e&&(n.TgZ(0,"tr"),n.TgZ(1,"th",0),n._uU(2),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.uIk("colspan",e.table[0].length),n.xp6(1),n.AsE("",e.appName," ",e.tripTitle,"")}}let h=(()=>{class e{constructor(e,t){this.title2=e,this.route=t,this.normTitle="Normal Fusions",this.tripTitle="",this.isPersona=!1,this.filterDarks=!0,this.langEn=!0,this.subscriptions=[],this.table=[],this.nameCut=4}ngOnInit(){this.subscriptions.push(this.route.parent.data.subscribe(e=>{this.appName=e.appName||"Shin Megami Tensei",this.nameCut=this.langEn?4:2,this.title2.setTitle(this.langEn?`Fusion Chart - ${this.appName} Fusion Calculator`:`\u5408\u4f53\u8868 ${this.appName} \u5408\u4f53\u30a2\u30d7\u30ea`)}))}ngOnChanges(){this.normChart&&this.fillFusionChart()}ngOnDestroy(){for(const e of this.subscriptions)e.unsubscribe()}fillFusionChart(){const t="noneNone",s=e.RESULT_COLORS.reduce((e,[t,s])=>s.reduce((e,s)=>(e[s]=t,e),e),{}),n=this.normChart.elementDemons;let i=[],r=this.normChart.races,a=[];this.filterDarks&&(i=this.normChart.races.filter(e=>this.normChart.getLightDark(e)>0),r=this.normChart.races.filter(e=>0===this.normChart.getLightDark(e)),a=this.normChart.races.filter(e=>-1===this.normChart.getLightDark(e)),0===a.length&&i.length>0&&(i=this.normChart.races.filter(e=>this.normChart.getLightDark(e)>-1),r=[],a=this.normChart.races.filter(e=>this.normChart.getLightDark(e)<-1)));const o=i.length-a.length,c=i.concat(r,n),l=a.length?a.concat(Array(c.length-a.length).fill("")):c,p=this.mitaTable?c:i.concat(r,Array(n.length).fill("")),m=this.mitaTable||a.length?Array(o).fill("").concat(a,r,n):c;this.table=[[""].concat(c,[""])];for(let e=0;e<m.length;e++){const i=Array(c.length+2).fill("empt-"),r=m[e],a=p[e],h=-1!==n.indexOf(r),g=-1!==n.indexOf(a);this.table.push(i),i[0]=r,i[i.length-1]=a;for(let o=e;o<c.length;o++){const e=c[o],r=-1!==n.indexOf(e);if(r&&g){const r=n.indexOf(a),c=n.indexOf(e),l=this.mitaTable[r][c-r-1];i[o+1]=l?(s[l]||"norm")+l:t}else if(r&&a){const n=this.normChart.getElemFusions(e)[a];i[o+1]=n?(s[n]||"rank")+(n>0?"+":"")+n.toString():t}else if(e&&a){const n=this.isPersona&&e===a?e:this.normChart.getRaceFusion(e,a);i[o+1]=n?(s[n]||(e===a?"elem":"norm"))+n:t}}if(this.tripChart)for(let n=0;n<=e-o;n++){const e=l[n];if(e&&h){const a=this.tripChart.getElemFusions(r)[e];i[n+1]=a?(s[a]||"rank")+(a>0?"+":"")+a.toString():t}else if(e&&r){const a=this.tripChart.getRaceFusion(e,r);i[n+1]=a?(s[a]||(e===r?"elem":"trip"))+a:t}}if(-1!==r.indexOf(" x ")){const[e,t]=r.split(" x "),s=e.slice(0,3)+"x"+t.slice(0,3);i[0]=s,i[i.length-1]=s}else if(-1!==r.indexOf(" ")){const e=r.split(" ")[0];i[0]=e,i[i.length-1]=e}}for(let e=0;e<this.table[0].length;e++){const t=this.table[0][e];if(-1!==t.indexOf(" x ")){const[s,n]=t.split(" x ");this.table[0][e]=s.slice(0,2)+n.slice(0,2)}}this.table.push([""].concat(l,[""]))}}return e.RESULT_COLORS=Object.entries({oran:["-2","Erthys","Gnome","Saki","Saki Mitama","Random","\u30a2\u30fc\u30b7\u30fc\u30ba","\u30b5\u30ad\u30df\u30bf\u30de"],redd:["-1","Flaemis","Salamander","Ara ","Ara Mitama","Fiend","\u30d5\u30ec\u30a4\u30df\u30fc\u30ba","\u30a2\u30e9\u30df\u30bf\u30de"],gree:["1","Aeros","Sylph","Kusi","Kusi Mitama","UMA","\u30a8\u30a2\u30ed\u30b9","\u30af\u30b7\u30df\u30bf\u30de"],blue:["2","Aquans","Undine","Nigi","Nigi Mitama","Enigma","\u30a2\u30af\u30a2\u30f3\u30ba","\u30cb\u30ae\u30df\u30bf\u30de"]}),e.\u0275fac=function(t){return new(t||e)(n.Y36(i.Dx),n.Y36(r.gz))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-fusion-chart"]],inputs:{normChart:"normChart",tripChart:"tripChart",mitaTable:"mitaTable",normTitle:"normTitle",tripTitle:"tripTitle",isPersona:"isPersona",filterDarks:"filterDarks",langEn:"langEn",counter:"counter"},features:[n.TTD],decls:12,vars:7,consts:[[1,"title"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(e,t){1&e&&(n.TgZ(0,"table"),n.TgZ(1,"tbody"),n.TgZ(2,"tr"),n.TgZ(3,"th",0),n._uU(4),n.qZA(),n.qZA(),n.TgZ(5,"tr"),n.YNc(6,o,2,1,"th",1),n.qZA(),n.YNc(7,l,6,3,"tr",1),n.TgZ(8,"tr"),n.YNc(9,p,2,1,"th",1),n.qZA(),n.YNc(10,m,3,3,"tr",2),n.qZA(),n._UZ(11,"tbody"),n.qZA()),2&e&&(n.xp6(3),n.uIk("colspan",t.table[0].length),n.xp6(1),n.AsE("",t.appName," ",t.normTitle,""),n.xp6(2),n.Q6J("ngForOf",t.table[0]),n.xp6(1),n.Q6J("ngForOf",t.table.slice(1,t.table.length-1)),n.xp6(2),n.Q6J("ngForOf",t.table[t.table.length-1]),n.xp6(1),n.Q6J("ngIf",t.tripTitle))},directives:[a.sg,a.O5,a.mk],styles:["table[_ngcontent-%COMP%]{width:auto;margin:0 auto;white-space:nowrap}td.elem[_ngcontent-%COMP%]{color:#0f0}td.trip[_ngcontent-%COMP%]{color:#d3d3d3}td.oran[_ngcontent-%COMP%]{color:orange}td.redd[_ngcontent-%COMP%]{color:red}td.gree[_ngcontent-%COMP%]{color:#0f0}td.blue[_ngcontent-%COMP%]{color:#0ff}td.empt[_ngcontent-%COMP%], td.none[_ngcontent-%COMP%]{color:transparent}td.empt[_ngcontent-%COMP%]{background-color:initial}"],changeDetection:0}),e})()},8457:(e,t,s)=>{"use strict";s.d(t,{m:()=>a});var n=s(115),i=s(5614),r=s(7967);let a=(()=>{class e{constructor(e,t){this.changeDetectorRef=e,this.fusionTrioService=t,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.fusionTrioService.squareChart.subscribe(e=>{this.normChart=e.normalChart,this.tripChart=e.tripleChart}))}ngOnDestroy(){for(const e of this.subscriptions)e.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.sBO),i.Y36(n.Ir))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-triple-fusion-chart"]],decls:1,vars:4,consts:[[3,"normChart","tripChart","normTitle","tripTitle"]],template:function(e,t){1&e&&i._UZ(0,"app-fusion-chart",0),2&e&&i.Q6J("normChart",t.normChart)("tripChart",t.tripChart)("normTitle","Normal Fusions")("tripTitle","Triple Fusions")},directives:[r.R],encapsulation:2,changeDetection:0}),e})()},8611:(e,t,s)=>{"use strict";s.d(t,{t:()=>i});var n=s(6829);class i extends n.g{constructor(e,t,s){super(),this.elementDemons=[],this.lvlModifier=.5,this.initCharts(e,s)}initCharts(e,t){const s=e.races,i=e.table,r=[];for(let n=0;n<s.length;n++)r.push(i[n].slice(t?0:n,t?n+1:s.length)),t||(r[n][0]="-");this.races=s,this.lvlModifier=t?4.25:.5,this.fissionChart=n.g.loadFissionTableJson(s,this.elementDemons,r),this.fusionChart=n.g.loadFusionTableJson(s,r),this.elementChart={}}}},1356:(e,t,s)=>{"use strict";s.d(t,{V:()=>U});var n=s(9185),i=s(5614),r=s(8327),a=s(7089),o=s(1116);const c=function(){return{title:"Shadow List",link:"shadows"}},l=function(e){return[e]};let p=(()=>{class e{constructor(e){this.appCssClasses=["smtnes","smt1"],this.appCssClasses=e.compConfig.appCssClasses}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(r.Y))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-p4-compendium"]],decls:1,vars:7,consts:[[3,"ngClass","hasSettings","mainList","otherLinks"]],template:function(e,t){1&e&&i._UZ(0,"app-demon-compendium",0),2&e&&i.Q6J("ngClass",t.appCssClasses)("hasSettings",!1)("mainList","persona")("otherLinks",i.VKq(5,l,i.DdM(4,c)))},directives:[a.e,o.mk],styles:[".p3 div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:50%;color:transparent}.p3 div.element-icon.slash{background-image:url(/assets/images/p5/sword.png)}.p3 div.element-icon.strike{background-image:url(/assets/images/p5/phys.png)}.p3 div.element-icon.pierce{background-image:url(/assets/images/p5/gun.png)}.p3 div.element-icon.fire{background-image:url(/assets/images/p5/fire.png)}.p3 div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p3 div.element-icon.elec{background-image:url(/assets/images/p5/elec.png)}.p3 div.element-icon.wind{background-image:url(/assets/images/p5/wind.png)}.p3 div.element-icon.light{background-image:url(/assets/images/p5/bless.png)}.p3 div.element-icon.dark{background-image:url(/assets/images/p5/curse.png)}.p3 div.element-icon.lidark{background-image:url(/assets/images/p5/trait.png)}.p3 div.element-icon.ailment{background-image:url(/assets/images/p5/ailment.png)}.p3 div.element-icon.recovery{background-image:url(/assets/images/p5/healing.png)}.p3 div.element-icon.all,.p3 div.element-icon.almighty{background-image:url(/assets/images/p5/almighty.png)}.p3 div.element-icon.special,.p3 div.element-icon.support{background-image:url(/assets/images/p5/support.png)}.p3 div.element-icon.passive{background-image:url(/assets/images/p5/passive.png)}.p3 th.nav.active,.p3 th.nav.active a,.p3 th.title{color:#000;background-color:#4372aa}.p4 div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:50%;color:transparent}.p4 div.element-icon.phys{background-image:url(/assets/images/p5/phys.png)}.p4 div.element-icon.fire{background-image:url(/assets/images/p5/fire.png)}.p4 div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p4 div.element-icon.elec{background-image:url(/assets/images/p5/elec.png)}.p4 div.element-icon.wind{background-image:url(/assets/images/p5/wind.png)}.p4 div.element-icon.light{background-image:url(/assets/images/p5/bless.png)}.p4 div.element-icon.dark{background-image:url(/assets/images/p5/curse.png)}.p4 div.element-icon.ailment{background-image:url(/assets/images/p5/ailment.png)}.p4 div.element-icon.recovery{background-image:url(/assets/images/p5/healing.png)}.p4 div.element-icon.almighty{background-image:url(/assets/images/p5/almighty.png)}.p4 div.element-icon.special,.p4 div.element-icon.support{background-image:url(/assets/images/p5/support.png)}.p4 div.element-icon.passive{background-image:url(/assets/images/p5/passive.png)}.p4 th.nav.active,.p4 th.nav.active a,.p4 th.title{color:#000;background-color:#ffe600}.p5 div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:50%;color:transparent}"],encapsulation:2,changeDetection:0}),e})();var m=s(5438),h=s(9624),g=s(4008);let u=(()=>{class e extends m.l{constructor(e,t,s,n){super(e,s,n),this.showAllies=!t.snapshot.data.showShadows,this.showEnemies=!this.showAllies,this.compConfig=n.compConfig,this.defaultSortFun=(e,t)=>200*(this.compConfig.raceOrder[e.race]-this.compConfig.raceOrder[t.race])+t.lvl-e.lvl,this.appName=`List of Personas - ${n.appName}`,this.statHeaders=this.compConfig.baseStats,this.resistHeaders=this.compConfig.resistElems,this.inheritOrder=this.compConfig.elemOrder,this.showEnemies&&(this.appName=`List of Shadows - ${n.appName}`,this.statHeaders=this.compConfig.enemyStats,this.resistHeaders=this.compConfig.enemyResists,this.inheritOrder=null)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(h.Dx),i.Y36(n.gz),i.Y36(i.sBO),i.Y36(r.Y))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-demon-list-container"]],features:[i.qOj],decls:2,vars:9,consts:[[3,"isEnemy","hasCurrLvl","raceOrder","statHeaders","resistHeaders","inheritOrder","rowData"]],template:function(e,t){1&e&&(i._UZ(0,"app-smt-demon-list",0),i.ALo(1,"async")),2&e&&i.Q6J("isEnemy",t.showEnemies)("hasCurrLvl",!t.showEnemies)("raceOrder",t.compConfig.raceOrder)("statHeaders",t.statHeaders)("resistHeaders",t.resistHeaders)("inheritOrder",t.inheritOrder)("rowData",i.lcZ(1,7,t.demons))},directives:[g.Q],pipes:[o.Ov],encapsulation:2,changeDetection:0}),e})();var d=s(9261),f=s(3787);let C=(()=>{class e extends d.e{constructor(e,t,s){super(e,t,s),this.compConfig=s.compConfig,this.appName=`List of Skills - ${s.appName}`,this.transferTitle=this.compConfig.hasSkillCards[s.gameAbbr]?"Skill Card":"",this.defaultSortFun=(e,t)=>1e4*(this.compConfig.elemOrder[e.element]-this.compConfig.elemOrder[t.element])+e.rank-t.rank}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(h.Dx),i.Y36(i.sBO),i.Y36(r.Y))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-skill-list-container"]],features:[i.qOj],decls:2,vars:6,consts:[[3,"elemOrder","isPersona","transferTitle","rowData"]],template:function(e,t){1&e&&(i._UZ(0,"app-smt-skill-list",0),i.ALo(1,"async")),2&e&&i.Q6J("elemOrder",t.compConfig.elemOrder)("isPersona",!0)("transferTitle",t.transferTitle)("rowData",i.lcZ(1,4,t.skills))},directives:[f.J],pipes:[o.Ov],encapsulation:2,changeDetection:0}),e})();var b=s(2573),v=s(858),k=s(628),O=s(4209),Z=s(4354),T=s(4897),x=s(3966);const y=function(){return["HP","MP"]};let D=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-enemy-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig"},decls:19,vars:11,consts:[[3,"title","statHeaders","stats"],[1,"entry-table"],["colspan","2",1,"title"],[3,"resistHeaders","resists"],[3,"elemOrder","compendium","skillLevels"]],template:function(e,t){1&e&&(i._UZ(0,"app-demon-stats",0),i.TgZ(1,"table",1),i.TgZ(2,"thead"),i.TgZ(3,"tr"),i.TgZ(4,"th",2),i._uU(5,"Appearances"),i.qZA(),i.qZA(),i.TgZ(6,"tr"),i.TgZ(7,"th"),i._uU(8,"Areas"),i.qZA(),i.TgZ(9,"th"),i._uU(10,"Drops"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(11,"tbody"),i.TgZ(12,"tr"),i.TgZ(13,"td"),i._uU(14),i.qZA(),i.TgZ(15,"td"),i._uU(16),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i._UZ(17,"app-demon-resists",3),i._UZ(18,"app-demon-skills",4)),2&e&&(i.Q6J("title","Lvl "+t.demon.lvl+" "+t.demon.race+" "+t.demon.name)("statHeaders",i.DdM(10,y).concat(t.compConfig.baseStats))("stats",t.demon.stats.concat(t.demon.estats)),i.xp6(14),i.Oqu(t.demon.area),i.xp6(2),i.Oqu(t.demon.drop),i.xp6(1),i.Q6J("resistHeaders",t.compConfig.enemyResists)("resists",t.demon.resists),i.xp6(1),i.Q6J("elemOrder",t.compConfig.elemOrder)("compendium",t.compendium)("skillLevels",t.demon.skills))},directives:[b.O,v.I,O.n],encapsulation:2,changeDetection:0}),e})();function A(e,t){if(1&e&&(i.ynx(0),i._UZ(1,"app-demon-stats",2),i._UZ(2,"app-demon-resists",3),i._UZ(3,"app-demon-inherits",4),i._UZ(4,"app-demon-skills",5),i._UZ(5,"app-smt-fusions",6),i.BQk()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("title","Lvl "+e.demon.lvl+" "+e.demon.race+" "+e.demon.name)("price",e.demon.price)("statHeaders",e.compConfig.baseStats)("stats",e.demon.stats)("inherit",e.demon.inherit),i.xp6(1),i.Q6J("resistHeaders",e.compConfig.resistElems)("resists",e.demon.resists),i.xp6(1),i.Q6J("hasChance",!0)("inheritHeaders",e.compendium.inheritHeaders)("inherits",e.compendium.getInheritElems(e.demon.inherit)),i.xp6(1),i.Q6J("elemOrder",e.compConfig.elemOrder)("compendium",e.compendium)("skillLevels",e.demon.skills),i.xp6(1),i.Q6J("hasTripleFusion",!0)}}function w(e,t){if(1&e&&i._UZ(0,"app-demon-missing",7),2&e){const e=i.oxw();i.Q6J("name",e.name)}}function _(e,t){if(1&e&&i._UZ(0,"app-demon-entry",1),2&e){const e=i.oxw();i.Q6J("name",e.name)("demon",e.demon)("compConfig",e.compConfig)("compendium",e.compendium)}}function q(e,t){if(1&e&&i._UZ(0,"app-enemy-entry",1),2&e){const e=i.oxw();i.Q6J("name",e.name)("demon",e.demon)("compConfig",e.compConfig)("compendium",e.compendium)}}let N=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"title","price","statHeaders","stats","inherit"],[3,"resistHeaders","resists"],[3,"hasChance","inheritHeaders","inherits"],[3,"elemOrder","compendium","skillLevels"],[3,"hasTripleFusion"],[3,"name"]],template:function(e,t){1&e&&(i.YNc(0,A,6,14,"ng-container",0),i.YNc(1,w,1,1,"app-demon-missing",1)),2&e&&(i.Q6J("ngIf",t.demon),i.xp6(1),i.Q6J("ngIf",!t.demon))},directives:[o.O5,b.O,v.I,k.N,O.n,Z.O,T.t],encapsulation:2,changeDetection:0}),e})(),S=(()=>{class e{constructor(e,t,s,n){this.route=e,this.title=t,this.currentDemonService=s,this.fusionDataService=n,this.subscriptions=[],this.appName="Test App",this.appName=n.appName,this.compConfig=n.compConfig}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const e of this.subscriptions)e.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(e=>{this.compendium=e,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(e=>{this.name=e,this.getDemonEntry()})),this.route.params.subscribe(e=>{this.currentDemonService.nextCurrentDemon(e.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(`${this.name} - ${this.appName}`),this.demon=this.compendium.getDemon(this.name))}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(n.gz),i.Y36(h.Dx),i.Y36(x.s),i.Y36(r.Y))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-demon-entry-container"]],decls:2,vars:2,consts:[[3,"name","demon","compConfig","compendium",4,"ngIf"],[3,"name","demon","compConfig","compendium"]],template:function(e,t){1&e&&(i.YNc(0,_,1,4,"app-demon-entry",0),i.YNc(1,q,1,4,"app-enemy-entry",0)),2&e&&(i.Q6J("ngIf",!t.demon||!t.demon.isEnemy),i.xp6(1),i.Q6J("ngIf",t.demon&&t.demon.isEnemy))},directives:[o.O5,N,D],encapsulation:2,changeDetection:0}),e})();var L=s(5946),I=s(2060),F=s(6926),Y=s(6100);const J=[{path:"",redirectTo:"personas",pathMatch:"full"},{path:"",component:p,data:{fusionTool:"chart"},children:[{path:"chart",component:s(8457).m}]},{path:"",component:p,children:[{path:"shadows/:demonName",component:S},{path:"personas/:demonName",component:S,children:[{path:"fissions/triple",component:F.p},{path:"fusions/triple",component:Y.n},{path:"fissions",component:L.t},{path:"fusions",component:I.$},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"personas",component:u},{path:"shadows",component:u,data:{showShadows:!0}},{path:"skills",component:C}]},{path:"**",redirectTo:"personas",pathMatch:"full"}];let U=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[n.Bz.forChild(J)],n.Bz]}),e})()},8327:(e,t,s)=>{"use strict";s.d(t,{Y:()=>l});var n=s(8512);class i{constructor(e,t){this.compConfig=e,this.gameAbbr=t,this.specialRecipes={},this.dlcDemons={},this.initImportedData(),this.updateDerivedData()}initImportedData(){const e={},t={},s={},n={},i={},r={};this._inheritTypes={};for(const a of this.compConfig.demonData[this.gameAbbr])for(const[t,s]of Object.entries(a))e[t]={name:t,race:s.race,lvl:s.lvl,currLvl:s.lvl,price:Math.pow(s.stats.reduce((e,t)=>t+e,0),2)+2e3,inherit:s.inherits,stats:s.stats,resists:s.resists.split("").map(e=>this.compConfig.resistCodes[e]),skills:s.skills,fusion:s.fusion||"normal",prereq:s.prereq||""};for(const a of this.compConfig.enemyData[this.gameAbbr])for(const[e,s]of Object.entries(a)){let n=[];s.material&&"-"!==s.material&&n.push(s.material),s.gem&&"-"!==s.gem&&n.push(s.gem),s.drops&&(n=n.concat(s.drops)),n.length||n.push("-"),t[e]={name:e,race:s.race,lvl:s.lvl,currLvl:s.lvl,price:0,stats:s.stats.slice(0,2),estats:s.stats.slice(2),resists:s.resists.toLowerCase().split("").map(e=>this.compConfig.resistCodes[e]),skills:s.skills.reduce((e,t)=>(e[t]=0,e),{}),fusion:"normal",area:s.area,drop:n.join(", "),isEnemy:!0}}for(const a of this.compConfig.skillData[this.gameAbbr])for(const[t,n]of Object.entries(a)){const i=n.power||0,r=n.damage,a=n.target||"",o=n.effect;let c=n.effect;i?(c=i?r+" ("+i.toString()+") dmg":"",c+=a?" to "+a.toLowerCase():"",c+=o?", "+o:""):a&&(c+=("support"===n.element?" for ":" to ")+a.toLowerCase()),s[t]={name:t,element:n.element,cost:n.cost||0,rank:n.rank||99,effect:c,learnedBy:[],transfer:[],level:0},n.card&&(s[t].transfer=n.card.split(", ").map(t=>({demon:t,level:e[t]?0:-100})))}for(const[a,o]of Object.entries(this.compConfig.specialRecipes[this.gameAbbr])){const t=o;if(n[a]=t,e[a].fusion="special",2===t.length)for(const e of t)r[e]||(r[e]=[]),r[e].push(a)}for(const a of this.compConfig.races)i[a]={};for(const a of Object.values(e).sort((e,t)=>e.lvl-t.lvl)){"party"!==a.fusion&&(i[a.race][a.lvl]=a.name);for(const[e,t]of Object.entries(a.skills))s[e].learnedBy.push({demon:a.name,level:t})}this.demons=e,this.enemies=t,this.skills=s,this.specialRecipes=n,this.invertedDemons=i,this.invertedSpecials=r,this._inheritTypes=this.compConfig.inheritTypes}updateDerivedData(){const e={},t={},s=[];for(const r of Object.values(this.skills))r.learnedBy.length<1?r.rank=99:s.push(r);for(const r of this.compConfig.races)e[r]=[],t[r]=[];for(const[r,a]of Object.entries(this.demons))"party"!==a.fusion&&(e[a.race].push(a.lvl),this.specialRecipes.hasOwnProperty(r)||t[a.race].push(a.lvl));for(const r of this.compConfig.races)e[r].sort((e,t)=>e-t),t[r].sort((e,t)=>e-t);const n=Object.keys(this.demons).map(e=>this.demons[e]),i=Object.keys(this.enemies).map(e=>this.enemies[e]);this._allDemons=i.concat(n),this._allSkills=s,this.allIngredients=e,this.allResults=t}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return Object.keys(this.specialRecipes).map(e=>this.demons[e])}get inheritHeaders(){return this.compConfig.inheritElems}getDemon(e){return this.demons[e]||this.enemies[e]}getSkill(e){return this.skills[e]}getSkills(e){const t=this.compConfig.elemOrder,s=e.map(e=>this.skills[e]);return s.sort((e,s)=>1e4*(t[e.element]-t[s.element])+e.rank-s.rank),s}getIngredientDemonLvls(e){return this.allIngredients[e]||[]}getResultDemonLvls(e){return this.allResults[e]||[]}getSpecialNameEntries(e){return this.specialRecipes[e]||[]}getSpecialNamePairs(e){return[]}getInheritElems(e){return this._inheritTypes[e]}reverseLookupDemon(e,t){return this.invertedDemons[e][t]}reverseLookupSpecial(e){return this.invertedSpecials[e]||[]}isElementDemon(e){return!1}}var r=s(8611),a=s(115),o=s(5614),c=s(9185);let l=(()=>{class e{constructor(e,t){this.fissionCalculator=a.Bz,this.fusionCalculator=a.wC,this.triFissionCalculator=a.nL,this.triFusionCalculator=a.RD;const s=t.url.split("/")[1],o=e.demonData[s]?s:"p4";this.appName=e.gameTitles[o]+" Fusion Calculator",this.compConfig=e,this.gameAbbr=o,this._compendium=new i(e,o),this._compendium$=new n.X(this._compendium),this.compendium=this._compendium$.asObservable(),this._fusionChart=new r.t(e.normalTable[o],e.races),this._fusionChart$=new n.X(this._fusionChart),this.fusionChart=this._fusionChart$.asObservable(),this._tripleChart=new r.t(e.normalTable[o],e.races,!0),this._squareChart$=new n.X({normalChart:this._fusionChart,tripleChart:this._tripleChart,raceOrder:e.raceOrder}),this.squareChart=this._squareChart$.asObservable()}nextDlcDemons(e){}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(a.I7),o.LFG(c.F0))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac}),e})()},2428:(e,t,s)=>{"use strict";s.d(t,{R:()=>c});var n=s(1116),i=s(5425),r=s(6487),a=s(1356),o=s(5614);let c=(()=>{class e{static forRoot(){return{ngModule:e}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[n.ez,i.m,r.a,a.V]]}),e})()}}]);