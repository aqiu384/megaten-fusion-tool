"use strict";(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[101],{7277:(ne,X,a)=>{a.d(X,{S:()=>He});var U=a(8935),A=a(2755),G=a(1090),e=a(2598),D=a(7992),S=a(177),_=a(5583);let w=(()=>{class s{constructor(n){this.appCssClasses=n.compConfig.appCssClasses;const t=n.compConfig,i=G.fu;this.otherLinks=[],t.hasEnemies&&this.otherLinks.push({title:(0,A.o)(i.ShadowList,t.lang),link:"shadows"}),!t.hasQrcodes&&t.hasManualInheritance&&this.otherLinks.push({title:(0,A.o)(i.RecipGenerator,t.lang),link:"recipes"}),t.hasQrcodes&&this.otherLinks.push({title:"QR Code Generator",link:"qrcodes"})}static{this.\u0275fac=function(t){return new(t||s)(e.rXU(D.i))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-pq2-compendium"]],decls:1,vars:3,consts:[[3,"ngClass","mainList","otherLinks"]],template:function(t,i){1&t&&e.nrm(0,"app-demon-compendium",0),2&t&&e.Y8G("ngClass",i.appCssClasses)("mainList","persona")("otherLinks",i.otherLinks)},dependencies:[S.YU,_.f],styles:[".p3 div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p3 div.element-icon.i28716,.p3 div.element-icon.sla{background-image:url(/assets/images/p5/sword.png)}.p3 div.element-icon.i28717,.p3 div.element-icon.str{background-image:url(/assets/images/p5/phys.png)}.p3 div.element-icon.i28718,.p3 div.element-icon.pie{background-image:url(/assets/images/p5/gun.png)}.p3 div.element-icon.i30972,.p3 div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p3 div.element-icon.i29948,.p3 div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p3 div.element-icon.i29436,.p3 div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p3 div.element-icon.i29180,.p3 div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p3 div.element-icon.i4012,.p3 div.element-icon.lig{background-image:url(/assets/images/p5/bless.png)}.p3 div.element-icon.i32624,.p3 div.element-icon.dar{background-image:url(/assets/images/p5/curse.png)}.p3 div.element-icon.i3956,.p3 div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.p3 div.element-icon.i4093,.p3 div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p3 div.element-icon.i32764,.p3 div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p3 div.element-icon.i4092,.p3 div.element-icon.spa,.p3 div.element-icon.spb,.p3 div.element-icon.spe{background-image:url(/assets/images/p5/trait.png)}.p3 div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p3 div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.p3 th.title,.p3 th.nav.active,.p3 th.nav.active a{color:#000;background-color:#4372aa}.p4 div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p4 div.element-icon.i2166,.p4 div.element-icon.phy{background-image:url(/assets/images/p5/phys.png)}.p4 div.element-icon.i3582,.p4 div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p4 div.element-icon.i3070,.p4 div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p4 div.element-icon.i3966,.p4 div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p4 div.element-icon.i3838,.p4 div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p4 div.element-icon.i2006,.p4 div.element-icon.lig{background-image:url(/assets/images/p5/bless.png)}.p4 div.element-icon.i1978,.p4 div.element-icon.dar{background-image:url(/assets/images/p5/curse.png)}.p4 div.element-icon.i1979,.p4 div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.p4 div.element-icon.i2014,.p4 div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p4 div.element-icon.i4094,.p4 div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p4 div.element-icon.spa,.p4 div.element-icon.spe{background-image:url(/assets/images/p5/trait.png)}.p4 div.element-icon.i4095,.p4 div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p4 div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.p4 th.title,.p4 th.nav.active,.p4 th.nav.active a{color:#000;background-color:#ffe600}.p5 div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p5 div.element-icon.phy{background-image:url(/assets/images/p5/phys.png)}.p5 div.element-icon.i3075{background-image:url(/assets/images/p5/phys.png)}.p5 div.element-icon.gun{background-image:url(/assets/images/p5/gun.png)}.p5 div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p5 div.element-icon.i3839{background-image:url(/assets/images/p5/fire.png)}.p5 div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p5 div.element-icon.i3583{background-image:url(/assets/images/p5/ice.png)}.p5 div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p5 div.element-icon.i4031{background-image:url(/assets/images/p5/elec.png)}.p5 div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p5 div.element-icon.i3967{background-image:url(/assets/images/p5/wind.png)}.p5 div.element-icon.psy{background-image:url(/assets/images/p5/psy.png)}.p5 div.element-icon.i4079{background-image:url(/assets/images/p5/psy.png)}.p5 div.element-icon.nuk{background-image:url(/assets/images/p5/nuke.png)}.p5 div.element-icon.i4063{background-image:url(/assets/images/p5/nuke.png)}.p5 div.element-icon.ble{background-image:url(/assets/images/p5/bless.png)}.p5 div.element-icon.i1017{background-image:url(/assets/images/p5/bless.png)}.p5 div.element-icon.cur{background-image:url(/assets/images/p5/curse.png)}.p5 div.element-icon.i1014{background-image:url(/assets/images/p5/curse.png)}.p5 div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.p5 div.element-icon.i4086{background-image:url(/assets/images/p5/ailment.png)}.p5 div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p5 div.element-icon.i1019{background-image:url(/assets/images/p5/healing.png)}.p5 div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p5 div.element-icon.i4095{background-image:url(/assets/images/p5/almighty.png)}.p5 div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p5 div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.p5 div.element-icon.i0{background-image:url(/assets/images/p5/passive.png)}.p5 div.element-icon.tra{background-image:url(/assets/images/p5/trait.png)}.p5 th.title,.p5 th.nav.active,.p5 th.nav.active a{color:#fff;background-color:#f41000}.pq div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.pq div.element-icon.cut{background-image:url(/assets/images/p5/sword.png)}.pq div.element-icon.i3584,.pq div.element-icon.i3591,.pq div.element-icon.bas{background-image:url(/assets/images/p5/phys.png)}.pq div.element-icon.sta{background-image:url(/assets/images/p5/gun.png)}.pq div.element-icon.i376,.pq div.element-icon.i383,.pq div.element-icon.i3960,.pq div.element-icon.i3967,.pq div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.pq div.element-icon.i248,.pq div.element-icon.i255,.pq div.element-icon.i3832,.pq div.element-icon.i3839,.pq div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.pq div.element-icon.i472,.pq div.element-icon.i479,.pq div.element-icon.i4056,.pq div.element-icon.i4063,.pq div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.pq div.element-icon.i440,.pq div.element-icon.i447,.pq div.element-icon.i4024,.pq div.element-icon.i4031,.pq div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.pq div.element-icon.i496,.pq div.element-icon.i503,.pq div.element-icon.i4080,.pq div.element-icon.i4087,.pq div.element-icon.lig{background-image:url(/assets/images/p5/bless.png)}.pq div.element-icon.i488,.pq div.element-icon.i495,.pq div.element-icon.i4072,.pq div.element-icon.i4079,.pq div.element-icon.dar{background-image:url(/assets/images/p5/curse.png)}.pq div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.pq div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.pq div.element-icon.i504,.pq div.element-icon.i511,.pq div.element-icon.i4088,.pq div.element-icon.i4095,.pq div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.pq div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.pq div.element-icon.nav{background-image:url(/assets/images/p5/trait.png)}.pq div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.pq th.title,.pq th.nav.active,.pq th.nav.active a{color:#000;background-color:#aa1ca9}.pq2 div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.pq2 div.element-icon.i2055,.pq2 div.element-icon.phy{background-image:url(/assets/images/p5/phys.png)}.pq2 div.element-icon.i3583,.pq2 div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.pq2 div.element-icon.i3071,.pq2 div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.pq2 div.element-icon.i3967,.pq2 div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.pq2 div.element-icon.i3839,.pq2 div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.pq2 div.element-icon.i4063,.pq2 div.element-icon.psy{background-image:url(/assets/images/p5/psy.png)}.pq2 div.element-icon.i4031,.pq2 div.element-icon.nuk{background-image:url(/assets/images/p5/nuke.png)}.pq2 div.element-icon.i4087,.pq2 div.element-icon.ble{background-image:url(/assets/images/p5/bless.png)}.pq2 div.element-icon.i4079,.pq2 div.element-icon.cur{background-image:url(/assets/images/p5/curse.png)}.pq2 div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.pq2 div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.pq2 div.element-icon.i4095,.pq2 div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.pq2 div.element-icon.i2047,.pq2 div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.pq2 div.element-icon.nav{background-image:url(/assets/images/p5/trait.png)}.pq2 div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.pq2 th.title,.pq2 th.nav.active,.pq2 th.nav.active a{color:#fff;background-color:#ff4800}.p5t div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p5t div.element-icon.phy{background-image:url(/assets/images/p5/phys.png)}.p5t div.element-icon.gun{background-image:url(/assets/images/p5/gun.png)}.p5t div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p5t div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p5t div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p5t div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p5t div.element-icon.psy{background-image:url(/assets/images/p5/psy.png)}.p5t div.element-icon.nuk{background-image:url(/assets/images/p5/nuke.png)}.p5t div.element-icon.ble{background-image:url(/assets/images/p5/bless.png)}.p5t div.element-icon.cur{background-image:url(/assets/images/p5/curse.png)}.p5t div.element-icon.i1023,.p5t div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p5t div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p5t div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p5t div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.p5t th.title,.p5t th.nav.active,.p5t th.nav.active a{color:#fff;background-color:#f41000}.p3r div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p3r div.element-icon.i3583,.p3r div.element-icon.i3585,.p3r div.element-icon.sla{background-image:url(/assets/images/p5/sword.png)}.p3r div.element-icon.i2047,.p3r div.element-icon.i3615,.p3r div.element-icon.str{background-image:url(/assets/images/p5/phys.png)}.p3r div.element-icon.i3071,.p3r div.element-icon.i4065,.p3r div.element-icon.pie{background-image:url(/assets/images/p5/gun.png)}.p3r div.element-icon.i3967,.p3r div.element-icon.i3843,.p3r div.element-icon.i3955,.p3r div.element-icon.i3949,.p3r div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p3r div.element-icon.i3839,.p3r div.element-icon.i3715,.p3r div.element-icon.i3827,.p3r div.element-icon.i3821,.p3r div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p3r div.element-icon.i4063,.p3r div.element-icon.i3651,.p3r div.element-icon.i4051,.p3r div.element-icon.i4045,.p3r div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p3r div.element-icon.i4031,.p3r div.element-icon.i3619,.p3r div.element-icon.i4019,.p3r div.element-icon.i4013,.p3r div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p3r div.element-icon.i4083,.p3r div.element-icon.i3603,.p3r div.element-icon.lig{background-image:url(/assets/images/p5/bless.png)}.p3r div.element-icon.i4077,.p3r div.element-icon.i3597,.p3r div.element-icon.dar{background-image:url(/assets/images/p5/curse.png)}.p3r div.element-icon.i493,.p3r div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.p3r div.element-icon.i499,.p3r div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p3r div.element-icon.i4095,.p3r div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p3r div.element-icon.i511,.p3r div.element-icon.i4088,.p3r div.element-icon.spe{background-image:url(/assets/images/p5/trait.png)}.p3r div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p3r div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.p3r th.title,.p3r th.nav.active,.p3r th.nav.active a{color:#000;background-color:#4372aa}\n"],encapsulation:2,changeDetection:0})}}return s})();var Y=a(9404),P=a(345),I=a(9629);let R=(()=>{class s extends Y.M{constructor(n,t,i,p){super(n,i,p),this.showAllies=!t.snapshot.data.showShadows,this.showEnemies=!this.showAllies,this.compConfig=p.compConfig,this.defaultSortFun=(g,T)=>200*(this.compConfig.raceOrder[g.race]-this.compConfig.raceOrder[T.race])+T.lvl-g.lvl,this.appName=(0,A.o)(G.vC.AppPersonas,this.compConfig.lang)+p.appName,this.statHeaders=this.compConfig.baseStats,this.resistHeaders=this.compConfig.hasDemonResists?this.compConfig.resistElems:[],this.inheritOrder=this.compConfig.elemOrder,this.showEnemies&&(this.appName=(0,A.o)(G.vC.AppShadows,this.compConfig.lang)+p.appName,this.statHeaders=this.compConfig.enemyStats,this.resistHeaders=this.compConfig.resistElems,this.inheritOrder=null)}static{this.\u0275fac=function(t){return new(t||s)(e.rXU(P.hE),e.rXU(U.nX),e.rXU(e.gRc),e.rXU(D.i))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-demon-list-container"]],features:[e.Vt3],decls:2,vars:10,consts:[[3,"lang","isEnemy","hasCurrLvl","raceOrder","statHeaders","resistHeaders","inheritOrder","rowData"]],template:function(t,i){1&t&&(e.nrm(0,"app-smt-demon-list",0),e.nI1(1,"async")),2&t&&e.Y8G("lang",i.compConfig.lang)("isEnemy",i.showEnemies)("hasCurrLvl",!i.showEnemies&&i.compConfig.hasTripleFusion)("raceOrder",i.compConfig.raceOrder)("statHeaders",i.statHeaders)("resistHeaders",i.resistHeaders)("inheritOrder",i.inheritOrder)("rowData",e.bMT(1,8,i.demons))},dependencies:[I.F,S.Jj],encapsulation:2,changeDetection:0})}}return s})();var H=a(9454),L=a(2940);let W=(()=>{class s extends H.E{constructor(n,t,i){super(n,t,i),this.compConfig=i.compConfig,this.appName=(0,A.o)(G.vf.AppTitle,this.compConfig.lang)+i.appName,this.transferTitle=this.compConfig.hasSkillCards?"Skill Card":"",this.defaultSortFun=(p,g)=>1e4*(this.compConfig.elemOrder[p.element]-this.compConfig.elemOrder[g.element])+p.rank-g.rank}static{this.\u0275fac=function(t){return new(t||s)(e.rXU(P.hE),e.rXU(e.gRc),e.rXU(D.i))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-skill-list-container"]],features:[e.Vt3],decls:2,vars:9,consts:[[3,"lang","elemOrder","hasRank","hasTarget","isPersona","transferTitle","rowData"]],template:function(t,i){1&t&&(e.nrm(0,"app-smt-skill-list",0),e.nI1(1,"async")),2&t&&e.Y8G("lang",i.compConfig.lang)("elemOrder",i.compConfig.elemOrder)("hasRank",i.compConfig.hasSkillRanks)("hasTarget",!0)("isPersona",!0)("transferTitle",i.transferTitle)("rowData",e.bMT(1,7,i.skills))},dependencies:[L.p,S.Jj],encapsulation:2,changeDetection:0})}}return s})();var x=a(5692),V=a(3679),K=a(2223),J=a(302),z=a(9436),N=a(6122),r=a(8696);let h=(()=>{class s{constructor(){this.lang="en"}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-enemy-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig",lang:"lang"},decls:19,vars:14,consts:[[3,"title","statHeaders","stats"],[1,"entry-table"],["colspan","2",1,"title"],[3,"resistHeaders","resists","ailmentHeaders","ailments"],[3,"hasTarget","hasLvl","elemOrder","compendium","skillLevels"]],template:function(t,i){1&t&&(e.nrm(0,"app-demon-stats",0),e.j41(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),e.EFF(5,"Appearances"),e.k0s()(),e.j41(6,"tr")(7,"th"),e.EFF(8,"Areas"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Drops"),e.k0s()()(),e.j41(11,"tbody")(12,"tr")(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s()()()(),e.nrm(17,"app-demon-resists",3)(18,"app-demon-skills",4)),2&t&&(e.Y8G("title","Lvl "+i.demon.lvl+" "+i.demon.race+" "+i.demon.name)("statHeaders",i.compConfig.enemyStats)("stats",i.demon.stats),e.R7$(14),e.JRh(i.demon.area),e.R7$(2),e.JRh(i.demon.drop),e.R7$(1),e.Y8G("resistHeaders",i.compConfig.resistElems)("resists",i.demon.resists)("ailmentHeaders",i.compConfig.ailmentElems)("ailments",i.demon.ailments),e.R7$(1),e.Y8G("hasTarget",!0)("hasLvl",!1)("elemOrder",i.compConfig.elemOrder)("compendium",i.compendium)("skillLevels",i.demon.skills))},dependencies:[V.C,K.w,J.F],encapsulation:2,changeDetection:0})}}return s})();function m(s,d){if(1&s&&e.nrm(0,"app-demon-resists",7),2&s){const n=e.XpG(2);e.Y8G("lang",n.lang)("resistHeaders",n.compConfig.resistElems)("resists",n.demon.resists)}}function b(s,d){if(1&s&&e.nrm(0,"app-demon-inherits",8),2&s){const n=e.XpG(2);e.Y8G("hasChance",!n.compConfig.hasManualInheritance)("inheritHeaders",n.compConfig.inheritElems)("inherits",n.demon.affinities)}}function v(s,d){if(1&s&&(e.qex(0),e.nrm(1,"app-demon-stats",2),e.DNE(2,m,1,3,"app-demon-resists",3),e.DNE(3,b,1,3,"app-demon-inherits",4),e.nrm(4,"app-demon-skills",5)(5,"app-smt-fusions",6),e.bVm()),2&s){const n=e.XpG();e.R7$(1),e.Y8G("lang",n.lang)("title","Lvl "+n.demon.lvl+" "+n.demon.race+" "+n.demon.name)("price",n.demon.price)("statHeaders",n.compConfig.baseStats)("stats",n.demon.stats)("inherits",n.demon.inherits),e.R7$(1),e.Y8G("ngIf",n.compConfig.hasDemonResists),e.R7$(1),e.Y8G("ngIf",n.compConfig.inheritElems.length),e.R7$(1),e.Y8G("lang",n.lang)("hasRank",n.compConfig.hasSkillRanks)("hasTarget",!0)("elemOrder",n.compConfig.elemOrder)("compendium",n.compendium)("skillLevels",n.demon.skills),e.R7$(1),e.Y8G("lang",n.lang)("hasTripleFusion",n.compConfig.hasTripleFusion)("excludedDlc","excluded"===n.demon.fusion)}}function O(s,d){if(1&s&&e.nrm(0,"app-demon-missing",9),2&s){const n=e.XpG();e.Y8G("name",n.name)}}function u(s,d){if(1&s&&e.nrm(0,"app-demon-entry",1),2&s){const n=e.XpG();e.Y8G("lang",n.compConfig.lang)("name",n.name)("demon",n.demon)("compConfig",n.compConfig)("compendium",n.compendium)}}function c(s,d){if(1&s&&e.nrm(0,"app-enemy-entry",1),2&s){const n=e.XpG();e.Y8G("lang",n.compConfig.lang)("name",n.name)("demon",n.demon)("compConfig",n.compConfig)("compendium",n.compendium)}}let C=(()=>{class s{constructor(){this.lang="en"}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig",lang:"lang"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"lang","title","price","statHeaders","stats","inherits"],[3,"lang","resistHeaders","resists",4,"ngIf"],[3,"hasChance","inheritHeaders","inherits",4,"ngIf"],[3,"lang","hasRank","hasTarget","elemOrder","compendium","skillLevels"],[3,"lang","hasTripleFusion","excludedDlc"],[3,"lang","resistHeaders","resists"],[3,"hasChance","inheritHeaders","inherits"],[3,"name"]],template:function(t,i){1&t&&(e.DNE(0,v,6,17,"ng-container",0),e.DNE(1,O,1,1,"app-demon-missing",1)),2&t&&(e.Y8G("ngIf",i.demon),e.R7$(1),e.Y8G("ngIf",!i.demon))},dependencies:[S.bT,x.X,V.C,K.w,J.F,z.d,N.L],encapsulation:2,changeDetection:0})}}return s})(),k=(()=>{class s{constructor(n,t,i,p){this.route=n,this.title=t,this.currentDemonService=i,this.fusionDataService=p,this.subscriptions=[],this.appName="Test App",this.appName=p.appName,this.compConfig=p.compConfig}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const n of this.subscriptions)n.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(n=>{this.compendium=n,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(n=>{this.name=n,this.getDemonEntry()})),this.route.params.subscribe(n=>{this.currentDemonService.nextCurrentDemon(n.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(`${this.name} - ${this.appName}`),this.demon=this.compendium.getDemon(this.name))}static{this.\u0275fac=function(t){return new(t||s)(e.rXU(U.nX),e.rXU(P.hE),e.rXU(r.i),e.rXU(D.i))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-demon-entry-container"]],decls:2,vars:2,consts:[[3,"lang","name","demon","compConfig","compendium",4,"ngIf"],[3,"lang","name","demon","compConfig","compendium"]],template:function(t,i){1&t&&(e.DNE(0,u,1,5,"app-demon-entry",0),e.DNE(1,c,1,5,"app-enemy-entry",0)),2&t&&(e.Y8G("ngIf",!i.demon||!i.demon.isEnemy),e.R7$(1),e.Y8G("ngIf",i.demon&&i.demon.isEnemy))},dependencies:[S.bT,C,h],encapsulation:2,changeDetection:0})}}return s})();var y=a(9023);let j=(()=>{class s{constructor(n){this.fusionDataService=n,this.subscriptions=[],this.mitaTable=[]}ngOnInit(){const n=this.fusionDataService.compConfig;this.hasTripleFusion=n.hasTripleFusion,this.hasMitamaFusion=n.elementTable.elems.length>0,this.subscriptions.push(this.fusionDataService.squareChart.subscribe(t=>{this.normChart=t.normalChart,this.tripChart=t.tripleChart,this.updateMitamas()})),this.hasMitamaFusion&&this.subscriptions.push(this.fusionDataService.compendium.subscribe(t=>{this.compendium=t,this.updateMitamas()}))}ngOnDestroy(){for(const n of this.subscriptions)n.unsubscribe()}updateMitamas(){if(!this.hasMitamaFusion||!this.compendium||!this.normChart)return;const n=this.normChart.elementDemons.map(i=>this.compendium.getDemon(i).race),t=[];for(let i=0;i<n.length;i++){const p=n[i];t.push(n.slice(0,i+1).map(g=>this.normChart.getRaceFusion(p,g)))}this.mitaTable=t}static{this.\u0275fac=function(t){return new(t||s)(e.rXU(D.i))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-fusion-chart-container"]],decls:1,vars:6,consts:[[3,"normChart","tripChart","normTitle","tripTitle","mitaTable","isPersona"]],template:function(t,i){1&t&&e.nrm(0,"app-fusion-chart",0),2&t&&e.Y8G("normChart",i.normChart)("tripChart",i.hasTripleFusion?i.tripChart:null)("normTitle","Normal Fusions")("tripTitle",i.hasTripleFusion?"Triple Fusions":null)("mitaTable",i.hasMitamaFusion?i.mitaTable:null)("isPersona",!0)},dependencies:[y.q],encapsulation:2,changeDetection:0})}}return s})();const F=Array(24).fill(0);function l(s,d){return s.split("").map(n=>n.charCodeAt(0)).concat(Array(d-s.length).fill(0))}F[0]=4,F[2]=50,F[4]=50,F[6]=50,F[7]=50,F[8]=50,F[12]=50,F[16]=50,F[20]=50;const f=[].concat(l("aqiu384.github.io",21),l("https://youtu.be/b1KfNEPKncQ",33)),o="kitaro",E="bancho",Q=[].concat(l(o,17),l(E,17)),Z=[].concat(l(o,29),l(E,29)),ie=[].concat(l(o,17),l(E,17),l("renren",17),l("hamuko",17)),oe=[].concat([34,50],Array(36).fill(31),[31,0,31,0,0,0,1,128]),ae=[].concat([34,50],Array(54).fill(31),[31,0,1,0]);var M=a(4341);let me=(()=>{class s{constructor(){this.byteArray=[],this.errorLvl="L",this.typeNum=10,this.qrFactory=qrcode(this.typeNum,this.errorLvl),this.qrImg=null}ngOnChanges(){this.createQrcode()}createQrcode(){this.qrFactory=qrcode(this.typeNum,this.errorLvl),this.qrFactory.addData(this.byteArray.map(n=>String.fromCharCode(n)).join("")),this.qrFactory.make(),this.qrImg=this.qrFactory.createImgTag(5)}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-qrcode"]],inputs:{byteArray:"byteArray",errorLvl:"errorLvl",typeNum:"typeNum"},features:[e.OA$],decls:1,vars:1,consts:[[3,"innerHtml"]],template:function(t,i){1&t&&e.nrm(0,"div",0),2&t&&e.Y8G("innerHtml",i.qrImg,e.npT)},encapsulation:2,changeDetection:0})}}return s})();function pe(s,d){if(1&s&&(e.j41(0,"option",15),e.EFF(1),e.k0s()),2&s){const n=d.index;e.Y8G("value",n+1),e.R7$(1),e.JRh(n+1)}}function ue(s,d){if(1&s&&(e.j41(0,"option",15),e.EFF(1),e.k0s()),2&s){const n=d.index;e.Y8G("value",n+1),e.R7$(1),e.JRh(n+1)}}function ge(s,d){if(1&s&&(e.j41(0,"option",15),e.EFF(1),e.k0s()),2&s){const n=d.index;e.Y8G("value",n+1),e.R7$(1),e.JRh(n+1)}}function de(s,d){if(1&s&&(e.j41(0,"option",15),e.EFF(1),e.k0s()),2&s){const n=d.$implicit;e.Y8G("value",n),e.R7$(1),e.JRh(n)}}function he(s,d){if(1&s&&(e.j41(0,"option",15),e.EFF(1),e.k0s()),2&s){const n=d.$implicit;e.Y8G("value",n.name),e.R7$(1),e.JRh(n.name)}}function fe(s,d){if(1&s&&(e.j41(0,"option",15),e.EFF(1),e.k0s()),2&s){const n=d.$implicit;e.Y8G("value",n),e.R7$(1),e.JRh(n)}}function ve(s,d){if(1&s&&(e.j41(0,"option",15),e.EFF(1),e.k0s()),2&s){const n=d.$implicit;e.Y8G("value",n.name),e.R7$(1),e.JRh(n.name)}}function Ce(s,d){if(1&s){const n=e.RV6();e.qex(0,16),e.j41(1,"tr")(2,"td")(3,"select",17),e.bIt("change",function(){const p=e.eBV(n).$implicit,g=e.XpG();return e.Njj(p.controls.name.setValue(g.skills[p.controls.elem.value][0].name))}),e.DNE(4,fe,2,2,"option",6),e.k0s()(),e.j41(5,"td")(6,"select",18),e.DNE(7,ve,2,2,"option",6),e.k0s()()(),e.bVm()}if(2&s){const n=d.$implicit,t=d.index,i=e.XpG();e.Y8G("formGroupName",t),e.R7$(4),e.Y8G("ngForOf",i.elems),e.R7$(3),e.Y8G("ngForOf",i.skills[n.controls.elem.value])}}let be=(()=>{class s{constructor(n){this.fb=n,this.demons={},this.skills={},this.dcodes={},this.scodes={},this.range99=Array(99),this.range299=Array(299),this.price=0,this.blankSkill={code:0,cost:0,level:0,rank:0,target:"Self",name:"-",element:"-",inherit:"-",effect:"-",learnedBy:[],transfer:[]},this.createForm()}ngOnChanges(){this.initDropdowns()}createForm(){const n=[];for(let t=0;t<6;t++)n.push(this.fb.group({elem:"-",name:"-"}));this.form=this.fb.group({lvl:1,hp:1,mp:1,race:"-",demon:"-",skills:this.fb.array(n)}),this.form.valueChanges.subscribe(t=>{if(this.form.valid){const i=this.compendium.getDemon(t.demon),p=t.skills.map($=>this.compendium.getSkill($.name)||this.blankSkill),g={isEnglish:"en"===this.compConfig.lang,demonCode:i.code,lvl:parseInt(t.lvl,10),exp:-1,hp:parseInt(t.hp,10),mp:parseInt(t.mp,10),skillCodes:p.map($=>$.code)},T=g.skillCodes.reduce(($,q)=>0!==q?$+1:$,0);this.price=10*Math.floor((800+120*g.lvl)*(1+.25*T)/10),this.passBytes=function re(s,d){return d?function ce(s){const d=F.slice(),n=Array(25).fill(0),t=s.lvl,i=Math.floor((((-.0479755766*t+9.28700353)*t+71.9694228)*t-81.1026214)*t+.120783542),p=s.exp<0?i:s.exp;s.isEnglish&&(d[6]=256-d[6]),n[0]=s.demonCode%256,n[1]=2*s.lvl+Math.floor(s.demonCode/256),n[2]=p%256,n[3]=Math.floor(p/256)%256,n[4]=Math.floor(p/65536);for(let g=0;g<6;g++)n[6+2*g]=s.skillCodes[g]%256,n[6+2*g+1]=Math.floor(s.skillCodes[g]/256);return n[22]=10*s.hp%256,n[23]=10*s.mp%16*16+Math.floor(s.hp/25.6),n[24]=Math.floor(s.mp/1.6),[].concat(d,f,ie,ae,n,Array(21).fill(0))}(s):function le(s){const d=s.isEnglish?Z:Q,n=Array(30).fill(0),t=s.lvl,i=Math.floor((((-.07600161*t+14.0603287)*t-.02256972)*t+.59031556)*t-1.87981906),p=s.exp<0?i:s.exp;n[0]=s.demonCode,n[2]=s.lvl,n[6]=p%256,n[7]=Math.floor(p/256)%256,n[8]=Math.floor(p/65536);for(let g=0;g<6;g++)n[10+2*g]=s.skillCodes[g]%256,n[10+2*g+1]=Math.floor(s.skillCodes[g]/256);return n[26]=10*s.hp%256,n[27]=Math.floor(s.hp/25.6),n[28]=10*s.mp%256,n[29]=Math.floor(s.mp/25.6),[].concat(F,f,d,oe,n,Array(40).fill(0))}(s)}(g,this.compConfig.appCssClasses.includes("pq2"))}})}initDropdowns(){if(this.demons={},this.skills={"-":[this.blankSkill]},this.dcodes={},this.scodes={0:this.blankSkill},this.compConfig&&this.compendium){for(const n of this.compendium.allDemons.filter(t=>t.code))this.demons[n.race]||(this.demons[n.race]=[]),this.demons[n.race].push(n),this.dcodes[n.code]=n;for(const n of this.compendium.allSkills.filter(t=>t.code))this.skills[n.element]||(this.skills[n.element]=[]),this.skills[n.element].push(n),this.scodes[n.code]=n;for(const n of Object.values(this.demons))n.sort((t,i)=>i.lvl-t.lvl);for(const n of Object.values(this.skills))n.sort((t,i)=>t.rank-i.rank);this.races=this.compConfig.races.filter(n=>this.demons[n]),this.elems=["-"].concat(this.compConfig.skillElems.filter(n=>this.skills[n])),this.setDefaultValues(this.compConfig.defaultDemon)}}changeRace(n){const t=this.demons[n][0];this.form.controls.demon.setValue(t.name),this.setDefaultValues(t.name)}setDefaultValues(n){const t=Array(6).fill(this.blankSkill),i=this.compendium.getDemon(n);let p=0;for(const[g,T]of Object.entries(i.skills))0===T&&(t[p++]=this.compendium.getSkill(g));this.form.patchValue({lvl:Math.floor(i.lvl),hp:i.stats[0],mp:i.stats[1],race:i.race,demon:i.name,skills:t.map(g=>({elem:g.element,name:g.name}))})}static{this.\u0275fac=function(t){return new(t||s)(e.rXU(M.ok))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-password-generator"]],inputs:{compendium:"compendium",compConfig:"compConfig"},features:[e.OA$],decls:57,vars:9,consts:[[3,"formGroup"],[1,"entry-table"],["colspan","2",1,"title"],[3,"byteArray"],["colspan","6",1,"title"],["formControlName","lvl"],[3,"value",4,"ngFor","ngForOf"],["formControlName","hp"],["formControlName","mp"],["formControlName","race",3,"change"],["formControlName","demon",3,"change"],[2,"width","25%"],[2,"width","75%"],["formArrayName","skills"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"value"],[3,"formGroupName"],["formControlName","elem",3,"change"],["formControlName","name"]],template:function(t,i){1&t&&(e.j41(0,"form",0)(1,"h2"),e.EFF(2,"QR Code Generator"),e.k0s(),e.j41(3,"table",1)(4,"tr")(5,"th",2),e.EFF(6,"QR Code"),e.k0s()(),e.j41(7,"tr")(8,"td"),e.nrm(9,"app-qrcode",3),e.k0s()()(),e.j41(10,"table",1)(11,"tr")(12,"th",4),e.EFF(13,"Persona Entry"),e.k0s()(),e.j41(14,"tr")(15,"th"),e.EFF(16,"Price"),e.k0s(),e.j41(17,"th"),e.EFF(18,"Level"),e.k0s(),e.j41(19,"th"),e.EFF(20,"HP"),e.k0s(),e.j41(21,"th"),e.EFF(22,"MP"),e.k0s(),e.j41(23,"th"),e.EFF(24,"Race"),e.k0s(),e.j41(25,"th"),e.EFF(26,"Demon"),e.k0s()(),e.j41(27,"tr")(28,"td"),e.EFF(29),e.k0s(),e.j41(30,"td")(31,"select",5),e.DNE(32,pe,2,2,"option",6),e.k0s()(),e.j41(33,"td")(34,"select",7),e.DNE(35,ue,2,2,"option",6),e.k0s()(),e.j41(36,"td")(37,"select",8),e.DNE(38,ge,2,2,"option",6),e.k0s()(),e.j41(39,"td")(40,"select",9),e.bIt("change",function(){return i.changeRace(i.form.controls.race.value)}),e.DNE(41,de,2,2,"option",6),e.k0s()(),e.j41(42,"td")(43,"select",10),e.bIt("change",function(){return i.setDefaultValues(i.form.controls.demon.value)}),e.DNE(44,he,2,2,"option",6),e.k0s()()()(),e.j41(45,"table",1)(46,"thead")(47,"tr")(48,"th",2),e.EFF(49,"Learned Skills"),e.k0s()(),e.j41(50,"tr")(51,"th",11),e.EFF(52,"Element"),e.k0s(),e.j41(53,"th",12),e.EFF(54,"Name"),e.k0s()()(),e.j41(55,"tbody",13),e.DNE(56,Ce,8,3,"ng-container",14),e.k0s()()()),2&t&&(e.Y8G("formGroup",i.form),e.R7$(9),e.Y8G("byteArray",i.passBytes),e.R7$(20),e.JRh(i.price),e.R7$(3),e.Y8G("ngForOf",i.range99),e.R7$(3),e.Y8G("ngForOf",i.range299),e.R7$(3),e.Y8G("ngForOf",i.range99),e.R7$(3),e.Y8G("ngForOf",i.races),e.R7$(3),e.Y8G("ngForOf",i.demons[i.form.controls.race.value]),e.R7$(12),e.Y8G("ngForOf",i.form.controls.skills.controls))},dependencies:[S.Sq,M.qT,M.xH,M.y7,M.wz,M.BC,M.cb,M.j4,M.JD,M.$R,M.v8,me],styles:["td[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}input[_ngcontent-%COMP%]{width:95%;border-width:3px}input.ng-valid[_ngcontent-%COMP%]{border-color:#0f0}input.ng-invalid[_ngcontent-%COMP%]{border-color:red}"],changeDetection:0})}}return s})(),ke=(()=>{class s{constructor(n,t){this.fusionDataService=n,this.title=t,this.subscriptions=[],this.compConfig=this.fusionDataService.compConfig}ngOnInit(){this.setTitle(),this.subscribeAll()}ngOnDestroy(){this.unsubscribeAll()}setTitle(){this.title.setTitle(`QR Code Generator - ${this.fusionDataService.appName}`)}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(n=>{this.compendium=n}))}unsubscribeAll(){for(const n of this.subscriptions)n.unsubscribe()}static{this.\u0275fac=function(t){return new(t||s)(e.rXU(D.i),e.rXU(P.hE))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-password-generator-container"]],decls:1,vars:2,consts:[[3,"compendium","compConfig"]],template:function(t,i){1&t&&e.nrm(0,"app-password-generator",0),2&t&&e.Y8G("compendium",i.compendium)("compConfig",i.compConfig)},dependencies:[be],encapsulation:2,changeDetection:0})}}return s})();var ye=a(8948),De=a(860);let Ee=(()=>{class s extends ye.I{constructor(n,t){super(n,t),this.changeDetector=n,this.fusionDataService=t,this.appTitle=t.appName,this.lang=t.compConfig.lang}static{this.\u0275fac=function(t){return new(t||s)(e.rXU(e.gRc),e.rXU(D.i))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-fusion-settings-container"]],features:[e.Vt3],decls:1,vars:4,consts:[[3,"lang","appTitle","fusionSettings","showEnableAll","toggledAll","toggledName"]],template:function(t,i){1&t&&(e.j41(0,"app-fusion-settings",0),e.bIt("toggledAll",function(g){return i.toggleAll(g)})("toggledName",function(g){return i.toggleName(g)}),e.k0s()),2&t&&e.Y8G("lang",i.lang)("appTitle",i.appTitle)("fusionSettings",i.fusionSettings)("showEnableAll",!0)},dependencies:[De.B],encapsulation:2,changeDetection:0})}}return s})();var Fe=a(1289);let Te=(()=>{class s{constructor(n,t){this.fusionDataService=n,this.title=t,this.subscriptions=[],this.lang="en";const i=this.fusionDataService.compConfig;this.maxSkills=i.maxSkillSlots,this.lang=i.lang,this.recipeConfig={fissionCalculator:this.fusionDataService.fissionCalculator,fusionCalculator:this.fusionDataService.fusionCalculator,races:i.races,skillElems:i.skillElems,inheritElems:i.inheritElems,displayElems:i.skillElems.reduce((p,g)=>(p[g]=g,p),{}),restrictInherits:!0,triExclusiveRaces:i.hasTripleFusion?["Fool","Tower","Moon","Sun","Judgement"]:[],triFissionCalculator:this.fusionDataService.triFissionCalculator,triFusionCalculator:this.fusionDataService.triFusionCalculator,defaultDemon:i.defaultDemon}}ngOnInit(){this.setTitle(),this.subscribeAll()}ngOnDestroy(){this.unsubscribeAll()}setTitle(){this.title.setTitle((0,A.o)(G.hV.AppTitle,this.lang)+this.fusionDataService.appName)}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(n=>{this.compendium=n})),this.subscriptions.push(this.fusionDataService.squareChart.subscribe(n=>{this.squareChart=n}))}unsubscribeAll(){for(const n of this.subscriptions)n.unsubscribe()}static{this.\u0275fac=function(t){return new(t||s)(e.rXU(D.i),e.rXU(P.hE))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-recipe-generator-container"]],decls:1,vars:5,consts:[[3,"lang","maxSkills","compendium","squareChart","recipeConfig"]],template:function(t,i){1&t&&e.nrm(0,"app-recipe-generator",0),2&t&&e.Y8G("lang",i.lang)("maxSkills",i.maxSkills)("compendium",i.compendium)("squareChart",i.squareChart)("recipeConfig",i.recipeConfig)},dependencies:[Fe.h],encapsulation:2,changeDetection:0})}}return s})();var $e=a(2649),Se=a(3515),Re=a(1538),Oe=a(1540),we=a(4207);function Pe(s,d){if(1&s&&(e.j41(0,"table",3)(1,"thead")(2,"tr")(3,"th",4),e.EFF(4),e.nI1(5,"translateComp"),e.k0s()()(),e.j41(6,"tbody")(7,"tr")(8,"td"),e.EFF(9),e.k0s()()()()),2&s){const n=e.XpG();e.R7$(4),e.JRh(e.i5U(5,2,n.msgs.SpecialFusionCondition,n.lang)),e.R7$(5),e.JRh(n.fusionPrereq)}}function Ge(s,d){if(1&s&&(e.nrm(0,"app-fusion-entry-table",5),e.nI1(1,"translateComp")),2&s){const n=e.XpG();e.Y8G("lang",n.lang)("title",e.i5U(1,5,n.msgs.SpecialFusionIngredients,n.lang)+n.currentDemon)("baseUrl",n.hasFissionFromDemons?"../../demons":"../..")("rowData",n.fusionEntries)("isFusion",!0)}}function Ne(s,d){if(1&s&&(e.nrm(0,"app-fusion-pair-table",6),e.nI1(1,"translateComp"),e.nI1(2,"translateComp"),e.nI1(3,"translateComp")),2&s){const n=e.XpG();e.Y8G("lang",n.lang)("title",e.i5U(1,8,n.msgs.Title,n.lang)+n.currentDemon)("leftHeader",e.i5U(2,11,n.msgs.LeftHeader,n.lang))("rightHeader",e.i5U(3,14,n.msgs.RightHeader,n.lang))("leftBaseUrl",n.hasFissionFromDemons?"../../demons":"../..")("rightBaseUrl",n.hasFissionFromDemons?"../../demons":"../..")("raceOrder",n.fusionChart.raceOrder)("rowData",n.fusionPairs)}}let je=(()=>{class s extends $e.J{getFusionPairs(){const n=this.calculator.getFusions(this.currentDemon,this.compendium,this.fusionChart).map(this.toFusionPair(this.currentDemon));if(this.fusionChart.elementDemons.length>0)for(const t of(0,Se.iB)(this.currentDemon,this.compendium,this.fusionChart)){const i=(Math.floor(t.lvl1)<<10)+t.lvl2;for(const p of t.names1){const{race:g,lvl:T}=this.compendium.getDemon(p);for(const $ of t.names2){const{race:q,lvl:se,price:_e}=this.compendium.getDemon($);n.push({price:t.price+_e-T,race1:g,lvl1:i,name1:p,race2:q,lvl2:se,name2:$})}}}return n}static{this.\u0275fac=function(){let n;return function(i){return(n||(n=e.xGo(s)))(i||s)}}()}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-p5-fission-table"]],features:[e.Vt3],decls:3,vars:3,consts:[["class","list-table",4,"ngIf"],[3,"lang","title","baseUrl","rowData","isFusion",4,"ngIf"],[3,"lang","title","leftHeader","rightHeader","leftBaseUrl","rightBaseUrl","raceOrder","rowData",4,"ngIf"],[1,"list-table"],[1,"title"],[3,"lang","title","baseUrl","rowData","isFusion"],[3,"lang","title","leftHeader","rightHeader","leftBaseUrl","rightBaseUrl","raceOrder","rowData"]],template:function(t,i){1&t&&(e.DNE(0,Pe,10,5,"table",0),e.DNE(1,Ge,2,8,"app-fusion-entry-table",1),e.DNE(2,Ne,4,17,"app-fusion-pair-table",2)),2&t&&(e.Y8G("ngIf",i.fusionPrereq),e.R7$(1),e.Y8G("ngIf",i.fusionEntries.length),e.R7$(1),e.Y8G("ngIf",i.fusionPairs.length||!i.fusionEntries.length))},dependencies:[S.bT,Re.a,Oe.cK,we.uz],encapsulation:2,changeDetection:0})}}return s})();var Ae=a(6947),te=a(4660);function Ie(s,d){if(1&s&&(e.j41(0,"tr")(1,"th"),e.EFF(2),e.k0s()()),2&s){const n=d.$implicit;e.R7$(2),e.JRh(n)}}let Me=(()=>{class s{ngOnChanges(){if(this.compendium&&this.pairChart&&(this.trioChart||!this.trioCalculator)){const n=[];for(const t of this.compendium.allDemons.filter(i=>!i.isEnemy)){const i=this.compendium.getSpecialNameEntries(t.name);if(i.length>0){n.push(`${t.name} = ${i.join(" x ")}`);continue}const p=this.pairCalculator.getFusions(t.name,this.compendium,this.pairChart).map(T=>(0,te.on)(T,this.compendium));if(p.length>0&&(p.filter(T=>T.race1!==t.race).length>0||!this.trioCalculator||0===this.trioCalculator.getFusions(t.name,this.compendium,this.trioChart).length)){p.sort(($,q)=>$.price-q.price);const T=p.slice(0,3).map($=>`${$.name1} x ${$.name2}`).join(", ");n.push(`${t.name} = ${T}`+(p.length>3?`, ${p.length-3} more...`:""))}else{if(this.trioCalculator){const T=this.trioCalculator.getFusions(t.name,this.compendium,this.trioChart).map($=>(0,te.f7)($,this.compendium)).filter($=>$.d1.race!==t.race);if(T.length>0){T.sort((q,se)=>q.price-se.price);const $=T.slice(0,3).map(q=>`${q.d1.name} x ${q.d2.name} x ${q.d3.name}`).join(", ");n.push(`${t.name} = ${$}`+(T.length>3?`, ${T.length-3} more...`:""));continue}}n.push(t.prereq?`${t.name} = ${t.prereq}`:`${t.name} = No fusions found!`)}}this.fissionPreviews=n}}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-fission-preview-table"]],inputs:{pairCalculator:"pairCalculator",trioCalculator:"trioCalculator",pairChart:"pairChart",trioChart:"trioChart",compendium:"compendium"},features:[e.OA$],decls:6,vars:1,consts:[[1,"entry-table"],[1,"title"],[4,"ngFor","ngForOf"]],template:function(t,i){1&t&&(e.j41(0,"table",0)(1,"tbody")(2,"tr")(3,"th",1),e.EFF(4,"Fission Previews"),e.k0s()(),e.DNE(5,Ie,3,1,"tr",2),e.k0s()()),2&t&&(e.R7$(5),e.Y8G("ngForOf",i.fissionPreviews))},dependencies:[S.Sq],encapsulation:2,changeDetection:0})}}return s})(),qe=(()=>{class s{constructor(n){this.fusionDataService=n,this.subscriptions=[]}ngOnInit(){this.calculator=this.fusionDataService.fissionCalculator,this.subscriptions.push(this.fusionDataService.compendium.subscribe(n=>{this.compendium=n})),this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(n=>{this.fusionChart=n}))}ngOnDestroy(){for(const n of this.subscriptions)n.unsubscribe()}static{this.\u0275fac=function(t){return new(t||s)(e.rXU(Ae.iJ))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-smt-fission-preview"]],decls:2,vars:3,consts:[[3,"pairCalculator","pairChart","compendium"]],template:function(t,i){1&t&&(e.j41(0,"app-fission-preview-table",0),e.nrm(1,"app-fission-preview-table"),e.k0s()),2&t&&e.Y8G("pairCalculator",i.calculator)("pairChart",i.fusionChart)("compendium",i.compendium)},dependencies:[Me],encapsulation:2,changeDetection:0})}}return s})();var Ue=a(3452),Le=a(6188),Be=a(131);const Ye=[{path:"",redirectTo:"personas",pathMatch:"full"},{path:"",component:w,data:{fusionTool:"chart"},children:[{path:"chart",component:j}]},{path:"",component:w,children:[{path:"personas/:demonName",component:k,children:[{path:"fissions/triple",component:Le.X},{path:"fusions/triple",component:Be.W},{path:"fissions",component:je},{path:"fusions",component:Ue.y},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"shadows/:demonName",component:k},{path:"personas",component:R},{path:"shadows",component:R,data:{showShadows:!0}},{path:"skills",component:W},{path:"qrcodes",component:ke},{path:"recipes",component:Te},{path:"settings",component:Ee},{path:"previews",component:qe}]},{path:"**",redirectTo:"personas",pathMatch:"full"}];let He=(()=>{class s{static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[U.iI.forChild(Ye),U.iI]})}}return s})()},7992:(ne,X,a)=>{a.d(X,{i:()=>z});var U=a(4412);class A{constructor(r,h){this.compConfig=r,this.specialRecipes={},this.initImportedData(),this.updateDerivedData(h)}initImportedData(){const r={},h={},m={},b={},v={},O={},u={},c={},C=this.compConfig.hasDemonResists,k=this.compConfig.appCssClasses.includes("p5r"),y="-".repeat(this.compConfig.resistElems.length),j="-".repeat(this.compConfig.ailmentElems.length);for(const[l,f]of Object.entries(this.compConfig.resistCodes))u[l]=(f/1e4|0)<<10,c[l]=f%1e4/2.5|0;const F=(l,f,o)=>(l||f).split("").map((E,B)=>u[E]+(o?.[B]/2.5|0||c[E]));for(const l of this.compConfig.demonData)for(const[f,o]of Object.entries(l)){const E=Object.values(o.skills).reduce((Q,Z)=>0===Z?Q+1:Q,0),B=10*Math.floor((800+120*o.lvl)*(1+.25*E)/10),ee=this.compConfig.inheritTypes[o.inherit||o.inherits];r[f]={name:f,race:o.race,lvl:o.lvl,currLvl:o.lvl,price:o.price||B,inherits:ee.reduce((Q,Z)=>2*Q+(Z>0?1:0),0),affinities:ee,stats:o.stats,resists:C?F(o.resists,y,o.resmods):[],ailments:C?F(o.ailments,j,o.ailmods):[],skills:o.skills,drop:o.item||"",code:o.code||0,fusion:o.fusion||"normal",prereq:o.prereq||""},k&&(r[f].skills[o.trait||"Agi"]=0)}for(const l of this.compConfig.skillData)for(const[f,o]of Object.entries(l))m[f]={name:f,element:o.elem||o.element,inherit:o.elem||o.element,cost:o.cost||0,rank:o.unique?99:o.rank||(1023&o.cost)/100||1,effect:o.effect,target:o.target||"Self",learnedBy:[],transfer:[],code:o.code||0,level:0},o.card&&(m[f].transfer=o.card.split(", ").map(E=>({demon:E,level:r[E]?0:-100})));for(const l of this.compConfig.enemyData)for(const[f,o]of Object.entries(l))if(h[f]={name:f,race:o.race,lvl:o.lvl,currLvl:o.lvl,price:0,inherits:0,stats:o.stats,resists:F(o.resists,y,o.resmods),ailments:F(o.ailments,j,o.ailmods),skills:o.skills.reduce((E,B)=>(E[B]=0,E),{}),area:o.area,drop:o.drops?.join(", ")||"-",code:0,fusion:"normal",isEnemy:!0},h[f].drop){const E=h[f].drop.split(", "),B=E[E.length-1];m[B]&&m[B].transfer.unshift({demon:o.persona,level:5275})}for(const{conditions:l}of this.compConfig.demonUnlocks)for(const[f,o]of Object.entries(l))for(const E of f.split(","))r[E].prereq=o;for(const[l,f]of Object.entries(this.compConfig.specialRecipes)){const o=f;if(b[l]=o,r[l].fusion=o.length>0?"special":"accident",2===o.length)for(const E of o)O[E]||(O[E]=[]),O[E].push(l)}for(const l of this.compConfig.races)v[l]={};for(const l of Object.values(r).sort((f,o)=>f.lvl-o.lvl)){if(l.drop){const[f,o]=l.drop.split(", ");m[f]&&m[f].transfer.unshift({demon:l.name,level:0}),m[o]&&m[o].transfer.unshift({demon:l.name,level:3865})}"party"!==l.fusion&&(v[l.race][l.lvl]=l.name);for(const[f,o]of Object.entries(l.skills))m[f].learnedBy.push({demon:l.name,level:o})}this.demons=r,this.enemies=h,this.skills=m,this.specialRecipes=b,this.invertedDemons=v,this.invertedSpecials=O}updateDerivedData(r){const h=Object.assign({},this.demons),m=[],b={},v={};for(const c of Object.values(this.skills))c.learnedBy.length<1&&c.transfer.length<1?c.rank=99:m.push(c);for(const c of this.compConfig.races)b[c]=[],v[c]=[];for(const[c,C]of Object.entries(this.demons))"party"!==C.fusion&&(this.isElementDemon(c)||b[C.race].push(C.lvl),this.specialRecipes.hasOwnProperty(c)||v[C.race].push(C.lvl));for(const c of this.compConfig.races)b[c].sort((C,k)=>C-k),v[c].sort((C,k)=>C-k);for(const[c,C]of Object.entries(r))if(!C){const{race:k,lvl:y}=this.demons[c];delete h[c],b[k]=b[k].filter(j=>j!==y),v[k]=v[k].filter(j=>j!==y)}const O=Object.keys(h).map(c=>h[c]),u=Object.keys(this.enemies).map(c=>this.enemies[c]);this._allDemons=u.concat(O),this._allSkills=m,this.allIngredients=b,this.allResults=v}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return Object.keys(this.specialRecipes).filter(r=>!this.isElementDemon(r)).map(r=>this.demons[r])}getDemon(r){return this.demons[r]||this.enemies[r]}getSkill(r){return this.skills[r]}getSkills(r){const h=this.compConfig.elemOrder,m=r.map(b=>this.skills[b]);return m.sort((b,v)=>1e4*(h[b.element]-h[v.element])+b.rank-v.rank),m}getIngredientDemonLvls(r){return this.allIngredients[r]||[]}getResultDemonLvls(r){return this.allResults[r]||[]}getSpecialNameEntries(r){return this.specialRecipes[r]||[]}getSpecialNamePairs(r){return[]}reverseLookupDemon(r,h){return this.invertedDemons[r][h]}reverseLookupSpecial(r){return this.invertedSpecials[r]||[]}isElementDemon(r){return this.specialRecipes.hasOwnProperty(r)&&0===this.specialRecipes[r].length}updateFusionSettings(r){this.updateDerivedData(r)}}var G=a(8063);class e extends G.p{constructor(r,h){super(),this.lvlModifier=.5,this.initCharts(r,h)}initCharts(r,h){const m=r.normalTable.races,b=r.normalTable.table,v=r.elementTable?.elems||[],O=r.elementTable?.races||[],u=r.elementTable?.table||[],c=[];for(let C=0;C<m.length;C++)c.push(b[C].slice(h?0:C,h?C+1:m.length)),h||(c[C][0]="-");this.races=m,this.elementDemons=v,this.raceOrder=r.raceOrder,this.lvlModifier=h?4.25:.5,this.fusionChart=G.p.loadFusionTableJson(m,1===b[0].length?b:c),this.fissionChart=G.p.loadFissionTableJson(m,v,1===b[0].length?b:c),this.elementChart=v.length?G.p.loadElementTableJson(O,v,u):{}}}var D=a(6947),S=a(7605),_=a(9910),w=a(7101);function Y(N,r,h){const m=[],{race:b,lvl:v}=r.getDemon(N);for(const O of h.elementDemons.filter(u=>u!==N)){const{race:u,lvl:c}=r.getDemon(O),C=h.getRaceFusions(b)[u],k=r.getResultDemonLvls(C),j=k.reduce((l,f)=>v+c>=2*f?l+1:l,0),F=r.reverseLookupDemon(C,j===k.length?k[k.length-1]:k[j]);m.push({name1:O,name2:F})}return m}var P=a(7178),I=a(3515),R=a(7396),H=a(609),L=a(1939),W=a(2755),x=a(1090),V=a(2598),K=a(9617),J=a(8935);let z=(()=>{class N extends H.d{constructor(h,m,b){const v=b.url.split("/"),O=Object.keys(h.configs)[0],u=h.configs[v[2]||v[1]]||h.configs[v[1]]||h.configs[O],c=m.supportedLanguages.includes(v[1])?v[1]:"en",C={"-":[u.defaultDemon]},k=m.translateRaces(u.races,c),y={appTitle:m.translateAppTitle(u.appTitle,c),lang:c,races:k,raceOrder:k.reduce((l,f,o)=>(l[f]=o,l),{}),appCssClasses:u.appCssClasses,skillData:u.skillData.map(l=>m.translateSkillData(l,c)),skillElems:u.skillElems,ailmentElems:m.translateElems(u.ailmentElems,c),elemOrder:u.elemOrder,resistCodes:u.resistCodes,demonData:u.demonData.map(l=>m.translateDemonData(l,c)),baseStats:m.translateElems(u.baseStats,c),resistElems:u.resistElems,inheritTypes:u.inheritTypes,inheritElems:u.inheritElems,demonUnlocks:m.translateDemonUnlocks(u.demonUnlocks,c),enemyData:u.enemyData.map(l=>m.translateEnemyData(l,c)),enemyStats:u.enemyStats,normalTable:m.translateFusionChart(u.normalTable,c),elementTable:m.translateFusionChart(u.elementTable,c),specialRecipes:m.translateSpecialRecipes(u.specialRecipes,c),maxSkillSlots:u.maxSkillSlots,hasTripleFusion:u.hasTripleFusion,hasDemonResists:u.hasDemonResists,hasSkillRanks:u.hasSkillRanks,hasEnemies:u.hasEnemies,hasQrcodes:u.hasQrcodes,hasSkillCards:u.hasSkillCards,hasManualInheritance:u.hasManualInheritance,defaultDemon:m.translateSpecialRecipes(C,c)["-"][0],settingsKey:m.translateSettingsKey(u.settingsKey,c),settingsVersion:u.settingsVersion},j=new e(y,!1),F=new L.U(y.demonUnlocks,[]);super(new A(y,F.demonToggles),j,F,y.settingsKey,y.settingsVersion),this.fissionCalculator=D.RT,this.fusionCalculator=D.Se,this.triFissionCalculator=D.I4,this.triFusionCalculator=D.zm,this.compConfig=y,this.appName=y.appTitle+(0,W.o)(x.fu.FusionCalculator,y.lang),this._tripleChart=new e(y,!0),this._squareChart$=new U.t({normalChart:j,tripleChart:this._tripleChart,raceOrder:y.raceOrder}),this.squareChart=this._squareChart$.asObservable(),y.appCssClasses.includes("p5t")&&(this.fissionCalculator=new R.s([P.Hr],[]),this.fusionCalculator=new R.s([S.Cx],[])),y.appCssClasses.includes("p5")&&(this.fissionCalculator=new R.s([P.Hr,I.gt],[]),this.fusionCalculator=new R.s([S.Cx,_.H,S.GW],[w.Dy,w.sk,Y]))}static{this.\u0275fac=function(m){return new(m||N)(V.KVO(D.HI),V.KVO(K.i),V.KVO(J.Ix))}}static{this.\u0275prov=V.jDH({token:N,factory:N.\u0275fac})}}return N})()},5763:(ne,X,a)=>{a.d(X,{b:()=>G,u:()=>A});const U=JSON.parse('{"Base":"$2","Exact":"$1% $2","Plus":"$2 +$1%","Minus":"$2 -$1%","Times":"$2 x$1","ScalesWith":"pwr scales with $2","PowerAgainst":"$1 pwr against $2","FracDamage":"reduces $2 by $1%","InstakillWhen":"$1% instakill when $2","SmtKaja":"raises $2 1 rank","SmtKunda":"lowers $2 1 rank","PersonaKaja":"$2 x$1 for 3 turns","ElemCharge":"dmg dealt by next $2 attack x$1","ElemWall":"adds $2 resistance for 3 turns","ElemBreak":"removes $2 resistance for 3 turns","ElemBlock":"nullifies next $2 attack","ElemKarn":"repels next $2 attack","ElemMaster":"$2 skill costs x$1","ElemBoost":"$2 dmg dealt x$1","HealBoost":"$2 skill pwr x$1","DodgeElem":"$2 evasion x$1","DodgeElemPlus":"$2 evasion +$1%","ElemPierce":"$2 dmg dealt cannot be resisted, nullified, or drained","ResistElem":"$2 dmg taken x$1","NullElem":"nullifies $2 dmg taken","RepelElem":"repels $2 dmg taken","DrainElem":"drains $2 dmg taken","BanElement":"cancels first $2 attack in battle","AilmentBoost":"$2 affliction rate x$1","ResistAilment":"$2 susceptibility x$1","NullAilment":"prevents $2","PlusAilment":"adds $1% $2 to Phys attacks","CureAilment":"removes $2","PersonaCounterN":"$1% chance to repel $2 dmg taken","PersonaLifeDrainN":"$1 dmg dealt, $2","SmtCounterN":"$1% chance to counter $2 attack with Phys dmg","SmtAllyCounterN":"$1% chance to counter $2 attack to ally with Phys dmg","AutoSkill":"begins battle with $2","AutoSkillWhen":"begins battle with $2 if applicable","FoulBreathN":"raises $2 susceptibility for 3 turns","RegenerateN":"$1% $2 each turn","InvigorateN":"$1 $2 each turn","GrowthN":"$1% $2 gained when not active","LifeAidN":"$1% max $2 after battle","Recarm":"$1% $2 after reviving","Endure":"$2 with 1 HP after a mortal blow once per battle","EnduringSoul":"$2 with 100% HP after a mortal blow once per battle"}');function A(e,D,S){const[_,w,Y,P,I,R,H,L]=e,[W,x,V]=D,K=x.startsWith("FMT")?U[x.substring(3)]:x,J=parseInt(L.toString()),v=[0===Y?"":`${S?"\u221a":""}${Y} pwr`,P!==I?`${P}-${I} hits`:I<2?"":`${I} hits`,0===R||90<=R&&R<=110?"":`${R}% acc`,H<=5?"":`${H}% crit`,"-"===x?"":K.replace("$1",`${J<1e3?L:(J-1e3)/100}`).replace("$2",W)].filter(O=>""!==O).join(", ");return"x"===v.substring(0,1)?v:v.substring(0,1).toUpperCase()+v.substring(1)}function G(e,D){const{a:[S,_,w],b:Y,c:P}=e,[I,R]=Y.slice(0,2),H=P[2],L={elem:_,rank:I,target:"-"===w?"Self":w,cost:R?R+(R>1e3?R>2e3?D[2]:D[1]:D[0]):0,effect:A(Y,P,1024!==D[0])};return"-"!==H&&(L.card=H),89<I&&(L.unique=!0),L}},159:(ne,X,a)=>{a.d(X,{v:()=>_});var U=a(4341),A=a(177),G=a(3887),e=a(9447),D=a(7277),S=a(2598);let _=(()=>{class w{static forRoot(){return{ngModule:w}}static{this.\u0275fac=function(I){return new(I||w)}}static{this.\u0275mod=S.$C({type:w})}static{this.\u0275inj=S.G2t({imports:[A.MD,G.G,U.X1,e.$,D.S]})}}return w})()}}]);