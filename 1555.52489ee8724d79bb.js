"use strict";(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[1555],{302:(U,I,l)=>{l.d(I,{F:()=>u});var R=l(1090),t=l(2598),s=l(177),a=l(2940),L=l(4207);function v(e,i){if(1&e&&(t.j41(0,"th"),t.EFF(1),t.nI1(2,"translateComp"),t.k0s()),2&e){const n=t.XpG();t.R7$(1),t.JRh(t.i5U(2,1,n.msgs.Target,n.lang))}}function O(e,i){if(1&e&&(t.j41(0,"th"),t.EFF(1),t.nI1(2,"translateComp"),t.k0s()),2&e){const n=t.XpG();t.R7$(1),t.JRh(t.i5U(2,1,n.msgs.Rank,n.lang))}}function M(e,i){1&e&&(t.j41(0,"th"),t.EFF(1,"Inherit"),t.k0s())}function E(e,i){1&e&&(t.j41(0,"th"),t.EFF(1,"Lvl"),t.k0s())}const c=function(e,i){return{extra:e,unique:i}};function f(e,i){if(1&e&&t.nrm(0,"tr",4),2&e){const n=i.$implicit,o=t.XpG();t.Y8G("hasTarget",o.hasTarget)("hasRank",o.hasRank)("hasInherit",o.hasInherit)("hasLearned",!1)("hasLvl",o.hasLvl)("skillLvl",n.level)("data",n)("ngClass",t.l_i(8,c,n.rank>70&&n.rank<90,n.rank>90))}}function C(e,i){if(1&e&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s()()),2&e){const n=t.XpG();t.R7$(1),t.BMQ("colspan",n.skillHeaderLen),t.R7$(1),t.SpI("No ",n.title," Found")}}let u=(()=>{class e{constructor(){this.title="Learned Skills",this.hasInherit=!1,this.hasTarget=!1,this.hasRank=!1,this.hasLvl=!0,this.lang="en",this.skillHeaderLen=5,this.msgs=R.vf}ngOnInit(){this.nextColIndices()}ngOnChanges(){this.nextSkills()}nextColIndices(){this.hasInherit&&(this.skillHeaderLen+=1),this.hasTarget&&(this.skillHeaderLen+=1),this.hasRank&&(this.skillHeaderLen+=1)}nextSkills(){this.skills=Object.keys(this.skillLevels).map(n=>this.compendium.getSkill(n));for(const n of this.skills)n.level=this.skillLevels[n.name];this.elemOrder&&this.skills.sort((n,o)=>200*(n.level-o.level)+this.elemOrder[n.element]-this.elemOrder[o.element])}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-demon-skills"]],inputs:{title:"title",hasInherit:"hasInherit",hasTarget:"hasTarget",hasRank:"hasRank",hasLvl:"hasLvl",compendium:"compendium",elemOrder:"elemOrder",skillLevels:"skillLevels",lang:"lang"},features:[t.OA$],decls:26,vars:24,consts:[[1,"entry-table"],[1,"title"],[4,"ngIf"],["class","app-smt-skill-list-row",3,"hasTarget","hasRank","hasInherit","hasLearned","hasLvl","skillLvl","data","ngClass",4,"ngFor","ngForOf"],[1,"app-smt-skill-list-row",3,"hasTarget","hasRank","hasInherit","hasLearned","hasLvl","skillLvl","data","ngClass"]],template:function(o,p){1&o&&(t.j41(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),t.EFF(4),t.k0s()(),t.j41(5,"tr")(6,"th"),t.EFF(7),t.nI1(8,"translateComp"),t.k0s(),t.j41(9,"th"),t.EFF(10),t.nI1(11,"translateComp"),t.k0s(),t.j41(12,"th"),t.EFF(13),t.nI1(14,"translateComp"),t.k0s(),t.j41(15,"th"),t.EFF(16),t.nI1(17,"translateComp"),t.k0s(),t.DNE(18,v,3,4,"th",2),t.DNE(19,O,3,4,"th",2),t.DNE(20,M,2,0,"th",2),t.DNE(21,E,2,0,"th",2),t.k0s()(),t.j41(22,"tbody"),t.DNE(23,f,1,11,"tr",3),t.DNE(24,C,3,2,"tr",2),t.nrm(25,"tr"),t.k0s()()),2&o&&(t.R7$(3),t.BMQ("colSpan",p.skillHeaderLen),t.R7$(1),t.JRh(p.title),t.R7$(3),t.JRh(t.i5U(8,12,p.msgs.Elem,p.lang)),t.R7$(3),t.JRh(t.i5U(11,15,p.msgs.Name,p.lang)),t.R7$(3),t.JRh(t.i5U(14,18,p.msgs.Cost,p.lang)),t.R7$(3),t.JRh(t.i5U(17,21,p.msgs.Effect,p.lang)),t.R7$(2),t.Y8G("ngIf",p.hasTarget),t.R7$(1),t.Y8G("ngIf",p.hasRank),t.R7$(1),t.Y8G("ngIf",p.hasInherit),t.R7$(1),t.Y8G("ngIf",p.hasLvl),t.R7$(2),t.Y8G("ngForOf",p.skills),t.R7$(1),t.Y8G("ngIf",!p.skills.length))},dependencies:[s.YU,s.Sq,s.bT,a.t,L.uz],encapsulation:2,changeDetection:0})}}return e})()},3679:(U,I,l)=>{l.d(I,{C:()=>e});var R=l(1090),t=l(2598),s=l(177),a=l(4207);function L(i,n){if(1&i&&(t.j41(0,"h2"),t.EFF(1),t.k0s()),2&i){const o=t.XpG();t.R7$(1),t.JRh(o.title)}}function v(i,n){if(1&i&&(t.j41(0,"th"),t.EFF(1),t.nI1(2,"translateComp"),t.k0s()),2&i){const o=t.XpG();t.R7$(1),t.JRh(t.i5U(2,1,o.msgs.Price,o.lang))}}function O(i,n){if(1&i&&(t.j41(0,"th"),t.EFF(1),t.k0s()),2&i){const o=n.$implicit;t.R7$(1),t.JRh(o)}}function M(i,n){1&i&&(t.j41(0,"th"),t.EFF(1,"Inherits"),t.k0s())}function E(i,n){if(1&i&&(t.j41(0,"th"),t.EFF(1),t.k0s()),2&i){const o=n.$implicit;t.R7$(1),t.JRh(o)}}function c(i,n){if(1&i&&(t.j41(0,"td"),t.EFF(1),t.k0s()),2&i){const o=t.XpG();t.R7$(1),t.JRh(o.price)}}function f(i,n){if(1&i&&(t.j41(0,"td"),t.EFF(1),t.k0s()),2&i){const o=n.$implicit;t.R7$(1),t.JRh(o)}}function C(i,n){if(1&i&&(t.j41(0,"td")(1,"div"),t.EFF(2),t.k0s()()),2&i){const o=t.XpG();t.R7$(1),t.ZvI("element-icon i",o.inherits,""),t.R7$(1),t.JRh(o.inherits)}}const u=["*"];let e=(()=>{class i{constructor(){this.title="Demon Entry",this.statHeaders=[],this.stats=[],this.fusionHeaders=[],this.price=0,this.lang="en",this.msgs=R.Cj}static{this.\u0275fac=function(p){return new(p||i)}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-demon-stats"]],inputs:{title:"title",statHeaders:"statHeaders",stats:"stats",fusionHeaders:"fusionHeaders",inherits:"inherits",price:"price",lang:"lang"},ngContentSelectors:u,decls:20,vars:13,consts:[[4,"ngIf"],[1,"entry-table"],[1,"title"],[4,"ngFor","ngForOf"]],template:function(p,m){1&p&&(t.NAR(),t.qex(0),t.DNE(1,L,2,1,"h2",0),t.j41(2,"table",1)(3,"thead")(4,"tr")(5,"th",2),t.EFF(6),t.nI1(7,"translateComp"),t.k0s()(),t.j41(8,"tr"),t.DNE(9,v,3,4,"th",0),t.DNE(10,O,2,1,"th",3),t.DNE(11,M,2,0,"th",0),t.DNE(12,E,2,1,"th",3),t.k0s()(),t.j41(13,"tbody")(14,"tr"),t.DNE(15,c,2,1,"td",0),t.DNE(16,f,2,1,"td",3),t.DNE(17,C,3,4,"td",0),t.SdG(18),t.k0s()()(),t.eu8(19),t.bVm()),2&p&&(t.R7$(1),t.Y8G("ngIf",m.title.includes("Lvl")),t.R7$(4),t.BMQ("colSpan",m.stats.length+m.fusionHeaders.length+(m.inherits?1:0)+(m.price?1:0)),t.R7$(1),t.SpI(" ",m.title.includes("Lvl")?t.i5U(7,10,m.msgs.Stats,m.lang):m.title," "),t.R7$(3),t.Y8G("ngIf",m.price),t.R7$(1),t.Y8G("ngForOf",m.statHeaders),t.R7$(1),t.Y8G("ngIf",m.inherits),t.R7$(1),t.Y8G("ngForOf",m.fusionHeaders),t.R7$(3),t.Y8G("ngIf",m.price),t.R7$(1),t.Y8G("ngForOf",m.stats),t.R7$(1),t.Y8G("ngIf",m.inherits))},dependencies:[s.Sq,s.bT,a.uz],encapsulation:2,changeDetection:0})}}return i})()},9023:(U,I,l)=>{l.d(I,{q:()=>C});var R=l(2755),t=l(1090),s=l(2598),a=l(345),L=l(8935),v=l(177);function O(u,e){if(1&u&&(s.j41(0,"th"),s.EFF(1),s.k0s()),2&u){const i=e.$implicit,n=s.XpG();s.R7$(1),s.JRh(i.slice(0,n.nameCut))}}function M(u,e){if(1&u&&(s.j41(0,"td",4),s.EFF(1),s.k0s()),2&u){const i=e.$implicit,n=s.XpG(2);s.Y8G("ngClass",i.slice(0,4)),s.R7$(1),s.JRh(i.slice(4,n.nameCut+4))}}function E(u,e){if(1&u&&(s.j41(0,"tr")(1,"th"),s.EFF(2),s.k0s(),s.DNE(3,M,2,2,"td",3),s.j41(4,"th"),s.EFF(5),s.k0s()()),2&u){const i=e.$implicit;s.R7$(2),s.JRh(i[0]),s.R7$(1),s.Y8G("ngForOf",i.slice(1,i.length-1)),s.R7$(2),s.JRh(i[i.length-1])}}function c(u,e){if(1&u&&(s.j41(0,"th"),s.EFF(1),s.k0s()),2&u){const i=e.$implicit,n=s.XpG();s.R7$(1),s.JRh(i.slice(0,n.nameCut))}}function f(u,e){if(1&u&&(s.j41(0,"tr")(1,"th",0),s.EFF(2),s.k0s()()),2&u){const i=s.XpG();s.R7$(1),s.BMQ("colspan",i.table[0].length),s.R7$(1),s.Lme("",i.appName," ",i.tripTitle,"")}}class C{static{this.RESULT_COLORS=Object.entries({oran:["-2","Erthys","Gnome","Saki","Saki Mitama","Random","\u30a2\u30fc\u30b7\u30fc\u30ba","\u30ce\u30fc\u30e0","\u30b5\u30ad\u30df\u30bf\u30de"],redd:["-1","Flaemis","Salamander","Ara ","Ara Mitama","Fiend","\u30d5\u30ec\u30a4\u30df\u30fc\u30ba","\u30b5\u30e9\u30de\u30f3\u30c0\u30fc","\u30a2\u30e9\u30df\u30bf\u30de"],gree:["1","Aeros","Sylph","Kusi","Kusi Mitama","UMA","\u30a8\u30a2\u30ed\u30b9","\u30b7\u30eb\u30ad\u30fc","\u30af\u30b7\u30df\u30bf\u30de"],blue:["2","Aquans","Undine","Nigi","Nigi Mitama","Enigma","\u30a2\u30af\u30a2\u30f3\u30ba","\u30a6\u30f3\u30c7\u30a3\u30fc\u30cd","\u30cb\u30ae\u30df\u30bf\u30de"]})}constructor(e,i){this.title2=e,this.route=i,this.normTitle="Normal Fusions",this.tripTitle="",this.isPersona=!1,this.filterDarks=!0,this.lang="en",this.msgs=t.qh,this.subscriptions=[],this.table=[],this.nameCut=4}ngOnInit(){this.subscriptions.push(this.route.parent.data.subscribe(e=>{this.appName=e.appName||"Shin Megami Tensei",this.nameCut=parseInt((0,R.oO)(this.msgs.NameCut,e.lang)),this.title2.setTitle((0,R.oO)(this.msgs.AppTitle,e.lang).replace("$APP",this.appName))}))}ngOnChanges(){this.normChart&&this.fillFusionChart()}ngOnDestroy(){for(const e of this.subscriptions)e.unsubscribe()}fillFusionChart(){const e="noneNone",n=C.RESULT_COLORS.reduce((k,[_,T])=>T.reduce((b,N)=>(b[N]=_,b),k),{}),o=this.normChart.elementDemons;let p=[],m=this.normChart.races,F=[];this.filterDarks&&(p=this.normChart.races.filter(k=>this.normChart.getLightDark(k)>0),m=this.normChart.races.filter(k=>0===this.normChart.getLightDark(k)),F=this.normChart.races.filter(k=>-1===this.normChart.getLightDark(k)),0===F.length&&p.length>0&&(p=this.normChart.races.filter(k=>this.normChart.getLightDark(k)>-1),m=[],F=this.normChart.races.filter(k=>this.normChart.getLightDark(k)<-1)));const P=p.length-F.length,y=p.concat(m,o),$=F.length?F.concat(Array(y.length-F.length).fill("")):y,A=this.mitaTable?y:p.concat(m,Array(o.length).fill("")),G=this.mitaTable||F.length?Array(P).fill("").concat(F,m,o):y;this.table=[[""].concat(y,[""])];for(let k=0;k<G.length;k++){const _=Array(y.length+2).fill("empt-"),T=G[k],b=A[k],N=-1!==o.indexOf(T),g=-1!==o.indexOf(b);this.table.push(_),_[0]=T,_[_.length-1]=b;for(let D=k;D<y.length;D++){const r=y[D],h=-1!==o.indexOf(r);if(h&&g){const d=o.indexOf(b),j=o.indexOf(r),S=this.mitaTable[d][j-d-1];_[D+1]=S?(n[S]||"norm")+S:e}else if(h&&b){const d=this.normChart.getElemFusions(r)[b];_[D+1]=d?(n[d]||"rank")+(d>0?"+":"")+d.toString():e}else if(r&&b){const d=this.isPersona&&r===b?r:this.normChart.getRaceFusion(r,b);_[D+1]=d?(n[d]||(r===b?"elem":"norm"))+d:e}}if(this.tripChart)for(let D=0;D<=k-P;D++){const r=$[D];if(r&&N){const h=this.tripChart.getElemFusions(T)[r];_[D+1]=h?(n[h]||"rank")+(h>0?"+":"")+h.toString():e}else if(r&&T){const h=this.tripChart.getRaceFusion(r,T);_[D+1]=h?(n[h]||(r===T?"elem":"trip"))+h:e}}if(-1!==T.indexOf(" x ")){const[D,r]=T.split(" x "),h=D.slice(0,3)+"x"+r.slice(0,3);_[0]=h,_[_.length-1]=h}else if(-1!==T.indexOf(" ")){const D=T.split(" ")[0];_[0]=D,_[_.length-1]=D}}for(let k=0;k<this.table[0].length;k++){const _=this.table[0][k];if(-1!==_.indexOf(" x ")){const[T,b]=_.split(" x ");this.table[0][k]=T.slice(0,2)+b.slice(0,2)}}this.table.push([""].concat($,[""]))}static{this.\u0275fac=function(i){return new(i||C)(s.rXU(a.hE),s.rXU(L.nX))}}static{this.\u0275cmp=s.VBU({type:C,selectors:[["app-fusion-chart"]],inputs:{normChart:"normChart",tripChart:"tripChart",mitaTable:"mitaTable",normTitle:"normTitle",tripTitle:"tripTitle",isPersona:"isPersona",filterDarks:"filterDarks",lang:"lang",counter:"counter"},features:[s.OA$],decls:12,vars:7,consts:[[1,"title"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(i,n){1&i&&(s.j41(0,"table")(1,"tbody")(2,"tr")(3,"th",0),s.EFF(4),s.k0s()(),s.j41(5,"tr"),s.DNE(6,O,2,1,"th",1),s.k0s(),s.DNE(7,E,6,3,"tr",1),s.j41(8,"tr"),s.DNE(9,c,2,1,"th",1),s.k0s(),s.DNE(10,f,3,3,"tr",2),s.k0s(),s.nrm(11,"tbody"),s.k0s()),2&i&&(s.R7$(3),s.BMQ("colspan",n.table[0].length),s.R7$(1),s.Lme("",n.appName," ",n.normTitle,""),s.R7$(2),s.Y8G("ngForOf",n.table[0]),s.R7$(1),s.Y8G("ngForOf",n.table.slice(1,n.table.length-1)),s.R7$(2),s.Y8G("ngForOf",n.table[n.table.length-1]),s.R7$(1),s.Y8G("ngIf",n.tripTitle))},dependencies:[v.YU,v.Sq,v.bT],styles:["table[_ngcontent-%COMP%]{width:auto;margin:0 auto;white-space:nowrap}td.elem[_ngcontent-%COMP%]{color:#0f0}td.trip[_ngcontent-%COMP%]{color:#d3d3d3}td.oran[_ngcontent-%COMP%]{color:orange}td.redd[_ngcontent-%COMP%]{color:red}td.gree[_ngcontent-%COMP%]{color:#0f0}td.blue[_ngcontent-%COMP%]{color:#0ff}td.none[_ngcontent-%COMP%]{color:transparent}td.empt[_ngcontent-%COMP%]{background-color:transparent;color:transparent}"],changeDetection:0})}}},6122:(U,I,l)=>{l.d(I,{L:()=>u});var R=l(3885),t=l(9108),s=l(1090),a=l(2598),L=l(177),v=l(8935),O=l(4207);const M=function(){return{exact:!0}};function E(e,i){if(1&e&&(a.j41(0,"th",4)(1,"a",5),a.EFF(2),a.nI1(3,"translateComp"),a.k0s()()),2&e){const n=i.$implicit,o=a.XpG();a.xc7("width",100/o.fusionOptions.length,"%"),a.Y8G("routerLink",n.link)("routerLinkActiveOptions",a.lJ4(9,M)),a.R7$(1),a.Y8G("routerLink",n.link),a.R7$(1),a.JRh(a.i5U(3,6,n.title,o.lang))}}function c(e,i){if(1&e&&(a.j41(0,"tr")(1,"th",6),a.EFF(2),a.nI1(3,"translateComp"),a.k0s()()),2&e){const n=a.XpG();a.R7$(1),a.BMQ("colspan",n.fusionOptions.length),a.R7$(1),a.SpI(" ",a.i5U(3,2,n.msgs.DlcExcluded,n.lang)," ")}}function f(e,i){if(1&e&&(a.j41(0,"tr")(1,"th",6),a.SdG(2),a.k0s()()),2&e){const n=a.XpG();a.R7$(1),a.BMQ("colspan",n.fusionOptions.length)}}const C=["*"];let u=(()=>{class e{constructor(){this.hasTripleFusion=!1,this.showFusionAlert=!1,this.excludedDlc=!1,this.lang="en",this.msgs=s.Lq,this.fusionOptions=[{title:this.msgs.NormalFissions,link:"fissions"},{title:this.msgs.NormalFusions,link:"fusions"}]}ngOnInit(){this.hasTripleFusion&&(this.fusionOptions=[{title:this.msgs.DoubleFissions,link:"fissions"},{title:this.msgs.TripleFissions,link:"fissions/triple"},{title:this.msgs.TripleFusions,link:"fusions/triple"},{title:this.msgs.DoubleFusions,link:"fusions"}])}ngOnChanges(){setTimeout(()=>this.stickyTable.nextEdges())}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=a.VBU({type:e,selectors:[["app-smt-fusions"]],viewQuery:function(o,p){if(1&o&&a.GBs(t.a,5),2&o){let m;a.mGM(m=a.lsd())&&(p.stickyTable=m.first)}},inputs:{hasTripleFusion:"hasTripleFusion",showFusionAlert:"showFusionAlert",excludedDlc:"excludedDlc",lang:"lang"},features:[a.Jv_([R.P]),a.OA$],ngContentSelectors:C,decls:11,vars:3,consts:[["appPositionSticky","",1,"list-table"],["stickyTable",""],["class","nav","routerLinkActive","active",3,"routerLink","width","routerLinkActiveOptions",4,"ngFor","ngForOf"],[4,"ngIf"],["routerLinkActive","active",1,"nav",3,"routerLink","routerLinkActiveOptions"],[3,"routerLink"],[1,"title"]],template:function(o,p){1&o&&(a.NAR(),a.j41(0,"div")(1,"table",0,1)(3,"thead")(4,"tr"),a.DNE(5,E,4,10,"th",2),a.k0s(),a.DNE(6,c,4,5,"tr",3),a.nrm(7,"tr"),a.DNE(8,f,3,1,"tr",3),a.nrm(9,"tr"),a.k0s()(),a.nrm(10,"router-outlet"),a.k0s()),2&o&&(a.R7$(5),a.Y8G("ngForOf",p.fusionOptions),a.R7$(1),a.Y8G("ngIf",p.excludedDlc),a.R7$(2),a.Y8G("ngIf",p.showFusionAlert))},dependencies:[L.Sq,L.bT,v.n3,v.Wk,v.wQ,t.a,O.uz],encapsulation:2,changeDetection:0})}}return e})()},232:(U,I,l)=>{l.d(I,{S:()=>N});var R=l(8935),t=l(2598),s=l(5320),a=l(177),L=l(5583);let v=(()=>{class g{constructor(r){this.appCssClasses=r.compConfig.appCssClasses}static{this.\u0275fac=function(h){return new(h||g)(t.rXU(s.i))}}static{this.\u0275cmp=t.VBU({type:g,selectors:[["app-smt1-compendium"]],decls:1,vars:2,consts:[[3,"ngClass","hasSettings"]],template:function(h,d){1&h&&t.nrm(0,"app-demon-compendium",0),2&h&&t.Y8G("ngClass",d.appCssClasses)("hasSettings",!1)},dependencies:[a.YU,L.f],styles:[".kuzu div.element-icon{height:12px;background-size:12px;background-repeat:no-repeat;background-position:center;color:transparent}.kuzu div.element-icon.phy{background-image:url(/assets/images/smtsj/phy.png)}.kuzu div.element-icon.gun{background-image:url(/assets/images/smtsj/gun.png)}.kuzu div.element-icon.fir{background-image:url(/assets/images/smtsj/fir.png)}.kuzu div.element-icon.ice{background-image:url(/assets/images/smtsj/ice.png)}.kuzu div.element-icon.ele{background-image:url(/assets/images/smtsj/ele.png)}.kuzu div.element-icon.for{background-image:url(/assets/images/smtsj/win.png)}.kuzu div.element-icon.dea{background-image:url(/assets/images/smtsj/cur.png)}.kuzu div.element-icon.min{background-image:url(/assets/images/smt4f/panic.png)}.kuzu div.element-icon.alm{background-image:url(/assets/images/smtsj/alm.png)}.kuzu div.element-icon.rec{background-image:url(/assets/images/smtsj/rec.png)}.kuzu div.element-icon.sup{background-image:url(/assets/images/smtsj/sup.png)}.kuzu div.element-icon.pas{background-image:url(/assets/images/smtsj/pas.png)}.kuzu div.element-icon.inv{background-image:url(/assets/images/smtsj/spe.png)}.kuzu div.element-icon.bos{background-image:url(/assets/images/smtsj/spe.png)}.kuzu div.element-icon.mys{background-image:url(/assets/images/smt4f/curse.png)}.kuzu div.element-icon.aut{background-image:url(/assets/images/smtsj/spe.png)}.kuzu div.element-icon.rac{background-image:url(/assets/images/smtsj/spe.png)}.kuzu div.element-icon.non{background-image:url(/assets/images/smtsj/spe.png)}.krch th.title,.krch th.nav.active,.krch th.nav.active a{color:#000;background-color:#856363}.krao th.title,.krao th.nav.active,.krao th.nav.active a{color:#fff;background-color:#8e283d}.mjn1 th.title,.mjn1 th.nav.active,.mjn1 th.nav.active a{color:#fff;background-color:#004381}.ds1 th.title,.ds1 th.nav.active,.ds1 th.nav.active a{color:#fff;background-color:#e83145}.ds2 th.title,.ds2 th.nav.active,.ds2 th.nav.active a{color:#fff;background-color:#0078e8}\n"],encapsulation:2,changeDetection:0})}}return g})();var O=l(9404),M=l(345),E=l(9629);let c=(()=>{class g extends O.M{constructor(r,h,d){super(r,h,d),this.appName=`List of Demons - ${d.appName}`,this.compConfig=d.compConfig,this.defaultSortFun=(j,S)=>200*(this.compConfig.raceOrder[j.race]-this.compConfig.raceOrder[S.race])+S.lvl-j.lvl}static{this.\u0275fac=function(h){return new(h||g)(t.rXU(M.hE),t.rXU(t.gRc),t.rXU(s.i))}}static{this.\u0275cmp=t.VBU({type:g,selectors:[["app-demon-list-container"]],features:[t.Vt3],decls:2,vars:6,consts:[[3,"raceOrder","statHeaders","resistHeaders","rowData"]],template:function(h,d){1&h&&(t.nrm(0,"app-smt-demon-list",0),t.nI1(1,"async")),2&h&&t.Y8G("raceOrder",d.compConfig.raceOrder)("statHeaders",d.compConfig.baseStats)("resistHeaders",d.compConfig.resistElems)("rowData",t.bMT(1,4,d.demons))},dependencies:[E.F,a.Jj],encapsulation:2,changeDetection:0})}}return g})();var f=l(9454),C=l(2940);let u=(()=>{class g extends f.E{constructor(r,h,d){super(r,h,d),this.appName=`List of Skills - ${d.appName}`,this.compConfig=d.compConfig,this.defaultSortFun=(j,S)=>1e4*(this.compConfig.elemOrder[j.element]-this.compConfig.elemOrder[S.element])+j.rank-S.rank}static{this.\u0275fac=function(h){return new(h||g)(t.rXU(M.hE),t.rXU(t.gRc),t.rXU(s.i))}}static{this.\u0275cmp=t.VBU({type:g,selectors:[["app-skill-list-container"]],features:[t.Vt3],decls:2,vars:6,consts:[[3,"elemOrder","hasRank","hasTarget","rowData"]],template:function(h,d){1&h&&(t.nrm(0,"app-smt-skill-list",0),t.nI1(1,"async")),2&h&&t.Y8G("elemOrder",d.compConfig.elemOrder)("hasRank",!1)("hasTarget",!0)("rowData",t.bMT(1,4,d.skills))},dependencies:[C.p,a.Jj],encapsulation:2,changeDetection:0})}}return g})();var e=l(9023);let i=(()=>{class g{constructor(r){this.fusionDataService=r,this.subscriptions=[]}ngOnInit(){const r=this.fusionDataService.compConfig;this.appName=r.appTitle,this.mitamaTable=r.mitamaTable,this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(h=>{this.normChart=h}))}ngOnDestroy(){for(const r of this.subscriptions)r.unsubscribe()}static{this.\u0275fac=function(h){return new(h||g)(t.rXU(s.i))}}static{this.\u0275cmp=t.VBU({type:g,selectors:[["app-fusion-chart-container"]],decls:1,vars:2,consts:[[3,"normChart","mitaTable"]],template:function(h,d){1&h&&t.nrm(0,"app-fusion-chart",0),2&h&&t.Y8G("normChart",d.normChart)("mitaTable",d.mitamaTable)},dependencies:[e.q],encapsulation:2,changeDetection:0})}}return g})();var n=l(5692),o=l(3679),p=l(2223),m=l(302),F=l(6122),P=l(8696);const y=function(){return["Personality"]};function $(g,D){if(1&g&&(t.qex(0),t.j41(1,"app-demon-stats",2)(2,"td"),t.EFF(3),t.k0s()(),t.nrm(4,"app-demon-resists",3)(5,"app-demon-skills",4)(6,"app-smt-fusions"),t.bVm()),2&g){const r=t.XpG();t.R7$(1),t.Y8G("title","Lvl "+r.demon.lvl+" "+r.demon.race+" "+r.demon.name)("price",r.demon.price)("statHeaders",r.compConfig.baseStats)("fusionHeaders",t.lJ4(13,y))("stats",r.demon.stats),t.R7$(2),t.JRh(r.demon.person),t.R7$(1),t.Y8G("resistHeaders",r.compConfig.resistElems)("resists",r.demon.resists),t.R7$(1),t.Y8G("title","Innate Skills")("hasTarget",!0)("elemOrder",r.compConfig.elemOrder)("compendium",r.compendium)("skillLevels",r.demon.skills)}}function A(g,D){if(1&g&&t.nrm(0,"app-demon-missing",5),2&g){const r=t.XpG();t.Y8G("name",r.name)}}let G=(()=>{class g{static{this.\u0275fac=function(h){return new(h||g)}}static{this.\u0275cmp=t.VBU({type:g,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"title","price","statHeaders","fusionHeaders","stats"],[3,"resistHeaders","resists"],[3,"title","hasTarget","elemOrder","compendium","skillLevels"],[3,"name"]],template:function(h,d){1&h&&(t.DNE(0,$,7,14,"ng-container",0),t.DNE(1,A,1,1,"app-demon-missing",1)),2&h&&(t.Y8G("ngIf",d.demon),t.R7$(1),t.Y8G("ngIf",!d.demon))},dependencies:[a.bT,n.X,o.C,p.w,m.F,F.L],encapsulation:2,changeDetection:0})}}return g})(),k=(()=>{class g{constructor(r,h,d,j){this.route=r,this.title=h,this.currentDemonService=d,this.fusionDataService=j,this.subscriptions=[],this.appName="Test App",this.appName=j.appName,this.compConfig=j.compConfig}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const r of this.subscriptions)r.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(r=>{this.compendium=r,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(r=>{this.name=r,this.getDemonEntry()})),this.route.params.subscribe(r=>{this.currentDemonService.nextCurrentDemon(r.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(`${this.name} - ${this.appName}`),this.demon=this.compendium.getDemon(this.name))}static{this.\u0275fac=function(h){return new(h||g)(t.rXU(R.nX),t.rXU(M.hE),t.rXU(P.i),t.rXU(s.i))}}static{this.\u0275cmp=t.VBU({type:g,selectors:[["app-demon-entry-container"]],decls:1,vars:4,consts:[[3,"name","demon","compConfig","compendium"]],template:function(h,d){1&h&&t.nrm(0,"app-demon-entry",0),2&h&&t.Y8G("name",d.name)("demon",d.demon)("compConfig",d.compConfig)("compendium",d.compendium)},dependencies:[G],encapsulation:2,changeDetection:0})}}return g})();var _=l(2649),T=l(3452);const b=[{path:"",redirectTo:"demons",pathMatch:"full"},{path:"",component:v,data:{fusionTool:"chart"},children:[{path:"chart",component:i}]},{path:"",component:v,children:[{path:"demons/:demonName",component:k,children:[{path:"fissions",component:_.J},{path:"fusions",component:T.y},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"demons",component:c},{path:"skills",component:u}]},{path:"**",redirectTo:"demons",pathMatch:"full"}];let N=(()=>{class g{static{this.\u0275fac=function(h){return new(h||g)}}static{this.\u0275mod=t.$C({type:g})}static{this.\u0275inj=t.G2t({imports:[R.iI.forChild(b),R.iI]})}}return g})()},5320:(U,I,l)=>{l.d(I,{i:()=>M});var R=l(4412);class t{constructor(c){this.compConfig=c,this.pairRecipes={},this.entryRecipes={},this.initImportedData(),this.updateDerivedData()}estimateKuzuPrice(c){return Math.floor(Math.pow(c.slice(c.length-4).reduce((f,C)=>C+f,0),2)/20)}estimateDesuPrice(c){const f=c.slice(c.length-4).reduce((C,u)=>u+C,0);return Math.floor(((-.01171*f+5.0625)*f-129)*f)+1115}initImportedData(){const c={},f={},C={},u={},e={},i=this.compConfig.isDesu,n={};for(const[o,p]of Object.entries(this.compConfig.resistCodes))n[o]=((p/1e3|0)<<10)+(p%1e3/2.5|0);for(const o of this.compConfig.demonData)for(const[p,m]of Object.entries(o))c[p]={name:p,race:m.race,lvl:m.lvl,currLvl:m.lvl,price:i?this.estimateDesuPrice(m.stats):100*(this.estimateKuzuPrice(m.stats)+m.lvl),inherits:0,stats:m.stats,resists:(m.nresists||m.resists).split("").map(F=>n[F]),skills:m.nskills||m.skills,person:m.person||"",fusion:"normal",prereq:m.prereq||""};for(const o of this.compConfig.skillData)for(const[p,m]of Object.entries(o))f[p]={name:p,rank:m.rank||(1023&m.cost)/10||0,cost:m.cost||0,effect:m.effect||"",target:m.prereq||m.target||"Self",element:m.elem,learnedBy:[],level:0};for(const o of this.compConfig.races)e[o]={};for(const o of Object.values(c).sort((p,m)=>p.lvl-m.lvl)){e[o.race][o.lvl]=o.name;for(const[p,m]of Object.entries(o.skills))f[p].learnedBy.push({demon:o.name,level:m})}for(const[o,p]of Object.entries(this.compConfig.specialRecipes)){const m=p,F=[],P=[],y=c[o];y.fusion=m.length>1?"special":"accident",u[o]=F,C[o]=P;for(const $ of m)if($.includes(" x ")){const[A,G]=$.split(" x ");P.push({name1:A,name2:G}),y.fusion="special"}else F.push($)}this.demons=c,this.skills=f,this.pairRecipes=C,this.entryRecipes=u,this.invertedDemons=e}updateDerivedData(){const c=Object.assign({},this.demons),f=Object.keys(this.skills).map(e=>this.skills[e]),C={},u={};for(const e of this.compConfig.races)C[e]=[],u[e]=[];for(const[e,i]of Object.entries(this.demons))this.isElementDemon(e)||C[i.race].push(i.lvl),!this.pairRecipes[e]&&!this.entryRecipes[e]&&u[i.race].push(i.lvl);for(const e of this.compConfig.races)C[e].sort((i,n)=>i-n),u[e].sort((i,n)=>i-n);this._allDemons=Object.keys(c).map(e=>c[e]),this._allSkills=f,this.allIngredients=C,this.allResults=u}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return[]}getDemon(c){return this.demons[c]}getSkill(c){return this.skills[c]}getSkills(c){const f=c.map(C=>this.skills[C]);return f.sort((C,u)=>1e4*(this.compConfig.elemOrder[C.element]-this.compConfig.elemOrder[u.element])+C.rank-u.rank),f}getIngredientDemonLvls(c){return this.allIngredients[c]||[]}getResultDemonLvls(c){return this.allResults[c]||[]}getSpecialNameEntries(c){return this.entryRecipes[c]||[]}getSpecialNamePairs(c){return this.pairRecipes[c]||[]}reverseLookupDemon(c,f){return this.invertedDemons[c][f]}reverseLookupSpecial(c){return[]}isElementDemon(c){return-1!==this.compConfig.elementTable.elems.indexOf(c)}updateFusionSettings(c){}}var s=l(8063);class a extends s.p{constructor(c){super(),this.initCharts(c)}initCharts(c){const f=c.normalTable.races,C=c.normalTable.table,u=c.elementTable.elems,e=c.elementTable.races,i=c.elementTable.table;this.races=f,this.elementDemons=u,this.lvlModifier=c.fusionLvlMod,this.fusionChart=s.p.loadFusionTableJson(f,C),this.fissionChart=s.p.loadFissionTableJson(f,[],C),this.elementChart={},this.elementChart=u.length?s.p.loadElementTableJson(e,u,i):f.reduce((n,o)=>(n[o]=[],n),{})}getLightDark(c){return 0}getRaceFusions(c){return Object.assign({},super.getRaceFusions(c))}}var L=l(6947),v=l(2598),O=l(8935);let M=(()=>{class E{constructor(f,C){const u=C.url.split("/")[1];this.compConfig=f.configs[f.configs[u]?u:"krch"],this.appName=this.compConfig.appTitle+" Fusion Calculator",this.fissionCalculator=this.compConfig.fissionCalculator,this.fusionCalculator=this.compConfig.fusionCalculator,this.compendium=new R.t(new t(this.compConfig)).asObservable(),this.fusionChart=new R.t(new a(this.compConfig)).asObservable()}updateFusionSettings(f){return{}}static{this.\u0275fac=function(C){return new(C||E)(v.KVO(L.HI),v.KVO(O.Ix))}}static{this.\u0275prov=v.jDH({token:E,factory:E.\u0275fac})}}return E})()},1555:(U,I,l)=>{l.d(I,{T:()=>v});var R=l(177),t=l(3887),s=l(9447),a=l(232),L=l(2598);let v=(()=>{class O{static forRoot(){return{ngModule:O}}static{this.\u0275fac=function(c){return new(c||O)}}static{this.\u0275mod=L.$C({type:O})}static{this.\u0275inj=L.G2t({imports:[R.MD,t.G,s.SharedCompendiumModule,a.S]})}}return O})()}}]);