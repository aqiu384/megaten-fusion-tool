"use strict";(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[814],{755:(U,Z,m)=>{m.d(Z,{n:()=>u});var t=m(4769),i=m(6814),o=m(3934);function v(e,s){1&e&&(t.TgZ(0,"th"),t._uU(1,"Target"),t.qZA())}function b(e,s){1&e&&(t.TgZ(0,"th"),t._uU(1,"Rank"),t.qZA())}function E(e,s){1&e&&(t.TgZ(0,"th"),t._uU(1,"Inherit"),t.qZA())}function D(e,s){1&e&&(t.TgZ(0,"th"),t._uU(1,"Level"),t.qZA())}const y=function(e,s){return{extra:e,unique:s}};function T(e,s){if(1&e&&t._UZ(0,"tr",4),2&e){const n=s.$implicit,r=t.oxw();t.Q6J("hasTarget",r.hasTarget)("hasRank",r.hasRank)("hasInherit",r.hasInherit)("hasLearned",!1)("hasLvl",r.hasLvl)("skillLvl",n.level)("data",n)("ngClass",t.WLB(8,y,n.rank>70&&n.rank<90,n.rank>90))}}function a(e,s){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA()()),2&e){const n=t.oxw();t.xp6(1),t.uIk("colspan",n.skillHeaderLen),t.xp6(1),t.hij("No ",n.title," Found")}}let u=(()=>{class e{constructor(){this.title="Learned Skills",this.hasInherit=!1,this.hasTarget=!1,this.hasRank=!1,this.hasLvl=!0,this.skillHeaderLen=5}ngOnInit(){this.nextColIndices()}ngOnChanges(){this.nextSkills()}nextColIndices(){this.hasInherit&&(this.skillHeaderLen+=1),this.hasTarget&&(this.skillHeaderLen+=1),this.hasRank&&(this.skillHeaderLen+=1)}nextSkills(){this.skills=Object.keys(this.skillLevels).map(n=>this.compendium.getSkill(n));for(const n of this.skills)n.level=this.skillLevels[n.name];this.elemOrder&&this.skills.sort((n,r)=>200*(n.level-r.level)+this.elemOrder[n.element]-this.elemOrder[r.element])}static#t=this.\u0275fac=function(r){return new(r||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-demon-skills"]],inputs:{title:"title",hasInherit:"hasInherit",hasTarget:"hasTarget",hasRank:"hasRank",hasLvl:"hasLvl",compendium:"compendium",elemOrder:"elemOrder",skillLevels:"skillLevels"},features:[t.TTD],decls:22,vars:8,consts:[[1,"entry-table"],[1,"title"],[4,"ngIf"],["class","app-smt-skill-list-row",3,"hasTarget","hasRank","hasInherit","hasLearned","hasLvl","skillLvl","data","ngClass",4,"ngFor","ngForOf"],[1,"app-smt-skill-list-row",3,"hasTarget","hasRank","hasInherit","hasLearned","hasLvl","skillLvl","data","ngClass"]],template:function(r,g){1&r&&(t.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),t._uU(4),t.qZA()(),t.TgZ(5,"tr")(6,"th"),t._uU(7,"Elem"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Name"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Cost"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Effect"),t.qZA(),t.YNc(14,v,2,0,"th",2),t.YNc(15,b,2,0,"th",2),t.YNc(16,E,2,0,"th",2),t.YNc(17,D,2,0,"th",2),t.qZA()(),t.TgZ(18,"tbody"),t.YNc(19,T,1,11,"tr",3),t.YNc(20,a,3,2,"tr",2),t._UZ(21,"tr"),t.qZA()()),2&r&&(t.xp6(3),t.uIk("colSpan",g.skillHeaderLen),t.xp6(1),t.Oqu(g.title),t.xp6(10),t.Q6J("ngIf",g.hasTarget),t.xp6(1),t.Q6J("ngIf",g.hasRank),t.xp6(1),t.Q6J("ngIf",g.hasInherit),t.xp6(1),t.Q6J("ngIf",g.hasLvl),t.xp6(2),t.Q6J("ngForOf",g.skills),t.xp6(1),t.Q6J("ngIf",!g.skills.length))},dependencies:[i.mk,i.sg,i.O5,o.W],encapsulation:2,changeDetection:0})}return e})()},8520:(U,Z,m)=>{m.d(Z,{O:()=>e});var t=m(4769),i=m(6814);function o(s,n){if(1&s&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&s){const r=t.oxw();t.xp6(1),t.Oqu(r.title)}}function v(s,n){if(1&s&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&s){const r=t.oxw();t.xp6(1),t.Oqu(r.langEn?"Price":"\u4fa1\u683c")}}function b(s,n){if(1&s&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&s){const r=n.$implicit;t.xp6(1),t.Oqu(r)}}function E(s,n){1&s&&(t.TgZ(0,"th"),t._uU(1,"Inherits"),t.qZA())}function D(s,n){if(1&s&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&s){const r=n.$implicit;t.xp6(1),t.Oqu(r)}}function y(s,n){if(1&s&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&s){const r=t.oxw();t.xp6(1),t.Oqu(r.price)}}function T(s,n){if(1&s&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&s){const r=n.$implicit;t.xp6(1),t.Oqu(r)}}function a(s,n){if(1&s&&(t.TgZ(0,"td")(1,"div"),t._uU(2),t.qZA()()),2&s){const r=t.oxw();t.xp6(1),t.Gre("element-icon i",r.inherits,""),t.xp6(1),t.Oqu(r.inherits)}}const u=["*"];let e=(()=>{class s{constructor(){this.title="Demon Entry",this.statHeaders=[],this.stats=[],this.fusionHeaders=[],this.price=0,this.langEn=!0}static#t=this.\u0275fac=function(g){return new(g||s)};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-demon-stats"]],inputs:{title:"title",statHeaders:"statHeaders",stats:"stats",fusionHeaders:"fusionHeaders",inherits:"inherits",price:"price",langEn:"langEn"},ngContentSelectors:u,decls:19,vars:10,consts:[[4,"ngIf"],[1,"entry-table"],[1,"title"],[4,"ngFor","ngForOf"]],template:function(g,p){1&g&&(t.F$t(),t.ynx(0),t.YNc(1,o,2,1,"h2",0),t.TgZ(2,"table",1)(3,"thead")(4,"tr")(5,"th",2),t._uU(6),t.qZA()(),t.TgZ(7,"tr"),t.YNc(8,v,2,1,"th",0),t.YNc(9,b,2,1,"th",3),t.YNc(10,E,2,0,"th",0),t.YNc(11,D,2,1,"th",3),t.qZA()(),t.TgZ(12,"tbody")(13,"tr"),t.YNc(14,y,2,1,"td",0),t.YNc(15,T,2,1,"td",3),t.YNc(16,a,3,4,"td",0),t.Hsn(17),t.qZA()()(),t.GkF(18),t.BQk()),2&g&&(t.xp6(1),t.Q6J("ngIf",p.title.includes("Lvl")),t.xp6(4),t.uIk("colSpan",p.stats.length+p.fusionHeaders.length+(p.inherits?1:0)+(p.price?1:0)),t.xp6(1),t.hij(" ",p.title.includes("Lvl")?p.langEn?"Stats":"\u30b9\u30c6\u30fc\u30bf\u30b9":p.title," "),t.xp6(2),t.Q6J("ngIf",p.price),t.xp6(1),t.Q6J("ngForOf",p.statHeaders),t.xp6(1),t.Q6J("ngIf",p.inherits),t.xp6(1),t.Q6J("ngForOf",p.fusionHeaders),t.xp6(3),t.Q6J("ngIf",p.price),t.xp6(1),t.Q6J("ngForOf",p.stats),t.xp6(1),t.Q6J("ngIf",p.inherits))},dependencies:[i.sg,i.O5],encapsulation:2,changeDetection:0})}return s})()},8615:(U,Z,m)=>{m.d(Z,{R:()=>a});var t=m(4769),i=m(6593),o=m(4487),v=m(6814);function b(u,e){if(1&u&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&u){const s=e.$implicit,n=t.oxw();t.xp6(1),t.Oqu(s.slice(0,n.nameCut))}}function E(u,e){if(1&u&&(t.TgZ(0,"td",4),t._uU(1),t.qZA()),2&u){const s=e.$implicit,n=t.oxw(2);t.Q6J("ngClass",s.slice(0,4)),t.xp6(1),t.Oqu(s.slice(4,n.nameCut+4))}}function D(u,e){if(1&u&&(t.TgZ(0,"tr")(1,"th"),t._uU(2),t.qZA(),t.YNc(3,E,2,2,"td",3),t.TgZ(4,"th"),t._uU(5),t.qZA()()),2&u){const s=e.$implicit;t.xp6(2),t.Oqu(s[0]),t.xp6(1),t.Q6J("ngForOf",s.slice(1,s.length-1)),t.xp6(2),t.Oqu(s[s.length-1])}}function y(u,e){if(1&u&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&u){const s=e.$implicit,n=t.oxw();t.xp6(1),t.Oqu(s.slice(0,n.nameCut))}}function T(u,e){if(1&u&&(t.TgZ(0,"tr")(1,"th",0),t._uU(2),t.qZA()()),2&u){const s=t.oxw();t.xp6(1),t.uIk("colspan",s.table[0].length),t.xp6(1),t.AsE("",s.appName," ",s.tripTitle,"")}}class a{static#t=this.RESULT_COLORS=Object.entries({oran:["-2","Erthys","Gnome","Saki","Saki Mitama","Random","\u30a2\u30fc\u30b7\u30fc\u30ba","\u30ce\u30fc\u30e0","\u30b5\u30ad\u30df\u30bf\u30de"],redd:["-1","Flaemis","Salamander","Ara ","Ara Mitama","Fiend","\u30d5\u30ec\u30a4\u30df\u30fc\u30ba","\u30b5\u30e9\u30de\u30f3\u30c0\u30fc","\u30a2\u30e9\u30df\u30bf\u30de"],gree:["1","Aeros","Sylph","Kusi","Kusi Mitama","UMA","\u30a8\u30a2\u30ed\u30b9","\u30b7\u30eb\u30ad\u30fc","\u30af\u30b7\u30df\u30bf\u30de"],blue:["2","Aquans","Undine","Nigi","Nigi Mitama","Enigma","\u30a2\u30af\u30a2\u30f3\u30ba","\u30a6\u30f3\u30c7\u30a3\u30fc\u30cd","\u30cb\u30ae\u30df\u30bf\u30de"]});constructor(e,s){this.title2=e,this.route=s,this.normTitle="Normal Fusions",this.tripTitle="",this.isPersona=!1,this.filterDarks=!0,this.langEn=!0,this.subscriptions=[],this.table=[],this.nameCut=4}ngOnInit(){this.subscriptions.push(this.route.parent.data.subscribe(e=>{this.appName=e.appName||"Shin Megami Tensei",this.nameCut=this.langEn?4:2,this.title2.setTitle(this.langEn?`Fusion Chart - ${this.appName} Fusion Calculator`:`\u5408\u4f53\u8868 ${this.appName} \u5408\u4f53\u30a2\u30d7\u30ea`)}))}ngOnChanges(){this.normChart&&this.fillFusionChart()}ngOnDestroy(){for(const e of this.subscriptions)e.unsubscribe()}fillFusionChart(){const e="noneNone",n=a.RESULT_COLORS.reduce((_,[k,x])=>x.reduce((L,N)=>(L[N]=k,L),_),{}),r=this.normChart.elementDemons;let g=[],p=this.normChart.races,C=[];this.filterDarks&&(g=this.normChart.races.filter(_=>this.normChart.getLightDark(_)>0),p=this.normChart.races.filter(_=>0===this.normChart.getLightDark(_)),C=this.normChart.races.filter(_=>-1===this.normChart.getLightDark(_)),0===C.length&&g.length>0&&(g=this.normChart.races.filter(_=>this.normChart.getLightDark(_)>-1),p=[],C=this.normChart.races.filter(_=>this.normChart.getLightDark(_)<-1)));const f=g.length-C.length,F=g.concat(p,r),R=C.length?C.concat(Array(F.length-C.length).fill("")):F,M=this.mitaTable?F:g.concat(p,Array(r.length).fill("")),S=this.mitaTable||C.length?Array(f).fill("").concat(C,p,r):F;this.table=[[""].concat(F,[""])];for(let _=0;_<S.length;_++){const k=Array(F.length+2).fill("empt-"),x=S[_],L=M[_],N=-1!==r.indexOf(x),j=-1!==r.indexOf(L);this.table.push(k),k[0]=x,k[k.length-1]=L;for(let O=_;O<F.length;O++){const c=F[O],A=-1!==r.indexOf(c);if(A&&j){const l=r.indexOf(L),h=r.indexOf(c),d=this.mitaTable[l][h-l-1];k[O+1]=d?(n[d]||"norm")+d:e}else if(A&&L){const l=this.normChart.getElemFusions(c)[L];k[O+1]=l?(n[l]||"rank")+(l>0?"+":"")+l.toString():e}else if(c&&L){const l=this.isPersona&&c===L?c:this.normChart.getRaceFusion(c,L);k[O+1]=l?(n[l]||(c===L?"elem":"norm"))+l:e}}if(this.tripChart)for(let O=0;O<=_-f;O++){const c=R[O];if(c&&N){const A=this.tripChart.getElemFusions(x)[c];k[O+1]=A?(n[A]||"rank")+(A>0?"+":"")+A.toString():e}else if(c&&x){const A=this.tripChart.getRaceFusion(c,x);k[O+1]=A?(n[A]||(c===x?"elem":"trip"))+A:e}}if(-1!==x.indexOf(" x ")){const[O,c]=x.split(" x "),A=O.slice(0,3)+"x"+c.slice(0,3);k[0]=A,k[k.length-1]=A}else if(-1!==x.indexOf(" ")){const O=x.split(" ")[0];k[0]=O,k[k.length-1]=O}}for(let _=0;_<this.table[0].length;_++){const k=this.table[0][_];if(-1!==k.indexOf(" x ")){const[x,L]=k.split(" x ");this.table[0][_]=x.slice(0,2)+L.slice(0,2)}}this.table.push([""].concat(R,[""]))}static#e=this.\u0275fac=function(s){return new(s||a)(t.Y36(i.Dx),t.Y36(o.gz))};static#s=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-fusion-chart"]],inputs:{normChart:"normChart",tripChart:"tripChart",mitaTable:"mitaTable",normTitle:"normTitle",tripTitle:"tripTitle",isPersona:"isPersona",filterDarks:"filterDarks",langEn:"langEn",counter:"counter"},features:[t.TTD],decls:12,vars:7,consts:[[1,"title"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(s,n){1&s&&(t.TgZ(0,"table")(1,"tbody")(2,"tr")(3,"th",0),t._uU(4),t.qZA()(),t.TgZ(5,"tr"),t.YNc(6,b,2,1,"th",1),t.qZA(),t.YNc(7,D,6,3,"tr",1),t.TgZ(8,"tr"),t.YNc(9,y,2,1,"th",1),t.qZA(),t.YNc(10,T,3,3,"tr",2),t.qZA(),t._UZ(11,"tbody"),t.qZA()),2&s&&(t.xp6(3),t.uIk("colspan",n.table[0].length),t.xp6(1),t.AsE("",n.appName," ",n.normTitle,""),t.xp6(2),t.Q6J("ngForOf",n.table[0]),t.xp6(1),t.Q6J("ngForOf",n.table.slice(1,n.table.length-1)),t.xp6(2),t.Q6J("ngForOf",n.table[n.table.length-1]),t.xp6(1),t.Q6J("ngIf",n.tripTitle))},dependencies:[v.mk,v.sg,v.O5],styles:["table[_ngcontent-%COMP%]{width:auto;margin:0 auto;white-space:nowrap}td.elem[_ngcontent-%COMP%]{color:#0f0}td.trip[_ngcontent-%COMP%]{color:#d3d3d3}td.oran[_ngcontent-%COMP%]{color:orange}td.redd[_ngcontent-%COMP%]{color:red}td.gree[_ngcontent-%COMP%]{color:#0f0}td.blue[_ngcontent-%COMP%]{color:#0ff}td.none[_ngcontent-%COMP%]{color:transparent}td.empt[_ngcontent-%COMP%]{background-color:transparent;color:transparent}"],changeDetection:0})}},4069:(U,Z,m)=>{m.d(Z,{O:()=>u});var t=m(3247),i=m(3808),o=m(4769),v=m(6814),b=m(4487);const E=function(){return{exact:!0}};function D(e,s){if(1&e&&(o.TgZ(0,"th",4)(1,"a",5),o._uU(2),o.qZA()()),2&e){const n=s.$implicit,r=o.oxw();o.Udp("width",100/r.fusionOptions.length,"%"),o.Q6J("routerLink",n.link)("routerLinkActiveOptions",o.DdM(6,E)),o.xp6(1),o.Q6J("routerLink",n.link),o.xp6(1),o.Oqu(n.title)}}function y(e,s){if(1&e&&(o.TgZ(0,"tr")(1,"th",6),o._uU(2),o.qZA()()),2&e){const n=o.oxw();o.xp6(1),o.uIk("colspan",n.fusionOptions.length),o.xp6(1),o.hij(" ",n.langEn?"DLC marked as excluded in fusion settings, results may be inaccurate!":"DLC\u306a\u3057"," ")}}function T(e,s){if(1&e&&(o.TgZ(0,"tr")(1,"th",6),o.Hsn(2),o.qZA()()),2&e){const n=o.oxw();o.xp6(1),o.uIk("colspan",n.fusionOptions.length)}}const a=["*"];let u=(()=>{class e{constructor(){this.hasTripleFusion=!1,this.showFusionAlert=!1,this.excludedDlc=!1,this.langEn=!0,this.fusionOptions=e.NORMAL_FUSIONS_EN}static#t=this.NORMAL_FUSIONS_EN=[{title:"Reverse Fusions",link:"fissions"},{title:"Forward Fusions",link:"fusions"}];static#e=this.NORMAL_FUSIONS_JA=[{title:"\u9006\u5f15\u304d\u5408\u4f53",link:"fissions"},{title:"2\u8eab\u5408\u4f53",link:"fusions"}];static#s=this.TRIPLE_FUSIONS=[{title:"Normal Reverse Fusions",link:"fissions"},{title:"Triple Reverse Fusions",link:"fissions/triple"},{title:"Triple Forward Fusions",link:"fusions/triple"},{title:"Normal Forward Fusions",link:"fusions"}];ngOnInit(){this.fusionOptions=this.hasTripleFusion?e.TRIPLE_FUSIONS:this.langEn?e.NORMAL_FUSIONS_EN:e.NORMAL_FUSIONS_JA}ngOnChanges(){setTimeout(()=>this.stickyTable.nextEdges())}static#n=this.\u0275fac=function(r){return new(r||e)};static#i=this.\u0275cmp=o.Xpm({type:e,selectors:[["app-smt-fusions"]],viewQuery:function(r,g){if(1&r&&o.Gf(i.v,5),2&r){let p;o.iGM(p=o.CRH())&&(g.stickyTable=p.first)}},inputs:{hasTripleFusion:"hasTripleFusion",showFusionAlert:"showFusionAlert",excludedDlc:"excludedDlc",langEn:"langEn"},features:[o._Bn([t.L]),o.TTD],ngContentSelectors:a,decls:11,vars:3,consts:[["appPositionSticky","",1,"list-table"],["stickyTable",""],["class","nav","routerLinkActive","active",3,"routerLink","width","routerLinkActiveOptions",4,"ngFor","ngForOf"],[4,"ngIf"],["routerLinkActive","active",1,"nav",3,"routerLink","routerLinkActiveOptions"],[3,"routerLink"],[1,"title"]],template:function(r,g){1&r&&(o.F$t(),o.TgZ(0,"div")(1,"table",0,1)(3,"thead")(4,"tr"),o.YNc(5,D,3,7,"th",2),o.qZA(),o.YNc(6,y,3,2,"tr",3),o._UZ(7,"tr"),o.YNc(8,T,3,1,"tr",3),o._UZ(9,"tr"),o.qZA()(),o._UZ(10,"router-outlet"),o.qZA()),2&r&&(o.xp6(5),o.Q6J("ngForOf",g.fusionOptions),o.xp6(1),o.Q6J("ngIf",g.excludedDlc),o.xp6(2),o.Q6J("ngIf",g.showFusionAlert))},dependencies:[v.sg,v.O5,b.lC,b.rH,b.Od,i.v],encapsulation:2,changeDetection:0})}return e})()},3917:(U,Z,m)=>{m.d(Z,{V:()=>O});var t=m(4487),i=m(4769),o=m(5553),v=m(6814),b=m(5390);let E=(()=>{class c{constructor(l){this.appCssClasses=l.compConfig.appCssClasses}static#t=this.\u0275fac=function(h){return new(h||c)(i.Y36(o.Y))};static#e=this.\u0275cmp=i.Xpm({type:c,selectors:[["app-smt1-compendium"]],decls:1,vars:2,consts:[[3,"ngClass","hasSettings"]],template:function(h,d){1&h&&i._UZ(0,"app-demon-compendium",0),2&h&&i.Q6J("ngClass",d.appCssClasses)("hasSettings",!1)},dependencies:[v.mk,b.e],styles:[".kuzu div.element-icon{height:12px;background-size:12px;background-repeat:no-repeat;background-position:center;color:transparent}.kuzu div.element-icon.phy{background-image:url(/assets/images/smtsj/phy.png)}.kuzu div.element-icon.gun{background-image:url(/assets/images/smtsj/gun.png)}.kuzu div.element-icon.fir{background-image:url(/assets/images/smtsj/fir.png)}.kuzu div.element-icon.ice{background-image:url(/assets/images/smtsj/ice.png)}.kuzu div.element-icon.ele{background-image:url(/assets/images/smtsj/ele.png)}.kuzu div.element-icon.for{background-image:url(/assets/images/smtsj/win.png)}.kuzu div.element-icon.dea{background-image:url(/assets/images/smtsj/cur.png)}.kuzu div.element-icon.min{background-image:url(/assets/images/smt4f/panic.png)}.kuzu div.element-icon.alm{background-image:url(/assets/images/smtsj/alm.png)}.kuzu div.element-icon.rec{background-image:url(/assets/images/smtsj/rec.png)}.kuzu div.element-icon.sup{background-image:url(/assets/images/smtsj/sup.png)}.kuzu div.element-icon.pas{background-image:url(/assets/images/smtsj/pas.png)}.kuzu div.element-icon.inv{background-image:url(/assets/images/smtsj/spe.png)}.kuzu div.element-icon.bos{background-image:url(/assets/images/smtsj/spe.png)}.kuzu div.element-icon.phys{background-image:url(/assets/images/smtsj/phy.png)}.kuzu div.element-icon.fire{background-image:url(/assets/images/smtsj/fir.png)}.kuzu div.element-icon.ice{background-image:url(/assets/images/smtsj/ice.png)}.kuzu div.element-icon.elec{background-image:url(/assets/images/smtsj/ele.png)}.kuzu div.element-icon.force{background-image:url(/assets/images/smtsj/win.png)}.kuzu div.element-icon.curse{background-image:url(/assets/images/smt4f/curse.png)}.kuzu div.element-icon.strike{background-image:url(/assets/images/smtsj/phy.png)}.kuzu div.element-icon.almighty{background-image:url(/assets/images/smtsj/alm.png)}.kuzu div.element-icon.recovery{background-image:url(/assets/images/smtsj/rec.png)}.kuzu div.element-icon.support{background-image:url(/assets/images/smtsj/sup.png)}.kuzu div.element-icon.passive{background-image:url(/assets/images/smtsj/pas.png)}.kuzu div.element-icon.auto{background-image:url(/assets/images/smtsj/spe.png)}.kuzu div.element-icon.racial{background-image:url(/assets/images/smtsj/spe.png)}.kuzu div.element-icon.none{background-image:url(/assets/images/smtsj/spe.png)}.krch th.title,.krch th.nav.active,.krch th.nav.active a{color:#000;background-color:#856363}.krao th.title,.krao th.nav.active,.krao th.nav.active a{color:#fff;background-color:#8e283d}.mjn1 th.title,.mjn1 th.nav.active,.mjn1 th.nav.active a{color:#fff;background-color:#004381}.ds1 th.title,.ds1 th.nav.active,.ds1 th.nav.active a{color:#fff;background-color:#e83145}.ds2 th.title,.ds2 th.nav.active,.ds2 th.nav.active a{color:#fff;background-color:#0078e8}\n"],encapsulation:2,changeDetection:0})}return c})();var D=m(1032),y=m(6593),T=m(4101);let a=(()=>{class c extends D.l{constructor(l,h,d){super(l,h,d),this.appName=`List of Demons - ${d.appName}`,this.compConfig=d.compConfig,this.defaultSortFun=(I,P)=>200*(this.compConfig.raceOrder[I.race]-this.compConfig.raceOrder[P.race])+P.lvl-I.lvl}static#t=this.\u0275fac=function(h){return new(h||c)(i.Y36(y.Dx),i.Y36(i.sBO),i.Y36(o.Y))};static#e=this.\u0275cmp=i.Xpm({type:c,selectors:[["app-demon-list-container"]],features:[i.qOj],decls:2,vars:6,consts:[[3,"raceOrder","statHeaders","resistHeaders","rowData"]],template:function(h,d){1&h&&(i._UZ(0,"app-smt-demon-list",0),i.ALo(1,"async")),2&h&&i.Q6J("raceOrder",d.compConfig.raceOrder)("statHeaders",d.compConfig.baseStats)("resistHeaders",d.compConfig.resistElems)("rowData",i.lcZ(1,4,d.demons))},dependencies:[T.Q,v.Ov],encapsulation:2,changeDetection:0})}return c})();var u=m(4330),e=m(3934);let s=(()=>{class c extends u.e{constructor(l,h,d){super(l,h,d),this.appName=`List of Skills - ${d.appName}`,this.compConfig=d.compConfig,this.defaultSortFun=(I,P)=>1e4*(this.compConfig.elemOrder[I.element]-this.compConfig.elemOrder[P.element])+I.rank-P.rank}static#t=this.\u0275fac=function(h){return new(h||c)(i.Y36(y.Dx),i.Y36(i.sBO),i.Y36(o.Y))};static#e=this.\u0275cmp=i.Xpm({type:c,selectors:[["app-skill-list-container"]],features:[i.qOj],decls:2,vars:6,consts:[[3,"elemOrder","hasRank","hasTarget","rowData"]],template:function(h,d){1&h&&(i._UZ(0,"app-smt-skill-list",0),i.ALo(1,"async")),2&h&&i.Q6J("elemOrder",d.compConfig.elemOrder)("hasRank",!1)("hasTarget",!0)("rowData",i.lcZ(1,4,d.skills))},dependencies:[e.J,v.Ov],encapsulation:2,changeDetection:0})}return c})();var n=m(8615);let r=(()=>{class c{constructor(l){this.fusionDataService=l,this.subscriptions=[]}ngOnInit(){const l=this.fusionDataService.compConfig;this.appName=l.appTitle,this.mitamaTable=l.mitamaTable,this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(h=>{this.normChart=h}))}ngOnDestroy(){for(const l of this.subscriptions)l.unsubscribe()}static#t=this.\u0275fac=function(h){return new(h||c)(i.Y36(o.Y))};static#e=this.\u0275cmp=i.Xpm({type:c,selectors:[["app-fusion-chart-container"]],decls:1,vars:2,consts:[[3,"normChart","mitaTable"]],template:function(h,d){1&h&&i._UZ(0,"app-fusion-chart",0),2&h&&i.Q6J("normChart",d.normChart)("mitaTable",d.mitamaTable)},dependencies:[n.R],encapsulation:2,changeDetection:0})}return c})();var g=m(7880),p=m(8520),C=m(1009),f=m(755),F=m(4069),R=m(8711);const M=function(){return["Personality"]};function S(c,A){if(1&c&&(i.ynx(0),i.TgZ(1,"app-demon-stats",2)(2,"td"),i._uU(3),i.qZA()(),i._UZ(4,"app-demon-resists",3)(5,"app-demon-skills",4)(6,"app-smt-fusions"),i.BQk()),2&c){const l=i.oxw();i.xp6(1),i.Q6J("title","Lvl "+l.demon.lvl+" "+l.demon.race+" "+l.demon.name)("price",l.demon.price)("statHeaders",l.compConfig.baseStats)("fusionHeaders",i.DdM(13,M))("stats",l.demon.stats),i.xp6(2),i.Oqu(l.demon.person),i.xp6(1),i.Q6J("resistHeaders",l.compConfig.resistElems)("resists",l.demon.resists),i.xp6(1),i.Q6J("title","Innate Skills")("hasTarget",!0)("elemOrder",l.compConfig.elemOrder)("compendium",l.compendium)("skillLevels",l.demon.skills)}}function _(c,A){if(1&c&&i._UZ(0,"app-demon-missing",5),2&c){const l=i.oxw();i.Q6J("name",l.name)}}let k=(()=>{class c{static#t=this.\u0275fac=function(h){return new(h||c)};static#e=this.\u0275cmp=i.Xpm({type:c,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"title","price","statHeaders","fusionHeaders","stats"],[3,"resistHeaders","resists"],[3,"title","hasTarget","elemOrder","compendium","skillLevels"],[3,"name"]],template:function(h,d){1&h&&(i.YNc(0,S,7,14,"ng-container",0),i.YNc(1,_,1,1,"app-demon-missing",1)),2&h&&(i.Q6J("ngIf",d.demon),i.xp6(1),i.Q6J("ngIf",!d.demon))},dependencies:[v.O5,g.t,p.O,C.I,f.n,F.O],encapsulation:2,changeDetection:0})}return c})(),x=(()=>{class c{constructor(l,h,d,I){this.route=l,this.title=h,this.currentDemonService=d,this.fusionDataService=I,this.subscriptions=[],this.appName="Test App",this.appName=I.appName,this.compConfig=I.compConfig}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const l of this.subscriptions)l.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(l=>{this.compendium=l,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(l=>{this.name=l,this.getDemonEntry()})),this.route.params.subscribe(l=>{this.currentDemonService.nextCurrentDemon(l.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(`${this.name} - ${this.appName}`),this.demon=this.compendium.getDemon(this.name))}static#t=this.\u0275fac=function(h){return new(h||c)(i.Y36(t.gz),i.Y36(y.Dx),i.Y36(R.s),i.Y36(o.Y))};static#e=this.\u0275cmp=i.Xpm({type:c,selectors:[["app-demon-entry-container"]],decls:1,vars:4,consts:[[3,"name","demon","compConfig","compendium"]],template:function(h,d){1&h&&i._UZ(0,"app-demon-entry",0),2&h&&i.Q6J("name",d.name)("demon",d.demon)("compConfig",d.compConfig)("compendium",d.compendium)},dependencies:[k],encapsulation:2,changeDetection:0})}return c})();var L=m(5657),N=m(4689);const j=[{path:"",redirectTo:"demons",pathMatch:"full"},{path:"",component:E,data:{fusionTool:"chart"},children:[{path:"chart",component:r}]},{path:"",component:E,children:[{path:"demons/:demonName",component:x,children:[{path:"fissions",component:L.t},{path:"fusions",component:N.$},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"demons",component:a},{path:"skills",component:s}]},{path:"**",redirectTo:"demons",pathMatch:"full"}];let O=(()=>{class c{static#t=this.\u0275fac=function(h){return new(h||c)};static#e=this.\u0275mod=i.oAB({type:c});static#s=this.\u0275inj=i.cJS({imports:[t.Bz.forChild(j),t.Bz]})}return c})()},5553:(U,Z,m)=>{m.d(Z,{Y:()=>y});var t=m(5619);class i{constructor(a){this.compConfig=a,this.pairRecipes={},this.entryRecipes={},this.initImportedData(),this.updateDerivedData()}estimateKuzuPrice(a){return Math.floor(Math.pow(a.slice(a.length-4).reduce((u,e)=>e+u,0),2)/20)}estimateDesuPrice(a){const u=a.slice(a.length-4).reduce((e,s)=>s+e,0);return Math.floor(((-.01171*u+5.0625)*u-129)*u)+1115}initImportedData(){const a={},u={},e={},s={},n={},r=this.compConfig.isDesu,g={};for(const[p,C]of Object.entries(this.compConfig.resistCodes))g[p]=((C/1e3|0)<<10)+(C%1e3/2.5|0);for(const p of this.compConfig.demonData)for(const[C,f]of Object.entries(p))a[C]={name:C,race:f.race,lvl:f.lvl,currLvl:f.lvl,price:r?this.estimateDesuPrice(f.stats):100*(this.estimateKuzuPrice(f.stats)+f.lvl),inherits:0,stats:f.stats,resists:(f.nresists||f.resists).split("").map(F=>g[F]),skills:f.nskills||f.skills,person:f.person||"",fusion:"normal",prereq:f.prereq||""};for(const p of this.compConfig.skillData)for(const[C,f]of Object.entries(p))u[C]={name:C,rank:f.rank||(1023&f.cost)/10||0,cost:f.cost||0,effect:f.effect||"",target:f.prereq||f.target||"Self",element:f.elem,learnedBy:[],level:0};for(const p of this.compConfig.races)n[p]={};for(const p of Object.values(a).sort((C,f)=>C.lvl-f.lvl)){n[p.race][p.lvl]=p.name;for(const[C,f]of Object.entries(p.skills))u[C].learnedBy.push({demon:p.name,level:f})}for(const[p,C]of Object.entries(this.compConfig.specialRecipes)){const f=C,F=[],R=[],M=a[p];M.fusion=f.length>1?"special":"accident",s[p]=F,e[p]=R;for(const S of f)if(S.includes(" x ")){const[_,k]=S.split(" x ");R.push({name1:_,name2:k}),M.fusion="special"}else F.push(S)}this.demons=a,this.skills=u,this.pairRecipes=e,this.entryRecipes=s,this.invertedDemons=n}updateDerivedData(){const a=Object.assign({},this.demons),u=Object.keys(this.skills).map(n=>this.skills[n]),e={},s={};for(const n of this.compConfig.races)e[n]=[],s[n]=[];for(const[n,r]of Object.entries(this.demons))this.isElementDemon(n)||e[r.race].push(r.lvl),!this.pairRecipes[n]&&!this.entryRecipes[n]&&s[r.race].push(r.lvl);for(const n of this.compConfig.races)e[n].sort((r,g)=>r-g),s[n].sort((r,g)=>r-g);this._allDemons=Object.keys(a).map(n=>a[n]),this._allSkills=u,this.allIngredients=e,this.allResults=s}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return[]}getDemon(a){return this.demons[a]}getSkill(a){return this.skills[a]}getSkills(a){const u=a.map(e=>this.skills[e]);return u.sort((e,s)=>1e4*(this.compConfig.elemOrder[e.element]-this.compConfig.elemOrder[s.element])+e.rank-s.rank),u}getIngredientDemonLvls(a){return this.allIngredients[a]||[]}getResultDemonLvls(a){return this.allResults[a]||[]}getSpecialNameEntries(a){return this.entryRecipes[a]||[]}getSpecialNamePairs(a){return this.pairRecipes[a]||[]}reverseLookupDemon(a,u){return this.invertedDemons[a][u]}reverseLookupSpecial(a){return[]}isElementDemon(a){return-1!==this.compConfig.elementTable.elems.indexOf(a)}updateFusionSettings(a){}}var o=m(6262);class v extends o.g{constructor(a){super(),this.initCharts(a)}initCharts(a){const u=a.normalTable.races,e=a.normalTable.table,s=a.elementTable.elems,n=a.elementTable.races,r=a.elementTable.table;this.races=u,this.elementDemons=s,this.lvlModifier=a.fusionLvlMod,this.fusionChart=o.g.loadFusionTableJson(u,e),this.fissionChart=o.g.loadFissionTableJson(u,[],e),this.elementChart={},this.elementChart=s.length?o.g.loadElementTableJson(n,s,r):u.reduce((g,p)=>(g[p]=[],g),{})}getLightDark(a){return 0}getRaceFusions(a){return Object.assign({},super.getRaceFusions(a))}}var b=m(7548),E=m(4769),D=m(4487);let y=(()=>{class T{constructor(u,e){const s=e.url.split("/")[1];this.compConfig=u.configs[u.configs[s]?s:"krch"],this.appName=this.compConfig.appTitle+" Fusion Calculator",this.fissionCalculator=this.compConfig.fissionCalculator,this.fusionCalculator=this.compConfig.fusionCalculator,this.compendium=new t.X(new i(this.compConfig)).asObservable(),this.fusionChart=new t.X(new v(this.compConfig)).asObservable()}updateFusionSettings(u){return{}}static#t=this.\u0275fac=function(e){return new(e||T)(E.LFG(b.I7),E.LFG(D.F0))};static#e=this.\u0275prov=E.Yz7({token:T,factory:T.\u0275fac})}return T})()},2814:(U,Z,m)=>{m.d(Z,{y:()=>E});var t=m(6814),i=m(6208),o=m(8325),v=m(3917),b=m(4769);let E=(()=>{class D{static forRoot(){return{ngModule:D}}static#t=this.\u0275fac=function(a){return new(a||D)};static#e=this.\u0275mod=b.oAB({type:D});static#s=this.\u0275inj=b.cJS({imports:[t.ez,i.m,o.a,v.V]})}return D})()}}]);