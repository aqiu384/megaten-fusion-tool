"use strict";(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[159],{7277:(se,B,a)=>{a.d(B,{S:()=>Be});var q=a(8935),M=a(2755),G=a(1090),e=a(2598),S=a(7992),O=a(177),H=a(5583);let j=(()=>{class s{constructor(n){this.appCssClasses=n.compConfig.appCssClasses;const i=n.compConfig,t=G.fu;this.otherLinks=[],i.hasEnemies&&this.otherLinks.push({title:(0,M.o)(t.ShadowList,i.lang),link:"shadows"}),!i.hasQrcodes&&i.hasManualInheritance&&this.otherLinks.push({title:(0,M.o)(t.RecipGenerator,i.lang),link:"recipes"}),i.hasQrcodes&&this.otherLinks.push({title:"QR Code Generator",link:"qrcodes"})}static{this.\u0275fac=function(i){return new(i||s)(e.rXU(S.i))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-pq2-compendium"]],decls:1,vars:3,consts:[[3,"ngClass","mainList","otherLinks"]],template:function(i,t){1&i&&e.nrm(0,"app-demon-compendium",0),2&i&&e.Y8G("ngClass",t.appCssClasses)("mainList","persona")("otherLinks",t.otherLinks)},dependencies:[O.YU,H.f],styles:[".p3 div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p3 div.element-icon.i28716,.p3 div.element-icon.sla{background-image:url(/assets/images/p5/sword.png)}.p3 div.element-icon.i28717,.p3 div.element-icon.str{background-image:url(/assets/images/p5/phys.png)}.p3 div.element-icon.i28718,.p3 div.element-icon.pie{background-image:url(/assets/images/p5/gun.png)}.p3 div.element-icon.i30972,.p3 div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p3 div.element-icon.i29948,.p3 div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p3 div.element-icon.i29436,.p3 div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p3 div.element-icon.i29180,.p3 div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p3 div.element-icon.i4012,.p3 div.element-icon.lig{background-image:url(/assets/images/p5/bless.png)}.p3 div.element-icon.i32624,.p3 div.element-icon.dar{background-image:url(/assets/images/p5/curse.png)}.p3 div.element-icon.i3956,.p3 div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.p3 div.element-icon.i4093,.p3 div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p3 div.element-icon.i32764,.p3 div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p3 div.element-icon.i4092,.p3 div.element-icon.spa,.p3 div.element-icon.spb,.p3 div.element-icon.spe{background-image:url(/assets/images/p5/trait.png)}.p3 div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p3 div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.p3 th.title,.p3 th.nav.active,.p3 th.nav.active a{color:#000;background-color:#4372aa}.p4 div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p4 div.element-icon.i2166,.p4 div.element-icon.phy{background-image:url(/assets/images/p5/phys.png)}.p4 div.element-icon.i3582,.p4 div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p4 div.element-icon.i3070,.p4 div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p4 div.element-icon.i3966,.p4 div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p4 div.element-icon.i3838,.p4 div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p4 div.element-icon.i2006,.p4 div.element-icon.lig{background-image:url(/assets/images/p5/bless.png)}.p4 div.element-icon.i1978,.p4 div.element-icon.dar{background-image:url(/assets/images/p5/curse.png)}.p4 div.element-icon.i1979,.p4 div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.p4 div.element-icon.i2014,.p4 div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p4 div.element-icon.i4094,.p4 div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p4 div.element-icon.spa,.p4 div.element-icon.spe{background-image:url(/assets/images/p5/trait.png)}.p4 div.element-icon.i4095,.p4 div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p4 div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.p4 th.title,.p4 th.nav.active,.p4 th.nav.active a{color:#000;background-color:#ffe600}.p5 div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p5 div.element-icon.phy{background-image:url(/assets/images/p5/phys.png)}.p5 div.element-icon.i3075{background-image:url(/assets/images/p5/phys.png)}.p5 div.element-icon.gun{background-image:url(/assets/images/p5/gun.png)}.p5 div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p5 div.element-icon.i3839{background-image:url(/assets/images/p5/fire.png)}.p5 div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p5 div.element-icon.i3583{background-image:url(/assets/images/p5/ice.png)}.p5 div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p5 div.element-icon.i4031{background-image:url(/assets/images/p5/elec.png)}.p5 div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p5 div.element-icon.i3967{background-image:url(/assets/images/p5/wind.png)}.p5 div.element-icon.psy{background-image:url(/assets/images/p5/psy.png)}.p5 div.element-icon.i4079{background-image:url(/assets/images/p5/psy.png)}.p5 div.element-icon.nuk{background-image:url(/assets/images/p5/nuke.png)}.p5 div.element-icon.i4063{background-image:url(/assets/images/p5/nuke.png)}.p5 div.element-icon.ble{background-image:url(/assets/images/p5/bless.png)}.p5 div.element-icon.i1017{background-image:url(/assets/images/p5/bless.png)}.p5 div.element-icon.cur{background-image:url(/assets/images/p5/curse.png)}.p5 div.element-icon.i1014{background-image:url(/assets/images/p5/curse.png)}.p5 div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.p5 div.element-icon.i4086{background-image:url(/assets/images/p5/ailment.png)}.p5 div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p5 div.element-icon.i1019{background-image:url(/assets/images/p5/healing.png)}.p5 div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p5 div.element-icon.i4095{background-image:url(/assets/images/p5/almighty.png)}.p5 div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p5 div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.p5 div.element-icon.i0{background-image:url(/assets/images/p5/passive.png)}.p5 div.element-icon.tra{background-image:url(/assets/images/p5/trait.png)}.p5 th.title,.p5 th.nav.active,.p5 th.nav.active a{color:#fff;background-color:#f41000}.pq div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.pq div.element-icon.cut{background-image:url(/assets/images/p5/sword.png)}.pq div.element-icon.i3584,.pq div.element-icon.i3591,.pq div.element-icon.bas{background-image:url(/assets/images/p5/phys.png)}.pq div.element-icon.sta{background-image:url(/assets/images/p5/gun.png)}.pq div.element-icon.i376,.pq div.element-icon.i383,.pq div.element-icon.i3960,.pq div.element-icon.i3967,.pq div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.pq div.element-icon.i248,.pq div.element-icon.i255,.pq div.element-icon.i3832,.pq div.element-icon.i3839,.pq div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.pq div.element-icon.i472,.pq div.element-icon.i479,.pq div.element-icon.i4056,.pq div.element-icon.i4063,.pq div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.pq div.element-icon.i440,.pq div.element-icon.i447,.pq div.element-icon.i4024,.pq div.element-icon.i4031,.pq div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.pq div.element-icon.i496,.pq div.element-icon.i503,.pq div.element-icon.i4080,.pq div.element-icon.i4087,.pq div.element-icon.lig{background-image:url(/assets/images/p5/bless.png)}.pq div.element-icon.i488,.pq div.element-icon.i495,.pq div.element-icon.i4072,.pq div.element-icon.i4079,.pq div.element-icon.dar{background-image:url(/assets/images/p5/curse.png)}.pq div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.pq div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.pq div.element-icon.i504,.pq div.element-icon.i511,.pq div.element-icon.i4088,.pq div.element-icon.i4095,.pq div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.pq div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.pq div.element-icon.nav{background-image:url(/assets/images/p5/trait.png)}.pq div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.pq th.title,.pq th.nav.active,.pq th.nav.active a{color:#000;background-color:#aa1ca9}.pq2 div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.pq2 div.element-icon.i2055,.pq2 div.element-icon.phy{background-image:url(/assets/images/p5/phys.png)}.pq2 div.element-icon.i3583,.pq2 div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.pq2 div.element-icon.i3071,.pq2 div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.pq2 div.element-icon.i3967,.pq2 div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.pq2 div.element-icon.i3839,.pq2 div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.pq2 div.element-icon.i4063,.pq2 div.element-icon.psy{background-image:url(/assets/images/p5/psy.png)}.pq2 div.element-icon.i4031,.pq2 div.element-icon.nuk{background-image:url(/assets/images/p5/nuke.png)}.pq2 div.element-icon.i4087,.pq2 div.element-icon.ble{background-image:url(/assets/images/p5/bless.png)}.pq2 div.element-icon.i4079,.pq2 div.element-icon.cur{background-image:url(/assets/images/p5/curse.png)}.pq2 div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.pq2 div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.pq2 div.element-icon.i4095,.pq2 div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.pq2 div.element-icon.i2047,.pq2 div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.pq2 div.element-icon.nav{background-image:url(/assets/images/p5/trait.png)}.pq2 div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.pq2 th.title,.pq2 th.nav.active,.pq2 th.nav.active a{color:#fff;background-color:#ff4800}.p5t div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p5t div.element-icon.phy{background-image:url(/assets/images/p5/phys.png)}.p5t div.element-icon.gun{background-image:url(/assets/images/p5/gun.png)}.p5t div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p5t div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p5t div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p5t div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p5t div.element-icon.psy{background-image:url(/assets/images/p5/psy.png)}.p5t div.element-icon.nuk{background-image:url(/assets/images/p5/nuke.png)}.p5t div.element-icon.ble{background-image:url(/assets/images/p5/bless.png)}.p5t div.element-icon.cur{background-image:url(/assets/images/p5/curse.png)}.p5t div.element-icon.i1023,.p5t div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p5t div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p5t div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p5t div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.p5t th.title,.p5t th.nav.active,.p5t th.nav.active a{color:#fff;background-color:#f41000}.p3r div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p3r div.element-icon.i3583,.p3r div.element-icon.i3585,.p3r div.element-icon.sla{background-image:url(/assets/images/p5/sword.png)}.p3r div.element-icon.i2047,.p3r div.element-icon.i3615,.p3r div.element-icon.str{background-image:url(/assets/images/p5/phys.png)}.p3r div.element-icon.i3071,.p3r div.element-icon.i4065,.p3r div.element-icon.pie{background-image:url(/assets/images/p5/gun.png)}.p3r div.element-icon.i3967,.p3r div.element-icon.i3843,.p3r div.element-icon.i3955,.p3r div.element-icon.i3949,.p3r div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p3r div.element-icon.i3839,.p3r div.element-icon.i3715,.p3r div.element-icon.i3827,.p3r div.element-icon.i3821,.p3r div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p3r div.element-icon.i4063,.p3r div.element-icon.i3651,.p3r div.element-icon.i4051,.p3r div.element-icon.i4045,.p3r div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p3r div.element-icon.i4031,.p3r div.element-icon.i3619,.p3r div.element-icon.i4019,.p3r div.element-icon.i4013,.p3r div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p3r div.element-icon.i4083,.p3r div.element-icon.i3603,.p3r div.element-icon.lig{background-image:url(/assets/images/p5/bless.png)}.p3r div.element-icon.i4077,.p3r div.element-icon.i3597,.p3r div.element-icon.dar{background-image:url(/assets/images/p5/curse.png)}.p3r div.element-icon.i493,.p3r div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.p3r div.element-icon.i499,.p3r div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p3r div.element-icon.i4095,.p3r div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p3r div.element-icon.i511,.p3r div.element-icon.i4088,.p3r div.element-icon.spe{background-image:url(/assets/images/p5/trait.png)}.p3r div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p3r div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.p3r th.title,.p3r th.nav.active,.p3r th.nav.active a{color:#000;background-color:#4372aa}\n"],encapsulation:2,changeDetection:0})}}return s})();var Q=a(9404),I=a(345),V=a(9629);let U=(()=>{class s extends Q.M{constructor(n,i,t,c){super(n,t,c),this.showAllies=!i.snapshot.data.showShadows,this.showEnemies=!this.showAllies,this.compConfig=c.compConfig,this.defaultSortFun=(g,T)=>200*(this.compConfig.raceOrder[g.race]-this.compConfig.raceOrder[T.race])+T.lvl-g.lvl,this.appName=(0,M.o)(G.vC.AppPersonas,this.compConfig.lang)+c.appName,this.statHeaders=this.compConfig.baseStats,this.resistHeaders=this.compConfig.hasDemonResists?this.compConfig.resistElems:[],this.inheritOrder=this.compConfig.elemOrder,this.showEnemies&&(this.appName=(0,M.o)(G.vC.AppShadows,this.compConfig.lang)+c.appName,this.statHeaders=this.compConfig.enemyStats,this.resistHeaders=this.compConfig.resistElems,this.inheritOrder=null)}static{this.\u0275fac=function(i){return new(i||s)(e.rXU(I.hE),e.rXU(q.nX),e.rXU(e.gRc),e.rXU(S.i))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-demon-list-container"]],features:[e.Vt3],decls:2,vars:10,consts:[[3,"lang","isEnemy","hasCurrLvl","raceOrder","statHeaders","resistHeaders","inheritOrder","rowData"]],template:function(i,t){1&i&&(e.nrm(0,"app-smt-demon-list",0),e.nI1(1,"async")),2&i&&e.Y8G("lang",t.compConfig.lang)("isEnemy",t.showEnemies)("hasCurrLvl",!t.showEnemies&&t.compConfig.hasTripleFusion)("raceOrder",t.compConfig.raceOrder)("statHeaders",t.statHeaders)("resistHeaders",t.resistHeaders)("inheritOrder",t.inheritOrder)("rowData",e.bMT(1,8,t.demons))},dependencies:[V.F,O.Jj],encapsulation:2,changeDetection:0})}}return s})();var K=a(9454),z=a(2940);let W=(()=>{class s extends K.E{constructor(n,i,t){super(n,i,t),this.compConfig=t.compConfig,this.appName=(0,M.o)(G.vf.AppTitle,this.compConfig.lang)+t.appName,this.transferTitle=this.compConfig.hasSkillCards?"Skill Card":"",this.defaultSortFun=(c,g)=>1e4*(this.compConfig.elemOrder[c.element]-this.compConfig.elemOrder[g.element])+c.rank-g.rank}static{this.\u0275fac=function(i){return new(i||s)(e.rXU(I.hE),e.rXU(e.gRc),e.rXU(S.i))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-skill-list-container"]],features:[e.Vt3],decls:2,vars:9,consts:[[3,"lang","elemOrder","hasRank","hasTarget","isPersona","transferTitle","rowData"]],template:function(i,t){1&i&&(e.nrm(0,"app-smt-skill-list",0),e.nI1(1,"async")),2&i&&e.Y8G("lang",t.compConfig.lang)("elemOrder",t.compConfig.elemOrder)("hasRank",t.compConfig.hasSkillRanks)("hasTarget",!0)("isPersona",!0)("transferTitle",t.transferTitle)("rowData",e.bMT(1,7,t.skills))},dependencies:[z.p,O.Jj],encapsulation:2,changeDetection:0})}}return s})();var Z=a(5692),L=a(3679),_=a(2223),J=a(302),ee=a(9436),w=a(6122),r=a(8696);let f=(()=>{class s{constructor(){this.lang="en"}static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-enemy-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig",lang:"lang"},decls:19,vars:14,consts:[[3,"title","statHeaders","stats"],[1,"entry-table"],["colspan","2",1,"title"],[3,"resistHeaders","resists","ailmentHeaders","ailments"],[3,"hasTarget","hasLvl","elemOrder","compendium","skillLevels"]],template:function(i,t){1&i&&(e.nrm(0,"app-demon-stats",0),e.j41(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),e.EFF(5,"Appearances"),e.k0s()(),e.j41(6,"tr")(7,"th"),e.EFF(8,"Areas"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Drops"),e.k0s()()(),e.j41(11,"tbody")(12,"tr")(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s()()()(),e.nrm(17,"app-demon-resists",3)(18,"app-demon-skills",4)),2&i&&(e.Y8G("title","Lvl "+t.demon.lvl+" "+t.demon.race+" "+t.demon.name)("statHeaders",t.compConfig.enemyStats)("stats",t.demon.stats),e.R7$(14),e.JRh(t.demon.area),e.R7$(2),e.JRh(t.demon.drop),e.R7$(1),e.Y8G("resistHeaders",t.compConfig.resistElems)("resists",t.demon.resists)("ailmentHeaders",t.compConfig.ailmentElems)("ailments",t.demon.ailments),e.R7$(1),e.Y8G("hasTarget",!0)("hasLvl",!1)("elemOrder",t.compConfig.elemOrder)("compendium",t.compendium)("skillLevels",t.demon.skills))},dependencies:[L.C,_.w,J.F],encapsulation:2,changeDetection:0})}}return s})();function p(s,d){if(1&s&&e.nrm(0,"app-demon-resists",7),2&s){const n=e.XpG(2);e.Y8G("lang",n.lang)("resistHeaders",n.compConfig.resistElems)("resists",n.demon.resists)}}function b(s,d){if(1&s&&(e.qex(0),e.nrm(1,"app-demon-stats",2),e.DNE(2,p,1,3,"app-demon-resists",3),e.nrm(3,"app-demon-inherits",4)(4,"app-demon-skills",5)(5,"app-smt-fusions",6),e.bVm()),2&s){const n=e.XpG();e.R7$(1),e.Y8G("lang",n.lang)("title","Lvl "+n.demon.lvl+" "+n.demon.race+" "+n.demon.name)("price",n.demon.price)("statHeaders",n.compConfig.baseStats)("stats",n.demon.stats)("inherits",n.demon.inherits),e.R7$(1),e.Y8G("ngIf",n.compConfig.hasDemonResists),e.R7$(1),e.Y8G("hasChance",!n.compConfig.hasManualInheritance)("inheritHeaders",n.compConfig.inheritElems)("inherits",n.demon.affinities),e.R7$(1),e.Y8G("lang",n.lang)("hasRank",n.compConfig.hasSkillRanks)("hasTarget",!0)("elemOrder",n.compConfig.elemOrder)("compendium",n.compendium)("skillLevels",n.demon.skills),e.R7$(1),e.Y8G("lang",n.lang)("hasTripleFusion",n.compConfig.hasTripleFusion)("excludedDlc","excluded"===n.demon.fusion)}}function C(s,d){if(1&s&&e.nrm(0,"app-demon-missing",8),2&s){const n=e.XpG();e.Y8G("name",n.name)}}function P(s,d){if(1&s&&e.nrm(0,"app-demon-entry",1),2&s){const n=e.XpG();e.Y8G("lang",n.compConfig.lang)("name",n.name)("demon",n.demon)("compConfig",n.compConfig)("compendium",n.compendium)}}function u(s,d){if(1&s&&e.nrm(0,"app-enemy-entry",1),2&s){const n=e.XpG();e.Y8G("lang",n.compConfig.lang)("name",n.name)("demon",n.demon)("compConfig",n.compConfig)("compendium",n.compendium)}}let l=(()=>{class s{constructor(){this.lang="en"}static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig",lang:"lang"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"lang","title","price","statHeaders","stats","inherits"],[3,"lang","resistHeaders","resists",4,"ngIf"],[3,"hasChance","inheritHeaders","inherits"],[3,"lang","hasRank","hasTarget","elemOrder","compendium","skillLevels"],[3,"lang","hasTripleFusion","excludedDlc"],[3,"lang","resistHeaders","resists"],[3,"name"]],template:function(i,t){1&i&&(e.DNE(0,b,6,19,"ng-container",0),e.DNE(1,C,1,1,"app-demon-missing",1)),2&i&&(e.Y8G("ngIf",t.demon),e.R7$(1),e.Y8G("ngIf",!t.demon))},dependencies:[O.bT,Z.X,L.C,_.w,J.F,ee.d,w.L],encapsulation:2,changeDetection:0})}}return s})(),v=(()=>{class s{constructor(n,i,t,c){this.route=n,this.title=i,this.currentDemonService=t,this.fusionDataService=c,this.subscriptions=[],this.appName="Test App",this.appName=c.appName,this.compConfig=c.compConfig}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const n of this.subscriptions)n.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(n=>{this.compendium=n,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(n=>{this.name=n,this.getDemonEntry()})),this.route.params.subscribe(n=>{this.currentDemonService.nextCurrentDemon(n.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(`${this.name} - ${this.appName}`),this.demon=this.compendium.getDemon(this.name))}static{this.\u0275fac=function(i){return new(i||s)(e.rXU(q.nX),e.rXU(I.hE),e.rXU(r.i),e.rXU(S.i))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-demon-entry-container"]],decls:2,vars:2,consts:[[3,"lang","name","demon","compConfig","compendium",4,"ngIf"],[3,"lang","name","demon","compConfig","compendium"]],template:function(i,t){1&i&&(e.DNE(0,P,1,5,"app-demon-entry",0),e.DNE(1,u,1,5,"app-enemy-entry",0)),2&i&&(e.Y8G("ngIf",!t.demon||!t.demon.isEnemy),e.R7$(1),e.Y8G("ngIf",t.demon&&t.demon.isEnemy))},dependencies:[O.bT,l,f],encapsulation:2,changeDetection:0})}}return s})();var D=a(9023);let k=(()=>{class s{constructor(n){this.fusionDataService=n,this.subscriptions=[],this.mitaTable=[]}ngOnInit(){const n=this.fusionDataService.compConfig;this.hasTripleFusion=n.hasTripleFusion,this.hasMitamaFusion=n.elementTable.elems.length>0,this.subscriptions.push(this.fusionDataService.squareChart.subscribe(i=>{this.normChart=i.normalChart,this.tripChart=i.tripleChart,this.updateMitamas()})),this.hasMitamaFusion&&this.subscriptions.push(this.fusionDataService.compendium.subscribe(i=>{this.compendium=i,this.updateMitamas()}))}ngOnDestroy(){for(const n of this.subscriptions)n.unsubscribe()}updateMitamas(){if(!this.hasMitamaFusion||!this.compendium||!this.normChart)return;const n=this.normChart.elementDemons.map(t=>this.compendium.getDemon(t).race),i=[];for(let t=0;t<n.length;t++){const c=n[t];i.push(n.slice(0,t+1).map(g=>this.normChart.getRaceFusion(c,g)))}this.mitaTable=i}static{this.\u0275fac=function(i){return new(i||s)(e.rXU(S.i))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-fusion-chart-container"]],decls:1,vars:6,consts:[[3,"normChart","tripChart","normTitle","tripTitle","mitaTable","isPersona"]],template:function(i,t){1&i&&e.nrm(0,"app-fusion-chart",0),2&i&&e.Y8G("normChart",t.normChart)("tripChart",t.hasTripleFusion?t.tripChart:null)("normTitle","Normal Fusions")("tripTitle",t.hasTripleFusion?"Triple Fusions":null)("mitaTable",t.hasMitamaFusion?t.mitaTable:null)("isPersona",!0)},dependencies:[D.q],encapsulation:2,changeDetection:0})}}return s})();const y=Array(24).fill(0);function E(s,d){return s.split("").map(n=>n.charCodeAt(0)).concat(Array(d-s.length).fill(0))}y[0]=4,y[2]=50,y[4]=50,y[6]=50,y[7]=50,y[8]=50,y[12]=50,y[16]=50,y[20]=50;const m=[].concat(E("aqiu384.github.io",21),E("https://youtu.be/b1KfNEPKncQ",33)),h="kitaro",o="bancho",x=[].concat(E(h,17),E(o,17)),Y=[].concat(E(h,29),E(o,29)),X=[].concat(E(h,17),E(o,17),E("renren",17),E("hamuko",17)),te=[].concat([34,50],Array(36).fill(31),[31,0,31,0,0,0,1,128]),oe=[].concat([34,50],Array(54).fill(31),[31,0,1,0]);var N=a(4341);let ce=(()=>{class s{constructor(){this.byteArray=[],this.errorLvl="L",this.typeNum=10,this.qrFactory=qrcode(this.typeNum,this.errorLvl),this.qrImg=null}ngOnChanges(){this.createQrcode()}createQrcode(){this.qrFactory=qrcode(this.typeNum,this.errorLvl),this.qrFactory.addData(this.byteArray.map(n=>String.fromCharCode(n)).join("")),this.qrFactory.make(),this.qrImg=this.qrFactory.createImgTag(5)}static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-qrcode"]],inputs:{byteArray:"byteArray",errorLvl:"errorLvl",typeNum:"typeNum"},features:[e.OA$],decls:1,vars:1,consts:[[3,"innerHtml"]],template:function(i,t){1&i&&e.nrm(0,"div",0),2&i&&e.Y8G("innerHtml",t.qrImg,e.npT)},encapsulation:2,changeDetection:0})}}return s})();function pe(s,d){if(1&s&&(e.j41(0,"option",15),e.EFF(1),e.k0s()),2&s){const n=d.index;e.Y8G("value",n+1),e.R7$(1),e.JRh(n+1)}}function me(s,d){if(1&s&&(e.j41(0,"option",15),e.EFF(1),e.k0s()),2&s){const n=d.index;e.Y8G("value",n+1),e.R7$(1),e.JRh(n+1)}}function ue(s,d){if(1&s&&(e.j41(0,"option",15),e.EFF(1),e.k0s()),2&s){const n=d.index;e.Y8G("value",n+1),e.R7$(1),e.JRh(n+1)}}function ge(s,d){if(1&s&&(e.j41(0,"option",15),e.EFF(1),e.k0s()),2&s){const n=d.$implicit;e.Y8G("value",n),e.R7$(1),e.JRh(n)}}function de(s,d){if(1&s&&(e.j41(0,"option",15),e.EFF(1),e.k0s()),2&s){const n=d.$implicit;e.Y8G("value",n.name),e.R7$(1),e.JRh(n.name)}}function he(s,d){if(1&s&&(e.j41(0,"option",15),e.EFF(1),e.k0s()),2&s){const n=d.$implicit;e.Y8G("value",n),e.R7$(1),e.JRh(n)}}function fe(s,d){if(1&s&&(e.j41(0,"option",15),e.EFF(1),e.k0s()),2&s){const n=d.$implicit;e.Y8G("value",n.name),e.R7$(1),e.JRh(n.name)}}function ve(s,d){if(1&s){const n=e.RV6();e.qex(0,16),e.j41(1,"tr")(2,"td")(3,"select",17),e.bIt("change",function(){const c=e.eBV(n).$implicit,g=e.XpG();return e.Njj(c.controls.name.setValue(g.skills[c.controls.elem.value][0].name))}),e.DNE(4,he,2,2,"option",6),e.k0s()(),e.j41(5,"td")(6,"select",18),e.DNE(7,fe,2,2,"option",6),e.k0s()()(),e.bVm()}if(2&s){const n=d.$implicit,i=d.index,t=e.XpG();e.Y8G("formGroupName",i),e.R7$(4),e.Y8G("ngForOf",t.elems),e.R7$(3),e.Y8G("ngForOf",t.skills[n.controls.elem.value])}}let Ce=(()=>{class s{constructor(n){this.fb=n,this.demons={},this.skills={},this.dcodes={},this.scodes={},this.range99=Array(99),this.range299=Array(299),this.price=0,this.blankSkill={code:0,cost:0,level:0,rank:0,target:"Self",name:"-",element:"-",inherit:"-",effect:"-",learnedBy:[],transfer:[]},this.createForm()}ngOnChanges(){this.initDropdowns()}createForm(){const n=[];for(let i=0;i<6;i++)n.push(this.fb.group({elem:"-",name:"-"}));this.form=this.fb.group({lvl:1,hp:1,mp:1,race:"-",demon:"-",skills:this.fb.array(n)}),this.form.valueChanges.subscribe(i=>{if(this.form.valid){const t=this.compendium.getDemon(i.demon),c=i.skills.map(R=>this.compendium.getSkill(R.name)||this.blankSkill),g={isEnglish:"en"===this.compConfig.lang,demonCode:t.code,lvl:parseInt(i.lvl,10),exp:-1,hp:parseInt(i.hp,10),mp:parseInt(i.mp,10),skillCodes:c.map(R=>R.code)},T=g.skillCodes.reduce((R,$)=>0!==$?R+1:R,0);this.price=10*Math.floor((800+120*g.lvl)*(1+.25*T)/10),this.passBytes=function ae(s,d){return d?function le(s){const d=y.slice(),n=Array(25).fill(0),i=s.lvl,t=Math.floor((((-.0479755766*i+9.28700353)*i+71.9694228)*i-81.1026214)*i+.120783542),c=s.exp<0?t:s.exp;s.isEnglish&&(d[6]=256-d[6]),n[0]=s.demonCode%256,n[1]=2*s.lvl+Math.floor(s.demonCode/256),n[2]=c%256,n[3]=Math.floor(c/256)%256,n[4]=Math.floor(c/65536);for(let g=0;g<6;g++)n[6+2*g]=s.skillCodes[g]%256,n[6+2*g+1]=Math.floor(s.skillCodes[g]/256);return n[22]=10*s.hp%256,n[23]=10*s.mp%16*16+Math.floor(s.hp/25.6),n[24]=Math.floor(s.mp/1.6),[].concat(d,m,X,oe,n,Array(21).fill(0))}(s):function re(s){const d=s.isEnglish?Y:x,n=Array(30).fill(0),i=s.lvl,t=Math.floor((((-.07600161*i+14.0603287)*i-.02256972)*i+.59031556)*i-1.87981906),c=s.exp<0?t:s.exp;n[0]=s.demonCode,n[2]=s.lvl,n[6]=c%256,n[7]=Math.floor(c/256)%256,n[8]=Math.floor(c/65536);for(let g=0;g<6;g++)n[10+2*g]=s.skillCodes[g]%256,n[10+2*g+1]=Math.floor(s.skillCodes[g]/256);return n[26]=10*s.hp%256,n[27]=Math.floor(s.hp/25.6),n[28]=10*s.mp%256,n[29]=Math.floor(s.mp/25.6),[].concat(y,m,d,te,n,Array(40).fill(0))}(s)}(g,this.compConfig.appCssClasses.includes("pq2"))}})}initDropdowns(){if(this.demons={},this.skills={"-":[this.blankSkill]},this.dcodes={},this.scodes={0:this.blankSkill},this.compConfig&&this.compendium){for(const n of this.compendium.allDemons.filter(i=>i.code))this.demons[n.race]||(this.demons[n.race]=[]),this.demons[n.race].push(n),this.dcodes[n.code]=n;for(const n of this.compendium.allSkills.filter(i=>i.code))this.skills[n.element]||(this.skills[n.element]=[]),this.skills[n.element].push(n),this.scodes[n.code]=n;for(const n of Object.values(this.demons))n.sort((i,t)=>t.lvl-i.lvl);for(const n of Object.values(this.skills))n.sort((i,t)=>i.rank-t.rank);this.races=this.compConfig.races.filter(n=>this.demons[n]),this.elems=["-"].concat(this.compConfig.skillElems.filter(n=>this.skills[n])),this.setDefaultValues(this.compConfig.defaultDemon)}}changeRace(n){const i=this.demons[n][0];this.form.controls.demon.setValue(i.name),this.setDefaultValues(i.name)}setDefaultValues(n){const i=Array(6).fill(this.blankSkill),t=this.compendium.getDemon(n);let c=0;for(const[g,T]of Object.entries(t.skills))0===T&&(i[c++]=this.compendium.getSkill(g));this.form.patchValue({lvl:Math.floor(t.lvl),hp:t.stats[0],mp:t.stats[1],race:t.race,demon:t.name,skills:i.map(g=>({elem:g.element,name:g.name}))})}static{this.\u0275fac=function(i){return new(i||s)(e.rXU(N.ok))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-password-generator"]],inputs:{compendium:"compendium",compConfig:"compConfig"},features:[e.OA$],decls:57,vars:9,consts:[[3,"formGroup"],[1,"entry-table"],["colspan","2",1,"title"],[3,"byteArray"],["colspan","6",1,"title"],["formControlName","lvl"],[3,"value",4,"ngFor","ngForOf"],["formControlName","hp"],["formControlName","mp"],["formControlName","race",3,"change"],["formControlName","demon",3,"change"],[2,"width","25%"],[2,"width","75%"],["formArrayName","skills"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"value"],[3,"formGroupName"],["formControlName","elem",3,"change"],["formControlName","name"]],template:function(i,t){1&i&&(e.j41(0,"form",0)(1,"h2"),e.EFF(2,"QR Code Generator"),e.k0s(),e.j41(3,"table",1)(4,"tr")(5,"th",2),e.EFF(6,"QR Code"),e.k0s()(),e.j41(7,"tr")(8,"td"),e.nrm(9,"app-qrcode",3),e.k0s()()(),e.j41(10,"table",1)(11,"tr")(12,"th",4),e.EFF(13,"Persona Entry"),e.k0s()(),e.j41(14,"tr")(15,"th"),e.EFF(16,"Price"),e.k0s(),e.j41(17,"th"),e.EFF(18,"Level"),e.k0s(),e.j41(19,"th"),e.EFF(20,"HP"),e.k0s(),e.j41(21,"th"),e.EFF(22,"MP"),e.k0s(),e.j41(23,"th"),e.EFF(24,"Race"),e.k0s(),e.j41(25,"th"),e.EFF(26,"Demon"),e.k0s()(),e.j41(27,"tr")(28,"td"),e.EFF(29),e.k0s(),e.j41(30,"td")(31,"select",5),e.DNE(32,pe,2,2,"option",6),e.k0s()(),e.j41(33,"td")(34,"select",7),e.DNE(35,me,2,2,"option",6),e.k0s()(),e.j41(36,"td")(37,"select",8),e.DNE(38,ue,2,2,"option",6),e.k0s()(),e.j41(39,"td")(40,"select",9),e.bIt("change",function(){return t.changeRace(t.form.controls.race.value)}),e.DNE(41,ge,2,2,"option",6),e.k0s()(),e.j41(42,"td")(43,"select",10),e.bIt("change",function(){return t.setDefaultValues(t.form.controls.demon.value)}),e.DNE(44,de,2,2,"option",6),e.k0s()()()(),e.j41(45,"table",1)(46,"thead")(47,"tr")(48,"th",2),e.EFF(49,"Learned Skills"),e.k0s()(),e.j41(50,"tr")(51,"th",11),e.EFF(52,"Element"),e.k0s(),e.j41(53,"th",12),e.EFF(54,"Name"),e.k0s()()(),e.j41(55,"tbody",13),e.DNE(56,ve,8,3,"ng-container",14),e.k0s()()()),2&i&&(e.Y8G("formGroup",t.form),e.R7$(9),e.Y8G("byteArray",t.passBytes),e.R7$(20),e.JRh(t.price),e.R7$(3),e.Y8G("ngForOf",t.range99),e.R7$(3),e.Y8G("ngForOf",t.range299),e.R7$(3),e.Y8G("ngForOf",t.range99),e.R7$(3),e.Y8G("ngForOf",t.races),e.R7$(3),e.Y8G("ngForOf",t.demons[t.form.controls.race.value]),e.R7$(12),e.Y8G("ngForOf",t.form.controls.skills.controls))},dependencies:[O.Sq,N.qT,N.xH,N.y7,N.wz,N.BC,N.cb,N.j4,N.JD,N.$R,N.v8,ce],styles:["td[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}input[_ngcontent-%COMP%]{width:95%;border-width:3px}input.ng-valid[_ngcontent-%COMP%]{border-color:#0f0}input.ng-invalid[_ngcontent-%COMP%]{border-color:red}"],changeDetection:0})}}return s})(),be=(()=>{class s{constructor(n,i){this.fusionDataService=n,this.title=i,this.subscriptions=[],this.compConfig=this.fusionDataService.compConfig}ngOnInit(){this.setTitle(),this.subscribeAll()}ngOnDestroy(){this.unsubscribeAll()}setTitle(){this.title.setTitle(`QR Code Generator - ${this.fusionDataService.appName}`)}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(n=>{this.compendium=n}))}unsubscribeAll(){for(const n of this.subscriptions)n.unsubscribe()}static{this.\u0275fac=function(i){return new(i||s)(e.rXU(S.i),e.rXU(I.hE))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-password-generator-container"]],decls:1,vars:2,consts:[[3,"compendium","compConfig"]],template:function(i,t){1&i&&e.nrm(0,"app-password-generator",0),2&i&&e.Y8G("compendium",t.compendium)("compConfig",t.compConfig)},dependencies:[Ce],encapsulation:2,changeDetection:0})}}return s})();var ke=a(8948),ye=a(860);let De=(()=>{class s extends ke.I{constructor(n,i){super(n,i),this.changeDetector=n,this.fusionDataService=i,this.appTitle=i.appName,this.lang=i.compConfig.lang}static{this.\u0275fac=function(i){return new(i||s)(e.rXU(e.gRc),e.rXU(S.i))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-fusion-settings-container"]],features:[e.Vt3],decls:1,vars:4,consts:[[3,"lang","appTitle","fusionSettings","showEnableAll","toggledAll","toggledName"]],template:function(i,t){1&i&&(e.j41(0,"app-fusion-settings",0),e.bIt("toggledAll",function(g){return t.toggleAll(g)})("toggledName",function(g){return t.toggleName(g)}),e.k0s()),2&i&&e.Y8G("lang",t.lang)("appTitle",t.appTitle)("fusionSettings",t.fusionSettings)("showEnableAll",!0)},dependencies:[ye.B],encapsulation:2,changeDetection:0})}}return s})();var Fe=a(1289);let Ee=(()=>{class s{constructor(n,i){this.fusionDataService=n,this.title=i,this.subscriptions=[],this.lang="en";const t=this.fusionDataService.compConfig;this.maxSkills=t.maxSkillSlots,this.lang=t.lang,this.recipeConfig={fissionCalculator:this.fusionDataService.fissionCalculator,fusionCalculator:this.fusionDataService.fusionCalculator,races:t.races,skillElems:t.skillElems,inheritElems:t.inheritElems,displayElems:t.skillElems.reduce((c,g)=>(c[g]=g,c),{}),restrictInherits:!0,triExclusiveRaces:t.hasTripleFusion?["Fool","Tower","Moon","Sun","Judgement"]:[],triFissionCalculator:this.fusionDataService.triFissionCalculator,triFusionCalculator:this.fusionDataService.triFusionCalculator,defaultDemon:t.defaultDemon}}ngOnInit(){this.setTitle(),this.subscribeAll()}ngOnDestroy(){this.unsubscribeAll()}setTitle(){this.title.setTitle((0,M.o)(G.hV.AppTitle,this.lang)+this.fusionDataService.appName)}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(n=>{this.compendium=n})),this.subscriptions.push(this.fusionDataService.squareChart.subscribe(n=>{this.squareChart=n}))}unsubscribeAll(){for(const n of this.subscriptions)n.unsubscribe()}static{this.\u0275fac=function(i){return new(i||s)(e.rXU(S.i),e.rXU(I.hE))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-recipe-generator-container"]],decls:1,vars:5,consts:[[3,"lang","maxSkills","compendium","squareChart","recipeConfig"]],template:function(i,t){1&i&&e.nrm(0,"app-recipe-generator",0),2&i&&e.Y8G("lang",t.lang)("maxSkills",t.maxSkills)("compendium",t.compendium)("squareChart",t.squareChart)("recipeConfig",t.recipeConfig)},dependencies:[Fe.h],encapsulation:2,changeDetection:0})}}return s})();var Te=a(2649),Re=a(3515),Se=a(1538),Oe=a(1540),Pe=a(4207);function Ge(s,d){if(1&s&&(e.j41(0,"table",3)(1,"thead")(2,"tr")(3,"th",4),e.EFF(4),e.nI1(5,"translateComp"),e.k0s()()(),e.j41(6,"tbody")(7,"tr")(8,"td"),e.EFF(9),e.k0s()()()()),2&s){const n=e.XpG();e.R7$(4),e.JRh(e.i5U(5,2,n.msgs.SpecialFusionCondition,n.lang)),e.R7$(5),e.JRh(n.fusionPrereq)}}function we(s,d){if(1&s&&(e.nrm(0,"app-fusion-entry-table",5),e.nI1(1,"translateComp")),2&s){const n=e.XpG();e.Y8G("lang",n.lang)("title",e.i5U(1,5,n.msgs.SpecialFusionIngredients,n.lang)+n.currentDemon)("baseUrl",n.hasFissionFromDemons?"../../demons":"../..")("rowData",n.fusionEntries)("isFusion",!0)}}function je(s,d){if(1&s&&(e.nrm(0,"app-fusion-pair-table",6),e.nI1(1,"translateComp"),e.nI1(2,"translateComp"),e.nI1(3,"translateComp")),2&s){const n=e.XpG();e.Y8G("lang",n.lang)("title",e.i5U(1,8,n.msgs.Title,n.lang)+n.currentDemon)("leftHeader",e.i5U(2,11,n.msgs.LeftHeader,n.lang))("rightHeader",e.i5U(3,14,n.msgs.RightHeader,n.lang))("leftBaseUrl",n.hasFissionFromDemons?"../../demons":"../..")("rightBaseUrl",n.hasFissionFromDemons?"../../demons":"../..")("raceOrder",n.fusionChart.raceOrder)("rowData",n.fusionPairs)}}let Ne=(()=>{class s extends Te.J{getFusionPairs(){const n=this.calculator.getFusions(this.currentDemon,this.compendium,this.fusionChart).map(this.toFusionPair(this.currentDemon));if(this.fusionChart.elementDemons.length>0)for(const i of(0,Re.iB)(this.currentDemon,this.compendium,this.fusionChart)){const t=(Math.floor(i.lvl1)<<10)+i.lvl2;for(const c of i.names1){const{race:g,lvl:T}=this.compendium.getDemon(c);for(const R of i.names2){const{race:$,lvl:ne,price:He}=this.compendium.getDemon(R);n.push({price:i.price+He-T,race1:g,lvl1:t,name1:c,race2:$,lvl2:ne,name2:R})}}}return n}static{this.\u0275fac=function(){let n;return function(t){return(n||(n=e.xGo(s)))(t||s)}}()}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-p5-fission-table"]],features:[e.Vt3],decls:3,vars:3,consts:[["class","list-table",4,"ngIf"],[3,"lang","title","baseUrl","rowData","isFusion",4,"ngIf"],[3,"lang","title","leftHeader","rightHeader","leftBaseUrl","rightBaseUrl","raceOrder","rowData",4,"ngIf"],[1,"list-table"],[1,"title"],[3,"lang","title","baseUrl","rowData","isFusion"],[3,"lang","title","leftHeader","rightHeader","leftBaseUrl","rightBaseUrl","raceOrder","rowData"]],template:function(i,t){1&i&&(e.DNE(0,Ge,10,5,"table",0),e.DNE(1,we,2,8,"app-fusion-entry-table",1),e.DNE(2,je,4,17,"app-fusion-pair-table",2)),2&i&&(e.Y8G("ngIf",t.fusionPrereq),e.R7$(1),e.Y8G("ngIf",t.fusionEntries.length),e.R7$(1),e.Y8G("ngIf",t.fusionPairs.length||!t.fusionEntries.length))},dependencies:[O.bT,Se.a,Oe.cK,Pe.uz],encapsulation:2,changeDetection:0})}}return s})();var $e=a(6947),ie=a(4660);function Me(s,d){if(1&s&&(e.j41(0,"tr")(1,"th"),e.EFF(2),e.k0s()()),2&s){const n=d.$implicit;e.R7$(2),e.JRh(n)}}let Ae=(()=>{class s{ngOnChanges(){if(this.compendium&&this.pairChart&&(this.trioChart||!this.trioCalculator)){const n=[];for(const i of this.compendium.allDemons.filter(t=>!t.isEnemy)){const t=this.compendium.getSpecialNameEntries(i.name);if(t.length>0){n.push(`${i.name} = ${t.join(" x ")}`);continue}const c=this.pairCalculator.getFusions(i.name,this.compendium,this.pairChart).map(T=>(0,ie.on)(T,this.compendium));if(c.length>0&&(c.filter(T=>T.race1!==i.race).length>0||!this.trioCalculator||0===this.trioCalculator.getFusions(i.name,this.compendium,this.trioChart).length)){c.sort((R,$)=>R.price-$.price);const T=c.slice(0,3).map(R=>`${R.name1} x ${R.name2}`).join(", ");n.push(`${i.name} = ${T}`+(c.length>3?`, ${c.length-3} more...`:""))}else{if(this.trioCalculator){const T=this.trioCalculator.getFusions(i.name,this.compendium,this.trioChart).map(R=>(0,ie.f7)(R,this.compendium)).filter(R=>R.d1.race!==i.race);if(T.length>0){T.sort(($,ne)=>$.price-ne.price);const R=T.slice(0,3).map($=>`${$.d1.name} x ${$.d2.name} x ${$.d3.name}`).join(", ");n.push(`${i.name} = ${R}`+(T.length>3?`, ${T.length-3} more...`:""));continue}}n.push(i.prereq?`${i.name} = ${i.prereq}`:`${i.name} = No fusions found!`)}}this.fissionPreviews=n}}static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-fission-preview-table"]],inputs:{pairCalculator:"pairCalculator",trioCalculator:"trioCalculator",pairChart:"pairChart",trioChart:"trioChart",compendium:"compendium"},features:[e.OA$],decls:6,vars:1,consts:[[1,"entry-table"],[1,"title"],[4,"ngFor","ngForOf"]],template:function(i,t){1&i&&(e.j41(0,"table",0)(1,"tbody")(2,"tr")(3,"th",1),e.EFF(4,"Fission Previews"),e.k0s()(),e.DNE(5,Me,3,1,"tr",2),e.k0s()()),2&i&&(e.R7$(5),e.Y8G("ngForOf",t.fissionPreviews))},dependencies:[O.Sq],encapsulation:2,changeDetection:0})}}return s})(),Ie=(()=>{class s{constructor(n){this.fusionDataService=n,this.subscriptions=[]}ngOnInit(){this.calculator=this.fusionDataService.fissionCalculator,this.subscriptions.push(this.fusionDataService.compendium.subscribe(n=>{this.compendium=n})),this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(n=>{this.fusionChart=n}))}ngOnDestroy(){for(const n of this.subscriptions)n.unsubscribe()}static{this.\u0275fac=function(i){return new(i||s)(e.rXU($e.iJ))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-smt-fission-preview"]],decls:2,vars:3,consts:[[3,"pairCalculator","pairChart","compendium"]],template:function(i,t){1&i&&(e.j41(0,"app-fission-preview-table",0),e.nrm(1,"app-fission-preview-table"),e.k0s()),2&i&&e.Y8G("pairCalculator",t.calculator)("pairChart",t.fusionChart)("compendium",t.compendium)},dependencies:[Ae],encapsulation:2,changeDetection:0})}}return s})();var qe=a(3452),Ue=a(6188),Le=a(131);const Ye=[{path:"",redirectTo:"personas",pathMatch:"full"},{path:"",component:j,data:{fusionTool:"chart"},children:[{path:"chart",component:k}]},{path:"",component:j,children:[{path:"personas/:demonName",component:v,children:[{path:"fissions/triple",component:Ue.X},{path:"fusions/triple",component:Le.W},{path:"fissions",component:Ne},{path:"fusions",component:qe.y},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"shadows/:demonName",component:v},{path:"personas",component:U},{path:"shadows",component:U,data:{showShadows:!0}},{path:"skills",component:W},{path:"qrcodes",component:be},{path:"recipes",component:Ee},{path:"settings",component:De},{path:"previews",component:Ie}]},{path:"**",redirectTo:"personas",pathMatch:"full"}];let Be=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[q.iI.forChild(Ye),q.iI]})}}return s})()},7992:(se,B,a)=>{a.d(B,{i:()=>ee});var q=a(4412);class M{constructor(r,f){this.compConfig=r,this.specialRecipes={},this.initImportedData(),this.updateDerivedData(f)}initImportedData(){const r={},f={},p={},b={},C={},P={},u={},l={},v=this.compConfig.hasDemonResists,D=this.compConfig.appCssClasses.includes("p5r"),k="-".repeat(this.compConfig.resistElems.length),y="-".repeat(this.compConfig.ailmentElems.length);for(const[m,h]of Object.entries(this.compConfig.resistCodes))u[m]=(h/1e4|0)<<10,l[m]=h%1e4/2.5|0;const E=(m,h,o)=>(m||h).split("").map((F,A)=>u[F]+(o?.[A]/2.5|0||l[F]));for(const m of this.compConfig.demonData)for(const[h,o]of Object.entries(m)){const F=Object.values(o.skills).reduce((Y,X)=>0===X?Y+1:Y,0),A=10*Math.floor((800+120*o.lvl)*(1+.25*F)/10),x=this.compConfig.inheritTypes[o.inherit||o.inherits];r[h]={name:h,race:o.race,lvl:o.lvl,currLvl:o.lvl,price:o.price||A,inherits:x.reduce((Y,X)=>2*Y+(X>0?1:0),0),affinities:x,stats:o.stats,resists:v?E(o.resists,k,o.resmods):[],ailments:v?E(o.ailments,y,o.ailmods):[],skills:o.skills,drop:o.item||"",code:o.code||0,fusion:o.fusion||"normal",prereq:o.prereq||""},D&&(r[h].skills[o.trait||"Agi"]=0)}for(const m of this.compConfig.skillData)for(const[h,o]of Object.entries(m))p[h]={name:h,element:o.elem||o.element,cost:o.cost||0,rank:o.unique?99:o.rank||(1023&o.cost)/100||1,effect:o.effect,target:o.target||"Self",learnedBy:[],transfer:[],code:o.code||0,level:0},o.card&&(p[h].transfer=o.card.split(", ").map(F=>({demon:F,level:r[F]?0:-100})));for(const m of this.compConfig.enemyData)for(const[h,o]of Object.entries(m))if(f[h]={name:h,race:o.race,lvl:o.lvl,currLvl:o.lvl,price:0,inherits:0,stats:o.stats,resists:E(o.resists,k,o.resmods),ailments:E(o.ailments,y,o.ailmods),skills:o.skills.reduce((F,A)=>(F[A]=0,F),{}),area:o.area,drop:o.drops?.join(", ")||"-",code:0,fusion:"normal",isEnemy:!0},f[h].drop){const F=f[h].drop.split(", "),A=F[F.length-1];p[A]&&p[A].transfer.unshift({demon:o.persona,level:5275})}for(const{conditions:m}of this.compConfig.demonUnlocks)for(const[h,o]of Object.entries(m))for(const F of h.split(","))r[F].prereq=o;for(const[m,h]of Object.entries(this.compConfig.specialRecipes)){const o=h;if(b[m]=o,r[m].fusion=o.length>0?"special":"accident",2===o.length)for(const F of o)P[F]||(P[F]=[]),P[F].push(m)}for(const m of this.compConfig.races)C[m]={};for(const m of Object.values(r).sort((h,o)=>h.lvl-o.lvl)){if(m.drop){const[h,o]=m.drop.split(", ");p[h]&&p[h].transfer.unshift({demon:m.name,level:0}),p[o]&&p[o].transfer.unshift({demon:m.name,level:3865})}"party"!==m.fusion&&(C[m.race][m.lvl]=m.name);for(const[h,o]of Object.entries(m.skills))p[h].learnedBy.push({demon:m.name,level:o})}this.demons=r,this.enemies=f,this.skills=p,this.specialRecipes=b,this.invertedDemons=C,this.invertedSpecials=P}updateDerivedData(r){const f=Object.assign({},this.demons),p=[],b={},C={};for(const l of Object.values(this.skills))l.learnedBy.length<1&&l.transfer.length<1?l.rank=99:p.push(l);for(const l of this.compConfig.races)b[l]=[],C[l]=[];for(const[l,v]of Object.entries(this.demons))"party"!==v.fusion&&(this.isElementDemon(l)||b[v.race].push(v.lvl),this.specialRecipes.hasOwnProperty(l)||C[v.race].push(v.lvl));for(const l of this.compConfig.races)b[l].sort((v,D)=>v-D),C[l].sort((v,D)=>v-D);for(const[l,v]of Object.entries(r))if(!v){const{race:D,lvl:k}=this.demons[l];delete f[l],b[D]=b[D].filter(y=>y!==k),C[D]=C[D].filter(y=>y!==k)}const P=Object.keys(f).map(l=>f[l]),u=Object.keys(this.enemies).map(l=>this.enemies[l]);this._allDemons=u.concat(P),this._allSkills=p,this.allIngredients=b,this.allResults=C}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return Object.keys(this.specialRecipes).filter(r=>!this.isElementDemon(r)).map(r=>this.demons[r])}getDemon(r){return this.demons[r]||this.enemies[r]}getSkill(r){return this.skills[r]}getSkills(r){const f=this.compConfig.elemOrder,p=r.map(b=>this.skills[b]);return p.sort((b,C)=>1e4*(f[b.element]-f[C.element])+b.rank-C.rank),p}getIngredientDemonLvls(r){return this.allIngredients[r]||[]}getResultDemonLvls(r){return this.allResults[r]||[]}getSpecialNameEntries(r){return this.specialRecipes[r]||[]}getSpecialNamePairs(r){return[]}reverseLookupDemon(r,f){return this.invertedDemons[r][f]}reverseLookupSpecial(r){return this.invertedSpecials[r]||[]}isElementDemon(r){return this.specialRecipes.hasOwnProperty(r)&&0===this.specialRecipes[r].length}updateFusionSettings(r){this.updateDerivedData(r)}}var G=a(8063);class e extends G.p{constructor(r,f){super(),this.lvlModifier=.5,this.initCharts(r,f)}initCharts(r,f){const p=r.normalTable.races,b=r.normalTable.table,C=r.elementTable?.elems||[],P=r.elementTable?.races||[],u=r.elementTable?.table||[],l=[];for(let v=0;v<p.length;v++)l.push(b[v].slice(f?0:v,f?v+1:p.length)),f||(l[v][0]="-");this.races=p,this.elementDemons=C,this.raceOrder=r.raceOrder,this.lvlModifier=f?4.25:.5,this.fusionChart=G.p.loadFusionTableJson(p,1===b[0].length?b:l),this.fissionChart=G.p.loadFissionTableJson(p,C,1===b[0].length?b:l),this.elementChart=C.length?G.p.loadElementTableJson(P,C,u):{}}}var S=a(6947),O=a(7605),H=a(9910),j=a(7101);function Q(w,r,f){const p=[],{race:b,lvl:C}=r.getDemon(w);for(const P of f.elementDemons.filter(u=>u!==w)){const{race:u,lvl:l}=r.getDemon(P),v=f.getRaceFusions(b)[u],D=r.getResultDemonLvls(v),y=D.reduce((m,h)=>C+l>=2*h?m+1:m,0),E=r.reverseLookupDemon(v,y===D.length?D[D.length-1]:D[y]);p.push({name1:P,name2:E})}return p}var I=a(7178),V=a(3515),U=a(7396),K=a(609),z=a(1939),W=a(2755),Z=a(1090),L=a(2598),_=a(9617),J=a(8935);let ee=(()=>{class w extends K.d{constructor(f,p,b){const C=b.url.split("/"),P=Object.keys(f.configs)[0],u=f.configs[C[2]||C[1]]||f.configs[C[1]]||f.configs[P],l=p.supportedLanguages.includes(C[1])?C[1]:"en",v={"-":[u.defaultDemon]},D=p.translateRaces(u.races,l),k={appTitle:p.translateAppTitle(u.appTitle,l),lang:l,races:D,raceOrder:D.reduce((m,h,o)=>(m[h]=o,m),{}),appCssClasses:u.appCssClasses,skillData:u.skillData.map(m=>p.translateSkillData(m,l)),skillElems:u.skillElems,ailmentElems:p.translateElems(u.ailmentElems,l),elemOrder:u.elemOrder,resistCodes:u.resistCodes,demonData:u.demonData.map(m=>p.translateDemonData(m,l)),baseStats:p.translateElems(u.baseStats,l),resistElems:u.resistElems,inheritTypes:u.inheritTypes,inheritElems:u.inheritElems,demonUnlocks:p.translateDemonUnlocks(u.demonUnlocks,l),enemyData:u.enemyData.map(m=>p.translateEnemyData(m,l)),enemyStats:u.enemyStats,normalTable:p.translateFusionChart(u.normalTable,l),elementTable:p.translateFusionChart(u.elementTable,l),specialRecipes:p.translateSpecialRecipes(u.specialRecipes,l),maxSkillSlots:u.maxSkillSlots,hasTripleFusion:u.hasTripleFusion,hasDemonResists:u.hasDemonResists,hasSkillRanks:u.hasSkillRanks,hasEnemies:u.hasEnemies,hasQrcodes:u.hasQrcodes,hasSkillCards:u.hasSkillCards,hasManualInheritance:u.hasManualInheritance,defaultDemon:p.translateSpecialRecipes(v,l)["-"][0],settingsKey:p.translateSettingsKey(u.settingsKey,l),settingsVersion:u.settingsVersion},y=new e(k,!1),E=new z.U(k.demonUnlocks,[]);super(new M(k,E.demonToggles),y,E,k.settingsKey,k.settingsVersion),this.fissionCalculator=S.RT,this.fusionCalculator=S.Se,this.triFissionCalculator=S.I4,this.triFusionCalculator=S.zm,this.compConfig=k,this.appName=k.appTitle+(0,W.o)(Z.fu.FusionCalculator,k.lang),this._tripleChart=new e(k,!0),this._squareChart$=new q.t({normalChart:y,tripleChart:this._tripleChart,raceOrder:k.raceOrder}),this.squareChart=this._squareChart$.asObservable(),k.appCssClasses.includes("p5t")&&(this.fissionCalculator=new U.s([I.Hr],[]),this.fusionCalculator=new U.s([O.Cx],[])),k.appCssClasses.includes("p5")&&(this.fissionCalculator=new U.s([I.Hr,V.gt],[]),this.fusionCalculator=new U.s([O.Cx,H.H,O.GW],[j.Dy,j.sk,Q]))}static{this.\u0275fac=function(p){return new(p||w)(L.KVO(S.HI),L.KVO(_.i),L.KVO(J.Ix))}}static{this.\u0275prov=L.jDH({token:w,factory:w.\u0275fac})}}return w})()},159:(se,B,a)=>{a.d(B,{v:()=>H});var q=a(4341),M=a(177),G=a(3887),e=a(9447),S=a(7277),O=a(2598);let H=(()=>{class j{static forRoot(){return{ngModule:j}}static{this.\u0275fac=function(V){return new(V||j)}}static{this.\u0275mod=O.$C({type:j})}static{this.\u0275inj=O.G2t({imports:[M.MD,G.G,q.X1,e.$,S.S]})}}return j})()}}]);