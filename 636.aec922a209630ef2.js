"use strict";(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[636],{9023:(se,W,g)=>{g.d(W,{q:()=>w});var N=g(2755),e=g(1090),a=g(2598),u=g(345),y=g(8935),$=g(177);function G(j,v){if(1&j&&(a.j41(0,"th"),a.EFF(1),a.k0s()),2&j){const R=v.$implicit,b=a.XpG();a.R7$(1),a.JRh(R.slice(0,b.nameCut))}}function Y(j,v){if(1&j&&(a.j41(0,"td",4),a.EFF(1),a.k0s()),2&j){const R=v.$implicit,b=a.XpG(2);a.Y8G("ngClass",R.slice(0,4)),a.R7$(1),a.JRh(R.slice(4,b.nameCut+4))}}function X(j,v){if(1&j&&(a.j41(0,"tr")(1,"th"),a.EFF(2),a.k0s(),a.DNE(3,Y,2,2,"td",3),a.j41(4,"th"),a.EFF(5),a.k0s()()),2&j){const R=v.$implicit;a.R7$(2),a.JRh(R[0]),a.R7$(1),a.Y8G("ngForOf",R.slice(1,R.length-1)),a.R7$(2),a.JRh(R[R.length-1])}}function U(j,v){if(1&j&&(a.j41(0,"th"),a.EFF(1),a.k0s()),2&j){const R=v.$implicit,b=a.XpG();a.R7$(1),a.JRh(R.slice(0,b.nameCut))}}function J(j,v){if(1&j&&(a.j41(0,"tr")(1,"th",0),a.EFF(2),a.k0s()()),2&j){const R=a.XpG();a.R7$(1),a.BMQ("colspan",R.table[0].length),a.R7$(1),a.Lme("",R.appName," ",R.tripTitle,"")}}class w{static{this.RESULT_COLORS=Object.entries({oran:["-2","Erthys","Gnome","Saki Mitama","Random","\u30a2\u30fc\u30b7\u30fc\u30ba","\u30ce\u30fc\u30e0","\u30b5\u30ad\u30df\u30bf\u30de"],redd:["-1","Flaemis","Salamander","Ara Mitama","Fiend","\u30d5\u30ec\u30a4\u30df\u30fc\u30ba","\u30b5\u30e9\u30de\u30f3\u30c0\u30fc","\u30a2\u30e9\u30df\u30bf\u30de"],gree:["1","Aeros","Sylph","Kushi Mitama","Kusi Mitama","UMA","\u30a8\u30a2\u30ed\u30b9","\u30b7\u30eb\u30ad\u30fc","\u30af\u30b7\u30df\u30bf\u30de"],blue:["2","Aquans","Undine","Nigi Mitama","Enigma","\u30a2\u30af\u30a2\u30f3\u30ba","\u30a6\u30f3\u30c7\u30a3\u30fc\u30cd","\u30cb\u30ae\u30df\u30bf\u30de"]})}constructor(v,R){this.title2=v,this.route=R,this.normTitle="Normal Fusions",this.tripTitle="",this.isPersona=!1,this.filterDarks=!0,this.lang="en",this.msgs=e.qh,this.subscriptions=[],this.table=[],this.nameCut=4}ngOnInit(){this.subscriptions.push(this.route.parent.data.subscribe(v=>{this.appName=v.appName||"Shin Megami Tensei",this.nameCut=parseInt((0,N.o)(this.msgs.NameCut,v.lang)),this.title2.setTitle((0,N.o)(this.msgs.AppTitle,v.lang).replace("$APP",this.appName))}))}ngOnChanges(){this.normChart&&this.fillFusionChart()}ngOnDestroy(){for(const v of this.subscriptions)v.unsubscribe()}fillFusionChart(){const v="noneNone",b=w.RESULT_COLORS.reduce((E,[_,M])=>M.reduce((S,T)=>(S[T]=_,S),E),{}),L=this.normChart.elementDemons;let P=[],x=this.normChart.races,B=[];this.filterDarks&&(P=this.normChart.races.filter(E=>this.normChart.getLightDark(E)>0),x=this.normChart.races.filter(E=>0===this.normChart.getLightDark(E)),B=this.normChart.races.filter(E=>-1===this.normChart.getLightDark(E)),0===B.length&&P.length>0&&(P=this.normChart.races.filter(E=>this.normChart.getLightDark(E)>-1),x=[],B=this.normChart.races.filter(E=>this.normChart.getLightDark(E)<-1)));const z=P.length-B.length,A=P.concat(x,L),Z=B.length?B.concat(Array(A.length-B.length).fill("")):A,q=this.mitaTable?A:P.concat(x,Array(L.length).fill("")),H=this.mitaTable||B.length?Array(z).fill("").concat(B,x,L):A;this.table=[[""].concat(A,[""])];for(let E=0;E<H.length;E++){const _=Array(A.length+2).fill("empt-"),M=H[E],S=q[E],T=-1!==L.indexOf(M),s=-1!==L.indexOf(S);this.table.push(_),_[0]=M,_[_.length-1]=S;for(let n=E;n<A.length;n++){const o=A[n],r=-1!==L.indexOf(o);if(r&&s){const c=L.indexOf(S),h=L.indexOf(o),m=this.mitaTable[h][c].replace("-","");_[n+1]=m?(b[m]||"norm")+m:v}else if(r&&S){const c=this.normChart.getElemFusions(o)[S];_[n+1]=c?(b[c]||"rank")+(c>0?"+":"")+c.toString():v}else if(o&&S){const c=this.isPersona&&o===S?o:this.normChart.getRaceFusion(o,S);_[n+1]=c?(b[c]||(o===S?"elem":"norm"))+c:v}}if(this.tripChart)for(let n=0;n<=E-z;n++){const o=Z[n];if(o&&T){const r=this.tripChart.getElemFusions(M)[o];_[n+1]=r?(b[r]||"rank")+(r>0?"+":"")+r.toString():v}else if(o&&M){const r=this.tripChart.getRaceFusion(o,M);_[n+1]=r?(b[r]||(o===M?"elem":"trip"))+r:v}}if(-1!==M.indexOf(" x ")){const[n,o]=M.split(" x "),r=n.slice(0,3)+"x"+o.slice(0,3);_[0]=r,_[_.length-1]=r}else if(-1!==M.indexOf(" ")){const n=M.split(" ")[0];_[0]=n,_[_.length-1]=n}}for(let E=0;E<this.table[0].length;E++){const _=this.table[0][E];if(-1!==_.indexOf(" x ")){const[M,S]=_.split(" x ");this.table[0][E]=M.slice(0,2)+S.slice(0,2)}}this.table.push([""].concat(Z,[""]))}static{this.\u0275fac=function(R){return new(R||w)(a.rXU(u.hE),a.rXU(y.nX))}}static{this.\u0275cmp=a.VBU({type:w,selectors:[["app-fusion-chart"]],inputs:{normChart:"normChart",tripChart:"tripChart",mitaTable:"mitaTable",normTitle:"normTitle",tripTitle:"tripTitle",isPersona:"isPersona",filterDarks:"filterDarks",lang:"lang",counter:"counter"},features:[a.OA$],decls:12,vars:7,consts:[[1,"title"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(R,b){1&R&&(a.j41(0,"table")(1,"tbody")(2,"tr")(3,"th",0),a.EFF(4),a.k0s()(),a.j41(5,"tr"),a.DNE(6,G,2,1,"th",1),a.k0s(),a.DNE(7,X,6,3,"tr",1),a.j41(8,"tr"),a.DNE(9,U,2,1,"th",1),a.k0s(),a.DNE(10,J,3,3,"tr",2),a.k0s(),a.nrm(11,"tbody"),a.k0s()),2&R&&(a.R7$(3),a.BMQ("colspan",b.table[0].length),a.R7$(1),a.Lme("",b.appName," ",b.normTitle,""),a.R7$(2),a.Y8G("ngForOf",b.table[0]),a.R7$(1),a.Y8G("ngForOf",b.table.slice(1,b.table.length-1)),a.R7$(2),a.Y8G("ngForOf",b.table[b.table.length-1]),a.R7$(1),a.Y8G("ngIf",b.tripTitle))},dependencies:[$.YU,$.Sq,$.bT],styles:["table[_ngcontent-%COMP%]{width:auto;margin:0 auto;white-space:nowrap}td.elem[_ngcontent-%COMP%]{color:#0f0}td.trip[_ngcontent-%COMP%]{color:#d3d3d3}td.oran[_ngcontent-%COMP%]{color:orange}td.redd[_ngcontent-%COMP%]{color:red}td.gree[_ngcontent-%COMP%]{color:#0f0}td.blue[_ngcontent-%COMP%]{color:#0ff}td.none[_ngcontent-%COMP%]{color:transparent}td.empt[_ngcontent-%COMP%]{background-color:transparent;color:transparent}"],changeDetection:0})}}},6122:(se,W,g)=>{g.d(W,{L:()=>j});var N=g(3885),e=g(9108),a=g(1090),u=g(2598),y=g(177),$=g(8935),G=g(4207);const Y=function(){return{exact:!0}};function X(v,R){if(1&v&&(u.j41(0,"th",4)(1,"a",5),u.EFF(2),u.nI1(3,"translateComp"),u.k0s()()),2&v){const b=R.$implicit,L=u.XpG();u.xc7("width",100/L.fusionOptions.length,"%"),u.Y8G("routerLink",b.link)("routerLinkActiveOptions",u.lJ4(9,Y)),u.R7$(1),u.Y8G("routerLink",b.link),u.R7$(1),u.JRh(u.i5U(3,6,b.title,L.lang))}}function U(v,R){if(1&v&&(u.j41(0,"tr")(1,"th",6),u.EFF(2),u.nI1(3,"translateComp"),u.k0s()()),2&v){const b=u.XpG();u.R7$(1),u.BMQ("colspan",b.fusionOptions.length),u.R7$(1),u.SpI(" ",u.i5U(3,2,b.msgs.DlcExcluded,b.lang)," ")}}function J(v,R){if(1&v&&(u.j41(0,"tr")(1,"th",6),u.SdG(2),u.k0s()()),2&v){const b=u.XpG();u.R7$(1),u.BMQ("colspan",b.fusionOptions.length)}}const w=["*"];let j=(()=>{class v{constructor(){this.hasTripleFusion=!1,this.showFusionAlert=!1,this.excludedDlc=!1,this.lang="en",this.msgs=a.Lq,this.fusionOptions=[{title:this.msgs.NormalFissions,link:"fissions"},{title:this.msgs.NormalFusions,link:"fusions"}]}ngOnInit(){this.hasTripleFusion&&(this.fusionOptions=[{title:this.msgs.DoubleFissions,link:"fissions"},{title:this.msgs.TripleFissions,link:"fissions/triple"},{title:this.msgs.TripleFusions,link:"fusions/triple"},{title:this.msgs.DoubleFusions,link:"fusions"}])}ngOnChanges(){setTimeout(()=>this.stickyTable.nextEdges())}static{this.\u0275fac=function(L){return new(L||v)}}static{this.\u0275cmp=u.VBU({type:v,selectors:[["app-smt-fusions"]],viewQuery:function(L,P){if(1&L&&u.GBs(e.a,5),2&L){let x;u.mGM(x=u.lsd())&&(P.stickyTable=x.first)}},inputs:{hasTripleFusion:"hasTripleFusion",showFusionAlert:"showFusionAlert",excludedDlc:"excludedDlc",lang:"lang"},features:[u.Jv_([N.P]),u.OA$],ngContentSelectors:w,decls:11,vars:3,consts:[["appPositionSticky","",1,"list-table"],["stickyTable",""],["class","nav","routerLinkActive","active",3,"routerLink","width","routerLinkActiveOptions",4,"ngFor","ngForOf"],[4,"ngIf"],["routerLinkActive","active",1,"nav",3,"routerLink","routerLinkActiveOptions"],[3,"routerLink"],[1,"title"]],template:function(L,P){1&L&&(u.NAR(),u.j41(0,"div")(1,"table",0,1)(3,"thead")(4,"tr"),u.DNE(5,X,4,10,"th",2),u.k0s(),u.DNE(6,U,4,5,"tr",3),u.nrm(7,"tr"),u.DNE(8,J,3,1,"tr",3),u.nrm(9,"tr"),u.k0s()(),u.nrm(10,"router-outlet"),u.k0s()),2&L&&(u.R7$(5),u.Y8G("ngForOf",P.fusionOptions),u.R7$(1),u.Y8G("ngIf",P.excludedDlc),u.R7$(2),u.Y8G("ngIf",P.showFusionAlert))},dependencies:[y.Sq,y.bT,$.n3,$.Wk,$.wQ,e.a,G.uz],encapsulation:2,changeDetection:0})}}return v})()},1151:(se,W,g)=>{g.d(W,{S:()=>D});var N=g(8935),e=g(2598),a=g(1057),u=g(177),y=g(5583);let $=(()=>{class i{constructor(t){this.appCssClasses=["smtnes","smt1"],this.appCssClasses=t.compConfig.appCssClasses}static{this.\u0275fac=function(p){return new(p||i)(e.rXU(a.i))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-smt1-compendium"]],decls:1,vars:2,consts:[[3,"ngClass","hasSettings"]],template:function(p,d){1&p&&e.nrm(0,"app-demon-compendium",0),2&p&&e.Y8G("ngClass",d.appCssClasses)("hasSettings",!1)},dependencies:[u.YU,y.f],styles:[".devilsum div.element-icon,.smtnes div.element-icon{height:12px;background-size:12px;background-repeat:no-repeat;background-position:center;color:transparent}.smtnes div.element-icon.sword{background-image:url(/assets/images/smt4f/sword.png)}.smtnes div.element-icon.gun{background-image:url(/assets/images/smtsj/gun.png)}.smtnes div.element-icon.fire{background-image:url(/assets/images/smtsj/fir.png)}.smtnes div.element-icon.i4{background-image:url(/assets/images/smtsj/fir.png)}.smtnes div.element-icon.ice{background-image:url(/assets/images/smtsj/ice.png)}.smtnes div.element-icon.i5{background-image:url(/assets/images/smtsj/ice.png)}.smtnes div.element-icon.elec{background-image:url(/assets/images/smtsj/ele.png)}.smtnes div.element-icon.i6{background-image:url(/assets/images/smtsj/ele.png)}.smtnes div.element-icon.force{background-image:url(/assets/images/smtsj/win.png)}.smtnes div.element-icon.i7{background-image:url(/assets/images/smtsj/win.png)}.smtnes div.element-icon.nerve{background-image:url(/assets/images/smt4f/panic.png)}.smtnes div.element-icon.almighty{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.i13{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.expel{background-image:url(/assets/images/smtsj/exp.png)}.smtnes div.element-icon.i8{background-image:url(/assets/images/smtsj/exp.png)}.smtnes div.element-icon.death{background-image:url(/assets/images/smtsj/cur.png)}.smtnes div.element-icon.i9{background-image:url(/assets/images/smtsj/cur.png)}.smtnes div.element-icon.curse{background-image:url(/assets/images/smt4f/poison.png)}.smtnes div.element-icon.bind{background-image:url(/assets/images/smt4f/bind.png)}.smtnes div.element-icon.rush{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.punch{background-image:url(/assets/images/smt4f/sword.png)}.smtnes div.element-icon.kick{background-image:url(/assets/images/smtsj/gun.png)}.smtnes div.element-icon.flying{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.energy{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.recovery{background-image:url(/assets/images/smtsj/rec.png)}.smtnes div.element-icon.support{background-image:url(/assets/images/smtsj/sup.png)}.smtnes div.element-icon.special{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.attack{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.tech{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.slash{background-image:url(/assets/images/smt4f/sword.png)}.smtnes div.element-icon.charge{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.blunt{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.handgun{background-image:url(/assets/images/smtsj/gun.png)}.smtnes div.element-icon.penetrate{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.spread{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.mystic{background-image:url(/assets/images/smt4f/poison.png)}.smtnes div.element-icon.mind{background-image:url(/assets/images/smt4f/bind.png)}.smtnes div.element-icon.suicide{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.passive{background-image:url(/assets/images/smtsj/pas.png)}.smtnes div.element-icon.defend{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.phys{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.gro{background-image:url(/assets/images/smt4f/sword.png)}.smtnes div.element-icon.air{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.fir{background-image:url(/assets/images/smtsj/fir.png)}.smtnes div.element-icon.ele{background-image:url(/assets/images/smtsj/ele.png)}.smtnes div.element-icon.for{background-image:url(/assets/images/smtsj/win.png)}.smtnes div.element-icon.gig{background-image:url(/assets/images/smt4f/bind.png)}.smtnes div.element-icon.alm{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.lig{background-image:url(/assets/images/smtsj/exp.png)}.smtnes div.element-icon.dar{background-image:url(/assets/images/smtsj/cur.png)}.smtnes div.element-icon.phy{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.ail{background-image:url(/assets/images/smtsj/ail.png)}.smtnes div.element-icon.rec{background-image:url(/assets/images/smtsj/rec.png)}.smtnes div.element-icon.sup{background-image:url(/assets/images/smtsj/sup.png)}.smtnes div.element-icon.psy{background-image:url(/assets/images/smt4f/panic.png)}.smtnes div.element-icon.spear{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.thrown{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.ailment{background-image:url(/assets/images/smtsj/ail.png)}.smtnes div.element-icon.quad{background-image:url(/assets/images/smt4f/curse.png)}.smtnes div.element-icon.elem{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.none{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.strike{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.i0{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.skill{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.temp{background-image:url(/assets/images/smt4f/smirk.png)}.smtnes div.element-icon.i17{background-image:url(/assets/images/smt4f/smirk.png)}.smtnes div.element-icon.dark{background-image:url(/assets/images/smt4f/curse.png)}.smtnes div.element-icon.i18{background-image:url(/assets/images/smt4f/curse.png)}.smtnes div.element-icon.witch{background-image:url(/assets/images/smtsj/ail.png)}.smtnes div.element-icon.i19{background-image:url(/assets/images/smtsj/ail.png)}.smtnes div.element-icon.rea{background-image:url(/assets/images/smtsj/rec.png)}.smtnes div.element-icon.i20{background-image:url(/assets/images/smtsj/rec.png)}.smtnes div.element-icon.reb{background-image:url(/assets/images/smtsj/sup.png)}.smtnes div.element-icon.i21{background-image:url(/assets/images/smtsj/sup.png)}.smtnes div.element-icon.element{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.hero{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.i22{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.i23{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.i24{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.starter{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.autorec{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.phase{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.explore{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.area{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.plugin{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.self{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.universe{background-image:url(/assets/images/smtsj/spe.png)}.smtnes td.align.ll,.smtnes td.align.nl,.smtnes td.align.dl{color:#0ff}.smtnes td.align.lc,.smtnes td.align.nc,.smtnes td.align.dc{color:tomato}.smtnes td.align.el{color:#0f0}.smtnes td.align.ec{color:gold}.smt1 th.title,.smt1 th.nav.active,.smt1 th.nav.active a{background-color:#608341;color:#fff}.smt2 th.title,.smt2 th.nav.active,.smt2 th.nav.active a{background-color:#2f4f4f;color:#fff}.smtif th.title,.smtif th.nav.active,.smtif th.nav.active a{background-color:#8fbc8f;color:#000}.dsum th.title,.dsum th.nav.active,.dsum th.nav.active a{background-color:#4372aa;color:#fff}.dssh th.title,.dssh th.nav.active,.dssh th.nav.active a{background-color:#302878;color:#fff}.mjn1 th.title,.mjn1 th.nav.active,.mjn1 th.nav.active a{color:#fff;background-color:#004381}.mjn2 th.title,.mjn2 th.nav.active,.mjn2 th.nav.active a{background-color:#514f7e;color:#fff}.smt9 th.title,.smt9 th.nav.active,.smt9 th.nav.active a{background-color:#693cbe;color:#fff}.smtim th.title,.smtim th.nav.active,.smtim th.nav.active a{background-color:#009d96;color:#fff}\n"],encapsulation:2,changeDetection:0})}}return i})();var G=g(9404),Y=g(345),X=g(9629);let U=(()=>{class i extends G.M{constructor(t,p,d){super(t,p,d),this.appName=`List of Demons - ${d.appName}`,this.compConfig=d.compConfig,this.defaultSortFun=(I,K)=>200*(this.compConfig.raceOrder[I.race]-this.compConfig.raceOrder[K.race])+K.lvl-I.lvl}static{this.\u0275fac=function(p){return new(p||i)(e.rXU(Y.hE),e.rXU(e.gRc),e.rXU(a.i))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-demon-list-container"]],features:[e.Vt3],decls:2,vars:7,consts:[[3,"raceOrder","statHeaders","resistHeaders","inheritOrder","rowData"]],template:function(p,d){1&p&&(e.nrm(0,"app-smt-demon-list",0),e.nI1(1,"async")),2&p&&e.Y8G("raceOrder",d.compConfig.raceOrder)("statHeaders",d.compConfig.baseStats)("resistHeaders",d.compConfig.resistElems)("inheritOrder",d.compConfig.elemOrder)("rowData",e.bMT(1,5,d.demons))},dependencies:[X.F,u.Jj],encapsulation:2,changeDetection:0})}}return i})();var J=g(9454),w=g(2940);let j=(()=>{class i extends J.E{constructor(t,p,d){super(t,p,d),this.appName=`List of Skills - ${d.appName}`,this.compConfig=d.compConfig,this.defaultSortFun=(I,K)=>1e4*(this.compConfig.elemOrder[I.element]-this.compConfig.elemOrder[K.element])+I.rank-K.rank}static{this.\u0275fac=function(p){return new(p||i)(e.rXU(Y.hE),e.rXU(e.gRc),e.rXU(a.i))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-skill-list-container"]],features:[e.Vt3],decls:2,vars:6,consts:[[3,"elemOrder","hasRank","hasTarget","rowData"]],template:function(p,d){1&p&&(e.nrm(0,"app-smt-skill-list",0),e.nI1(1,"async")),2&p&&e.Y8G("elemOrder",d.compConfig.elemOrder)("hasRank",!1)("hasTarget",!0)("rowData",e.bMT(1,4,d.skills))},dependencies:[w.p,u.Jj],encapsulation:2,changeDetection:0})}}return i})();var v=g(9023);function R(i,O){if(1&i&&(e.j41(0,"th"),e.EFF(1),e.k0s()),2&i){const t=O.$implicit;e.R7$(1),e.JRh(t.slice(0,4))}}function b(i,O){if(1&i&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&i){const t=O.$implicit;e.R7$(1),e.JRh(t.slice(0,4))}}function L(i,O){if(1&i&&(e.j41(0,"tr")(1,"th"),e.EFF(2),e.k0s(),e.DNE(3,b,2,1,"td",1),e.j41(4,"th"),e.EFF(5),e.k0s()()),2&i){const t=O.$implicit;e.R7$(2),e.JRh(t[0]),e.R7$(1),e.Y8G("ngForOf",t.slice(1,t.length-1)),e.R7$(2),e.JRh(t[t.length-1])}}function P(i,O){if(1&i&&(e.j41(0,"th"),e.EFF(1),e.k0s()),2&i){const t=O.$implicit;e.R7$(1),e.JRh(t.slice(0,4))}}let x=(()=>{class i{constructor(){this.table=[]}ngOnChanges(){this.fillFusionChart()}fillFusionChart(){this.table=[];const t=this.speciesChart.races,p=[""].concat(t,[""]);this.table.push(p);for(let d=0;d<t.length;d++)for(let I=d+1;I<t.length;I++){const K="3"+t[d]+"|3"+t[I];this.table.push([t[d]].concat(t.map(V=>this.speciesChart.getRaceFusion("3"+V,K)),[t[I]]))}this.table.push(p)}static{this.\u0275fac=function(p){return new(p||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-species-triple-chart"]],inputs:{speciesChart:"speciesChart",title:"title"},features:[e.OA$],decls:9,vars:5,consts:[[1,"title"],[4,"ngFor","ngForOf"]],template:function(p,d){1&p&&(e.j41(0,"table")(1,"tr")(2,"th",0),e.EFF(3),e.k0s()(),e.j41(4,"tr"),e.DNE(5,R,2,1,"th",1),e.k0s(),e.DNE(6,L,6,3,"tr",1),e.j41(7,"tr"),e.DNE(8,P,2,1,"th",1),e.k0s()()),2&p&&(e.R7$(2),e.BMQ("colspan",d.table[0].length),e.R7$(1),e.JRh(d.title),e.R7$(2),e.Y8G("ngForOf",d.table[0]),e.R7$(1),e.Y8G("ngForOf",d.table.slice(1,d.table.length-1)),e.R7$(2),e.Y8G("ngForOf",d.table[d.table.length-1]))},dependencies:[u.Sq],styles:["table[_ngcontent-%COMP%]{width:auto;margin:0 auto}td.elem[_ngcontent-%COMP%]{color:#0f0}td.trip[_ngcontent-%COMP%]{color:#d3d3d3}td.ra-2[_ngcontent-%COMP%]{color:orange}td.ra-1[_ngcontent-%COMP%]{color:red}td.ran1[_ngcontent-%COMP%]{color:#0f0}td.ran2[_ngcontent-%COMP%]{color:#0ff}td.None[_ngcontent-%COMP%]{color:#222}td.Sala[_ngcontent-%COMP%], td.Flae[_ngcontent-%COMP%], td.Ara[_ngcontent-%COMP%], td.Fien[_ngcontent-%COMP%]{color:red}td.Undi[_ngcontent-%COMP%], td.Aqua[_ngcontent-%COMP%], td.Nigi[_ngcontent-%COMP%], td.Enig[_ngcontent-%COMP%]{color:#0ff}td.Sylp[_ngcontent-%COMP%], td.Aero[_ngcontent-%COMP%], td.Kusi[_ngcontent-%COMP%], td.UMA[_ngcontent-%COMP%]{color:#0f0}td.Gnom[_ngcontent-%COMP%], td.Erth[_ngcontent-%COMP%], td.Saki[_ngcontent-%COMP%], td.Rand[_ngcontent-%COMP%]{color:orange}td.Empt[_ngcontent-%COMP%]{background-color:#000;color:transparent}"],changeDetection:0})}}return i})();function B(i,O){if(1&i&&(e.qex(0),e.nrm(1,"app-fusion-chart",1)(2,"app-fusion-chart",1),e.bVm()),2&i){const t=e.XpG();e.R7$(1),e.Y8G("normChart",t.normChart)("tripChart",t.normChart)("mitaTable",t.mitamaTable)("normTitle","Light and Neutral Normal Fusions")("tripTitle","Dark Normal Fusions"),e.R7$(1),e.Y8G("normChart",t.tripChart)("tripChart",t.tripChart)("mitaTable",t.tripleMitamaTable)("normTitle","Light and Neutral Triple Fusions")("tripTitle","Dark Triple Fusions")}}function z(i,O){if(1&i&&e.nrm(0,"app-species-triple-chart",4),2&i){const t=e.XpG(2);e.Y8G("speciesChart",t.tripChart)("title",t.appName+" - Triple Fusions")}}function A(i,O){if(1&i&&(e.qex(0),e.nrm(1,"app-fusion-chart",2),e.DNE(2,z,1,2,"app-species-triple-chart",3),e.bVm()),2&i){const t=e.XpG();e.R7$(1),e.Y8G("normChart",t.fullChart)("mitaTable",t.mitamaTable)("filterDarks",!1)("normTitle","Normal Fusions"),e.R7$(1),e.Y8G("ngIf",t.hasTripleFusion)}}function Z(i,O){if(1&i&&(e.qex(0),e.nrm(1,"app-fusion-chart",1)(2,"app-species-triple-chart",4),e.bVm()),2&i){const t=e.XpG();e.R7$(1),e.Y8G("normChart",t.fullChart)("tripChart",t.fullChart)("mitaTable",t.mitamaTable)("normTitle","Light and Neutral Normal Fusions")("tripTitle","Dark Normal Fusions"),e.R7$(1),e.Y8G("speciesChart",t.tripChart)("title",t.appName+" - Triple Fusions")}}let q=(()=>{class i{constructor(t){this.fusionDataService=t,this.subscriptions=[]}ngOnInit(){const t=this.fusionDataService.compConfig;this.appName=t.appTitle,this.mitamaTable=t.mitamaTable,this.tripleMitamaTable=t.tripleMitamaTable,this.hasDarkRanks=t.darknessRecipes,this.hasTripleFusion=!t.appCssClasses.includes("mjn1"),this.fusionDataService.compConfig.useSpeciesFusion&&this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(p=>{this.fullChart=p})),this.subscriptions.push(this.fusionDataService.squareChart.subscribe(p=>{this.normChart=p.normalChart,this.tripChart=p.tripleChart}))}ngOnDestroy(){for(const t of this.subscriptions)t.unsubscribe()}static{this.\u0275fac=function(p){return new(p||i)(e.rXU(a.i))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-fusion-chart-container"]],decls:3,vars:3,consts:[[4,"ngIf"],[3,"normChart","tripChart","mitaTable","normTitle","tripTitle"],[3,"normChart","mitaTable","filterDarks","normTitle"],[3,"speciesChart","title",4,"ngIf"],[3,"speciesChart","title"]],template:function(p,d){1&p&&(e.DNE(0,B,3,10,"ng-container",0),e.DNE(1,A,3,5,"ng-container",0),e.DNE(2,Z,3,7,"ng-container",0)),2&p&&(e.Y8G("ngIf",!d.fullChart),e.R7$(1),e.Y8G("ngIf",d.fullChart&&!d.hasDarkRanks),e.R7$(1),e.Y8G("ngIf",d.fullChart&&d.hasDarkRanks))},dependencies:[u.bT,v.q,x],encapsulation:2,changeDetection:0})}}return i})();var H=g(5692),E=g(3679),_=g(2223),M=g(302),S=g(6122),T=g(8696);function s(i,O){if(1&i&&e.nrm(0,"app-demon-stats",8),2&i){const t=e.XpG(2);e.Y8G("title","Attacks")("statHeaders",t.compConfig.baseAtks)("stats",t.demon.atks)}}function n(i,O){if(1&i&&e.nrm(0,"app-demon-skills",5),2&i){const t=e.XpG(2);e.Y8G("title","Inheritable Skills")("hasTarget",!0)("hasLvl",!1)("elemOrder",t.compConfig.elemOrder)("compendium",t.compendium)("skillLevels",t.compConfig.inheritSkills[t.demon.inherits])}}const o=function(){return["Drop"]};function r(i,O){if(1&i&&(e.qex(0),e.j41(1,"app-demon-stats",2)(2,"td"),e.EFF(3),e.k0s()(),e.DNE(4,s,1,3,"app-demon-stats",3),e.nrm(5,"app-demon-resists",4)(6,"app-demon-skills",5),e.DNE(7,n,1,6,"app-demon-skills",6),e.nrm(8,"app-smt-fusions",7),e.bVm()),2&i){const t=e.XpG();e.R7$(1),e.Y8G("title","Lvl "+t.demon.lvl+" "+t.demon.race+" "+t.demon.name)("statHeaders",t.compConfig.baseStats)("fusionHeaders",e.lJ4(18,o))("stats",t.demon.stats)("price",t.showPrice?t.demon.price:0)("inherits",t.demon.inherits),e.R7$(2),e.JRh(t.demon.drop),e.R7$(1),e.Y8G("ngIf",t.compConfig.baseAtks.length),e.R7$(1),e.Y8G("resistHeaders",t.compConfig.resistElems)("resists",t.demon.resists),e.R7$(1),e.Y8G("title","Innate Skills")("hasTarget",!0)("hasLvl",!1)("elemOrder",t.compConfig.elemOrder)("compendium",t.compendium)("skillLevels",t.demon.skills),e.R7$(1),e.Y8G("ngIf",t.compConfig.inheritSkills),e.R7$(1),e.Y8G("hasTripleFusion",!t.compConfig.appCssClasses.includes("mjn1"))}}function c(i,O){if(1&i&&e.nrm(0,"app-demon-missing",9),2&i){const t=e.XpG();e.Y8G("name",t.name)}}let h=(()=>{class i{static{this.\u0275fac=function(p){return new(p||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",showPrice:"showPrice",compendium:"compendium",compConfig:"compConfig"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"title","statHeaders","fusionHeaders","stats","price","inherits"],[3,"title","statHeaders","stats",4,"ngIf"],[3,"resistHeaders","resists"],[3,"title","hasTarget","hasLvl","elemOrder","compendium","skillLevels"],[3,"title","hasTarget","hasLvl","elemOrder","compendium","skillLevels",4,"ngIf"],[3,"hasTripleFusion"],[3,"title","statHeaders","stats"],[3,"name"]],template:function(p,d){1&p&&(e.DNE(0,r,9,19,"ng-container",0),e.DNE(1,c,1,1,"app-demon-missing",1)),2&p&&(e.Y8G("ngIf",d.demon),e.R7$(1),e.Y8G("ngIf",!d.demon))},dependencies:[u.bT,H.X,E.C,_.w,M.F,S.L],encapsulation:2,changeDetection:0})}}return i})(),m=(()=>{class i{constructor(t,p,d,I){this.route=t,this.title=p,this.currentDemonService=d,this.fusionDataService=I,this.subscriptions=[],this.appName="Test App",this.appName=I.appName,this.compConfig=I.compConfig,this.showPrice=this.compConfig.appCssClasses.includes("dsum")||this.compConfig.appCssClasses.includes("dssh")}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const t of this.subscriptions)t.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(t=>{this.compendium=t,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(t=>{this.name=t,this.getDemonEntry()})),this.route.params.subscribe(t=>{this.currentDemonService.nextCurrentDemon(t.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(`${this.name} - ${this.appName}`),this.demon=this.compendium.getDemon(this.name))}static{this.\u0275fac=function(p){return new(p||i)(e.rXU(N.nX),e.rXU(Y.hE),e.rXU(T.i),e.rXU(a.i))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-demon-entry-container"]],decls:1,vars:5,consts:[[3,"name","demon","showPrice","compConfig","compendium"]],template:function(p,d){1&p&&e.nrm(0,"app-demon-entry",0),2&p&&e.Y8G("name",d.name)("demon",d.demon)("showPrice",d.showPrice)("compConfig",d.compConfig)("compendium",d.compendium)},dependencies:[h],encapsulation:2,changeDetection:0})}}return i})();var f=g(2649),k=g(3452),F=g(6188),C=g(131);const l=[{path:"",redirectTo:"demons",pathMatch:"full"},{path:"",component:$,data:{fusionTool:"chart"},children:[{path:"chart",component:q}]},{path:"",component:$,children:[{path:"demons/:demonName",component:m,children:[{path:"fissions/triple",component:F.X},{path:"fusions/triple",component:C.W},{path:"fissions",component:f.J},{path:"fusions",component:k.y},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"demons",component:U},{path:"skills",component:j}]},{path:"**",redirectTo:"demons",pathMatch:"full"}];let D=(()=>{class i{static{this.\u0275fac=function(p){return new(p||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[N.iI.forChild(l),N.iI]})}}return i})()},1057:(se,W,g)=>{g.d(W,{i:()=>S});var N=g(4412);function e(T,s){return 10*T.slice(2,8).reduce((o,r)=>o+r,0)*Math.floor(s/10+1)}function a(T,s){const n=T.slice(2,8).reduce((h,m)=>h+m,-7),o=Math.floor(n/10)+1,r=n%10;return 70*(r*o*(o+1)/2+(10-r)*(o-1)*o/2+2*o+(r<8?0:1))/("Element"===s||"Mitama"===s?.35:1)}class u{constructor(s){this.pairRecipes={},this.initImportedData(s),this.updateDerivedData(s)}initImportedData(s){const n={},o={},r={},c={},h=s.baseStats.length,m=s.resistElems.length,f={},k=s.appCssClasses.includes("dsum"),F=s.appCssClasses.includes("dssh");for(const[C,l]of Object.entries(s.resistCodes))f[C]=((l/1e3|8)<<10)+(l%1e3/2.5|0);for(const[C,l]of Object.entries(s.demonData)){const D="Shin Megami Tensei IMAGINE"!==s.appTitle?l.skills.reduce((O,t,p)=>(t&&(O[t.replace("*","")]=p-8),O),{}):l.skills,i=k?e(l.stats,l.lvl):F?a(l.stats,l.race):Math.pow(Math.floor(l.lvl),3);n[C]={name:C,price:i,race:l.race,lvl:l.lvl,currLvl:l.lvl,fusion:"normal",inherits:s.inheritSkills?s.skillElems.indexOf(l.inherit):24,drop:l.drop||"-",stats:l.stats.slice(0,h),atks:l.atks||[],resists:l.resists.substring(0,m).split("").map(O=>f[O]),align:l.align||s.alignData.races[l.race],skills:D}}for(const[C,l]of Object.entries(s.skillData)){const D="recovery"===l.element?" Rec ":" Dmg ";o[C]={name:C,element:l.element,power:l.power||0,cost:l.cost||0,rank:(l.enemy?99:0)+(1023&l.cost||0)/100,effect:(l.power?l.power.toString()+D:" ")+(l.effect||""),target:l.target,level:0,learnedBy:[]}}for(const C of Object.values(n).sort((l,D)=>l.lvl-D.lvl))for(const[l,D]of Object.entries(C.skills))o[l].learnedBy.push({demon:C.name,level:D});if(s.specialRecipes)for(const[C,l]of Object.entries(s.specialRecipes))n[C].fusion=l.fusion||"special",l.prereq&&(n[C].prereq=l.prereq),l.special&&(r[C]=l.special),l.pairs&&(c[C]=l.pairs.map(D=>{const[i,O]=D.split(" x ");return{name1:i,name2:O}}));this.demons=n,this.skills=o,this.elementDemons=s.elementTable.elems,this.specialRecipes=r,this.pairRecipes=c}updateDerivedData(s){const n={},o={},r={};for(const c of s.races)n[c]={},o[c]=[],r[c]=[];for(const[c,h]of Object.entries(this.demons))n[h.race][h.lvl]=c,o[h.race].push(h.lvl),"normal"===h.fusion&&r[h.race].push(h.lvl);for(const[c,h]of Object.entries(s.species)){const m="3"+c;n[c]={},o[c]=[],r[c]=[],n[m]={},o[m]=[],r[m]=[];for(let f=h.length;f>0;f--){const k=h[f-1];let F=h.length-f;"d"==s.alignData.races[k].charAt(0)?F-=400:(Object.assign(n[c],n[k]),o[c]=o[c].concat(o[k]),r[c]=r[c].concat(r[k]));for(const[C,l]of Object.entries(n[k])){const D=(100*parseInt(C)+F)/100;n[m][D]=l.toString(),o[m].push(D),r[m].push(D)}}}for(const c of Object.keys(o))o[c].sort((h,m)=>h-m),r[c].sort((h,m)=>h-m);this._allDemons=Object.values(this.demons),this._allSkills=Object.values(this.skills),this.invertedDemons=n,this.allIngredients=o,this.allResults=r}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return Object.keys(this.specialRecipes).map(s=>this.demons[s])}getDemon(s){return this.demons[s]}getSkill(s){return this.skills[s]}getSkills(s){const n=s.map(o=>this.skills[o]);return n.sort((o,r)=>1e4*(this.compConfig.elemOrder[o.element]-this.compConfig.elemOrder[r.element])+o.rank-r.rank),n}getIngredientDemonLvls(s){return this.allIngredients[s]||[]}getResultDemonLvls(s){return this.allResults[s]||[]}getSpecialNameEntries(s){return this.specialRecipes[s]||[]}getSpecialNamePairs(s){return this.pairRecipes[s]||[]}reverseLookupDemon(s,n){return this.invertedDemons[s][n]}reverseLookupSpecial(s){return[]}isElementDemon(s){return-1!==this.elementDemons.indexOf(s)}updateFusionSettings(s){}}var y=g(8063);class $ extends y.p{constructor(s,n){super(),this.elementDemons=[],this.lvlModifier=1.5,this.hasDarkTable=!1,this.initCharts(s,n)}initCharts(s,n){this.raceOrder=s.raceOrder,this.alignments=s.alignData.races,this.speciesLookup=s.speciesLookup,this.elementDemons=n?s.tripleElementTable.elems:s.elementTable.elems;const o=n?s.tripleTable.races:s.normalTable.races,r=n?s.tripleTable.table:s.normalTable.table,c=y.p.loadFusionTableJson(o,r),h=y.p.loadFissionTableJson(o,[],r);if(this.lvlModifier=n?s.tripleLvlModifier:s.normalLvlModifier,s.darkTable){this.hasDarkTable=!0;const m=n&&s.tripleDarkTable?s.tripleDarkTable.races:s.darkTable.races,f=n&&s.tripleDarkTable?s.tripleDarkTable.table:s.darkTable.table,k=y.p.loadFusionTableJson(m,f),F=y.p.loadFissionTableJson(m,[],f);this.races=o.concat(m.filter(C=>this.getLightDark(C)<0)),this.fusionChart=y.p.mergeFusionTables(c,k),this.fissionChart=y.p.mergeFissionTables(h,F)}else this.races=o,this.fusionChart=c,this.fissionChart=h;if(s.darknessRecipes)for(const[m,f]of Object.entries(s.darknessRecipes)){const k=f;this.fusionChart[m]={},this.fusionChart[m][m]=k,this.fissionChart[k]={},this.fissionChart[k][m]=[m],this.races.includes(m)||this.races.push(m)}if(s.useSpeciesFusion)for(const m of this.races)if(this.fissionChart[m]){const f=this.speciesLookup[m];this.fissionChart[m]["2"+f]=["2"+f]}this.elementChart=y.p.loadElementTableJson(s.elementTable.races,this.elementDemons,n?s.tripleElementTable.table:s.elementTable.table)}getLightDark(s){return"l"==this.alignments[s].charAt(0)?1:"d"==this.alignments[s].charAt(0)?-1:"D"==this.alignments[s].charAt(0)?-2:0}getRaceFissions(s){return this.fissionChart[s]||{}}getRaceFusions(s){return this.fusionChart[s]||{}}getRaceFusion(s,n){return this.getRaceFusions(s)[n]||""}}class G{constructor(s){this.lvlModifier=7.5,this.elementDemons=[],this.initCharts(s)}initCharts(s){const n=s.tripleTable.races,o=s.tripleTable.table,r=n.map(h=>"3"+h);this.raceOrder=s.raceOrder,this.speciesLookup=s.speciesLookup,this.fissionChart={},this.fusionChart={},this.races=n;for(const h of r)this.fusionChart[h]={};let c=-1;for(let h=0;h<r.length;h++)for(let m=h+1;m<r.length;m++){const f=r[h],k=r[m],F=f+"|"+k;c+=1,this.fissionChart[F]={},this.fusionChart[F]={},this.fissionChart[F][f]=[k],this.fusionChart[f][k]=F,this.fusionChart[k][f]=F;for(let C=0;C<r.length;C++){const l=r[C],D=o[c][C];this.fissionChart[D]||(this.fissionChart[D]={}),this.fissionChart[D][F]=[l],this.fusionChart[F][l]=D,this.fusionChart[l][F]=D}}}getRaceFissions(s){return this.fissionChart[s]||{}}getRaceFusions(s){const n=this.speciesLookup[s];return n?this.fusionChart["3"+n]||{}:this.fusionChart[s]||{}}getRaceFusion(s,n){return this.getRaceFusions(s)[n]||""}getLightDark(s){return 0}getElemModifiers(s){return{}}getElemFusions(s){return{}}isConvertedRace(s){return!1}}var Y=g(7396),X=g(8939),U=g(6947);const J={Deity:2,Dragon:1,Snake:1,Divine:1,Kishin:1};function w(T,s,n){const o=[],{race:r,lvl:c}=s.getDemon(T),m=s.getResultDemonLvls(r).indexOf(c);if(-1===m)return[];for(const[f,k]of Object.entries(n.getRaceFissions(r))){const F=J[f]||0,C=s.getIngredientDemonLvls(f);for(let l=0;l<C.length;l++)for(const D of k){const i=J[D]||0,O=s.getIngredientDemonLvls(D);for(let t=0;t<O.length;t++)Math.floor(l/2+t/2)==m&&(Math.floor((l+F+t+i)/2),o.push({name1:s.reverseLookupDemon(f,C[l]),name2:s.reverseLookupDemon(D,O[t])}))}}return o}function j(T,s,n){const o=[],{race:r,lvl:c}=s.getDemon(T),h=J[r]||0,f=s.getIngredientDemonLvls(r).indexOf(c);if(-1===f)return[];for(const[k,F]of Object.entries(n.getRaceFusions(r))){const C=s.getResultDemonLvls(F),l=J[k]||0,D=s.getIngredientDemonLvls(k);for(let i=0;i<D.length;i++){const O=Math.floor((f+h+i+l)/2);O<C.length&&o.push({name1:s.reverseLookupDemon(k,D[i]),name2:s.reverseLookupDemon(F,C[O])})}}return o}var v=g(7178),R=g(6208),b=g(2338);const L=["Deity","Megami","Fury","Lady"],P=["Vile","Tyrant","Reaper"],x=["Entity","Zealot"];function B(T,s,n){const o=[],{race:r,lvl:c}=s.getDemon(T),h=2*(n.lvlModifier-3),m=s.getResultDemonLvls(r),f=m.indexOf(c);if(-1===x.indexOf(r)||-1===f)return o;const k=m[f-1]?2*m[f-1]-h:0,F=m[f+1]?2*c-h:200;for(const C of L)for(const l of s.getIngredientDemonLvls(C)){const D=s.reverseLookupDemon(C,l),i=k-l,O=F-l;for(const t of P)for(const p of s.getIngredientDemonLvls(t)){const d=s.reverseLookupDemon(t,p);i<p&&p<=O&&o.push({name1:D,name2:d})}}return o}function z(T,s,n){const o=[],{race:r,lvl:c}=s.getDemon(T),h=3*(n.tripleChart.lvlModifier-1),m=s.getResultDemonLvls(r),f=m.indexOf(c);if(-1===x.indexOf(r)||-1===f)return o;const k=m[f-1]?3*m[f-1]-h:0,F=3*c-h;for(const C of L)for(const l of s.getIngredientDemonLvls(C)){const D=s.reverseLookupDemon(C,l),i=k-l,O=F-l;for(const t of P)for(const p of s.getIngredientDemonLvls(t)){const d=s.reverseLookupDemon(t,p),I=i-p,K=O-p;for(const V of L)for(const Q of s.getIngredientDemonLvls(V)){const ee=s.reverseLookupDemon(V,Q);I<Q&&Q<=K&&D.localeCompare(ee)<0&&o.push({name1:D,name2:d,name3:ee})}for(const V of P)for(const Q of s.getIngredientDemonLvls(V)){const ee=s.reverseLookupDemon(V,Q);I<Q&&Q<=K&&d.localeCompare(ee)<0&&o.push({name1:D,name2:d,name3:ee})}}}return o}var A=g(3357);function Z(T,s,n){const{normalChart:o,tripleChart:r}=n,{raceOrder:c}=o,h=[];for(const m of Object.keys(r.getRaceFissions(T)))for(const f of s.getIngredientDemonLvls(m)){const k=s.reverseLookupDemon(m,f);for(const[F,C]of Object.entries(o.getRaceFissions(m)))for(const l of s.getIngredientDemonLvls(F))if(f>l||f===l&&c[m]<c[F]){const D=s.reverseLookupDemon(F,l);for(const i of C)for(const O of s.getIngredientDemonLvls(i))if(f>O||f===O&&c[m]<c[i]){const t=s.reverseLookupDemon(i,O);h.push({name1:k,name2:D,name3:t})}}}return h}function q(T,s,n){const{tripleChart:o}=n,r=[];for(const c of Object.keys(o.getRaceFissions(T))){const h=s.getIngredientDemonLvls(c);for(let m=0;m<h.length;m++){const f=s.reverseLookupDemon(c,h[m]);for(let k=m+1;k<h.length;k++){const F=s.reverseLookupDemon(c,h[k]);for(let C=k+1;C<h.length;C++){const l=s.reverseLookupDemon(c,h[C]);r.push({name1:f,name2:F,name3:l})}}}}return r}var H=g(7101);function E(T,s,n){const o=n.tripleChart.elementDemons.filter(c=>c.indexOf(T)>-1);let r=[];for(const c of o){const h=c.replace(T,"").replace(" x ",""),m=(0,H.Dy)(c,s,n.tripleChart).concat((0,H.sk)(c,s,n.tripleChart));r=r.concat(m.map(f=>({name1:h,name2:f.name1,name3:f.name2})))}return r}var _=g(1080),M=g(2598);let S=(()=>{class T{constructor(n){this.fusionCalculator=U.nv,this.fissionCalculator=U.ov,this.triFusionCalculator=new X.$([_.LW,_.FE],[]),this.triFissionCalculator=new X.$([A.Hr],[]),this.compConfig=n,this.appName=n.appTitle+" Fusion Calculator",this.compendium=new N.t(new u(n)).asObservable();const o=new $(n);let r,c;n.useSpeciesFusion?(r=new G(n),c=r):(r=o,c=new $(n,!0)),this.fusionChart=new N.t(new $(n)).asObservable(),this.squareChart=new N.t({normalChart:r,tripleChart:c,raceOrder:n.raceOrder}).asObservable(),n.darknessRecipes&&(this.fusionCalculator=U._J,this.fissionCalculator=U.ty),n.tripleElementTable&&(this.triFissionCalculator=new X.$([A.Hr,A.XN],[])),n.appCssClasses.includes("dssh")&&(this.fissionCalculator=new Y.s([v.Hr,v.rj,B],[b.X]),this.triFusionCalculator=new X.$([_.LW,_.FE,_.Hy,_.q6],[E]),this.triFissionCalculator=new X.$([A.Hr,A.XN,z],[Z,q])),(n.appCssClasses.includes("smt1")||n.appCssClasses.includes("smt2"))&&(this.fissionCalculator=new Y.s([v.Hr,v.Hg,R.i,v.rj],[b.X])),n.appCssClasses.includes("mjn1")&&(this.fissionCalculator=new Y.s([w],[]),this.fusionCalculator=new Y.s([j],[]))}updateFusionSettings(n){return{}}static{this.\u0275fac=function(o){return new(o||T)(M.KVO(U.HI))}}static{this.\u0275prov=M.jDH({token:T,factory:T.\u0275fac})}}return T})()},1636:(se,W,g)=>{g.d(W,{d:()=>$});var N=g(177),e=g(3887),a=g(9447),u=g(1151),y=g(2598);let $=(()=>{class G{static forRoot(){return{ngModule:G}}static{this.\u0275fac=function(U){return new(U||G)}}static{this.\u0275mod=y.$C({type:G})}static{this.\u0275inj=y.G2t({imports:[N.MD,e.G,a.$,u.S]})}}return G})()}}]);