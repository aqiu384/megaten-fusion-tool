"use strict";(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[636],{3679:(Q,Y,m)=>{m.d(Y,{C:()=>k});var P=m(1090),e=m(2598),n=m(177),l=m(4207);function U(u,b){if(1&u&&(e.j41(0,"h2"),e.EFF(1),e.k0s()),2&u){const D=e.XpG();e.R7$(1),e.JRh(D.title)}}function y(u,b){if(1&u&&(e.j41(0,"th"),e.EFF(1),e.nI1(2,"translateComp"),e.k0s()),2&u){const D=e.XpG();e.R7$(1),e.JRh(e.i5U(2,1,D.msgs.Price,D.lang))}}function M(u,b){if(1&u&&(e.j41(0,"th"),e.EFF(1),e.k0s()),2&u){const D=b.$implicit;e.R7$(1),e.JRh(D)}}function I(u,b){1&u&&(e.j41(0,"th"),e.EFF(1,"Inherits"),e.k0s())}function G(u,b){if(1&u&&(e.j41(0,"th"),e.EFF(1),e.k0s()),2&u){const D=b.$implicit;e.R7$(1),e.JRh(D)}}function B(u,b){if(1&u&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&u){const D=e.XpG();e.R7$(1),e.JRh(D.price)}}function X(u,b){if(1&u&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&u){const D=b.$implicit;e.R7$(1),e.JRh(D)}}function N(u,b){if(1&u&&(e.j41(0,"td")(1,"div"),e.EFF(2),e.k0s()()),2&u){const D=e.XpG();e.R7$(1),e.ZvI("element-icon i",D.inherits,""),e.R7$(1),e.JRh(D.inherits)}}const T=["*"];let k=(()=>{class u{constructor(){this.title="Demon Entry",this.statHeaders=[],this.stats=[],this.fusionHeaders=[],this.price=0,this.lang="en",this.msgs=P.Cj}static{this.\u0275fac=function(j){return new(j||u)}}static{this.\u0275cmp=e.VBU({type:u,selectors:[["app-demon-stats"]],inputs:{title:"title",statHeaders:"statHeaders",stats:"stats",fusionHeaders:"fusionHeaders",inherits:"inherits",price:"price",lang:"lang"},ngContentSelectors:T,decls:20,vars:13,consts:[[4,"ngIf"],[1,"entry-table"],[1,"title"],[4,"ngFor","ngForOf"]],template:function(j,O){1&j&&(e.NAR(),e.qex(0),e.DNE(1,U,2,1,"h2",0),e.j41(2,"table",1)(3,"thead")(4,"tr")(5,"th",2),e.EFF(6),e.nI1(7,"translateComp"),e.k0s()(),e.j41(8,"tr"),e.DNE(9,y,3,4,"th",0),e.DNE(10,M,2,1,"th",3),e.DNE(11,I,2,0,"th",0),e.DNE(12,G,2,1,"th",3),e.k0s()(),e.j41(13,"tbody")(14,"tr"),e.DNE(15,B,2,1,"td",0),e.DNE(16,X,2,1,"td",3),e.DNE(17,N,3,4,"td",0),e.SdG(18),e.k0s()()(),e.eu8(19),e.bVm()),2&j&&(e.R7$(1),e.Y8G("ngIf",O.title.includes("Lvl")),e.R7$(4),e.BMQ("colSpan",O.stats.length+O.fusionHeaders.length+(O.inherits?1:0)+(O.price?1:0)),e.R7$(1),e.SpI(" ",O.title.includes("Lvl")?e.i5U(7,10,O.msgs.Stats,O.lang):O.title," "),e.R7$(3),e.Y8G("ngIf",O.price),e.R7$(1),e.Y8G("ngForOf",O.statHeaders),e.R7$(1),e.Y8G("ngIf",O.inherits),e.R7$(1),e.Y8G("ngForOf",O.fusionHeaders),e.R7$(3),e.Y8G("ngIf",O.price),e.R7$(1),e.Y8G("ngForOf",O.stats),e.R7$(1),e.Y8G("ngIf",O.inherits))},dependencies:[n.Sq,n.bT,l.uz],encapsulation:2,changeDetection:0})}}return u})()},9023:(Q,Y,m)=>{m.d(Y,{q:()=>N});var P=m(2755),e=m(1090),n=m(2598),l=m(345),U=m(8935),y=m(177);function M(T,k){if(1&T&&(n.j41(0,"th"),n.EFF(1),n.k0s()),2&T){const u=k.$implicit,b=n.XpG();n.R7$(1),n.JRh(u.slice(0,b.nameCut))}}function I(T,k){if(1&T&&(n.j41(0,"td",4),n.EFF(1),n.k0s()),2&T){const u=k.$implicit,b=n.XpG(2);n.Y8G("ngClass",u.slice(0,4)),n.R7$(1),n.JRh(u.slice(4,b.nameCut+4))}}function G(T,k){if(1&T&&(n.j41(0,"tr")(1,"th"),n.EFF(2),n.k0s(),n.DNE(3,I,2,2,"td",3),n.j41(4,"th"),n.EFF(5),n.k0s()()),2&T){const u=k.$implicit;n.R7$(2),n.JRh(u[0]),n.R7$(1),n.Y8G("ngForOf",u.slice(1,u.length-1)),n.R7$(2),n.JRh(u[u.length-1])}}function B(T,k){if(1&T&&(n.j41(0,"th"),n.EFF(1),n.k0s()),2&T){const u=k.$implicit,b=n.XpG();n.R7$(1),n.JRh(u.slice(0,b.nameCut))}}function X(T,k){if(1&T&&(n.j41(0,"tr")(1,"th",0),n.EFF(2),n.k0s()()),2&T){const u=n.XpG();n.R7$(1),n.BMQ("colspan",u.table[0].length),n.R7$(1),n.Lme("",u.appName," ",u.tripTitle,"")}}class N{static{this.RESULT_COLORS=Object.entries({oran:["-2","Erthys","Gnome","Saki","Saki Mitama","Random","\u30a2\u30fc\u30b7\u30fc\u30ba","\u30ce\u30fc\u30e0","\u30b5\u30ad\u30df\u30bf\u30de"],redd:["-1","Flaemis","Salamander","Ara ","Ara Mitama","Fiend","\u30d5\u30ec\u30a4\u30df\u30fc\u30ba","\u30b5\u30e9\u30de\u30f3\u30c0\u30fc","\u30a2\u30e9\u30df\u30bf\u30de"],gree:["1","Aeros","Sylph","Kusi","Kusi Mitama","UMA","\u30a8\u30a2\u30ed\u30b9","\u30b7\u30eb\u30ad\u30fc","\u30af\u30b7\u30df\u30bf\u30de"],blue:["2","Aquans","Undine","Nigi","Nigi Mitama","Enigma","\u30a2\u30af\u30a2\u30f3\u30ba","\u30a6\u30f3\u30c7\u30a3\u30fc\u30cd","\u30cb\u30ae\u30df\u30bf\u30de"]})}constructor(k,u){this.title2=k,this.route=u,this.normTitle="Normal Fusions",this.tripTitle="",this.isPersona=!1,this.filterDarks=!0,this.lang="en",this.msgs=e.qh,this.subscriptions=[],this.table=[],this.nameCut=4}ngOnInit(){this.subscriptions.push(this.route.parent.data.subscribe(k=>{this.appName=k.appName||"Shin Megami Tensei",this.nameCut=parseInt((0,P.oO)(this.msgs.NameCut,k.lang)),this.title2.setTitle((0,P.oO)(this.msgs.AppTitle,k.lang).replace("$APP",this.appName))}))}ngOnChanges(){this.normChart&&this.fillFusionChart()}ngOnDestroy(){for(const k of this.subscriptions)k.unsubscribe()}fillFusionChart(){const k="noneNone",b=N.RESULT_COLORS.reduce((t,[i,p])=>p.reduce((c,h)=>(c[h]=i,c),t),{}),D=this.normChart.elementDemons;let j=[],O=this.normChart.races,A=[];this.filterDarks&&(j=this.normChart.races.filter(t=>this.normChart.getLightDark(t)>0),O=this.normChart.races.filter(t=>0===this.normChart.getLightDark(t)),A=this.normChart.races.filter(t=>-1===this.normChart.getLightDark(t)),0===A.length&&j.length>0&&(j=this.normChart.races.filter(t=>this.normChart.getLightDark(t)>-1),O=[],A=this.normChart.races.filter(t=>this.normChart.getLightDark(t)<-1)));const V=j.length-A.length,S=j.concat(O,D),K=A.length?A.concat(Array(S.length-A.length).fill("")):S,z=this.mitaTable?S:j.concat(O,Array(D.length).fill("")),F=this.mitaTable||A.length?Array(V).fill("").concat(A,O,D):S;this.table=[[""].concat(S,[""])];for(let t=0;t<F.length;t++){const i=Array(S.length+2).fill("empt-"),p=F[t],c=z[t],h=-1!==D.indexOf(p),C=-1!==D.indexOf(c);this.table.push(i),i[0]=p,i[i.length-1]=c;for(let r=t;r<S.length;r++){const d=S[r],g=-1!==D.indexOf(d);if(g&&C){const o=D.indexOf(c),R=D.indexOf(d),_=this.mitaTable[R][o].replace("-","");i[r+1]=_?(b[_]||"norm")+_:k}else if(g&&c){const o=this.normChart.getElemFusions(d)[c];i[r+1]=o?(b[o]||"rank")+(o>0?"+":"")+o.toString():k}else if(d&&c){const o=this.isPersona&&d===c?d:this.normChart.getRaceFusion(d,c);i[r+1]=o?(b[o]||(d===c?"elem":"norm"))+o:k}}if(this.tripChart)for(let r=0;r<=t-V;r++){const d=K[r];if(d&&h){const g=this.tripChart.getElemFusions(p)[d];i[r+1]=g?(b[g]||"rank")+(g>0?"+":"")+g.toString():k}else if(d&&p){const g=this.tripChart.getRaceFusion(d,p);i[r+1]=g?(b[g]||(d===p?"elem":"trip"))+g:k}}if(-1!==p.indexOf(" x ")){const[r,d]=p.split(" x "),g=r.slice(0,3)+"x"+d.slice(0,3);i[0]=g,i[i.length-1]=g}else if(-1!==p.indexOf(" ")){const r=p.split(" ")[0];i[0]=r,i[i.length-1]=r}}for(let t=0;t<this.table[0].length;t++){const i=this.table[0][t];if(-1!==i.indexOf(" x ")){const[p,c]=i.split(" x ");this.table[0][t]=p.slice(0,2)+c.slice(0,2)}}this.table.push([""].concat(K,[""]))}static{this.\u0275fac=function(u){return new(u||N)(n.rXU(l.hE),n.rXU(U.nX))}}static{this.\u0275cmp=n.VBU({type:N,selectors:[["app-fusion-chart"]],inputs:{normChart:"normChart",tripChart:"tripChart",mitaTable:"mitaTable",normTitle:"normTitle",tripTitle:"tripTitle",isPersona:"isPersona",filterDarks:"filterDarks",lang:"lang",counter:"counter"},features:[n.OA$],decls:12,vars:7,consts:[[1,"title"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(u,b){1&u&&(n.j41(0,"table")(1,"tbody")(2,"tr")(3,"th",0),n.EFF(4),n.k0s()(),n.j41(5,"tr"),n.DNE(6,M,2,1,"th",1),n.k0s(),n.DNE(7,G,6,3,"tr",1),n.j41(8,"tr"),n.DNE(9,B,2,1,"th",1),n.k0s(),n.DNE(10,X,3,3,"tr",2),n.k0s(),n.nrm(11,"tbody"),n.k0s()),2&u&&(n.R7$(3),n.BMQ("colspan",b.table[0].length),n.R7$(1),n.Lme("",b.appName," ",b.normTitle,""),n.R7$(2),n.Y8G("ngForOf",b.table[0]),n.R7$(1),n.Y8G("ngForOf",b.table.slice(1,b.table.length-1)),n.R7$(2),n.Y8G("ngForOf",b.table[b.table.length-1]),n.R7$(1),n.Y8G("ngIf",b.tripTitle))},dependencies:[y.YU,y.Sq,y.bT],styles:["table[_ngcontent-%COMP%]{width:auto;margin:0 auto;white-space:nowrap}td.elem[_ngcontent-%COMP%]{color:#0f0}td.trip[_ngcontent-%COMP%]{color:#d3d3d3}td.oran[_ngcontent-%COMP%]{color:orange}td.redd[_ngcontent-%COMP%]{color:red}td.gree[_ngcontent-%COMP%]{color:#0f0}td.blue[_ngcontent-%COMP%]{color:#0ff}td.none[_ngcontent-%COMP%]{color:transparent}td.empt[_ngcontent-%COMP%]{background-color:transparent;color:transparent}"],changeDetection:0})}}},6122:(Q,Y,m)=>{m.d(Y,{L:()=>T});var P=m(3885),e=m(9108),n=m(1090),l=m(2598),U=m(177),y=m(8935),M=m(4207);const I=function(){return{exact:!0}};function G(k,u){if(1&k&&(l.j41(0,"th",4)(1,"a",5),l.EFF(2),l.nI1(3,"translateComp"),l.k0s()()),2&k){const b=u.$implicit,D=l.XpG();l.xc7("width",100/D.fusionOptions.length,"%"),l.Y8G("routerLink",b.link)("routerLinkActiveOptions",l.lJ4(9,I)),l.R7$(1),l.Y8G("routerLink",b.link),l.R7$(1),l.JRh(l.i5U(3,6,b.title,D.lang))}}function B(k,u){if(1&k&&(l.j41(0,"tr")(1,"th",6),l.EFF(2),l.nI1(3,"translateComp"),l.k0s()()),2&k){const b=l.XpG();l.R7$(1),l.BMQ("colspan",b.fusionOptions.length),l.R7$(1),l.SpI(" ",l.i5U(3,2,b.msgs.DlcExcluded,b.lang)," ")}}function X(k,u){if(1&k&&(l.j41(0,"tr")(1,"th",6),l.SdG(2),l.k0s()()),2&k){const b=l.XpG();l.R7$(1),l.BMQ("colspan",b.fusionOptions.length)}}const N=["*"];let T=(()=>{class k{constructor(){this.hasTripleFusion=!1,this.showFusionAlert=!1,this.excludedDlc=!1,this.lang="en",this.msgs=n.Lq,this.fusionOptions=[{title:this.msgs.NormalFissions,link:"fissions"},{title:this.msgs.NormalFusions,link:"fusions"}]}ngOnInit(){this.hasTripleFusion&&(this.fusionOptions=[{title:this.msgs.DoubleFissions,link:"fissions"},{title:this.msgs.TripleFissions,link:"fissions/triple"},{title:this.msgs.TripleFusions,link:"fusions/triple"},{title:this.msgs.DoubleFusions,link:"fusions"}])}ngOnChanges(){setTimeout(()=>this.stickyTable.nextEdges())}static{this.\u0275fac=function(D){return new(D||k)}}static{this.\u0275cmp=l.VBU({type:k,selectors:[["app-smt-fusions"]],viewQuery:function(D,j){if(1&D&&l.GBs(e.a,5),2&D){let O;l.mGM(O=l.lsd())&&(j.stickyTable=O.first)}},inputs:{hasTripleFusion:"hasTripleFusion",showFusionAlert:"showFusionAlert",excludedDlc:"excludedDlc",lang:"lang"},features:[l.Jv_([P.P]),l.OA$],ngContentSelectors:N,decls:11,vars:3,consts:[["appPositionSticky","",1,"list-table"],["stickyTable",""],["class","nav","routerLinkActive","active",3,"routerLink","width","routerLinkActiveOptions",4,"ngFor","ngForOf"],[4,"ngIf"],["routerLinkActive","active",1,"nav",3,"routerLink","routerLinkActiveOptions"],[3,"routerLink"],[1,"title"]],template:function(D,j){1&D&&(l.NAR(),l.j41(0,"div")(1,"table",0,1)(3,"thead")(4,"tr"),l.DNE(5,G,4,10,"th",2),l.k0s(),l.DNE(6,B,4,5,"tr",3),l.nrm(7,"tr"),l.DNE(8,X,3,1,"tr",3),l.nrm(9,"tr"),l.k0s()(),l.nrm(10,"router-outlet"),l.k0s()),2&D&&(l.R7$(5),l.Y8G("ngForOf",j.fusionOptions),l.R7$(1),l.Y8G("ngIf",j.excludedDlc),l.R7$(2),l.Y8G("ngIf",j.showFusionAlert))},dependencies:[U.Sq,U.bT,y.n3,y.Wk,y.wQ,e.a,M.uz],encapsulation:2,changeDetection:0})}}return k})()},1151:(Q,Y,m)=>{m.d(Y,{S:()=>W});var P=m(8935),e=m(2598),n=m(6170),l=m(177),U=m(5583);let y=(()=>{class a{constructor(s){this.appCssClasses=["smtnes","smt1"],this.appCssClasses=s.compConfig.appCssClasses}static{this.\u0275fac=function(f){return new(f||a)(e.rXU(n.i))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-smt1-compendium"]],decls:1,vars:2,consts:[[3,"ngClass","hasSettings"]],template:function(f,v){1&f&&e.nrm(0,"app-demon-compendium",0),2&f&&e.Y8G("ngClass",v.appCssClasses)("hasSettings",!1)},dependencies:[l.YU,U.f],styles:[".devilsum div.element-icon,.smtnes div.element-icon{height:12px;background-size:12px;background-repeat:no-repeat;background-position:center;color:transparent}.smtnes div.element-icon.sword{background-image:url(/assets/images/smt4f/sword.png)}.smtnes div.element-icon.gun{background-image:url(/assets/images/smtsj/gun.png)}.smtnes div.element-icon.fire{background-image:url(/assets/images/smtsj/fir.png)}.smtnes div.element-icon.i4{background-image:url(/assets/images/smtsj/fir.png)}.smtnes div.element-icon.ice{background-image:url(/assets/images/smtsj/ice.png)}.smtnes div.element-icon.i5{background-image:url(/assets/images/smtsj/ice.png)}.smtnes div.element-icon.elec{background-image:url(/assets/images/smtsj/ele.png)}.smtnes div.element-icon.i6{background-image:url(/assets/images/smtsj/ele.png)}.smtnes div.element-icon.force{background-image:url(/assets/images/smtsj/win.png)}.smtnes div.element-icon.i7{background-image:url(/assets/images/smtsj/win.png)}.smtnes div.element-icon.nerve{background-image:url(/assets/images/smt4f/panic.png)}.smtnes div.element-icon.almighty{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.i13{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.expel{background-image:url(/assets/images/smtsj/exp.png)}.smtnes div.element-icon.i8{background-image:url(/assets/images/smtsj/exp.png)}.smtnes div.element-icon.death{background-image:url(/assets/images/smtsj/cur.png)}.smtnes div.element-icon.i9{background-image:url(/assets/images/smtsj/cur.png)}.smtnes div.element-icon.curse{background-image:url(/assets/images/smt4f/poison.png)}.smtnes div.element-icon.bind{background-image:url(/assets/images/smt4f/bind.png)}.smtnes div.element-icon.rush{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.punch{background-image:url(/assets/images/smt4f/sword.png)}.smtnes div.element-icon.kick{background-image:url(/assets/images/smtsj/gun.png)}.smtnes div.element-icon.flying{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.energy{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.recovery{background-image:url(/assets/images/smtsj/rec.png)}.smtnes div.element-icon.support{background-image:url(/assets/images/smtsj/sup.png)}.smtnes div.element-icon.special{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.attack{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.tech{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.slash{background-image:url(/assets/images/smt4f/sword.png)}.smtnes div.element-icon.charge{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.blunt{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.handgun{background-image:url(/assets/images/smtsj/gun.png)}.smtnes div.element-icon.penetrate{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.spread{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.mystic{background-image:url(/assets/images/smt4f/poison.png)}.smtnes div.element-icon.mind{background-image:url(/assets/images/smt4f/bind.png)}.smtnes div.element-icon.suicide{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.passive{background-image:url(/assets/images/smtsj/pas.png)}.smtnes div.element-icon.defend{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.phys{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.gro{background-image:url(/assets/images/smt4f/sword.png)}.smtnes div.element-icon.air{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.fir{background-image:url(/assets/images/smtsj/fir.png)}.smtnes div.element-icon.ele{background-image:url(/assets/images/smtsj/ele.png)}.smtnes div.element-icon.for{background-image:url(/assets/images/smtsj/win.png)}.smtnes div.element-icon.gig{background-image:url(/assets/images/smt4f/bind.png)}.smtnes div.element-icon.alm{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.lig{background-image:url(/assets/images/smtsj/exp.png)}.smtnes div.element-icon.dar{background-image:url(/assets/images/smtsj/cur.png)}.smtnes div.element-icon.phy{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.ail{background-image:url(/assets/images/smtsj/ail.png)}.smtnes div.element-icon.rec{background-image:url(/assets/images/smtsj/rec.png)}.smtnes div.element-icon.sup{background-image:url(/assets/images/smtsj/sup.png)}.smtnes div.element-icon.psy{background-image:url(/assets/images/smt4f/panic.png)}.smtnes div.element-icon.spear{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.thrown{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.ailment{background-image:url(/assets/images/smtsj/ail.png)}.smtnes div.element-icon.quad{background-image:url(/assets/images/smt4f/curse.png)}.smtnes div.element-icon.elem{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.none{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.strike{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.i0{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.skill{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.temp{background-image:url(/assets/images/smt4f/smirk.png)}.smtnes div.element-icon.i17{background-image:url(/assets/images/smt4f/smirk.png)}.smtnes div.element-icon.dark{background-image:url(/assets/images/smt4f/curse.png)}.smtnes div.element-icon.i18{background-image:url(/assets/images/smt4f/curse.png)}.smtnes div.element-icon.witch{background-image:url(/assets/images/smtsj/ail.png)}.smtnes div.element-icon.i19{background-image:url(/assets/images/smtsj/ail.png)}.smtnes div.element-icon.rea{background-image:url(/assets/images/smtsj/rec.png)}.smtnes div.element-icon.i20{background-image:url(/assets/images/smtsj/rec.png)}.smtnes div.element-icon.reb{background-image:url(/assets/images/smtsj/sup.png)}.smtnes div.element-icon.i21{background-image:url(/assets/images/smtsj/sup.png)}.smtnes div.element-icon.element{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.hero{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.i22{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.i23{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.i24{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.starter{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.autorec{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.phase{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.explore{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.area{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.plugin{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.self{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.universe{background-image:url(/assets/images/smtsj/spe.png)}.smtnes td.align.ll,.smtnes td.align.nl,.smtnes td.align.dl{color:#0ff}.smtnes td.align.lc,.smtnes td.align.nc,.smtnes td.align.dc{color:tomato}.smtnes td.align.el{color:#0f0}.smtnes td.align.ec{color:gold}.smt1 th.title,.smt1 th.nav.active,.smt1 th.nav.active a{background-color:#608341;color:#fff}.smt2 th.title,.smt2 th.nav.active,.smt2 th.nav.active a{background-color:#2f4f4f;color:#fff}.smtif th.title,.smtif th.nav.active,.smtif th.nav.active a{background-color:#8fbc8f;color:#000}.dsum th.title,.dsum th.nav.active,.dsum th.nav.active a{background-color:#4372aa;color:#fff}.dssh th.title,.dssh th.nav.active,.dssh th.nav.active a{background-color:#302878;color:#fff}.mjn2 th.title,.mjn2 th.nav.active,.mjn2 th.nav.active a{background-color:#514f7e;color:#fff}.smt9 th.title,.smt9 th.nav.active,.smt9 th.nav.active a{background-color:#693cbe;color:#fff}.smtim th.title,.smtim th.nav.active,.smtim th.nav.active a{background-color:#009d96;color:#fff}\n"],encapsulation:2,changeDetection:0})}}return a})();var M=m(9404),I=m(345),G=m(9629);let B=(()=>{class a extends M.M{constructor(s,f,v){super(s,f,v),this.appName=`List of Demons - ${v.appName}`,this.compConfig=v.compConfig,this.defaultSortFun=(L,w)=>200*(this.compConfig.raceOrder[L.race]-this.compConfig.raceOrder[w.race])+w.lvl-L.lvl}static{this.\u0275fac=function(f){return new(f||a)(e.rXU(I.hE),e.rXU(e.gRc),e.rXU(n.i))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-demon-list-container"]],features:[e.Vt3],decls:2,vars:7,consts:[[3,"raceOrder","statHeaders","resistHeaders","inheritOrder","rowData"]],template:function(f,v){1&f&&(e.nrm(0,"app-smt-demon-list",0),e.nI1(1,"async")),2&f&&e.Y8G("raceOrder",v.compConfig.raceOrder)("statHeaders",v.compConfig.baseStats)("resistHeaders",v.compConfig.resistElems)("inheritOrder",v.compConfig.elemOrder)("rowData",e.bMT(1,5,v.demons))},dependencies:[G.F,l.Jj],encapsulation:2,changeDetection:0})}}return a})();var X=m(9454),N=m(2940);let T=(()=>{class a extends X.E{constructor(s,f,v){super(s,f,v),this.appName=`List of Skills - ${v.appName}`,this.compConfig=v.compConfig,this.defaultSortFun=(L,w)=>1e4*(this.compConfig.elemOrder[L.element]-this.compConfig.elemOrder[w.element])+L.rank-w.rank}static{this.\u0275fac=function(f){return new(f||a)(e.rXU(I.hE),e.rXU(e.gRc),e.rXU(n.i))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-skill-list-container"]],features:[e.Vt3],decls:2,vars:6,consts:[[3,"elemOrder","hasRank","hasTarget","rowData"]],template:function(f,v){1&f&&(e.nrm(0,"app-smt-skill-list",0),e.nI1(1,"async")),2&f&&e.Y8G("elemOrder",v.compConfig.elemOrder)("hasRank",!1)("hasTarget",!0)("rowData",e.bMT(1,4,v.skills))},dependencies:[N.p,l.Jj],encapsulation:2,changeDetection:0})}}return a})();var k=m(9023);function u(a,$){if(1&a&&(e.j41(0,"th"),e.EFF(1),e.k0s()),2&a){const s=$.$implicit;e.R7$(1),e.JRh(s.slice(0,4))}}function b(a,$){if(1&a&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&a){const s=$.$implicit;e.R7$(1),e.JRh(s.slice(0,4))}}function D(a,$){if(1&a&&(e.j41(0,"tr")(1,"th"),e.EFF(2),e.k0s(),e.DNE(3,b,2,1,"td",1),e.j41(4,"th"),e.EFF(5),e.k0s()()),2&a){const s=$.$implicit;e.R7$(2),e.JRh(s[0]),e.R7$(1),e.Y8G("ngForOf",s.slice(1,s.length-1)),e.R7$(2),e.JRh(s[s.length-1])}}function j(a,$){if(1&a&&(e.j41(0,"th"),e.EFF(1),e.k0s()),2&a){const s=$.$implicit;e.R7$(1),e.JRh(s.slice(0,4))}}let O=(()=>{class a{constructor(){this.table=[]}ngOnChanges(){this.fillFusionChart()}fillFusionChart(){this.table=[];const s=this.speciesChart.races,f=[""].concat(s,[""]);this.table.push(f);for(let v=0;v<s.length;v++)for(let L=v+1;L<s.length;L++){const w="3"+s[v]+"|3"+s[L];this.table.push([s[v]].concat(s.map(Z=>this.speciesChart.getRaceFusion("3"+Z,w)),[s[L]]))}this.table.push(f)}static{this.\u0275fac=function(f){return new(f||a)}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-species-triple-chart"]],inputs:{speciesChart:"speciesChart",title:"title"},features:[e.OA$],decls:9,vars:5,consts:[[1,"title"],[4,"ngFor","ngForOf"]],template:function(f,v){1&f&&(e.j41(0,"table")(1,"tr")(2,"th",0),e.EFF(3),e.k0s()(),e.j41(4,"tr"),e.DNE(5,u,2,1,"th",1),e.k0s(),e.DNE(6,D,6,3,"tr",1),e.j41(7,"tr"),e.DNE(8,j,2,1,"th",1),e.k0s()()),2&f&&(e.R7$(2),e.BMQ("colspan",v.table[0].length),e.R7$(1),e.JRh(v.title),e.R7$(2),e.Y8G("ngForOf",v.table[0]),e.R7$(1),e.Y8G("ngForOf",v.table.slice(1,v.table.length-1)),e.R7$(2),e.Y8G("ngForOf",v.table[v.table.length-1]))},dependencies:[l.Sq],styles:["table[_ngcontent-%COMP%]{width:auto;margin:0 auto}td.elem[_ngcontent-%COMP%]{color:#0f0}td.trip[_ngcontent-%COMP%]{color:#d3d3d3}td.ra-2[_ngcontent-%COMP%]{color:orange}td.ra-1[_ngcontent-%COMP%]{color:red}td.ran1[_ngcontent-%COMP%]{color:#0f0}td.ran2[_ngcontent-%COMP%]{color:#0ff}td.None[_ngcontent-%COMP%]{color:#222}td.Sala[_ngcontent-%COMP%], td.Flae[_ngcontent-%COMP%], td.Ara[_ngcontent-%COMP%], td.Fien[_ngcontent-%COMP%]{color:red}td.Undi[_ngcontent-%COMP%], td.Aqua[_ngcontent-%COMP%], td.Nigi[_ngcontent-%COMP%], td.Enig[_ngcontent-%COMP%]{color:#0ff}td.Sylp[_ngcontent-%COMP%], td.Aero[_ngcontent-%COMP%], td.Kusi[_ngcontent-%COMP%], td.UMA[_ngcontent-%COMP%]{color:#0f0}td.Gnom[_ngcontent-%COMP%], td.Erth[_ngcontent-%COMP%], td.Saki[_ngcontent-%COMP%], td.Rand[_ngcontent-%COMP%]{color:orange}td.Empt[_ngcontent-%COMP%]{background-color:#000;color:transparent}"],changeDetection:0})}}return a})();function A(a,$){if(1&a&&(e.qex(0),e.nrm(1,"app-fusion-chart",1)(2,"app-fusion-chart",1),e.bVm()),2&a){const s=e.XpG();e.R7$(1),e.Y8G("normChart",s.normChart)("tripChart",s.normChart)("mitaTable",s.mitamaTable)("normTitle","Light and Neutral Normal Fusions")("tripTitle","Dark Normal Fusions"),e.R7$(1),e.Y8G("normChart",s.tripChart)("tripChart",s.tripChart)("mitaTable",s.tripleMitamaTable)("normTitle","Light and Neutral Triple Fusions")("tripTitle","Dark Triple Fusions")}}function V(a,$){if(1&a&&(e.qex(0),e.nrm(1,"app-fusion-chart",2)(2,"app-species-triple-chart",3),e.bVm()),2&a){const s=e.XpG();e.R7$(1),e.Y8G("normChart",s.fullChart)("mitaTable",s.mitamaTable)("filterDarks",!1)("normTitle","Normal Fusions"),e.R7$(1),e.Y8G("speciesChart",s.tripChart)("title",s.appName+" - Triple Fusions")}}function S(a,$){if(1&a&&(e.qex(0),e.nrm(1,"app-fusion-chart",1)(2,"app-species-triple-chart",3),e.bVm()),2&a){const s=e.XpG();e.R7$(1),e.Y8G("normChart",s.fullChart)("tripChart",s.fullChart)("mitaTable",s.mitamaTable)("normTitle","Light and Neutral Normal Fusions")("tripTitle","Dark Normal Fusions"),e.R7$(1),e.Y8G("speciesChart",s.tripChart)("title",s.appName+" - Triple Fusions")}}let K=(()=>{class a{constructor(s){this.fusionDataService=s,this.subscriptions=[]}ngOnInit(){const s=this.fusionDataService.compConfig;this.appName=s.appTitle,this.mitamaTable=s.mitamaTable,this.tripleMitamaTable=s.tripleMitamaTable,this.hasDarkRanks=s.darknessRecipes,this.fusionDataService.compConfig.useSpeciesFusion&&this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(f=>{this.fullChart=f})),this.subscriptions.push(this.fusionDataService.squareChart.subscribe(f=>{this.normChart=f.normalChart,this.tripChart=f.tripleChart}))}ngOnDestroy(){for(const s of this.subscriptions)s.unsubscribe()}static{this.\u0275fac=function(f){return new(f||a)(e.rXU(n.i))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-fusion-chart-container"]],decls:3,vars:3,consts:[[4,"ngIf"],[3,"normChart","tripChart","mitaTable","normTitle","tripTitle"],[3,"normChart","mitaTable","filterDarks","normTitle"],[3,"speciesChart","title"]],template:function(f,v){1&f&&(e.DNE(0,A,3,10,"ng-container",0),e.DNE(1,V,3,6,"ng-container",0),e.DNE(2,S,3,7,"ng-container",0)),2&f&&(e.Y8G("ngIf",!v.fullChart),e.R7$(1),e.Y8G("ngIf",v.fullChart&&!v.hasDarkRanks),e.R7$(1),e.Y8G("ngIf",v.fullChart&&v.hasDarkRanks))},dependencies:[l.bT,k.q,O],encapsulation:2,changeDetection:0})}}return a})();var z=m(5692),F=m(3679),t=m(2223),i=m(302),p=m(6122),c=m(8696);function h(a,$){if(1&a&&e.nrm(0,"app-demon-stats",8),2&a){const s=e.XpG(2);e.Y8G("title","Attacks")("statHeaders",s.compConfig.baseAtks)("stats",s.demon.atks)}}function C(a,$){if(1&a&&e.nrm(0,"app-demon-skills",5),2&a){const s=e.XpG(2);e.Y8G("title","Inheritable Skills")("hasTarget",!0)("hasLvl",!1)("elemOrder",s.compConfig.elemOrder)("compendium",s.compendium)("skillLevels",s.compConfig.inheritSkills[s.demon.inherits])}}const r=function(){return["Drop"]};function d(a,$){if(1&a&&(e.qex(0),e.j41(1,"app-demon-stats",2)(2,"td"),e.EFF(3),e.k0s()(),e.DNE(4,h,1,3,"app-demon-stats",3),e.nrm(5,"app-demon-resists",4)(6,"app-demon-skills",5),e.DNE(7,C,1,6,"app-demon-skills",6),e.nrm(8,"app-smt-fusions",7),e.bVm()),2&a){const s=e.XpG();e.R7$(1),e.Y8G("title","Lvl "+s.demon.lvl+" "+s.demon.race+" "+s.demon.name)("price",s.demon.price)("statHeaders",s.compConfig.baseStats)("fusionHeaders",e.lJ4(18,r))("stats",s.demon.stats)("inherits",s.demon.inherits),e.R7$(2),e.JRh(s.demon.drop),e.R7$(1),e.Y8G("ngIf",s.compConfig.baseAtks.length),e.R7$(1),e.Y8G("resistHeaders",s.compConfig.resistElems)("resists",s.demon.resists),e.R7$(1),e.Y8G("title","Innate Skills")("hasTarget",!0)("hasLvl",!1)("elemOrder",s.compConfig.elemOrder)("compendium",s.compendium)("skillLevels",s.demon.skills),e.R7$(1),e.Y8G("ngIf",s.compConfig.inheritSkills),e.R7$(1),e.Y8G("hasTripleFusion",!0)}}function g(a,$){if(1&a&&e.nrm(0,"app-demon-missing",9),2&a){const s=e.XpG();e.Y8G("name",s.name)}}let o=(()=>{class a{static{this.\u0275fac=function(f){return new(f||a)}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"title","price","statHeaders","fusionHeaders","stats","inherits"],[3,"title","statHeaders","stats",4,"ngIf"],[3,"resistHeaders","resists"],[3,"title","hasTarget","hasLvl","elemOrder","compendium","skillLevels"],[3,"title","hasTarget","hasLvl","elemOrder","compendium","skillLevels",4,"ngIf"],[3,"hasTripleFusion"],[3,"title","statHeaders","stats"],[3,"name"]],template:function(f,v){1&f&&(e.DNE(0,d,9,19,"ng-container",0),e.DNE(1,g,1,1,"app-demon-missing",1)),2&f&&(e.Y8G("ngIf",v.demon),e.R7$(1),e.Y8G("ngIf",!v.demon))},dependencies:[l.bT,z.X,F.C,t.w,i.F,p.L],encapsulation:2,changeDetection:0})}}return a})(),R=(()=>{class a{constructor(s,f,v,L){this.route=s,this.title=f,this.currentDemonService=v,this.fusionDataService=L,this.subscriptions=[],this.appName="Test App",this.appName=L.appName,this.compConfig=L.compConfig}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const s of this.subscriptions)s.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(s=>{this.compendium=s,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(s=>{this.name=s,this.getDemonEntry()})),this.route.params.subscribe(s=>{this.currentDemonService.nextCurrentDemon(s.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(`${this.name} - ${this.appName}`),this.demon=this.compendium.getDemon(this.name))}static{this.\u0275fac=function(f){return new(f||a)(e.rXU(P.nX),e.rXU(I.hE),e.rXU(c.i),e.rXU(n.i))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-demon-entry-container"]],decls:1,vars:4,consts:[[3,"name","demon","compConfig","compendium"]],template:function(f,v){1&f&&e.nrm(0,"app-demon-entry",0),2&f&&e.Y8G("name",v.name)("demon",v.demon)("compConfig",v.compConfig)("compendium",v.compendium)},dependencies:[o],encapsulation:2,changeDetection:0})}}return a})();var _=m(2649),E=m(3452),x=m(6188),H=m(131);const J=[{path:"",redirectTo:"demons",pathMatch:"full"},{path:"",component:y,data:{fusionTool:"chart"},children:[{path:"chart",component:K}]},{path:"",component:y,children:[{path:"demons/:demonName",component:R,children:[{path:"fissions/triple",component:x.X},{path:"fusions/triple",component:H.W},{path:"fissions",component:_.J},{path:"fusions",component:E.y},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"demons",component:B},{path:"skills",component:T}]},{path:"**",redirectTo:"demons",pathMatch:"full"}];let W=(()=>{class a{static{this.\u0275fac=function(f){return new(f||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({imports:[P.iI.forChild(J),P.iI]})}}return a})()},6170:(Q,Y,m)=>{m.d(Y,{i:()=>z});var P=m(4412);class e{constructor(t){this.pairRecipes={},this.initImportedData(t),this.updateDerivedData(t)}initImportedData(t){const i={},p={},c={},h={},C=t.baseStats.length,r=t.resistElems.length,d={};for(const[g,o]of Object.entries(t.resistCodes))d[g]=((o/1e3|8)<<10)+(o%1e3/2.5|0);for(const[g,o]of Object.entries(t.demonData)){const R="Shin Megami Tensei IMAGINE"!==t.appTitle?o.skills.reduce((_,E,x)=>(E&&(_[E.replace("*","")]=x-8),_),{}):o.skills;i[g]={name:g,race:o.race,lvl:o.lvl,currLvl:o.lvl,fusion:"normal",inherits:t.inheritSkills?t.skillElems.indexOf(o.inherit):24,drop:o.drop||"-",price:Math.pow(Math.floor(o.lvl),3),stats:o.stats.slice(0,C),atks:o.atks||[],resists:o.resists.substring(0,r).split("").map(_=>d[_]),align:o.align||t.alignData.races[o.race],skills:R}}for(const[g,o]of Object.entries(t.skillData)){const R="recovery"===o.element?" Rec ":" Dmg ";p[g]={name:g,element:o.element,power:o.power||0,cost:o.cost||0,rank:(o.enemy?99:0)+(1023&o.cost||0)/100,effect:(o.power?o.power.toString()+R:" ")+(o.effect||""),target:o.target,level:0,learnedBy:[]}}for(const g of Object.values(i).sort((o,R)=>o.lvl-R.lvl))for(const[o,R]of Object.entries(g.skills))p[o].learnedBy.push({demon:g.name,level:R});if(t.specialRecipes)for(const[g,o]of Object.entries(t.specialRecipes))i[g].fusion=o.fusion||"special",o.prereq&&(i[g].prereq=o.prereq),o.special&&(c[g]=o.special),o.pairs&&(h[g]=o.pairs.map(R=>{const[_,E]=R.split(" x ");return{name1:_,name2:E}}));this.demons=i,this.skills=p,this.elementDemons=t.elementTable.elems,this.specialRecipes=c,this.pairRecipes=h}updateDerivedData(t){const i={},p={},c={};for(const h of t.races)i[h]={},p[h]=[],c[h]=[];for(const[h,C]of Object.entries(this.demons))i[C.race][C.lvl]=h,p[C.race].push(C.lvl),"normal"===C.fusion&&c[C.race].push(C.lvl);for(const[h,C]of Object.entries(t.species)){const r="3"+h;i[h]={},p[h]=[],c[h]=[],i[r]={},p[r]=[],c[r]=[];for(let d=C.length;d>0;d--){const g=C[d-1];let o=C.length-d;"d"==t.alignData.races[g].charAt(0)?o-=400:(Object.assign(i[h],i[g]),p[h]=p[h].concat(p[g]),c[h]=c[h].concat(c[g]));for(const[R,_]of Object.entries(i[g])){const E=(100*parseInt(R)+o)/100;i[r][E]=_.toString(),p[r].push(E),c[r].push(E)}}}for(const h of Object.keys(p))p[h].sort((C,r)=>C-r),c[h].sort((C,r)=>C-r);this._allDemons=Object.values(this.demons),this._allSkills=Object.values(this.skills),this.invertedDemons=i,this.allIngredients=p,this.allResults=c}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return Object.keys(this.specialRecipes).map(t=>this.demons[t])}getDemon(t){return this.demons[t]}getSkill(t){return this.skills[t]}getSkills(t){const i=t.map(p=>this.skills[p]);return i.sort((p,c)=>1e4*(this.compConfig.elemOrder[p.element]-this.compConfig.elemOrder[c.element])+p.rank-c.rank),i}getIngredientDemonLvls(t){return this.allIngredients[t]||[]}getResultDemonLvls(t){return this.allResults[t]||[]}getSpecialNameEntries(t){return this.specialRecipes[t]||[]}getSpecialNamePairs(t){return this.pairRecipes[t]||[]}reverseLookupDemon(t,i){return this.invertedDemons[t][i]}reverseLookupSpecial(t){return[]}isElementDemon(t){return-1!==this.elementDemons.indexOf(t)}updateFusionSettings(t){}}var n=m(8063);class l extends n.p{constructor(t,i){super(),this.elementDemons=[],this.lvlModifier=1.5,this.hasDarkTable=!1,this.initCharts(t,i)}initCharts(t,i){this.alignments=t.alignData.races,this.speciesLookup=t.speciesLookup,this.elementDemons=i?t.tripleElementTable.elems:t.elementTable.elems;const p=i?t.tripleTable.races:t.normalTable.races,c=i?t.tripleTable.table:t.normalTable.table,h=n.p.loadFusionTableJson(p,c),C=n.p.loadFissionTableJson(p,[],c);if(this.lvlModifier=i?t.tripleLvlModifier:t.normalLvlModifier,t.darkTable){this.hasDarkTable=!0;const r=i&&t.tripleDarkTable?t.tripleDarkTable.races:t.darkTable.races,d=i&&t.tripleDarkTable?t.tripleDarkTable.table:t.darkTable.table,g=n.p.loadFusionTableJson(r,d),o=n.p.loadFissionTableJson(r,[],d);this.races=p.concat(r.filter(R=>this.getLightDark(R)<0)),this.fusionChart=n.p.mergeFusionTables(h,g),this.fissionChart=n.p.mergeFissionTables(C,o)}else this.races=p,this.fusionChart=h,this.fissionChart=C;if(t.darknessRecipes)for(const[r,d]of Object.entries(t.darknessRecipes)){const g=d;this.fusionChart[r]={},this.fusionChart[r][r]=g,this.fissionChart[g]={},this.fissionChart[g][r]=[r],this.races.includes(r)||this.races.push(r)}if(t.useSpeciesFusion)for(const r of this.races)if(this.fissionChart[r]){const d=this.speciesLookup[r];this.fissionChart[r]["2"+d]=["2"+d]}this.elementChart=n.p.loadElementTableJson(t.elementTable.races,this.elementDemons,i?t.tripleElementTable.table:t.elementTable.table)}getLightDark(t){return"l"==this.alignments[t].charAt(0)?1:"d"==this.alignments[t].charAt(0)?-1:"D"==this.alignments[t].charAt(0)?-2:0}getRaceFissions(t){return this.fissionChart[t]||{}}getRaceFusions(t){return this.fusionChart[t]||{}}getRaceFusion(t,i){return this.getRaceFusions(t)[i]||""}}class U{constructor(t){this.lvlModifier=7.5,this.elementDemons=[],this.initCharts(t)}initCharts(t){const i=t.tripleTable.races,p=t.tripleTable.table,c=i.map(C=>"3"+C);this.speciesLookup=t.speciesLookup,this.fissionChart={},this.fusionChart={},this.races=i;for(const C of c)this.fusionChart[C]={};let h=-1;for(let C=0;C<c.length;C++)for(let r=C+1;r<c.length;r++){const d=c[C],g=c[r],o=d+"|"+g;h+=1,this.fissionChart[o]={},this.fusionChart[o]={},this.fissionChart[o][d]=[g],this.fusionChart[d][g]=o,this.fusionChart[g][d]=o;for(let R=0;R<c.length;R++){const _=c[R],E=p[h][R];this.fissionChart[E]||(this.fissionChart[E]={}),this.fissionChart[E][o]=[_],this.fusionChart[o][_]=E,this.fusionChart[_][o]=E}}}getRaceFissions(t){return this.fissionChart[t]||{}}getRaceFusions(t){const i=this.speciesLookup[t];return i?this.fusionChart["3"+i]||{}:this.fusionChart[t]||{}}getRaceFusion(t,i){return this.getRaceFusions(t)[i]||""}getLightDark(t){return 0}getElemModifiers(t){return{}}getElemFusions(t){return{}}isConvertedRace(t){return!1}}var y=m(7396),M=m(8939),I=m(6947),G=m(7178),B=m(6208),X=m(2338);const N=["Deity","Megami","Fury","Lady"],T=["Vile","Tyrant","Reaper"],k=["Entity","Zealot"];function u(F,t,i){const p=[],{race:c,lvl:h}=t.getDemon(F),C=2*(i.lvlModifier-3),r=t.getResultDemonLvls(c),d=r.indexOf(h);if(-1===k.indexOf(c)||-1===d)return p;const g=r[d-1]?2*r[d-1]-C:0,o=r[d+1]?2*h-C:200;for(const R of N)for(const _ of t.getIngredientDemonLvls(R)){const E=t.reverseLookupDemon(R,_),x=g-_,H=o-_;for(const J of T)for(const W of t.getIngredientDemonLvls(J)){const a=t.reverseLookupDemon(J,W);x<W&&W<=H&&p.push({name1:E,name2:a})}}return p}function b(F,t,i){const p=[],{race:c,lvl:h}=t.getDemon(F),C=3*(i.tripleChart.lvlModifier-1),r=t.getResultDemonLvls(c),d=r.indexOf(h);if(-1===k.indexOf(c)||-1===d)return p;const g=r[d-1]?3*r[d-1]-C:0,o=3*h-C;for(const R of N)for(const _ of t.getIngredientDemonLvls(R)){const E=t.reverseLookupDemon(R,_),x=g-_,H=o-_;for(const J of T)for(const W of t.getIngredientDemonLvls(J)){const a=t.reverseLookupDemon(J,W),$=x-W,s=H-W;for(const f of N)for(const v of t.getIngredientDemonLvls(f)){const L=t.reverseLookupDemon(f,v);$<v&&v<=s&&E.localeCompare(L)<0&&p.push({name1:E,name2:a,name3:L})}for(const f of T)for(const v of t.getIngredientDemonLvls(f)){const L=t.reverseLookupDemon(f,v);$<v&&v<=s&&a.localeCompare(L)<0&&p.push({name1:E,name2:a,name3:L})}}}return p}var D=m(3357);function j(F,t,i){const{normalChart:p,tripleChart:c,raceOrder:h}=i,C=[];for(const r of Object.keys(c.getRaceFissions(F)))for(const d of t.getIngredientDemonLvls(r)){const g=t.reverseLookupDemon(r,d);for(const[o,R]of Object.entries(p.getRaceFissions(r)))for(const _ of t.getIngredientDemonLvls(o))if(d>_||d===_&&h[r]<h[o]){const E=t.reverseLookupDemon(o,_);for(const x of R)for(const H of t.getIngredientDemonLvls(x))if(d>H||d===H&&h[r]<h[x]){const J=t.reverseLookupDemon(x,H);C.push({name1:g,name2:E,name3:J})}}}return C}function O(F,t,i){const{tripleChart:p}=i,c=[];for(const h of Object.keys(p.getRaceFissions(F))){const C=t.getIngredientDemonLvls(h);for(let r=0;r<C.length;r++){const d=t.reverseLookupDemon(h,C[r]);for(let g=r+1;g<C.length;g++){const o=t.reverseLookupDemon(h,C[g]);for(let R=g+1;R<C.length;R++){const _=t.reverseLookupDemon(h,C[R]);c.push({name1:d,name2:o,name3:_})}}}}return c}var A=m(7101);function V(F,t,i){const p=i.tripleChart.elementDemons.filter(h=>h.indexOf(F)>-1);let c=[];for(const h of p){const C=h.replace(F,"").replace(" x ",""),r=(0,A.Dy)(h,t,i.tripleChart).concat((0,A.sk)(h,t,i.tripleChart));c=c.concat(r.map(d=>({name1:C,name2:d.name1,name3:d.name2})))}return c}var S=m(1080),K=m(2598);let z=(()=>{class F{constructor(i){this.fusionCalculator=I.nv,this.fissionCalculator=I.ov,this.triFusionCalculator=new M.$([S.LW,S.FE],[]),this.triFissionCalculator=new M.$([D.Hr],[]),this.compConfig=i,this.appName=i.appTitle+" Fusion Calculator",this.compendium=new P.t(new e(i)).asObservable();const p=new l(i);let c,h;i.useSpeciesFusion?(c=new U(i),h=c):(c=p,h=new l(i,!0)),this.fusionChart=new P.t(new l(i)).asObservable(),this.squareChart=new P.t({normalChart:c,tripleChart:h,raceOrder:i.raceOrder}).asObservable(),i.darknessRecipes&&(this.fusionCalculator=I._J,this.fissionCalculator=I.ty),i.tripleElementTable&&(this.triFissionCalculator=new M.$([D.Hr,D.XN],[])),i.appCssClasses.includes("dssh")&&(this.fissionCalculator=new y.s([G.Hr,G.rj,u],[X.X]),this.triFusionCalculator=new M.$([S.LW,S.FE,S.Hy,S.q6],[V]),this.triFissionCalculator=new M.$([D.Hr,D.XN,b],[j,O])),(i.appCssClasses.includes("smt1")||i.appCssClasses.includes("smt2"))&&(this.fissionCalculator=new y.s([G.Hr,G.Hg,B.i,G.rj],[X.X]))}updateFusionSettings(i){return{}}static{this.\u0275fac=function(p){return new(p||F)(K.KVO(I.HI))}}static{this.\u0275prov=K.jDH({token:F,factory:F.\u0275fac})}}return F})()},1636:(Q,Y,m)=>{m.d(Y,{d:()=>y});var P=m(177),e=m(3887),n=m(9447),l=m(1151),U=m(2598);let y=(()=>{class M{static forRoot(){return{ngModule:M}}static{this.\u0275fac=function(B){return new(B||M)}}static{this.\u0275mod=U.$C({type:M})}static{this.\u0275inj=U.G2t({imports:[P.MD,e.G,n.SharedCompendiumModule,l.S]})}}return M})()}}]);