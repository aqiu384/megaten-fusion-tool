"use strict";(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[604],{8615:(V,$,d)=>{d.d($,{R:()=>J});var S,i=d(4769),e=d(6593),F=d(4487),R=d(6814);function U(O,D){if(1&O&&(i.TgZ(0,"th"),i._uU(1),i.qZA()),2&O){const b=D.$implicit,M=i.oxw();i.xp6(1),i.Oqu(b.slice(0,M.nameCut))}}function j(O,D){if(1&O&&(i.TgZ(0,"td",4),i._uU(1),i.qZA()),2&O){const b=D.$implicit,M=i.oxw(2);i.Q6J("ngClass",b.slice(0,4)),i.xp6(1),i.Oqu(b.slice(4,M.nameCut+4))}}function x(O,D){if(1&O&&(i.TgZ(0,"tr")(1,"th"),i._uU(2),i.qZA(),i.YNc(3,j,2,2,"td",3),i.TgZ(4,"th"),i._uU(5),i.qZA()()),2&O){const b=D.$implicit;i.xp6(2),i.Oqu(b[0]),i.xp6(1),i.Q6J("ngForOf",b.slice(1,b.length-1)),i.xp6(2),i.Oqu(b[b.length-1])}}function Z(O,D){if(1&O&&(i.TgZ(0,"th"),i._uU(1),i.qZA()),2&O){const b=D.$implicit,M=i.oxw();i.xp6(1),i.Oqu(b.slice(0,M.nameCut))}}function K(O,D){if(1&O&&(i.TgZ(0,"tr")(1,"th",0),i._uU(2),i.qZA()()),2&O){const b=i.oxw();i.xp6(1),i.uIk("colspan",b.table[0].length),i.xp6(1),i.AsE("",b.appName," ",b.tripTitle,"")}}class J{constructor(D,b){this.title2=D,this.route=b,this.normTitle="Normal Fusions",this.tripTitle="",this.isPersona=!1,this.filterDarks=!0,this.langEn=!0,this.subscriptions=[],this.table=[],this.nameCut=4}ngOnInit(){this.subscriptions.push(this.route.parent.data.subscribe(D=>{this.appName=D.appName||"Shin Megami Tensei",this.nameCut=this.langEn?4:2,this.title2.setTitle(this.langEn?`Fusion Chart - ${this.appName} Fusion Calculator`:`\u5408\u4f53\u8868 ${this.appName} \u5408\u4f53\u30a2\u30d7\u30ea`)}))}ngOnChanges(){this.normChart&&this.fillFusionChart()}ngOnDestroy(){for(const D of this.subscriptions)D.unsubscribe()}fillFusionChart(){const D="noneNone",M=J.RESULT_COLORS.reduce((f,[t,m])=>m.reduce((o,h)=>(o[h]=t,o),f),{}),A=this.normChart.elementDemons;let y=[],Q=this.normChart.races,N=[];this.filterDarks&&(y=this.normChart.races.filter(f=>this.normChart.getLightDark(f)>0),Q=this.normChart.races.filter(f=>0===this.normChart.getLightDark(f)),N=this.normChart.races.filter(f=>-1===this.normChart.getLightDark(f)),0===N.length&&y.length>0&&(y=this.normChart.races.filter(f=>this.normChart.getLightDark(f)>-1),Q=[],N=this.normChart.races.filter(f=>this.normChart.getLightDark(f)<-1)));const X=y.length-N.length,P=y.concat(Q,A),I=N.length?N.concat(Array(P.length-N.length).fill("")):P,z=this.mitaTable?P:y.concat(Q,Array(A.length).fill("")),G=this.mitaTable||N.length?Array(X).fill("").concat(N,Q,A):P;this.table=[[""].concat(P,[""])];for(let f=0;f<G.length;f++){const t=Array(P.length+2).fill("empt-"),m=G[f],o=z[f],h=-1!==A.indexOf(m),g=-1!==A.indexOf(o);this.table.push(t),t[0]=m,t[t.length-1]=o;for(let c=f;c<P.length;c++){const l=P[c],p=-1!==A.indexOf(l);if(p&&g){const a=A.indexOf(o),C=A.indexOf(l),k=this.mitaTable[a][C-a-1];t[c+1]=k?(M[k]||"norm")+k:D}else if(p&&o){const a=this.normChart.getElemFusions(l)[o];t[c+1]=a?(M[a]||"rank")+(a>0?"+":"")+a.toString():D}else if(l&&o){const a=this.isPersona&&l===o?l:this.normChart.getRaceFusion(l,o);t[c+1]=a?(M[a]||(l===o?"elem":"norm"))+a:D}}if(this.tripChart)for(let c=0;c<=f-X;c++){const l=I[c];if(l&&h){const p=this.tripChart.getElemFusions(m)[l];t[c+1]=p?(M[p]||"rank")+(p>0?"+":"")+p.toString():D}else if(l&&m){const p=this.tripChart.getRaceFusion(l,m);t[c+1]=p?(M[p]||(l===m?"elem":"trip"))+p:D}}if(-1!==m.indexOf(" x ")){const[c,l]=m.split(" x "),p=c.slice(0,3)+"x"+l.slice(0,3);t[0]=p,t[t.length-1]=p}else if(-1!==m.indexOf(" ")){const c=m.split(" ")[0];t[0]=c,t[t.length-1]=c}}for(let f=0;f<this.table[0].length;f++){const t=this.table[0][f];if(-1!==t.indexOf(" x ")){const[m,o]=t.split(" x ");this.table[0][f]=m.slice(0,2)+o.slice(0,2)}}this.table.push([""].concat(I,[""]))}}(S=J).RESULT_COLORS=Object.entries({oran:["-2","Erthys","Gnome","Saki","Saki Mitama","Random","\u30a2\u30fc\u30b7\u30fc\u30ba","\u30ce\u30fc\u30e0","\u30b5\u30ad\u30df\u30bf\u30de"],redd:["-1","Flaemis","Salamander","Ara ","Ara Mitama","Fiend","\u30d5\u30ec\u30a4\u30df\u30fc\u30ba","\u30b5\u30e9\u30de\u30f3\u30c0\u30fc","\u30a2\u30e9\u30df\u30bf\u30de"],gree:["1","Aeros","Sylph","Kusi","Kusi Mitama","UMA","\u30a8\u30a2\u30ed\u30b9","\u30b7\u30eb\u30ad\u30fc","\u30af\u30b7\u30df\u30bf\u30de"],blue:["2","Aquans","Undine","Nigi","Nigi Mitama","Enigma","\u30a2\u30af\u30a2\u30f3\u30ba","\u30a6\u30f3\u30c7\u30a3\u30fc\u30cd","\u30cb\u30ae\u30df\u30bf\u30de"]}),S.\u0275fac=function(D){return new(D||S)(i.Y36(e.Dx),i.Y36(F.gz))},S.\u0275cmp=i.Xpm({type:S,selectors:[["app-fusion-chart"]],inputs:{normChart:"normChart",tripChart:"tripChart",mitaTable:"mitaTable",normTitle:"normTitle",tripTitle:"tripTitle",isPersona:"isPersona",filterDarks:"filterDarks",langEn:"langEn",counter:"counter"},features:[i.TTD],decls:12,vars:7,consts:[[1,"title"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(D,b){1&D&&(i.TgZ(0,"table")(1,"tbody")(2,"tr")(3,"th",0),i._uU(4),i.qZA()(),i.TgZ(5,"tr"),i.YNc(6,U,2,1,"th",1),i.qZA(),i.YNc(7,x,6,3,"tr",1),i.TgZ(8,"tr"),i.YNc(9,Z,2,1,"th",1),i.qZA(),i.YNc(10,K,3,3,"tr",2),i.qZA(),i._UZ(11,"tbody"),i.qZA()),2&D&&(i.xp6(3),i.uIk("colspan",b.table[0].length),i.xp6(1),i.AsE("",b.appName," ",b.normTitle,""),i.xp6(2),i.Q6J("ngForOf",b.table[0]),i.xp6(1),i.Q6J("ngForOf",b.table.slice(1,b.table.length-1)),i.xp6(2),i.Q6J("ngForOf",b.table[b.table.length-1]),i.xp6(1),i.Q6J("ngIf",b.tripTitle))},dependencies:[R.mk,R.sg,R.O5],styles:["table[_ngcontent-%COMP%]{width:auto;margin:0 auto;white-space:nowrap}td.elem[_ngcontent-%COMP%]{color:#0f0}td.trip[_ngcontent-%COMP%]{color:#d3d3d3}td.oran[_ngcontent-%COMP%]{color:orange}td.redd[_ngcontent-%COMP%]{color:red}td.gree[_ngcontent-%COMP%]{color:#0f0}td.blue[_ngcontent-%COMP%]{color:#0ff}td.none[_ngcontent-%COMP%]{color:transparent}td.empt[_ngcontent-%COMP%]{background-color:transparent;color:transparent}"],changeDetection:0})},6829:(V,$,d)=>{d.d($,{V:()=>H});var i=d(4487),e=d(4769),F=d(7601),R=d(6814),S=d(5390);let U=(()=>{var s;class v{constructor(r){this.appCssClasses=["smtnes","smt1"],this.appCssClasses=r.compConfig.appCssClasses}}return(s=v).\u0275fac=function(r){return new(r||s)(e.Y36(F.Y))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-smt1-compendium"]],decls:1,vars:2,consts:[[3,"ngClass","hasSettings"]],template:function(r,u){1&r&&e._UZ(0,"app-demon-compendium",0),2&r&&e.Q6J("ngClass",u.appCssClasses)("hasSettings",!1)},dependencies:[R.mk,S.e],styles:[".devilsum div.element-icon,.smtnes div.element-icon{height:12px;background-size:12px;background-repeat:no-repeat;background-position:center;color:transparent}.smtnes div.element-icon.sword{background-image:url(/assets/images/smt4f/sword.png)}.smtnes div.element-icon.gun{background-image:url(/assets/images/smtsj/gun.png)}.smtnes div.element-icon.fire{background-image:url(/assets/images/smtsj/fir.png)}.smtnes div.element-icon.i4{background-image:url(/assets/images/smtsj/fir.png)}.smtnes div.element-icon.ice{background-image:url(/assets/images/smtsj/ice.png)}.smtnes div.element-icon.i5{background-image:url(/assets/images/smtsj/ice.png)}.smtnes div.element-icon.elec{background-image:url(/assets/images/smtsj/ele.png)}.smtnes div.element-icon.i6{background-image:url(/assets/images/smtsj/ele.png)}.smtnes div.element-icon.force{background-image:url(/assets/images/smtsj/win.png)}.smtnes div.element-icon.i7{background-image:url(/assets/images/smtsj/win.png)}.smtnes div.element-icon.nerve{background-image:url(/assets/images/smt4f/panic.png)}.smtnes div.element-icon.almighty{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.i13{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.expel{background-image:url(/assets/images/smtsj/exp.png)}.smtnes div.element-icon.i8{background-image:url(/assets/images/smtsj/exp.png)}.smtnes div.element-icon.death{background-image:url(/assets/images/smtsj/cur.png)}.smtnes div.element-icon.i9{background-image:url(/assets/images/smtsj/cur.png)}.smtnes div.element-icon.curse{background-image:url(/assets/images/smt4f/poison.png)}.smtnes div.element-icon.bind{background-image:url(/assets/images/smt4f/bind.png)}.smtnes div.element-icon.rush{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.punch{background-image:url(/assets/images/smt4f/sword.png)}.smtnes div.element-icon.kick{background-image:url(/assets/images/smtsj/gun.png)}.smtnes div.element-icon.flying{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.energy{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.recovery{background-image:url(/assets/images/smtsj/rec.png)}.smtnes div.element-icon.support{background-image:url(/assets/images/smtsj/sup.png)}.smtnes div.element-icon.special{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.attack{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.tech{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.slash{background-image:url(/assets/images/smt4f/sword.png)}.smtnes div.element-icon.charge{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.blunt{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.handgun{background-image:url(/assets/images/smtsj/gun.png)}.smtnes div.element-icon.penetrate{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.spread{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.mystic{background-image:url(/assets/images/smt4f/poison.png)}.smtnes div.element-icon.mind{background-image:url(/assets/images/smt4f/bind.png)}.smtnes div.element-icon.suicide{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.passive{background-image:url(/assets/images/smtsj/pas.png)}.smtnes div.element-icon.defend{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.phys{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.gro{background-image:url(/assets/images/smt4f/sword.png)}.smtnes div.element-icon.air{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.fir{background-image:url(/assets/images/smtsj/fir.png)}.smtnes div.element-icon.ele{background-image:url(/assets/images/smtsj/ele.png)}.smtnes div.element-icon.for{background-image:url(/assets/images/smtsj/win.png)}.smtnes div.element-icon.gig{background-image:url(/assets/images/smt4f/bind.png)}.smtnes div.element-icon.alm{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.lig{background-image:url(/assets/images/smtsj/exp.png)}.smtnes div.element-icon.dar{background-image:url(/assets/images/smtsj/cur.png)}.smtnes div.element-icon.phy{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.ail{background-image:url(/assets/images/smtsj/ail.png)}.smtnes div.element-icon.rec{background-image:url(/assets/images/smtsj/rec.png)}.smtnes div.element-icon.sup{background-image:url(/assets/images/smtsj/sup.png)}.smtnes div.element-icon.psy{background-image:url(/assets/images/smt4f/panic.png)}.smtnes div.element-icon.spear{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.thrown{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.ailment{background-image:url(/assets/images/smtsj/ail.png)}.smtnes div.element-icon.quad{background-image:url(/assets/images/smt4f/curse.png)}.smtnes div.element-icon.elem{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.none{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.strike{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.i0{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.skill{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.temp{background-image:url(/assets/images/smt4f/smirk.png)}.smtnes div.element-icon.i17{background-image:url(/assets/images/smt4f/smirk.png)}.smtnes div.element-icon.dark{background-image:url(/assets/images/smt4f/curse.png)}.smtnes div.element-icon.i18{background-image:url(/assets/images/smt4f/curse.png)}.smtnes div.element-icon.witch{background-image:url(/assets/images/smtsj/ail.png)}.smtnes div.element-icon.i19{background-image:url(/assets/images/smtsj/ail.png)}.smtnes div.element-icon.rea{background-image:url(/assets/images/smtsj/rec.png)}.smtnes div.element-icon.i20{background-image:url(/assets/images/smtsj/rec.png)}.smtnes div.element-icon.reb{background-image:url(/assets/images/smtsj/sup.png)}.smtnes div.element-icon.i21{background-image:url(/assets/images/smtsj/sup.png)}.smtnes div.element-icon.element{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.hero{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.i22{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.i23{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.i24{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.starter{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.autorec{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.phase{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.explore{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.area{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.plugin{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.self{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.universe{background-image:url(/assets/images/smtsj/spe.png)}.smtnes td.align.ll,.smtnes td.align.nl,.smtnes td.align.dl{color:#0ff}.smtnes td.align.lc,.smtnes td.align.nc,.smtnes td.align.dc{color:tomato}.smtnes td.align.el{color:#0f0}.smtnes td.align.ec{color:gold}.smt1 th.title,.smt1 th.nav.active,.smt1 th.nav.active a{background-color:#608341;color:#fff}.smt2 th.title,.smt2 th.nav.active,.smt2 th.nav.active a{background-color:#2f4f4f;color:#fff}.smtif th.title,.smtif th.nav.active,.smtif th.nav.active a{background-color:#8fbc8f;color:#000}.dsum th.title,.dsum th.nav.active,.dsum th.nav.active a{background-color:#4372aa;color:#fff}.dssh th.title,.dssh th.nav.active,.dssh th.nav.active a{background-color:#302878;color:#fff}.mjn2 th.title,.mjn2 th.nav.active,.mjn2 th.nav.active a{background-color:#514f7e;color:#fff}.smt9 th.title,.smt9 th.nav.active,.smt9 th.nav.active a{background-color:#693cbe;color:#fff}.smtim th.title,.smtim th.nav.active,.smtim th.nav.active a{background-color:#009d96;color:#fff}\n"],encapsulation:2,changeDetection:0}),v})();var j=d(1032),x=d(6593),Z=d(4101);let K=(()=>{var s;class v extends j.l{constructor(r,u,L){super(r,u,L),this.appName=`List of Demons - ${L.appName}`,this.compConfig=L.compConfig,this.defaultSortFun=(E,W)=>200*(this.compConfig.raceOrder[E.race]-this.compConfig.raceOrder[W.race])+W.lvl-E.lvl}}return(s=v).\u0275fac=function(r){return new(r||s)(e.Y36(x.Dx),e.Y36(e.sBO),e.Y36(F.Y))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-demon-list-container"]],features:[e.qOj],decls:2,vars:7,consts:[[3,"raceOrder","statHeaders","resistHeaders","inheritOrder","rowData"]],template:function(r,u){1&r&&(e._UZ(0,"app-smt-demon-list",0),e.ALo(1,"async")),2&r&&e.Q6J("raceOrder",u.compConfig.raceOrder)("statHeaders",u.compConfig.baseStats)("resistHeaders",u.compConfig.resistElems)("inheritOrder",u.compConfig.elemOrder)("rowData",e.lcZ(1,5,u.demons))},dependencies:[Z.Q,R.Ov],encapsulation:2,changeDetection:0}),v})();var J=d(4330),O=d(3934);let D=(()=>{var s;class v extends J.e{constructor(r,u,L){super(r,u,L),this.appName=`List of Skills - ${L.appName}`,this.compConfig=L.compConfig,this.defaultSortFun=(E,W)=>1e4*(this.compConfig.elemOrder[E.element]-this.compConfig.elemOrder[W.element])+E.rank-W.rank}}return(s=v).\u0275fac=function(r){return new(r||s)(e.Y36(x.Dx),e.Y36(e.sBO),e.Y36(F.Y))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-skill-list-container"]],features:[e.qOj],decls:2,vars:6,consts:[[3,"elemOrder","hasRank","hasTarget","rowData"]],template:function(r,u){1&r&&(e._UZ(0,"app-smt-skill-list",0),e.ALo(1,"async")),2&r&&e.Q6J("elemOrder",u.compConfig.elemOrder)("hasRank",!1)("hasTarget",!0)("rowData",e.lcZ(1,4,u.skills))},dependencies:[O.J,R.Ov],encapsulation:2,changeDetection:0}),v})();var b=d(8615);function M(s,v){if(1&s&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&s){const n=v.$implicit;e.xp6(1),e.Oqu(n.slice(0,4))}}function A(s,v){if(1&s&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&s){const n=v.$implicit;e.xp6(1),e.Oqu(n.slice(0,4))}}function y(s,v){if(1&s&&(e.TgZ(0,"tr")(1,"th"),e._uU(2),e.qZA(),e.YNc(3,A,2,1,"td",1),e.TgZ(4,"th"),e._uU(5),e.qZA()()),2&s){const n=v.$implicit;e.xp6(2),e.Oqu(n[0]),e.xp6(1),e.Q6J("ngForOf",n.slice(1,n.length-1)),e.xp6(2),e.Oqu(n[n.length-1])}}function Q(s,v){if(1&s&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&s){const n=v.$implicit;e.xp6(1),e.Oqu(n.slice(0,4))}}let N=(()=>{var s;class v{constructor(){this.table=[]}ngOnChanges(){this.fillFusionChart()}fillFusionChart(){this.table=[];const r=this.speciesChart.races,u=[""].concat(r,[""]);this.table.push(u);for(let L=0;L<r.length;L++)for(let E=L+1;E<r.length;E++){const W="3"+r[L]+"|3"+r[E];this.table.push([r[L]].concat(r.map(q=>this.speciesChart.getRaceFusion("3"+q,W)),[r[E]]))}this.table.push(u)}}return(s=v).\u0275fac=function(r){return new(r||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-species-triple-chart"]],inputs:{speciesChart:"speciesChart",title:"title"},features:[e.TTD],decls:9,vars:5,consts:[[1,"title"],[4,"ngFor","ngForOf"]],template:function(r,u){1&r&&(e.TgZ(0,"table")(1,"tr")(2,"th",0),e._uU(3),e.qZA()(),e.TgZ(4,"tr"),e.YNc(5,M,2,1,"th",1),e.qZA(),e.YNc(6,y,6,3,"tr",1),e.TgZ(7,"tr"),e.YNc(8,Q,2,1,"th",1),e.qZA()()),2&r&&(e.xp6(2),e.uIk("colspan",u.table[0].length),e.xp6(1),e.Oqu(u.title),e.xp6(2),e.Q6J("ngForOf",u.table[0]),e.xp6(1),e.Q6J("ngForOf",u.table.slice(1,u.table.length-1)),e.xp6(2),e.Q6J("ngForOf",u.table[u.table.length-1]))},dependencies:[R.sg],styles:["table[_ngcontent-%COMP%]{width:auto;margin:0 auto}td.elem[_ngcontent-%COMP%]{color:#0f0}td.trip[_ngcontent-%COMP%]{color:#d3d3d3}td.ra-2[_ngcontent-%COMP%]{color:orange}td.ra-1[_ngcontent-%COMP%]{color:red}td.ran1[_ngcontent-%COMP%]{color:#0f0}td.ran2[_ngcontent-%COMP%]{color:#0ff}td.None[_ngcontent-%COMP%]{color:#222}td.Sala[_ngcontent-%COMP%], td.Flae[_ngcontent-%COMP%], td.Ara[_ngcontent-%COMP%], td.Fien[_ngcontent-%COMP%]{color:red}td.Undi[_ngcontent-%COMP%], td.Aqua[_ngcontent-%COMP%], td.Nigi[_ngcontent-%COMP%], td.Enig[_ngcontent-%COMP%]{color:#0ff}td.Sylp[_ngcontent-%COMP%], td.Aero[_ngcontent-%COMP%], td.Kusi[_ngcontent-%COMP%], td.UMA[_ngcontent-%COMP%]{color:#0f0}td.Gnom[_ngcontent-%COMP%], td.Erth[_ngcontent-%COMP%], td.Saki[_ngcontent-%COMP%], td.Rand[_ngcontent-%COMP%]{color:orange}td.Empt[_ngcontent-%COMP%]{background-color:#000;color:transparent}"],changeDetection:0}),v})();function X(s,v){if(1&s&&(e.ynx(0),e._UZ(1,"app-fusion-chart",1)(2,"app-fusion-chart",1),e.BQk()),2&s){const n=e.oxw();e.xp6(1),e.Q6J("normChart",n.normChart)("tripChart",n.normChart)("mitaTable",n.mitamaTable)("normTitle","Light and Neutral Normal Fusions")("tripTitle","Dark Normal Fusions"),e.xp6(1),e.Q6J("normChart",n.tripChart)("tripChart",n.tripChart)("mitaTable",n.tripleMitamaTable)("normTitle","Light and Neutral Triple Fusions")("tripTitle","Dark Triple Fusions")}}function P(s,v){if(1&s&&(e.ynx(0),e._UZ(1,"app-fusion-chart",2)(2,"app-species-triple-chart",3),e.BQk()),2&s){const n=e.oxw();e.xp6(1),e.Q6J("normChart",n.fullChart)("mitaTable",n.mitamaTable)("filterDarks",!1)("normTitle","Normal Fusions"),e.xp6(1),e.Q6J("speciesChart",n.tripChart)("title",n.appName+" - Triple Fusions")}}function I(s,v){if(1&s&&(e.ynx(0),e._UZ(1,"app-fusion-chart",1)(2,"app-species-triple-chart",3),e.BQk()),2&s){const n=e.oxw();e.xp6(1),e.Q6J("normChart",n.fullChart)("tripChart",n.fullChart)("mitaTable",n.mitamaTable)("normTitle","Light and Neutral Normal Fusions")("tripTitle","Dark Normal Fusions"),e.xp6(1),e.Q6J("speciesChart",n.tripChart)("title",n.appName+" - Triple Fusions")}}let z=(()=>{var s;class v{constructor(r){this.fusionDataService=r,this.subscriptions=[]}ngOnInit(){const r=this.fusionDataService.compConfig;this.appName=r.appTitle,this.mitamaTable=r.mitamaTable,this.tripleMitamaTable=r.tripleMitamaTable,this.hasDarkRanks=r.darknessRecipes,this.fusionDataService.compConfig.useSpeciesFusion&&this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(u=>{this.fullChart=u})),this.subscriptions.push(this.fusionDataService.squareChart.subscribe(u=>{this.normChart=u.normalChart,this.tripChart=u.tripleChart}))}ngOnDestroy(){for(const r of this.subscriptions)r.unsubscribe()}}return(s=v).\u0275fac=function(r){return new(r||s)(e.Y36(F.Y))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-fusion-chart-container"]],decls:3,vars:3,consts:[[4,"ngIf"],[3,"normChart","tripChart","mitaTable","normTitle","tripTitle"],[3,"normChart","mitaTable","filterDarks","normTitle"],[3,"speciesChart","title"]],template:function(r,u){1&r&&(e.YNc(0,X,3,10,"ng-container",0),e.YNc(1,P,3,6,"ng-container",0),e.YNc(2,I,3,7,"ng-container",0)),2&r&&(e.Q6J("ngIf",!u.fullChart),e.xp6(1),e.Q6J("ngIf",u.fullChart&&!u.hasDarkRanks),e.xp6(1),e.Q6J("ngIf",u.fullChart&&u.hasDarkRanks))},dependencies:[R.O5,b.R,N],encapsulation:2,changeDetection:0}),v})();var G=d(7880),f=d(8520),t=d(1009),m=d(755),o=d(4069),h=d(8711);function g(s,v){if(1&s&&e._UZ(0,"app-demon-stats",8),2&s){const n=e.oxw(2);e.Q6J("title","Attacks")("statHeaders",n.compConfig.baseAtks)("stats",n.demon.atks)}}function c(s,v){if(1&s&&e._UZ(0,"app-demon-skills",5),2&s){const n=e.oxw(2);e.Q6J("title","Inheritable Skills")("hasTarget",!0)("hasLvl",!1)("elemOrder",n.compConfig.elemOrder)("compendium",n.compendium)("skillLevels",n.compConfig.inheritSkills[n.demon.inherits])}}const l=function(){return["Drop"]};function p(s,v){if(1&s&&(e.ynx(0),e.TgZ(1,"app-demon-stats",2)(2,"td"),e._uU(3),e.qZA()(),e.YNc(4,g,1,3,"app-demon-stats",3),e._UZ(5,"app-demon-resists",4)(6,"app-demon-skills",5),e.YNc(7,c,1,6,"app-demon-skills",6),e._UZ(8,"app-smt-fusions",7),e.BQk()),2&s){const n=e.oxw();e.xp6(1),e.Q6J("title","Lvl "+n.demon.lvl+" "+n.demon.race+" "+n.demon.name)("price",n.demon.price)("statHeaders",n.compConfig.baseStats)("fusionHeaders",e.DdM(18,l))("stats",n.demon.stats)("inherits",n.demon.inherits),e.xp6(2),e.Oqu(n.demon.drop),e.xp6(1),e.Q6J("ngIf",n.compConfig.baseAtks.length),e.xp6(1),e.Q6J("resistHeaders",n.compConfig.resistElems)("resists",n.demon.resists),e.xp6(1),e.Q6J("title","Innate Skills")("hasTarget",!0)("hasLvl",!1)("elemOrder",n.compConfig.elemOrder)("compendium",n.compendium)("skillLevels",n.demon.skills),e.xp6(1),e.Q6J("ngIf",n.compConfig.inheritSkills),e.xp6(1),e.Q6J("hasTripleFusion",!0)}}function a(s,v){if(1&s&&e._UZ(0,"app-demon-missing",9),2&s){const n=e.oxw();e.Q6J("name",n.name)}}let C=(()=>{var s;class v{}return(s=v).\u0275fac=function(r){return new(r||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"title","price","statHeaders","fusionHeaders","stats","inherits"],[3,"title","statHeaders","stats",4,"ngIf"],[3,"resistHeaders","resists"],[3,"title","hasTarget","hasLvl","elemOrder","compendium","skillLevels"],[3,"title","hasTarget","hasLvl","elemOrder","compendium","skillLevels",4,"ngIf"],[3,"hasTripleFusion"],[3,"title","statHeaders","stats"],[3,"name"]],template:function(r,u){1&r&&(e.YNc(0,p,9,19,"ng-container",0),e.YNc(1,a,1,1,"app-demon-missing",1)),2&r&&(e.Q6J("ngIf",u.demon),e.xp6(1),e.Q6J("ngIf",!u.demon))},dependencies:[R.O5,G.t,f.O,t.I,m.n,o.O],encapsulation:2,changeDetection:0}),v})(),k=(()=>{var s;class v{constructor(r,u,L,E){this.route=r,this.title=u,this.currentDemonService=L,this.fusionDataService=E,this.subscriptions=[],this.appName="Test App",this.appName=E.appName,this.compConfig=E.compConfig}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const r of this.subscriptions)r.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(r=>{this.compendium=r,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(r=>{this.name=r,this.getDemonEntry()})),this.route.params.subscribe(r=>{this.currentDemonService.nextCurrentDemon(r.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(`${this.name} - ${this.appName}`),this.demon=this.compendium.getDemon(this.name))}}return(s=v).\u0275fac=function(r){return new(r||s)(e.Y36(i.gz),e.Y36(x.Dx),e.Y36(h.s),e.Y36(F.Y))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-demon-entry-container"]],decls:1,vars:4,consts:[[3,"name","demon","compConfig","compendium"]],template:function(r,u){1&r&&e._UZ(0,"app-demon-entry",0),2&r&&e.Q6J("name",u.name)("demon",u.demon)("compConfig",u.compConfig)("compendium",u.compendium)},dependencies:[C],encapsulation:2,changeDetection:0}),v})();var T=d(5657),_=d(4689),Y=d(6857),w=d(4170);const B=[{path:"",redirectTo:"demons",pathMatch:"full"},{path:"",component:U,data:{fusionTool:"chart"},children:[{path:"chart",component:z}]},{path:"",component:U,children:[{path:"demons/:demonName",component:k,children:[{path:"fissions/triple",component:Y.p},{path:"fusions/triple",component:w.n},{path:"fissions",component:T.t},{path:"fusions",component:_.$},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"demons",component:K},{path:"skills",component:D}]},{path:"**",redirectTo:"demons",pathMatch:"full"}];let H=(()=>{var s;class v{}return(s=v).\u0275fac=function(r){return new(r||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[i.Bz.forChild(B),i.Bz]}),v})()},7601:(V,$,d)=>{d.d($,{Y:()=>G});var i=d(5619);class e{constructor(t){this.pairRecipes={},this.dlcDemons={},this.initImportedData(t),this.updateDerivedData(t)}initImportedData(t){const m={},o={},h={},g={},c=t.baseStats.length,l=t.resistElems.length;for(const[p,a]of Object.entries(t.demonData)){const C="Shin Megami Tensei IMAGINE"!==t.appTitle?a.skills.reduce((k,T,_)=>(T&&(k[T.replace("*","")]=_-8),k),{}):a.skills;m[p]={name:p,race:a.race,lvl:a.lvl,currLvl:a.lvl,fusion:"normal",inherits:t.inheritSkills?t.skillElems.indexOf(a.inherit):24,drop:a.drop||"-",price:Math.pow(Math.floor(a.lvl),3),stats:a.stats.slice(0,c),atks:a.atks||[],resists:a.resists.substring(0,l).split("").map(k=>t.resistCodes[k]),align:a.align||t.alignData.races[a.race],skills:C}}for(const[p,a]of Object.entries(t.skillData)){const C="recovery"===a.element?" Rec ":" Dmg ";o[p]={name:p,element:a.element,power:a.power||0,cost:a.cost||0,rank:(a.enemy?99:0)+(a.cost/1e3||0),effect:(a.power?a.power.toString()+C:" ")+(a.effect||""),target:a.target,level:0,learnedBy:[]}}for(const p of Object.values(m).sort((a,C)=>a.lvl-C.lvl))for(const[a,C]of Object.entries(p.skills))o[a].learnedBy.push({demon:p.name,level:C});if(t.specialRecipes)for(const[p,a]of Object.entries(t.specialRecipes))m[p].fusion=a.fusion||"special",a.prereq&&(m[p].prereq=a.prereq),a.special&&(h[p]=a.special),a.pairs&&(g[p]=a.pairs.map(C=>{const[k,T]=C.split(" x ");return{name1:k,name2:T}}));this.demons=m,this.skills=o,this.elementDemons=t.elementTable.elems,this.specialRecipes=h,this.pairRecipes=g}updateDerivedData(t){const m={},o={},h={};for(const g of t.races)m[g]={},o[g]=[],h[g]=[];for(const[g,c]of Object.entries(this.demons))m[c.race][c.lvl]=g,o[c.race].push(c.lvl),"normal"===c.fusion&&h[c.race].push(c.lvl);for(const[g,c]of Object.entries(t.species)){const l="3"+g;m[g]={},o[g]=[],h[g]=[],m[l]={},o[l]=[],h[l]=[];for(let p=c.length;p>0;p--){const a=c[p-1];let C=c.length-p;"d"==t.alignData.races[a].charAt(0)?C-=400:(Object.assign(m[g],m[a]),o[g]=o[g].concat(o[a]),h[g]=h[g].concat(h[a]));for(const[k,T]of Object.entries(m[a])){const _=(100*parseInt(k)+C)/100;m[l][_]=T.toString(),o[l].push(_),h[l].push(_)}}}for(const g of Object.keys(o))o[g].sort((c,l)=>c-l),h[g].sort((c,l)=>c-l);this._allDemons=Object.values(this.demons),this._allSkills=Object.values(this.skills),this.invertedDemons=m,this.allIngredients=o,this.allResults=h}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return Object.keys(this.specialRecipes).map(t=>this.demons[t])}getDemon(t){return this.demons[t]}getSkill(t){return this.skills[t]}getSkills(t){const m=t.map(o=>this.skills[o]);return m.sort((o,h)=>1e4*(this.compConfig.elemOrder[o.element]-this.compConfig.elemOrder[h.element])+o.rank-h.rank),m}getIngredientDemonLvls(t){return this.allIngredients[t]||[]}getResultDemonLvls(t){return this.allResults[t]||[]}getSpecialNameEntries(t){return this.specialRecipes[t]||[]}getSpecialNamePairs(t){return this.pairRecipes[t]||[]}reverseLookupDemon(t,m){return this.invertedDemons[t][m]}reverseLookupSpecial(t){return[]}isElementDemon(t){return-1!==this.elementDemons.indexOf(t)}}var F=d(6262);class R extends F.g{constructor(t,m){super(),this.elementDemons=[],this.lvlModifier=1.5,this.hasDarkTable=!1,this.initCharts(t,m)}initCharts(t,m){this.alignments=t.alignData.races,this.speciesLookup=t.speciesLookup,this.elementDemons=m?t.tripleElementTable.elems:t.elementTable.elems;const o=m?t.tripleTable.races:t.normalTable.races,h=m?t.tripleTable.table:t.normalTable.table,g=F.g.loadFusionTableJson(o,h),c=F.g.loadFissionTableJson(o,[],h);if(this.lvlModifier=m?t.tripleLvlModifier:t.normalLvlModifier,t.darkTable){this.hasDarkTable=!0;const l=m&&t.tripleDarkTable?t.tripleDarkTable.races:t.darkTable.races,p=m&&t.tripleDarkTable?t.tripleDarkTable.table:t.darkTable.table,a=F.g.loadFusionTableJson(l,p),C=F.g.loadFissionTableJson(l,[],p);this.races=o.concat(l.filter(k=>this.getLightDark(k)<0)),this.fusionChart=F.g.mergeFusionTables(g,a),this.fissionChart=F.g.mergeFissionTables(c,C)}else this.races=o,this.fusionChart=g,this.fissionChart=c;if(t.darknessRecipes)for(const[l,p]of Object.entries(t.darknessRecipes)){const a=p;this.fusionChart[l]={},this.fusionChart[l][l]=a,this.fissionChart[a]={},this.fissionChart[a][l]=[l],this.races.includes(l)||this.races.push(l)}if(t.useSpeciesFusion)for(const l of this.races)if(this.fissionChart[l]){const p=this.speciesLookup[l];this.fissionChart[l]["2"+p]=["2"+p]}this.elementChart=F.g.loadElementTableJson(t.elementTable.races,this.elementDemons,m?t.tripleElementTable.table:t.elementTable.table)}getLightDark(t){return"l"==this.alignments[t].charAt(0)?1:"d"==this.alignments[t].charAt(0)?-1:"D"==this.alignments[t].charAt(0)?-2:0}getRaceFissions(t){return this.fissionChart[t]||{}}getRaceFusions(t){return this.fusionChart[t]||{}}getRaceFusion(t,m){return this.getRaceFusions(t)[m]||""}}class S{constructor(t){this.lvlModifier=7.5,this.elementDemons=[],this.initCharts(t)}initCharts(t){const m=t.tripleTable.races,o=t.tripleTable.table,h=m.map(c=>"3"+c);this.speciesLookup=t.speciesLookup,this.fissionChart={},this.fusionChart={},this.races=m;for(const c of h)this.fusionChart[c]={};let g=-1;for(let c=0;c<h.length;c++)for(let l=c+1;l<h.length;l++){const p=h[c],a=h[l],C=p+"|"+a;g+=1,this.fissionChart[C]={},this.fusionChart[C]={},this.fissionChart[C][p]=[a],this.fusionChart[p][a]=C,this.fusionChart[a][p]=C;for(let k=0;k<h.length;k++){const T=h[k],_=o[g][k];this.fissionChart[_]||(this.fissionChart[_]={}),this.fissionChart[_][C]=[T],this.fusionChart[C][T]=_,this.fusionChart[T][C]=_}}}getRaceFissions(t){return this.fissionChart[t]||{}}getRaceFusions(t){const m=this.speciesLookup[t];return m?this.fusionChart["3"+m]||{}:this.fusionChart[t]||{}}getRaceFusion(t,m){return this.getRaceFusions(t)[m]||""}getLightDark(t){return 0}getElemModifiers(t){return{}}getElemFusions(t){return{}}isConvertedRace(t){return!1}}var U=d(3837),j=d(6213),x=d(7548),Z=d(7862),K=d(9015),J=d(2416);const O=["Deity","Megami","Fury","Lady"],D=["Vile","Tyrant","Reaper"],b=["Entity","Zealot"];function M(f,t,m){const o=[],{race:h,lvl:g}=t.getDemon(f),c=2*(m.lvlModifier-3),l=t.getResultDemonLvls(h),p=l.indexOf(g);if(-1===b.indexOf(h)||-1===p)return o;const a=l[p-1]?2*l[p-1]-c:0,C=l[p+1]?2*g-c:200;for(const k of O)for(const T of t.getIngredientDemonLvls(k)){const _=t.reverseLookupDemon(k,T),Y=a-T,w=C-T;for(const B of D)for(const H of t.getIngredientDemonLvls(B)){const s=t.reverseLookupDemon(B,H);Y<H&&H<=w&&o.push({name1:_,name2:s})}}return o}function A(f,t,m){const o=[],{race:h,lvl:g}=t.getDemon(f),c=3*(m.tripleChart.lvlModifier-1),l=t.getResultDemonLvls(h),p=l.indexOf(g);if(-1===b.indexOf(h)||-1===p)return o;const a=l[p-1]?3*l[p-1]-c:0,C=3*g-c;for(const k of O)for(const T of t.getIngredientDemonLvls(k)){const _=t.reverseLookupDemon(k,T),Y=a-T,w=C-T;for(const B of D)for(const H of t.getIngredientDemonLvls(B)){const s=t.reverseLookupDemon(B,H),v=Y-H,n=w-H;for(const r of O)for(const u of t.getIngredientDemonLvls(r)){const L=t.reverseLookupDemon(r,u);v<u&&u<=n&&_.localeCompare(L)<0&&o.push({name1:_,name2:s,name3:L})}for(const r of D)for(const u of t.getIngredientDemonLvls(r)){const L=t.reverseLookupDemon(r,u);v<u&&u<=n&&s.localeCompare(L)<0&&o.push({name1:_,name2:s,name3:L})}}}return o}var y=d(6748);function Q(f,t,m){const{normalChart:o,tripleChart:h,raceOrder:g}=m,c=[];for(const l of Object.keys(h.getRaceFissions(f)))for(const p of t.getIngredientDemonLvls(l)){const a=t.reverseLookupDemon(l,p);for(const[C,k]of Object.entries(o.getRaceFissions(l)))for(const T of t.getIngredientDemonLvls(C))if(p>T||p===T&&g[l]<g[C]){const _=t.reverseLookupDemon(C,T);for(const Y of k)for(const w of t.getIngredientDemonLvls(Y))if(p>w||p===w&&g[l]<g[Y]){const B=t.reverseLookupDemon(Y,w);c.push({name1:a,name2:_,name3:B})}}}return c}function N(f,t,m){const{tripleChart:o}=m,h=[];for(const g of Object.keys(o.getRaceFissions(f))){const c=t.getIngredientDemonLvls(g);for(let l=0;l<c.length;l++){const p=t.reverseLookupDemon(g,c[l]);for(let a=l+1;a<c.length;a++){const C=t.reverseLookupDemon(g,c[a]);for(let k=a+1;k<c.length;k++){const T=t.reverseLookupDemon(g,c[k]);h.push({name1:p,name2:C,name3:T})}}}}return h}var X=d(923);function P(f,t,m){const o=m.tripleChart.elementDemons.filter(g=>g.indexOf(f)>-1);let h=[];for(const g of o){const c=g.replace(f,"").replace(" x ",""),l=(0,X.Eh)(g,t,m.tripleChart).concat((0,X.s0)(g,t,m.tripleChart));h=h.concat(l.map(p=>({name1:c,name2:p.name1,name3:p.name2})))}return h}var I=d(6071),z=d(4769);let G=(()=>{var f;class t{constructor(o){this.fusionCalculator=x.YP,this.fissionCalculator=x.uC,this.triFusionCalculator=new j.e([I.UN,I.jm],[]),this.triFissionCalculator=new j.e([y.Mg],[]),this.compConfig=o,this.appName=o.appTitle+" Fusion Calculator",this.compendium=new i.X(new e(o)).asObservable();const h=new R(o);let g,c;o.useSpeciesFusion?(g=new S(o),c=g):(g=h,c=new R(o,!0)),this.fusionChart=new i.X(new R(o)).asObservable(),this.squareChart=new i.X({normalChart:g,tripleChart:c,raceOrder:o.raceOrder}).asObservable(),o.darknessRecipes&&(this.fusionCalculator=x.Q0,this.fissionCalculator=x.oA),o.tripleElementTable&&(this.triFissionCalculator=new j.e([y.Mg,y.D4],[])),o.appCssClasses.includes("dssh")&&(this.fissionCalculator=new U.N([Z.Mg,Z.Aq,M],[J.Q]),this.triFusionCalculator=new j.e([I.UN,I.jm,I.e7,I.Hd],[P]),this.triFissionCalculator=new j.e([y.Mg,y.D4,A],[Q,N])),(o.appCssClasses.includes("smt1")||o.appCssClasses.includes("smt2"))&&(this.fissionCalculator=new U.N([Z.Mg,Z.Ii,K.f,Z.Aq],[J.Q]))}nextDlcDemons(o){return{}}}return(f=t).\u0275fac=function(o){return new(o||f)(z.LFG(x.I7))},f.\u0275prov=z.Yz7({token:f,factory:f.\u0275fac}),t})()},604:(V,$,d)=>{d.d($,{p:()=>U});var i=d(6814),e=d(6208),F=d(8325),R=d(6829),S=d(4769);let U=(()=>{var j;class x{static forRoot(){return{ngModule:x}}}return(j=x).\u0275fac=function(K){return new(K||j)},j.\u0275mod=S.oAB({type:j}),j.\u0275inj=S.cJS({imports:[i.ez,e.m,F.a,R.V]}),x})()}}]);