"use strict";(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[503],{7439:(Q,M,c)=>{c.d(M,{S:()=>ot});var k=c(8935),I=c(2755),F=c(1090),t=c(2598),E=c(5768),D=c(177),j=c(5583);let U=(()=>{class s{constructor(e){this.appCssClasses=["smt4","smt4f"],this.appCssClasses=e.compConfig.appCssClasses,this.otherLinks=[{title:(0,I.oO)(F.fu.RecipGenerator,e.compConfig.lang),link:"recipes"}]}static{this.\u0275fac=function(i){return new(i||s)(t.rXU(E.i))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-smt4f-compendium"]],decls:1,vars:2,consts:[[3,"ngClass","otherLinks"]],template:function(i,n){1&i&&t.nrm(0,"app-demon-compendium",0),2&i&&t.Y8G("ngClass",n.appCssClasses)("otherLinks",n.otherLinks)},dependencies:[D.YU,j.f],styles:[".smt4 div.element-icon{height:12px;background-size:12px;background-repeat:no-repeat;background-position:center;color:transparent}.smt4 div.element-icon.phy{background-image:url(/assets/images/smtsj/phy.png)}.smt4 div.element-icon.gun{background-image:url(/assets/images/smt4f/gun.png)}.smt4 div.element-icon.fir{background-image:url(/assets/images/smtsj/fir.png)}.smt4 div.element-icon.ice{background-image:url(/assets/images/smtsj/ice.png)}.smt4 div.element-icon.ele{background-image:url(/assets/images/smtsj/ele.png)}.smt4 div.element-icon.for{background-image:url(/assets/images/smt4f/force.png)}.smt4 div.element-icon.mys{background-image:url(/assets/images/smt4f/curse.png)}.smt4 div.element-icon.lig{background-image:url(/assets/images/smtsj/exp.png)}.smt4 div.element-icon.dea,.smt4 div.element-icon.dar{background-image:url(/assets/images/smtsj/cur.png)}.smt4 div.element-icon.ail{background-image:url(/assets/images/smtsj/ail.png)}.smt4 div.element-icon.min{background-image:url(/assets/images/smt4f/panic.png)}.smt4 div.element-icon.rec{background-image:url(/assets/images/smtsj/rec.png)}.smt4 div.element-icon.alm{background-image:url(/assets/images/smtsj/alm.png)}.smt4 div.element-icon.com,.smt4 div.element-icon.sup{background-image:url(/assets/images/smtsj/sup.png)}.smt4 div.element-icon.pas{background-image:url(/assets/images/smtsj/pas.png)}.smt4 div.element-icon.oth,.smt4 div.element-icon.inn,.smt4 div.element-icon.sab,.smt4 div.element-icon.inv,.smt4 div.element-icon.aut,.smt4 div.element-icon.rac,.smt4 div.element-icon.non,.smt4 div.element-icon.spe{background-image:url(/assets/images/smtsj/spe.png)}.smt4 td.affinity-9,.smt4 td.affinity-8{color:red}.smt4 td.affinity-7{color:#ff4500}.smt4 td.affinity-6{color:tomato}.smt4 td.affinity-5{color:coral}.smt4 td.affinity-4{color:#ff8c00}.smt4 td.affinity-3{color:orange}.smt4 td.affinity-2{color:#ffa07a}.smt4 td.affinity-1{color:gold}.smt4 td.affinity0{color:transparent}.smt4 td.affinity1{color:#7cfc00}.smt4 td.affinity2{color:#0f0}.smt4 td.affinity3{color:#00ff7f}.smt4 td.affinity4{color:#00fa9a}.smt4 td.affinity5{color:#32cd32}.smt4 td.affinity6{color:#3cb371}.smt4 td.affinity7{color:#2e8b57}.smt4 td.affinity8,.smt4 td.affinity9{color:#228b22}.smt4f th.title,.smt4f th.nav.active,.smt4f th.nav.active a{background-color:#fff;color:#000}.smt5 th.title,.smt5 th.nav.active,.smt5 th.nav.active a{background-color:#363361;color:#fff}.sh2 th.title,.sh2 th.nav.active,.sh2 th.nav.active a{background-color:#693cbe;color:#fff}.krao th.title,.krao th.nav.active,.krao th.nav.active a{color:#fff;background-color:#8e283d}.ds1 th.title,.ds1 th.nav.active,.ds1 th.nav.active a{color:#fff;background-color:#e83145}.ds2 th.title,.ds2 th.nav.active,.ds2 th.nav.active a{color:#fff;background-color:#0078e8}\n"],encapsulation:2,changeDetection:0})}}return s})();var X=c(9404),L=c(345),B=c(9629);let N=(()=>{class s extends X.M{constructor(e,i,n){super(e,i,n),this.compConfig=n.compConfig,this.appName=(0,I.oO)(F.vC.AppTitle,this.compConfig.lang)+n.appName,this.defaultSortFun=(C,y)=>200*(this.compConfig.raceOrder[C.race]-this.compConfig.raceOrder[y.race])+y.lvl-C.lvl}static{this.\u0275fac=function(i){return new(i||s)(t.rXU(L.hE),t.rXU(t.gRc),t.rXU(E.i))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-demon-list-container"]],features:[t.Vt3],decls:2,vars:8,consts:[[3,"lang","raceOrder","statHeaders","resistHeaders","affinityHeaders","rowData"]],template:function(i,n){1&i&&(t.nrm(0,"app-smt-demon-list",0),t.nI1(1,"async")),2&i&&t.Y8G("lang",n.compConfig.lang)("raceOrder",n.compConfig.raceOrder)("statHeaders",n.compConfig.baseStats)("resistHeaders",n.compConfig.resistElems)("affinityHeaders",n.compConfig.affinityElems)("rowData",t.bMT(1,6,n.demons))},dependencies:[B.F,D.Jj],encapsulation:2,changeDetection:0})}}return s})();var H=c(9454),P=c(2940);let r=(()=>{class s extends H.E{constructor(e,i,n){super(e,i,n),this.appName=`List of Skills - ${n.appName}`,this.compConfig=n.compConfig,this.appName=(0,I.oO)(F.vf.AppTitle,this.compConfig.lang)+n.appName,this.compConfig=n.compConfig,this.defaultSortFun=(C,y)=>1e4*(this.compConfig.elemOrder[C.element]-this.compConfig.elemOrder[y.element])+C.rank-y.rank}static{this.\u0275fac=function(i){return new(i||s)(t.rXU(L.hE),t.rXU(t.gRc),t.rXU(E.i))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-skill-list-container"]],features:[t.Vt3],decls:2,vars:7,consts:[[3,"lang","elemOrder","hasTarget","hasRank","rowData"]],template:function(i,n){1&i&&(t.nrm(0,"app-smt-skill-list",0),t.nI1(1,"async")),2&i&&t.Y8G("lang",n.compConfig.lang)("elemOrder",n.compConfig.elemOrder)("hasTarget",!0)("hasRank",n.compConfig.hasLightDark)("rowData",t.bMT(1,5,n.skills))},dependencies:[P.p,D.Jj],encapsulation:2,changeDetection:0})}}return s})();var a=c(6567),f=c(860);let u=(()=>{class s extends a.I{constructor(e,i){super(e,i),this.changeDetector=e,this.fusionDataService=i,this.appTitle=i.appName,this.lang=i.compConfig.lang}static{this.\u0275fac=function(i){return new(i||s)(t.rXU(t.gRc),t.rXU(E.i))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-fusion-settings-container"]],features:[t.Vt3],decls:1,vars:4,consts:[[3,"lang","appTitle","fusionSettings","showEnableAll","toggledAll","toggledName"]],template:function(i,n){1&i&&(t.j41(0,"app-fusion-settings",0),t.bIt("toggledAll",function(y){return n.toggleAll(y)})("toggledName",function(y){return n.toggleName(y)}),t.k0s()),2&i&&t.Y8G("lang",n.lang)("appTitle",n.appTitle)("fusionSettings",n.fusionSettings)("showEnableAll",!0)},dependencies:[f.B],encapsulation:2,changeDetection:0})}}return s})();var h=c(5692),v=c(3679),l=c(2223),g=c(9436),d=c(1538),R=c(6122),b=c(4207),$=c(8696);function V(s,O){if(1&s&&t.nrm(0,"app-demon-inherits",10),2&s){const e=t.XpG(2);t.Y8G("lang",e.compConfig.lang)("hasLvls",!0)("inheritHeaders",e.compConfig.affinityElems)("inherits",e.demon.affinities)}}function _(s,O){if(1&s&&(t.j41(0,"th"),t.EFF(1),t.nI1(2,"translateComp"),t.k0s()),2&s){const e=t.XpG(2);t.R7$(1),t.JRh(t.i5U(2,1,e.skillMsgs.Rank,e.lang))}}function K(s,O){if(1&s&&(t.j41(0,"td"),t.EFF(1),t.k0s()),2&s){const e=t.XpG().$implicit;t.xc7("color",99!==e.skill.rank?null:"transparent"),t.R7$(1),t.JRh(e.skill.rank)}}const S=function(s){return{unique:s}};function Y(s,O){if(1&s&&(t.j41(0,"tr",11)(1,"td")(2,"div"),t.EFF(3),t.k0s()(),t.j41(4,"td"),t.EFF(5),t.k0s(),t.j41(6,"td"),t.EFF(7),t.nI1(8,"skillCostToString"),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td"),t.EFF(12),t.k0s(),t.DNE(13,K,2,3,"td",12),t.j41(14,"td"),t.EFF(15),t.nI1(16,"skillLevelToString"),t.k0s()()),2&s){const e=O.$implicit,i=t.XpG(2);t.Y8G("ngClass",t.eq3(19,S,e.skill.rank>90)),t.R7$(2),t.ZvI("element-icon ",e.skill.element,""),t.R7$(1),t.JRh(e.skill.element),t.R7$(2),t.Lme("",e.skill.name," ",e.lvl>0?"+"+e.lvl:e.lvl||"",""),t.R7$(1),t.xc7("color",e.cost?null:"transparent"),t.R7$(1),t.JRh(t.bMT(8,15,e.cost)),t.R7$(3),t.Lme("",e.skill.effect," ",0===e.upgrade?"":"("+(e.upgrade>0?"+":"")+e.upgrade+"%)",""),t.R7$(2),t.JRh(e.skill.target||"Self"),t.R7$(1),t.Y8G("ngIf",i.compConfig.hasLightDark),t.R7$(2),t.JRh(t.bMT(16,17,e.skill.level))}}function W(s,O){if(1&s&&(t.j41(0,"tr")(1,"td",13),t.EFF(2),t.nI1(3,"translateComp"),t.k0s()()),2&s){const e=t.XpG(2);t.R7$(2),t.JRh(t.i5U(3,1,e.skillMsgs.NoLearnedSkills,e.lang))}}const A=function(s){return[s]};function x(s,O){if(1&s&&(t.nrm(0,"app-fusion-entry-table",14),t.nI1(1,"translateComp")),2&s){const e=t.XpG(2);t.Y8G("title",t.i5U(1,4,e.statMsgs.EvolvesFrom,e.lang))("lang",e.compConfig.lang)("baseUrl","..")("rowData",t.eq3(7,A,e.demon.evolvesFrom))}}function m(s,O){if(1&s&&(t.nrm(0,"app-fusion-entry-table",14),t.nI1(1,"translateComp")),2&s){const e=t.XpG(2);t.Y8G("title",t.i5U(1,4,e.statMsgs.EvolvesTo,e.lang))("lang",e.compConfig.lang)("baseUrl","..")("rowData",t.eq3(7,A,e.demon.evolvesTo))}}function o(s,O){if(1&s&&(t.qex(0),t.nrm(1,"app-demon-stats",2)(2,"app-demon-resists",3),t.DNE(3,V,1,4,"app-demon-inherits",4),t.j41(4,"table",5)(5,"thead")(6,"tr")(7,"th",6),t.EFF(8),t.nI1(9,"translateComp"),t.k0s()(),t.j41(10,"tr")(11,"th"),t.EFF(12),t.nI1(13,"translateComp"),t.k0s(),t.j41(14,"th"),t.EFF(15),t.nI1(16,"translateComp"),t.k0s(),t.j41(17,"th"),t.EFF(18),t.nI1(19,"translateComp"),t.k0s(),t.j41(20,"th"),t.EFF(21),t.nI1(22,"translateComp"),t.k0s(),t.j41(23,"th"),t.EFF(24),t.nI1(25,"translateComp"),t.k0s(),t.DNE(26,_,3,4,"th",0),t.j41(27,"th"),t.EFF(28,"Lvl"),t.k0s()()(),t.j41(29,"tbody"),t.DNE(30,Y,17,21,"tr",7),t.DNE(31,W,4,4,"tr",0),t.nrm(32,"tr"),t.k0s()(),t.DNE(33,x,2,9,"app-fusion-entry-table",8),t.DNE(34,m,2,9,"app-fusion-entry-table",8),t.nrm(35,"app-smt-fusions",9),t.bVm()),2&s){const e=t.XpG();t.R7$(1),t.Y8G("lang",e.compConfig.lang)("title","Lvl "+e.demon.lvl+" "+e.demon.race+" "+e.demon.name)("price",e.demon.price)("statHeaders",e.compConfig.baseStats)("stats",e.demon.stats),t.R7$(1),t.Y8G("lang",e.compConfig.lang)("resistHeaders",e.compConfig.resistElems)("resists",e.demon.resists)("ailmentHeaders",e.compConfig.ailmentElems)("ailments",e.demon.ailments),t.R7$(1),t.Y8G("ngIf",e.demon.affinities&&e.demon.affinities.length),t.R7$(5),t.JRh(t.i5U(9,24,e.skillMsgs.LearnedSkills,e.lang)),t.R7$(4),t.JRh(t.i5U(13,27,e.skillMsgs.Elem,e.lang)),t.R7$(3),t.JRh(t.i5U(16,30,e.skillMsgs.Name,e.lang)),t.R7$(3),t.JRh(t.i5U(19,33,e.skillMsgs.Cost,e.lang)),t.R7$(3),t.JRh(t.i5U(22,36,e.skillMsgs.Effect,e.lang)),t.R7$(3),t.JRh(t.i5U(25,39,e.skillMsgs.Target,e.lang)),t.R7$(2),t.Y8G("ngIf",e.compConfig.hasLightDark),t.R7$(4),t.Y8G("ngForOf",e.skillLvls),t.R7$(1),t.Y8G("ngIf",!e.skillLvls.length),t.R7$(2),t.Y8G("ngIf",e.demon.evolvesFrom),t.R7$(1),t.Y8G("ngIf",e.demon.evolvesTo),t.R7$(1),t.Y8G("lang",e.compConfig.lang)("excludedDlc","excluded"===e.demon.fusion)}}function p(s,O){if(1&s&&t.nrm(0,"app-demon-missing",15),2&s){const e=t.XpG();t.Y8G("name",e.name)}}let T=(()=>{class s{constructor(){this.lang="en",this.statMsgs=F.Cj,this.skillMsgs=F.vf,this.skillLvls=[]}ngOnChanges(){if(this.demon){this.skillLvls=[];for(const e of Object.keys(this.demon.skills)){const n=this.compendium.getSkill(e),C=this.compConfig.affinityElems.indexOf(n.element),y=this.compConfig.affinityBonuses,J=(this.demon.affinities||[])[C];this.skillLvls.push(J&&y.costs[C]&&(64512&n.cost)<=3072?{skill:n,cost:(64512&n.cost)+Math.floor((100-y.costs[C][J+10])/100*(1023&n.cost)),lvl:J,upgrade:y.upgrades[C][J+10]}:{skill:n,cost:n.cost,lvl:0,upgrade:0})}for(const e of this.skillLvls)e.skill.level=this.demon.skills[e.skill.name];this.skillLvls.sort((e,i)=>200*(e.skill.level-i.skill.level)+this.compConfig.elemOrder[e.skill.element]-this.compConfig.elemOrder[i.skill.element])}}static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",compConfig:"compConfig",compendium:"compendium",lang:"lang"},features:[t.OA$],decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"lang","title","price","statHeaders","stats"],[3,"lang","resistHeaders","resists","ailmentHeaders","ailments"],[3,"lang","hasLvls","inheritHeaders","inherits",4,"ngIf"],[1,"entry-table"],["colSpan","7",1,"title"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"title","lang","baseUrl","rowData",4,"ngIf"],[3,"lang","excludedDlc"],[3,"lang","hasLvls","inheritHeaders","inherits"],[3,"ngClass"],[3,"color",4,"ngIf"],["colSpan","7"],[3,"title","lang","baseUrl","rowData"],[3,"name"]],template:function(i,n){1&i&&(t.DNE(0,o,36,42,"ng-container",0),t.DNE(1,p,1,1,"app-demon-missing",1)),2&i&&(t.Y8G("ngIf",n.demon),t.R7$(1),t.Y8G("ngIf",!n.demon))},dependencies:[D.YU,D.Sq,D.bT,h.X,v.C,l.w,g.d,d.a,R.L,b.uz,b.X2,b.Q3],encapsulation:2,changeDetection:0})}}return s})(),G=(()=>{class s{constructor(e,i,n,C){this.route=e,this.title=i,this.currentDemonService=n,this.fusionDataService=C,this.subscriptions=[],this.appName=C.appName,this.compConfig=C.compConfig}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const e of this.subscriptions)e.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(e=>{this.compendium=e,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(e=>{this.name=e,this.getDemonEntry()})),this.route.params.subscribe(e=>{this.currentDemonService.nextCurrentDemon(e.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(`${this.name} - ${this.appName}`),this.demon=this.compendium.getDemon(this.name))}static{this.\u0275fac=function(i){return new(i||s)(t.rXU(k.nX),t.rXU(L.hE),t.rXU($.i),t.rXU(E.i))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-demon-entry-container"]],decls:1,vars:5,consts:[[3,"lang","name","demon","compConfig","compendium"]],template:function(i,n){1&i&&t.nrm(0,"app-demon-entry",0),2&i&&t.Y8G("lang",n.compConfig.lang)("name",n.name)("demon",n.demon)("compConfig",n.compConfig)("compendium",n.compendium)},dependencies:[T],encapsulation:2,changeDetection:0})}}return s})();var z=c(9023);function Z(s,O){if(1&s&&t.nrm(0,"app-fusion-chart",2),2&s){const e=t.XpG();t.Y8G("lang",e.lang)("normChart",e.normChart)("tripChart",e.normChart)("normTitle","Light and Neutral Normal Fusions")("tripTitle","Dark Normal Fusions")}}function w(s,O){if(1&s&&t.nrm(0,"app-fusion-chart",3),2&s){const e=t.XpG();t.Y8G("lang",e.lang)("filterDarks",!1)("normChart",e.normChart)("mitaTable",e.mitamaTable)}}let q=(()=>{class s{constructor(e,i){this.changeDetectorRef=e,this.fusionDataService=i,this.subscriptions=[],this.lang="en"}ngOnInit(){const e=this.fusionDataService.compConfig;this.lang=e.lang,this.mitamaTable=e.elementTable.pairs||null,this.hasLightDark=e.hasLightDark,this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(i=>{this.changeDetectorRef.markForCheck(),this.normChart=i}))}ngOnDestroy(){for(const e of this.subscriptions)e.unsubscribe()}static{this.\u0275fac=function(i){return new(i||s)(t.rXU(t.gRc),t.rXU(E.i))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-fusion-chart-container"]],decls:2,vars:2,consts:[[3,"lang","normChart","tripChart","normTitle","tripTitle",4,"ngIf"],[3,"lang","filterDarks","normChart","mitaTable",4,"ngIf"],[3,"lang","normChart","tripChart","normTitle","tripTitle"],[3,"lang","filterDarks","normChart","mitaTable"]],template:function(i,n){1&i&&(t.DNE(0,Z,1,5,"app-fusion-chart",0),t.DNE(1,w,1,4,"app-fusion-chart",1)),2&i&&(t.Y8G("ngIf",n.hasLightDark),t.R7$(1),t.Y8G("ngIf",!n.hasLightDark))},dependencies:[D.bT,z.q],encapsulation:2,changeDetection:0})}}return s})();var tt=c(1289);let et=(()=>{class s{constructor(e,i){this.fusionDataService=e,this.title=i,this.subscriptions=[],this.maxSkills=8,this.lang="en";const n=this.fusionDataService.compConfig,C=n.appCssClasses.includes("sh2");this.lang=n.lang,this.appName=(0,I.oO)(F.hV.AppTitle,this.lang)+e.appName,this.maxSkills=C?6:8,this.recipeConfig={fissionCalculator:this.fusionDataService.fissionCalculator,fusionCalculator:this.fusionDataService.fusionCalculator,races:n.races,skillElems:n.skillElems,inheritElems:n.affinityElems,displayElems:{},restrictInherits:C,triExclusiveRaces:[],triFissionCalculator:null,triFusionCalculator:null,defaultDemon:n.defaultRecipeDemon}}ngOnInit(){this.title.setTitle(this.appName),this.subscribeAll()}ngOnDestroy(){this.unsubscribeAll()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(e=>{this.compendium=e})),this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(e=>{this.squareChart={normalChart:e,tripleChart:e,raceOrder:this.fusionDataService.compConfig.raceOrder}}))}unsubscribeAll(){for(const e of this.subscriptions)e.unsubscribe()}static{this.\u0275fac=function(i){return new(i||s)(t.rXU(E.i),t.rXU(L.hE))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-recipe-generator-container"]],decls:1,vars:5,consts:[[3,"maxSkills","compendium","squareChart","recipeConfig","lang"]],template:function(i,n){1&i&&t.nrm(0,"app-recipe-generator",0),2&i&&t.Y8G("maxSkills",n.maxSkills)("compendium",n.compendium)("squareChart",n.squareChart)("recipeConfig",n.recipeConfig)("lang",n.lang)},dependencies:[tt.h],encapsulation:2,changeDetection:0})}}return s})();var st=c(2649),nt=c(3452);const it=[{path:"",redirectTo:"demons",pathMatch:"full"},{path:"",component:U,data:{fusionTool:"chart"},children:[{path:"chart",component:q}]},{path:"",component:U,children:[{path:"demons/:demonName",component:G,children:[{path:"fissions",component:st.J},{path:"fusions",component:nt.y},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"demons",component:N},{path:"skills",component:r},{path:"recipes",component:et},{path:"settings",component:u}]},{path:"**",redirectTo:"demons",pathMatch:"full"}];let ot=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=t.$C({type:s})}static{this.\u0275inj=t.G2t({imports:[k.iI.forChild(it),k.iI]})}}return s})()},5768:(Q,M,c)=>{c.d(M,{i:()=>P});var k=c(2755);function F(r,a){const f={};for(const[u,h]of Object.entries(r))f[a[u]||u]={lvl:h.lvl,result:a[h.result]||h.result};return f}var t=c(4660);class E{constructor(a,f){this.compConfig=a,this.initImportedData(),this.updateDerivedData(f)}initImportedData(){const a={},f={},u={},h={},v={},l={},g={},d={},R="-".repeat(this.compConfig.ailmentElems.length);for(const[m,o]of Object.entries(this.compConfig.fusionSpells))for(const p of o)u[p]=m;for(const[m,o]of Object.entries(this.compConfig.resistCodes))g[m]=(o/1e3|0)<<10,d[m]=o%1e3/2.5|0;const b=(m,o,p)=>(m||o).split("").map((T,G)=>g[T]+(p?.[G]/2.5|0||d[T])),$="en"===this.compConfig.lang,V=$?"Innate resistance":"",_=$?"Self":"\u81ea\u8eab",K=$?["Weak ","Resist ","Null "]:["\u5f31","\u5f37","\u7121"],S={},Y={},W=this.compConfig.appCssClasses.includes("smt5v"),A=this.compConfig.alignments;for(const[m,o]of"wsn".split("").entries())S[g[o]>>10]=[],Y[g[o]>>10]=K[m];for(const[m,o]of Object.entries(Y))for(const p of this.compConfig.ailmentElems)S[m].push({name:o+p,element:"pas",effect:V,target:_,cost:0,rank:99,learnedBy:[],level:0});for(const m of this.compConfig.demonData)for(const[o,p]of Object.entries(m)){const T=p.race,G=A[o]||A[T]||"None-None";a[o]={name:o,race:T,align:G,lvl:p.lvl,currLvl:p.currLvl||p.lvl,skills:p.skills,price:2*p.price,stats:p.stats,resists:b(p.resists,p.resists,p.resmods),ailments:b(p.ailments,R,p.ailmods),inherits:parseInt((p.affinities||[-10]).map(z=>z>-10?"1":"0").join(""),2),affinities:p.affinities,fusion:p.fusion||"normal",prereq:p.prereq||""},u[T]&&(a[o].skills[u[T]]=5278),W&&"-"!==p.innate&&(a[o].price=2*p.innatePrice,a[o].skills=Object.assign({},p.skills),a[o].skills[p.innate]=0,u[G]&&(a[o].skills[u[G]]=4884),u[o]&&(a[o].skills[u[o]]=4884))}for(const m of this.compConfig.demonUnlocks)for(const[o,p]of Object.entries(m.conditions))for(const T of o.split(","))a[T].prereq=p;for(const m of this.compConfig.skillData)for(const[o,p]of Object.entries(m))f[o]={name:o,element:p.element,rank:p.rank,effect:p.effect,damage:p.damage||"",target:p.target||"Self",hits:p.hits||"",cost:p.cost||0,learnedBy:[],level:0},f[o].rank||(f[o].rank=99);for(const m of Object.values(S))for(const o of m)f[o.name]=o;const x=this.compConfig.elementTable;for(const[m,o]of Object.entries((0,t.Jc)(x.elems,x.pairs)))v[m]=o,a[m].fusion="special";for(const[m,o]of Object.entries(this.compConfig.specialRecipes))h[m]=o,"normal"===a[m].fusion&&(a[m].fusion=o.length>0?"special":"accident");for(const[m,o]of Object.entries(this.compConfig.evolveData)){const p=o.result;a[m].evolvesTo={price:a[p].price,race1:a[p].race,lvl1:o.lvl,name1:p},a[p].evolvesFrom={price:a[m].price,race1:a[m].race,lvl1:o.lvl,name1:m}}for(const m of this.compConfig.races)l[m]={};for(const[m,o]of Object.entries(a))l[o.race][o.lvl]=m;for(const m of Object.values(a).sort((o,p)=>o.currLvl-p.currLvl))if("enemy"!==m.fusion){for(const o of Object.keys(m.skills))f[o].learnedBy.push({demon:m.name,level:m.skills[o]});for(let o=0;o<m.ailments.length;o++)S[m.ailments[o]>>10]&&S[m.ailments[o]>>10][o].learnedBy.push({demon:m.name,level:0})}this.demons=a,this.skills=f,this.specialRecipes=h,this.specialPairRecipes=v,this.invertedDemons=l}updateDerivedData(a){const f=Object.assign({},this.demons),u=Object.keys(this.skills).map(l=>this.skills[l]),h={},v={};for(const l of this.compConfig.races)h[l]=[],v[l]=[];for(const[l,g]of Object.entries(this.demons))!this.isElementDemon(l)&&!this.isOverlappingResult(l)&&h[g.race].push(g.lvl),this.specialRecipes.hasOwnProperty(l)||v[g.race].push(g.lvl);for(const l of this.compConfig.races)h[l].sort((g,d)=>g-d),v[l].sort((g,d)=>g-d);for(const l of this.compConfig.races){const g=h[l],d=v[l],R=g.length,b=d.length;R&&b&&g[R-1]!==d[b-1]&&d.push(100)}for(const[l,g]of Object.entries(a))if(!g){const{race:d,lvl:R}=this.demons[l];delete f[l],h[d]=h[d].filter(b=>b!==R),v[d]=v[d].filter(b=>b!==R)}this._allDemons=Object.keys(f).map(l=>f[l]),this._allSkills=u.filter(l=>l.rank<99||l.learnedBy.length>0),this.allIngredients=h,this.allResults=v}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return Object.keys(this.specialRecipes).map(a=>this.demons[a])}getDemon(a){return this.demons[a]}getSkill(a){return this.skills[a]}getSkills(a){const f=this.compConfig.elemOrder,u=a.map(h=>this.skills[h]);return u.sort((h,v)=>1e4*(f[h.element]-f[v.element])+h.rank-v.rank),u}getIngredientDemonLvls(a){return this.allIngredients[a]||[]}getResultDemonLvls(a){return this.allResults[a]||[]}getSpecialNameEntries(a){return this.specialRecipes[a]||[]}getSpecialNamePairs(a){return this.specialPairRecipes[a]||[]}reverseLookupDemon(a,f){return this.invertedDemons[a][f]}reverseLookupSpecial(a){return[]}isElementDemon(a){return this.demons[a].race===this.compConfig.elementRace}isOverlappingResult(a){return!1}updateFusionSettings(a){this.updateDerivedData(a)}}var D=c(8063);let j=(()=>{class r extends D.p{static{this.LIGHT_RACES=["Herald","Megami","Avian","Tree","Deity","Avatar","Holy","Genma","Fury","Lady","Dragon","Kishin","Enigma","Entity","Wargod","Amatsu","Kunitsu","Godly","Chaos","\u5927\u5929\u4f7f","\u5973\u795e","\u970a\u9ce5","\u795e\u6a39","\u9b54\u795e","\u795e\u7363","\u8056\u7363","\u5e7b\u9b54","\u7834\u58ca\u795e","\u5730\u6bcd\u795e","\u9f8d\u795e","\u9b3c\u795e","\u79d8\u795e","\u5a01\u970a","\u8ecd\u795e","\u5929\u6d25\u795e","\u56fd\u6d25\u795e","\u795e\u970a","\u6df7\u6c8c\u738b"]}static{this.DARK_RACES=["Vile","Raptor","Wood","Reaper","Wilder","Jaki","Vermin","Tyrant","Drake","Spirit","Haunt","Ghost","Zealot","\u90aa\u795e","\u51f6\u9ce5","\u5996\u6a39","\u6b7b\u795e","\u5996\u7363","\u90aa\u9b3c","\u5e7d\u866b","\u9b54\u738b","\u90aa\u9f8d","\u60aa\u970a","\u5e7d\u9b3c","\u5e7d\u9b3c","\u72c2\u795e"]}constructor(f){super(),this.initCharts(f)}initCharts(f){const u=f.normalTable.races,h=f.normalTable.table,v=f.elementTable.elems,l=f.elementTable.races,g=f.elementTable.table;this.lvlModifier=f.lvlModifier,this.elementDemons=v,this.fusionChart=D.p.loadFusionTableJson(u,h),this.fissionChart=D.p.loadFissionTableJson(u,v,h),this.elementChart=D.p.loadElementTableJson(l,v,g),this.races=u}getLightDark(f){return-1!==r.LIGHT_RACES.indexOf(f)?1:-1!==r.DARK_RACES.indexOf(f)?-1:0}}return r})();var U=c(6947),X=c(609),L=c(1939),B=c(1090),N=c(2598),H=c(8935);let P=(()=>{class r extends X.d{constructor(f,u){const h=u.url.split("/"),v=Object.keys(f.configs)[0],l=f.configs[h[2]||h[1]]||f.configs[h[1]]||f.configs[v],g=l.translations.en.includes(h[1])?h[1]:"en",d="en"===g?l:function I(r,a){const f=r.translations.en.indexOf(a);if(-1===f)return r;const u=Object.entries(r.translations).reduce((l,[g,d])=>(l[g]=d[f],l),{}),h=l=>u[l]||l,v=r.races.map(h);return{appTitle:h(r.appTitle),translations:r.translations,lang:a,races:v,raceOrder:v.reduce((l,g,d)=>(l[g]=d,l),{}),appCssClasses:r.appCssClasses,affinityElems:r.affinityElems,skillData:r.skillData.map(l=>(0,k.en)(l,u)),skillElems:r.skillElems,elemOrder:r.elemOrder,resistCodes:r.resistCodes,affinityBonuses:r.affinityBonuses,lvlModifier:r.lvlModifier,hasLightDark:r.hasLightDark,demonData:r.demonData.map(l=>(0,k.C_)(l,u)),fusionSpells:(0,k.Fr)(r.fusionSpells,u),evolveData:F(r.evolveData,u),alignments:r.alignments,baseStats:r.baseStats.map(h),resistElems:r.resistElems,ailmentElems:r.ailmentElems,demonUnlocks:(0,k.tQ)(r.demonUnlocks,u),normalTable:(0,k.ji)(r.normalTable,u),elementTable:(0,k.ji)(r.elementTable,u),specialRecipes:(0,k.Fr)(r.specialRecipes,u),defaultRecipeDemon:h(r.defaultRecipeDemon),elementRace:h(r.elementRace),settingsKey:`${r.settingsKey}-${a}`,settingsVersion:r.settingsVersion}}(l,g),R=new L.U(d.demonUnlocks,[]);super(new E(d,R.demonToggles),new j(d),R,d.settingsKey,d.settingsVersion),this.fissionCalculator=U.ov,this.fusionCalculator=U.nv,this.compConfig=d,this.appName=this.compConfig.appTitle+(0,k.oO)(B.fu.FusionCalculator,d.lang)}static{this.\u0275fac=function(u){return new(u||r)(N.KVO(U.HI),N.KVO(H.Ix))}}static{this.\u0275prov=N.jDH({token:r,factory:r.\u0275fac})}}return r})()},4503:(Q,M,c)=>{c.d(M,{G:()=>D});var k=c(177),I=c(3887),F=c(9447),t=c(7439),E=c(2598);let D=(()=>{class j{static forRoot(){return{ngModule:j}}static{this.\u0275fac=function(L){return new(L||j)}}static{this.\u0275mod=E.$C({type:j})}static{this.\u0275inj=E.G2t({imports:[k.MD,I.G,F.SharedCompendiumModule,t.S]})}}return j})()}}]);