"use strict";(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[604],{8615:(G,$,d)=>{d.d($,{R:()=>P});var i=d(4769),e=d(6593),j=d(4487),x=d(6814);function H(F,k){if(1&F&&(i.TgZ(0,"th"),i._uU(1),i.qZA()),2&F){const b=k.$implicit,D=i.oxw();i.xp6(1),i.Oqu(b.slice(0,D.nameCut))}}function Q(F,k){if(1&F&&(i.TgZ(0,"td",4),i._uU(1),i.qZA()),2&F){const b=k.$implicit,D=i.oxw(2);i.Q6J("ngClass",b.slice(0,4)),i.xp6(1),i.Oqu(b.slice(4,D.nameCut+4))}}function M(F,k){if(1&F&&(i.TgZ(0,"tr")(1,"th"),i._uU(2),i.qZA(),i.YNc(3,Q,2,2,"td",3),i.TgZ(4,"th"),i._uU(5),i.qZA()()),2&F){const b=k.$implicit;i.xp6(2),i.Oqu(b[0]),i.xp6(1),i.Q6J("ngForOf",b.slice(1,b.length-1)),i.xp6(2),i.Oqu(b[b.length-1])}}function S(F,k){if(1&F&&(i.TgZ(0,"th"),i._uU(1),i.qZA()),2&F){const b=k.$implicit,D=i.oxw();i.xp6(1),i.Oqu(b.slice(0,D.nameCut))}}function Z(F,k){if(1&F&&(i.TgZ(0,"tr")(1,"th",0),i._uU(2),i.qZA()()),2&F){const b=i.oxw();i.xp6(1),i.uIk("colspan",b.table[0].length),i.xp6(1),i.AsE("",b.appName," ",b.tripTitle,"")}}class P{static#e=this.RESULT_COLORS=Object.entries({oran:["-2","Erthys","Gnome","Saki","Saki Mitama","Random","\u30a2\u30fc\u30b7\u30fc\u30ba","\u30ce\u30fc\u30e0","\u30b5\u30ad\u30df\u30bf\u30de"],redd:["-1","Flaemis","Salamander","Ara ","Ara Mitama","Fiend","\u30d5\u30ec\u30a4\u30df\u30fc\u30ba","\u30b5\u30e9\u30de\u30f3\u30c0\u30fc","\u30a2\u30e9\u30df\u30bf\u30de"],gree:["1","Aeros","Sylph","Kusi","Kusi Mitama","UMA","\u30a8\u30a2\u30ed\u30b9","\u30b7\u30eb\u30ad\u30fc","\u30af\u30b7\u30df\u30bf\u30de"],blue:["2","Aquans","Undine","Nigi","Nigi Mitama","Enigma","\u30a2\u30af\u30a2\u30f3\u30ba","\u30a6\u30f3\u30c7\u30a3\u30fc\u30cd","\u30cb\u30ae\u30df\u30bf\u30de"]});constructor(k,b){this.title2=k,this.route=b,this.normTitle="Normal Fusions",this.tripTitle="",this.isPersona=!1,this.filterDarks=!0,this.langEn=!0,this.subscriptions=[],this.table=[],this.nameCut=4}ngOnInit(){this.subscriptions.push(this.route.parent.data.subscribe(k=>{this.appName=k.appName||"Shin Megami Tensei",this.nameCut=this.langEn?4:2,this.title2.setTitle(this.langEn?`Fusion Chart - ${this.appName} Fusion Calculator`:`\u5408\u4f53\u8868 ${this.appName} \u5408\u4f53\u30a2\u30d7\u30ea`)}))}ngOnChanges(){this.normChart&&this.fillFusionChart()}ngOnDestroy(){for(const k of this.subscriptions)k.unsubscribe()}fillFusionChart(){const k="noneNone",D=P.RESULT_COLORS.reduce((O,[v,t])=>t.reduce((n,u)=>(n[u]=v,n),O),{}),A=this.normChart.elementDemons;let U=[],y=this.normChart.races,E=[];this.filterDarks&&(U=this.normChart.races.filter(O=>this.normChart.getLightDark(O)>0),y=this.normChart.races.filter(O=>0===this.normChart.getLightDark(O)),E=this.normChart.races.filter(O=>-1===this.normChart.getLightDark(O)),0===E.length&&U.length>0&&(U=this.normChart.races.filter(O=>this.normChart.getLightDark(O)>-1),y=[],E=this.normChart.races.filter(O=>this.normChart.getLightDark(O)<-1)));const W=U.length-E.length,N=U.concat(y,A),z=E.length?E.concat(Array(N.length-E.length).fill("")):N,J=this.mitaTable?N:U.concat(y,Array(A.length).fill("")),K=this.mitaTable||E.length?Array(W).fill("").concat(E,y,A):N;this.table=[[""].concat(N,[""])];for(let O=0;O<K.length;O++){const v=Array(N.length+2).fill("empt-"),t=K[O],n=J[O],u=-1!==A.indexOf(t),h=-1!==A.indexOf(n);this.table.push(v),v[0]=t,v[v.length-1]=n;for(let o=O;o<N.length;o++){const m=N[o],r=-1!==A.indexOf(m);if(r&&h){const p=A.indexOf(n),f=A.indexOf(m),l=this.mitaTable[p][f-p-1];v[o+1]=l?(D[l]||"norm")+l:k}else if(r&&n){const p=this.normChart.getElemFusions(m)[n];v[o+1]=p?(D[p]||"rank")+(p>0?"+":"")+p.toString():k}else if(m&&n){const p=this.isPersona&&m===n?m:this.normChart.getRaceFusion(m,n);v[o+1]=p?(D[p]||(m===n?"elem":"norm"))+p:k}}if(this.tripChart)for(let o=0;o<=O-W;o++){const m=z[o];if(m&&u){const r=this.tripChart.getElemFusions(t)[m];v[o+1]=r?(D[r]||"rank")+(r>0?"+":"")+r.toString():k}else if(m&&t){const r=this.tripChart.getRaceFusion(m,t);v[o+1]=r?(D[r]||(m===t?"elem":"trip"))+r:k}}if(-1!==t.indexOf(" x ")){const[o,m]=t.split(" x "),r=o.slice(0,3)+"x"+m.slice(0,3);v[0]=r,v[v.length-1]=r}else if(-1!==t.indexOf(" ")){const o=t.split(" ")[0];v[0]=o,v[v.length-1]=o}}for(let O=0;O<this.table[0].length;O++){const v=this.table[0][O];if(-1!==v.indexOf(" x ")){const[t,n]=v.split(" x ");this.table[0][O]=t.slice(0,2)+n.slice(0,2)}}this.table.push([""].concat(z,[""]))}static#t=this.\u0275fac=function(b){return new(b||P)(i.Y36(e.Dx),i.Y36(j.gz))};static#s=this.\u0275cmp=i.Xpm({type:P,selectors:[["app-fusion-chart"]],inputs:{normChart:"normChart",tripChart:"tripChart",mitaTable:"mitaTable",normTitle:"normTitle",tripTitle:"tripTitle",isPersona:"isPersona",filterDarks:"filterDarks",langEn:"langEn",counter:"counter"},features:[i.TTD],decls:12,vars:7,consts:[[1,"title"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(b,D){1&b&&(i.TgZ(0,"table")(1,"tbody")(2,"tr")(3,"th",0),i._uU(4),i.qZA()(),i.TgZ(5,"tr"),i.YNc(6,H,2,1,"th",1),i.qZA(),i.YNc(7,M,6,3,"tr",1),i.TgZ(8,"tr"),i.YNc(9,S,2,1,"th",1),i.qZA(),i.YNc(10,Z,3,3,"tr",2),i.qZA(),i._UZ(11,"tbody"),i.qZA()),2&b&&(i.xp6(3),i.uIk("colspan",D.table[0].length),i.xp6(1),i.AsE("",D.appName," ",D.normTitle,""),i.xp6(2),i.Q6J("ngForOf",D.table[0]),i.xp6(1),i.Q6J("ngForOf",D.table.slice(1,D.table.length-1)),i.xp6(2),i.Q6J("ngForOf",D.table[D.table.length-1]),i.xp6(1),i.Q6J("ngIf",D.tripTitle))},dependencies:[x.mk,x.sg,x.O5],styles:["table[_ngcontent-%COMP%]{width:auto;margin:0 auto;white-space:nowrap}td.elem[_ngcontent-%COMP%]{color:#0f0}td.trip[_ngcontent-%COMP%]{color:#d3d3d3}td.oran[_ngcontent-%COMP%]{color:orange}td.redd[_ngcontent-%COMP%]{color:red}td.gree[_ngcontent-%COMP%]{color:#0f0}td.blue[_ngcontent-%COMP%]{color:#0ff}td.none[_ngcontent-%COMP%]{color:transparent}td.empt[_ngcontent-%COMP%]{background-color:transparent;color:transparent}"],changeDetection:0})}},6829:(G,$,d)=>{d.d($,{V:()=>B});var i=d(4487),e=d(4769),j=d(7601),x=d(6814),H=d(5390);let Q=(()=>{class a{constructor(s){this.appCssClasses=["smtnes","smt1"],this.appCssClasses=s.compConfig.appCssClasses}static#e=this.\u0275fac=function(c){return new(c||a)(e.Y36(j.Y))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-smt1-compendium"]],decls:1,vars:2,consts:[[3,"ngClass","hasSettings"]],template:function(c,g){1&c&&e._UZ(0,"app-demon-compendium",0),2&c&&e.Q6J("ngClass",g.appCssClasses)("hasSettings",!1)},dependencies:[x.mk,H.e],styles:[".devilsum div.element-icon,.smtnes div.element-icon{height:12px;background-size:12px;background-repeat:no-repeat;background-position:center;color:transparent}.smtnes div.element-icon.sword{background-image:url(/assets/images/smt4f/sword.png)}.smtnes div.element-icon.gun{background-image:url(/assets/images/smtsj/gun.png)}.smtnes div.element-icon.fire{background-image:url(/assets/images/smtsj/fir.png)}.smtnes div.element-icon.i4{background-image:url(/assets/images/smtsj/fir.png)}.smtnes div.element-icon.ice{background-image:url(/assets/images/smtsj/ice.png)}.smtnes div.element-icon.i5{background-image:url(/assets/images/smtsj/ice.png)}.smtnes div.element-icon.elec{background-image:url(/assets/images/smtsj/ele.png)}.smtnes div.element-icon.i6{background-image:url(/assets/images/smtsj/ele.png)}.smtnes div.element-icon.force{background-image:url(/assets/images/smtsj/win.png)}.smtnes div.element-icon.i7{background-image:url(/assets/images/smtsj/win.png)}.smtnes div.element-icon.nerve{background-image:url(/assets/images/smt4f/panic.png)}.smtnes div.element-icon.almighty{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.i13{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.expel{background-image:url(/assets/images/smtsj/exp.png)}.smtnes div.element-icon.i8{background-image:url(/assets/images/smtsj/exp.png)}.smtnes div.element-icon.death{background-image:url(/assets/images/smtsj/cur.png)}.smtnes div.element-icon.i9{background-image:url(/assets/images/smtsj/cur.png)}.smtnes div.element-icon.curse{background-image:url(/assets/images/smt4f/poison.png)}.smtnes div.element-icon.bind{background-image:url(/assets/images/smt4f/bind.png)}.smtnes div.element-icon.rush{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.punch{background-image:url(/assets/images/smt4f/sword.png)}.smtnes div.element-icon.kick{background-image:url(/assets/images/smtsj/gun.png)}.smtnes div.element-icon.flying{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.energy{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.recovery{background-image:url(/assets/images/smtsj/rec.png)}.smtnes div.element-icon.support{background-image:url(/assets/images/smtsj/sup.png)}.smtnes div.element-icon.special{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.attack{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.tech{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.slash{background-image:url(/assets/images/smt4f/sword.png)}.smtnes div.element-icon.charge{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.blunt{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.handgun{background-image:url(/assets/images/smtsj/gun.png)}.smtnes div.element-icon.penetrate{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.spread{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.mystic{background-image:url(/assets/images/smt4f/poison.png)}.smtnes div.element-icon.mind{background-image:url(/assets/images/smt4f/bind.png)}.smtnes div.element-icon.suicide{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.passive{background-image:url(/assets/images/smtsj/pas.png)}.smtnes div.element-icon.defend{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.phys{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.gro{background-image:url(/assets/images/smt4f/sword.png)}.smtnes div.element-icon.air{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.fir{background-image:url(/assets/images/smtsj/fir.png)}.smtnes div.element-icon.ele{background-image:url(/assets/images/smtsj/ele.png)}.smtnes div.element-icon.for{background-image:url(/assets/images/smtsj/win.png)}.smtnes div.element-icon.gig{background-image:url(/assets/images/smt4f/bind.png)}.smtnes div.element-icon.alm{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.lig{background-image:url(/assets/images/smtsj/exp.png)}.smtnes div.element-icon.dar{background-image:url(/assets/images/smtsj/cur.png)}.smtnes div.element-icon.phy{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.ail{background-image:url(/assets/images/smtsj/ail.png)}.smtnes div.element-icon.rec{background-image:url(/assets/images/smtsj/rec.png)}.smtnes div.element-icon.sup{background-image:url(/assets/images/smtsj/sup.png)}.smtnes div.element-icon.psy{background-image:url(/assets/images/smt4f/panic.png)}.smtnes div.element-icon.spear{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.thrown{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.ailment{background-image:url(/assets/images/smtsj/ail.png)}.smtnes div.element-icon.quad{background-image:url(/assets/images/smt4f/curse.png)}.smtnes div.element-icon.elem{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.none{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.strike{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.i0{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.skill{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.temp{background-image:url(/assets/images/smt4f/smirk.png)}.smtnes div.element-icon.i17{background-image:url(/assets/images/smt4f/smirk.png)}.smtnes div.element-icon.dark{background-image:url(/assets/images/smt4f/curse.png)}.smtnes div.element-icon.i18{background-image:url(/assets/images/smt4f/curse.png)}.smtnes div.element-icon.witch{background-image:url(/assets/images/smtsj/ail.png)}.smtnes div.element-icon.i19{background-image:url(/assets/images/smtsj/ail.png)}.smtnes div.element-icon.rea{background-image:url(/assets/images/smtsj/rec.png)}.smtnes div.element-icon.i20{background-image:url(/assets/images/smtsj/rec.png)}.smtnes div.element-icon.reb{background-image:url(/assets/images/smtsj/sup.png)}.smtnes div.element-icon.i21{background-image:url(/assets/images/smtsj/sup.png)}.smtnes div.element-icon.element{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.hero{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.i22{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.i23{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.i24{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.starter{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.autorec{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.phase{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.explore{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.area{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.plugin{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.self{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.universe{background-image:url(/assets/images/smtsj/spe.png)}.smtnes td.align.ll,.smtnes td.align.nl,.smtnes td.align.dl{color:#0ff}.smtnes td.align.lc,.smtnes td.align.nc,.smtnes td.align.dc{color:tomato}.smtnes td.align.el{color:#0f0}.smtnes td.align.ec{color:gold}.smt1 th.title,.smt1 th.nav.active,.smt1 th.nav.active a{background-color:#608341;color:#fff}.smt2 th.title,.smt2 th.nav.active,.smt2 th.nav.active a{background-color:#2f4f4f;color:#fff}.smtif th.title,.smtif th.nav.active,.smtif th.nav.active a{background-color:#8fbc8f;color:#000}.dsum th.title,.dsum th.nav.active,.dsum th.nav.active a{background-color:#4372aa;color:#fff}.dssh th.title,.dssh th.nav.active,.dssh th.nav.active a{background-color:#302878;color:#fff}.mjn2 th.title,.mjn2 th.nav.active,.mjn2 th.nav.active a{background-color:#514f7e;color:#fff}.smt9 th.title,.smt9 th.nav.active,.smt9 th.nav.active a{background-color:#693cbe;color:#fff}.smtim th.title,.smtim th.nav.active,.smtim th.nav.active a{background-color:#009d96;color:#fff}\n"],encapsulation:2,changeDetection:0})}return a})();var M=d(1032),S=d(6593),Z=d(4101);let P=(()=>{class a extends M.l{constructor(s,c,g){super(s,c,g),this.appName=`List of Demons - ${g.appName}`,this.compConfig=g.compConfig,this.defaultSortFun=(L,X)=>200*(this.compConfig.raceOrder[L.race]-this.compConfig.raceOrder[X.race])+X.lvl-L.lvl}static#e=this.\u0275fac=function(c){return new(c||a)(e.Y36(S.Dx),e.Y36(e.sBO),e.Y36(j.Y))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-demon-list-container"]],features:[e.qOj],decls:2,vars:7,consts:[[3,"raceOrder","statHeaders","resistHeaders","inheritOrder","rowData"]],template:function(c,g){1&c&&(e._UZ(0,"app-smt-demon-list",0),e.ALo(1,"async")),2&c&&e.Q6J("raceOrder",g.compConfig.raceOrder)("statHeaders",g.compConfig.baseStats)("resistHeaders",g.compConfig.resistElems)("inheritOrder",g.compConfig.elemOrder)("rowData",e.lcZ(1,5,g.demons))},dependencies:[Z.Q,x.Ov],encapsulation:2,changeDetection:0})}return a})();var F=d(4330),k=d(3934);let b=(()=>{class a extends F.e{constructor(s,c,g){super(s,c,g),this.appName=`List of Skills - ${g.appName}`,this.compConfig=g.compConfig,this.defaultSortFun=(L,X)=>1e4*(this.compConfig.elemOrder[L.element]-this.compConfig.elemOrder[X.element])+L.rank-X.rank}static#e=this.\u0275fac=function(c){return new(c||a)(e.Y36(S.Dx),e.Y36(e.sBO),e.Y36(j.Y))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-skill-list-container"]],features:[e.qOj],decls:2,vars:6,consts:[[3,"elemOrder","hasRank","hasTarget","rowData"]],template:function(c,g){1&c&&(e._UZ(0,"app-smt-skill-list",0),e.ALo(1,"async")),2&c&&e.Q6J("elemOrder",g.compConfig.elemOrder)("hasRank",!1)("hasTarget",!0)("rowData",e.lcZ(1,4,g.skills))},dependencies:[k.J,x.Ov],encapsulation:2,changeDetection:0})}return a})();var D=d(8615);function A(a,R){if(1&a&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&a){const s=R.$implicit;e.xp6(1),e.Oqu(s.slice(0,4))}}function U(a,R){if(1&a&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&a){const s=R.$implicit;e.xp6(1),e.Oqu(s.slice(0,4))}}function y(a,R){if(1&a&&(e.TgZ(0,"tr")(1,"th"),e._uU(2),e.qZA(),e.YNc(3,U,2,1,"td",1),e.TgZ(4,"th"),e._uU(5),e.qZA()()),2&a){const s=R.$implicit;e.xp6(2),e.Oqu(s[0]),e.xp6(1),e.Q6J("ngForOf",s.slice(1,s.length-1)),e.xp6(2),e.Oqu(s[s.length-1])}}function E(a,R){if(1&a&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&a){const s=R.$implicit;e.xp6(1),e.Oqu(s.slice(0,4))}}let W=(()=>{class a{constructor(){this.table=[]}ngOnChanges(){this.fillFusionChart()}fillFusionChart(){this.table=[];const s=this.speciesChart.races,c=[""].concat(s,[""]);this.table.push(c);for(let g=0;g<s.length;g++)for(let L=g+1;L<s.length;L++){const X="3"+s[g]+"|3"+s[L];this.table.push([s[g]].concat(s.map(V=>this.speciesChart.getRaceFusion("3"+V,X)),[s[L]]))}this.table.push(c)}static#e=this.\u0275fac=function(c){return new(c||a)};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-species-triple-chart"]],inputs:{speciesChart:"speciesChart",title:"title"},features:[e.TTD],decls:9,vars:5,consts:[[1,"title"],[4,"ngFor","ngForOf"]],template:function(c,g){1&c&&(e.TgZ(0,"table")(1,"tr")(2,"th",0),e._uU(3),e.qZA()(),e.TgZ(4,"tr"),e.YNc(5,A,2,1,"th",1),e.qZA(),e.YNc(6,y,6,3,"tr",1),e.TgZ(7,"tr"),e.YNc(8,E,2,1,"th",1),e.qZA()()),2&c&&(e.xp6(2),e.uIk("colspan",g.table[0].length),e.xp6(1),e.Oqu(g.title),e.xp6(2),e.Q6J("ngForOf",g.table[0]),e.xp6(1),e.Q6J("ngForOf",g.table.slice(1,g.table.length-1)),e.xp6(2),e.Q6J("ngForOf",g.table[g.table.length-1]))},dependencies:[x.sg],styles:["table[_ngcontent-%COMP%]{width:auto;margin:0 auto}td.elem[_ngcontent-%COMP%]{color:#0f0}td.trip[_ngcontent-%COMP%]{color:#d3d3d3}td.ra-2[_ngcontent-%COMP%]{color:orange}td.ra-1[_ngcontent-%COMP%]{color:red}td.ran1[_ngcontent-%COMP%]{color:#0f0}td.ran2[_ngcontent-%COMP%]{color:#0ff}td.None[_ngcontent-%COMP%]{color:#222}td.Sala[_ngcontent-%COMP%], td.Flae[_ngcontent-%COMP%], td.Ara[_ngcontent-%COMP%], td.Fien[_ngcontent-%COMP%]{color:red}td.Undi[_ngcontent-%COMP%], td.Aqua[_ngcontent-%COMP%], td.Nigi[_ngcontent-%COMP%], td.Enig[_ngcontent-%COMP%]{color:#0ff}td.Sylp[_ngcontent-%COMP%], td.Aero[_ngcontent-%COMP%], td.Kusi[_ngcontent-%COMP%], td.UMA[_ngcontent-%COMP%]{color:#0f0}td.Gnom[_ngcontent-%COMP%], td.Erth[_ngcontent-%COMP%], td.Saki[_ngcontent-%COMP%], td.Rand[_ngcontent-%COMP%]{color:orange}td.Empt[_ngcontent-%COMP%]{background-color:#000;color:transparent}"],changeDetection:0})}return a})();function N(a,R){if(1&a&&(e.ynx(0),e._UZ(1,"app-fusion-chart",1)(2,"app-fusion-chart",1),e.BQk()),2&a){const s=e.oxw();e.xp6(1),e.Q6J("normChart",s.normChart)("tripChart",s.normChart)("mitaTable",s.mitamaTable)("normTitle","Light and Neutral Normal Fusions")("tripTitle","Dark Normal Fusions"),e.xp6(1),e.Q6J("normChart",s.tripChart)("tripChart",s.tripChart)("mitaTable",s.tripleMitamaTable)("normTitle","Light and Neutral Triple Fusions")("tripTitle","Dark Triple Fusions")}}function z(a,R){if(1&a&&(e.ynx(0),e._UZ(1,"app-fusion-chart",2)(2,"app-species-triple-chart",3),e.BQk()),2&a){const s=e.oxw();e.xp6(1),e.Q6J("normChart",s.fullChart)("mitaTable",s.mitamaTable)("filterDarks",!1)("normTitle","Normal Fusions"),e.xp6(1),e.Q6J("speciesChart",s.tripChart)("title",s.appName+" - Triple Fusions")}}function J(a,R){if(1&a&&(e.ynx(0),e._UZ(1,"app-fusion-chart",1)(2,"app-species-triple-chart",3),e.BQk()),2&a){const s=e.oxw();e.xp6(1),e.Q6J("normChart",s.fullChart)("tripChart",s.fullChart)("mitaTable",s.mitamaTable)("normTitle","Light and Neutral Normal Fusions")("tripTitle","Dark Normal Fusions"),e.xp6(1),e.Q6J("speciesChart",s.tripChart)("title",s.appName+" - Triple Fusions")}}let K=(()=>{class a{constructor(s){this.fusionDataService=s,this.subscriptions=[]}ngOnInit(){const s=this.fusionDataService.compConfig;this.appName=s.appTitle,this.mitamaTable=s.mitamaTable,this.tripleMitamaTable=s.tripleMitamaTable,this.hasDarkRanks=s.darknessRecipes,this.fusionDataService.compConfig.useSpeciesFusion&&this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(c=>{this.fullChart=c})),this.subscriptions.push(this.fusionDataService.squareChart.subscribe(c=>{this.normChart=c.normalChart,this.tripChart=c.tripleChart}))}ngOnDestroy(){for(const s of this.subscriptions)s.unsubscribe()}static#e=this.\u0275fac=function(c){return new(c||a)(e.Y36(j.Y))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-fusion-chart-container"]],decls:3,vars:3,consts:[[4,"ngIf"],[3,"normChart","tripChart","mitaTable","normTitle","tripTitle"],[3,"normChart","mitaTable","filterDarks","normTitle"],[3,"speciesChart","title"]],template:function(c,g){1&c&&(e.YNc(0,N,3,10,"ng-container",0),e.YNc(1,z,3,6,"ng-container",0),e.YNc(2,J,3,7,"ng-container",0)),2&c&&(e.Q6J("ngIf",!g.fullChart),e.xp6(1),e.Q6J("ngIf",g.fullChart&&!g.hasDarkRanks),e.xp6(1),e.Q6J("ngIf",g.fullChart&&g.hasDarkRanks))},dependencies:[x.O5,D.R,W],encapsulation:2,changeDetection:0})}return a})();var O=d(7880),v=d(8520),t=d(1009),n=d(755),u=d(4069),h=d(8711);function o(a,R){if(1&a&&e._UZ(0,"app-demon-stats",8),2&a){const s=e.oxw(2);e.Q6J("title","Attacks")("statHeaders",s.compConfig.baseAtks)("stats",s.demon.atks)}}function m(a,R){if(1&a&&e._UZ(0,"app-demon-skills",5),2&a){const s=e.oxw(2);e.Q6J("title","Inheritable Skills")("hasTarget",!0)("hasLvl",!1)("elemOrder",s.compConfig.elemOrder)("compendium",s.compendium)("skillLevels",s.compConfig.inheritSkills[s.demon.inherits])}}const r=function(){return["Drop"]};function p(a,R){if(1&a&&(e.ynx(0),e.TgZ(1,"app-demon-stats",2)(2,"td"),e._uU(3),e.qZA()(),e.YNc(4,o,1,3,"app-demon-stats",3),e._UZ(5,"app-demon-resists",4)(6,"app-demon-skills",5),e.YNc(7,m,1,6,"app-demon-skills",6),e._UZ(8,"app-smt-fusions",7),e.BQk()),2&a){const s=e.oxw();e.xp6(1),e.Q6J("title","Lvl "+s.demon.lvl+" "+s.demon.race+" "+s.demon.name)("price",s.demon.price)("statHeaders",s.compConfig.baseStats)("fusionHeaders",e.DdM(18,r))("stats",s.demon.stats)("inherits",s.demon.inherits),e.xp6(2),e.Oqu(s.demon.drop),e.xp6(1),e.Q6J("ngIf",s.compConfig.baseAtks.length),e.xp6(1),e.Q6J("resistHeaders",s.compConfig.resistElems)("resists",s.demon.resists),e.xp6(1),e.Q6J("title","Innate Skills")("hasTarget",!0)("hasLvl",!1)("elemOrder",s.compConfig.elemOrder)("compendium",s.compendium)("skillLevels",s.demon.skills),e.xp6(1),e.Q6J("ngIf",s.compConfig.inheritSkills),e.xp6(1),e.Q6J("hasTripleFusion",!0)}}function f(a,R){if(1&a&&e._UZ(0,"app-demon-missing",9),2&a){const s=e.oxw();e.Q6J("name",s.name)}}let l=(()=>{class a{static#e=this.\u0275fac=function(c){return new(c||a)};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"title","price","statHeaders","fusionHeaders","stats","inherits"],[3,"title","statHeaders","stats",4,"ngIf"],[3,"resistHeaders","resists"],[3,"title","hasTarget","hasLvl","elemOrder","compendium","skillLevels"],[3,"title","hasTarget","hasLvl","elemOrder","compendium","skillLevels",4,"ngIf"],[3,"hasTripleFusion"],[3,"title","statHeaders","stats"],[3,"name"]],template:function(c,g){1&c&&(e.YNc(0,p,9,19,"ng-container",0),e.YNc(1,f,1,1,"app-demon-missing",1)),2&c&&(e.Q6J("ngIf",g.demon),e.xp6(1),e.Q6J("ngIf",!g.demon))},dependencies:[x.O5,O.t,v.O,t.I,n.n,u.O],encapsulation:2,changeDetection:0})}return a})(),C=(()=>{class a{constructor(s,c,g,L){this.route=s,this.title=c,this.currentDemonService=g,this.fusionDataService=L,this.subscriptions=[],this.appName="Test App",this.appName=L.appName,this.compConfig=L.compConfig}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const s of this.subscriptions)s.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(s=>{this.compendium=s,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(s=>{this.name=s,this.getDemonEntry()})),this.route.params.subscribe(s=>{this.currentDemonService.nextCurrentDemon(s.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(`${this.name} - ${this.appName}`),this.demon=this.compendium.getDemon(this.name))}static#e=this.\u0275fac=function(c){return new(c||a)(e.Y36(i.gz),e.Y36(S.Dx),e.Y36(h.s),e.Y36(j.Y))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-demon-entry-container"]],decls:1,vars:4,consts:[[3,"name","demon","compConfig","compendium"]],template:function(c,g){1&c&&e._UZ(0,"app-demon-entry",0),2&c&&e.Q6J("name",g.name)("demon",g.demon)("compConfig",g.compConfig)("compendium",g.compendium)},dependencies:[l],encapsulation:2,changeDetection:0})}return a})();var T=d(5657),_=d(4689),I=d(6857),Y=d(4170);const w=[{path:"",redirectTo:"demons",pathMatch:"full"},{path:"",component:Q,data:{fusionTool:"chart"},children:[{path:"chart",component:K}]},{path:"",component:Q,children:[{path:"demons/:demonName",component:C,children:[{path:"fissions/triple",component:I.p},{path:"fusions/triple",component:Y.n},{path:"fissions",component:T.t},{path:"fusions",component:_.$},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"demons",component:P},{path:"skills",component:b}]},{path:"**",redirectTo:"demons",pathMatch:"full"}];let B=(()=>{class a{static#e=this.\u0275fac=function(c){return new(c||a)};static#t=this.\u0275mod=e.oAB({type:a});static#s=this.\u0275inj=e.cJS({imports:[i.Bz.forChild(w),i.Bz]})}return a})()},7601:(G,$,d)=>{d.d($,{Y:()=>O});var i=d(5619);class e{constructor(t){this.pairRecipes={},this.initImportedData(t),this.updateDerivedData(t)}initImportedData(t){const n={},u={},h={},o={},m=t.baseStats.length,r=t.resistElems.length,p={};for(const[f,l]of Object.entries(t.resistCodes))p[f]=((l/1e3|8)<<10)+(l%1e3/2.5|0);for(const[f,l]of Object.entries(t.demonData)){const C="Shin Megami Tensei IMAGINE"!==t.appTitle?l.skills.reduce((T,_,I)=>(_&&(T[_.replace("*","")]=I-8),T),{}):l.skills;n[f]={name:f,race:l.race,lvl:l.lvl,currLvl:l.lvl,fusion:"normal",inherits:t.inheritSkills?t.skillElems.indexOf(l.inherit):24,drop:l.drop||"-",price:Math.pow(Math.floor(l.lvl),3),stats:l.stats.slice(0,m),atks:l.atks||[],resists:l.resists.substring(0,r).split("").map(T=>p[T]),align:l.align||t.alignData.races[l.race],skills:C}}for(const[f,l]of Object.entries(t.skillData)){const C="recovery"===l.element?" Rec ":" Dmg ";u[f]={name:f,element:l.element,power:l.power||0,cost:l.cost||0,rank:(l.enemy?99:0)+(1023&l.cost||0)/100,effect:(l.power?l.power.toString()+C:" ")+(l.effect||""),target:l.target,level:0,learnedBy:[]}}for(const f of Object.values(n).sort((l,C)=>l.lvl-C.lvl))for(const[l,C]of Object.entries(f.skills))u[l].learnedBy.push({demon:f.name,level:C});if(t.specialRecipes)for(const[f,l]of Object.entries(t.specialRecipes))n[f].fusion=l.fusion||"special",l.prereq&&(n[f].prereq=l.prereq),l.special&&(h[f]=l.special),l.pairs&&(o[f]=l.pairs.map(C=>{const[T,_]=C.split(" x ");return{name1:T,name2:_}}));this.demons=n,this.skills=u,this.elementDemons=t.elementTable.elems,this.specialRecipes=h,this.pairRecipes=o}updateDerivedData(t){const n={},u={},h={};for(const o of t.races)n[o]={},u[o]=[],h[o]=[];for(const[o,m]of Object.entries(this.demons))n[m.race][m.lvl]=o,u[m.race].push(m.lvl),"normal"===m.fusion&&h[m.race].push(m.lvl);for(const[o,m]of Object.entries(t.species)){const r="3"+o;n[o]={},u[o]=[],h[o]=[],n[r]={},u[r]=[],h[r]=[];for(let p=m.length;p>0;p--){const f=m[p-1];let l=m.length-p;"d"==t.alignData.races[f].charAt(0)?l-=400:(Object.assign(n[o],n[f]),u[o]=u[o].concat(u[f]),h[o]=h[o].concat(h[f]));for(const[C,T]of Object.entries(n[f])){const _=(100*parseInt(C)+l)/100;n[r][_]=T.toString(),u[r].push(_),h[r].push(_)}}}for(const o of Object.keys(u))u[o].sort((m,r)=>m-r),h[o].sort((m,r)=>m-r);this._allDemons=Object.values(this.demons),this._allSkills=Object.values(this.skills),this.invertedDemons=n,this.allIngredients=u,this.allResults=h}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return Object.keys(this.specialRecipes).map(t=>this.demons[t])}getDemon(t){return this.demons[t]}getSkill(t){return this.skills[t]}getSkills(t){const n=t.map(u=>this.skills[u]);return n.sort((u,h)=>1e4*(this.compConfig.elemOrder[u.element]-this.compConfig.elemOrder[h.element])+u.rank-h.rank),n}getIngredientDemonLvls(t){return this.allIngredients[t]||[]}getResultDemonLvls(t){return this.allResults[t]||[]}getSpecialNameEntries(t){return this.specialRecipes[t]||[]}getSpecialNamePairs(t){return this.pairRecipes[t]||[]}reverseLookupDemon(t,n){return this.invertedDemons[t][n]}reverseLookupSpecial(t){return[]}isElementDemon(t){return-1!==this.elementDemons.indexOf(t)}updateFusionSettings(t){}}var j=d(6262);class x extends j.g{constructor(t,n){super(),this.elementDemons=[],this.lvlModifier=1.5,this.hasDarkTable=!1,this.initCharts(t,n)}initCharts(t,n){this.alignments=t.alignData.races,this.speciesLookup=t.speciesLookup,this.elementDemons=n?t.tripleElementTable.elems:t.elementTable.elems;const u=n?t.tripleTable.races:t.normalTable.races,h=n?t.tripleTable.table:t.normalTable.table,o=j.g.loadFusionTableJson(u,h),m=j.g.loadFissionTableJson(u,[],h);if(this.lvlModifier=n?t.tripleLvlModifier:t.normalLvlModifier,t.darkTable){this.hasDarkTable=!0;const r=n&&t.tripleDarkTable?t.tripleDarkTable.races:t.darkTable.races,p=n&&t.tripleDarkTable?t.tripleDarkTable.table:t.darkTable.table,f=j.g.loadFusionTableJson(r,p),l=j.g.loadFissionTableJson(r,[],p);this.races=u.concat(r.filter(C=>this.getLightDark(C)<0)),this.fusionChart=j.g.mergeFusionTables(o,f),this.fissionChart=j.g.mergeFissionTables(m,l)}else this.races=u,this.fusionChart=o,this.fissionChart=m;if(t.darknessRecipes)for(const[r,p]of Object.entries(t.darknessRecipes)){const f=p;this.fusionChart[r]={},this.fusionChart[r][r]=f,this.fissionChart[f]={},this.fissionChart[f][r]=[r],this.races.includes(r)||this.races.push(r)}if(t.useSpeciesFusion)for(const r of this.races)if(this.fissionChart[r]){const p=this.speciesLookup[r];this.fissionChart[r]["2"+p]=["2"+p]}this.elementChart=j.g.loadElementTableJson(t.elementTable.races,this.elementDemons,n?t.tripleElementTable.table:t.elementTable.table)}getLightDark(t){return"l"==this.alignments[t].charAt(0)?1:"d"==this.alignments[t].charAt(0)?-1:"D"==this.alignments[t].charAt(0)?-2:0}getRaceFissions(t){return this.fissionChart[t]||{}}getRaceFusions(t){return this.fusionChart[t]||{}}getRaceFusion(t,n){return this.getRaceFusions(t)[n]||""}}class H{constructor(t){this.lvlModifier=7.5,this.elementDemons=[],this.initCharts(t)}initCharts(t){const n=t.tripleTable.races,u=t.tripleTable.table,h=n.map(m=>"3"+m);this.speciesLookup=t.speciesLookup,this.fissionChart={},this.fusionChart={},this.races=n;for(const m of h)this.fusionChart[m]={};let o=-1;for(let m=0;m<h.length;m++)for(let r=m+1;r<h.length;r++){const p=h[m],f=h[r],l=p+"|"+f;o+=1,this.fissionChart[l]={},this.fusionChart[l]={},this.fissionChart[l][p]=[f],this.fusionChart[p][f]=l,this.fusionChart[f][p]=l;for(let C=0;C<h.length;C++){const T=h[C],_=u[o][C];this.fissionChart[_]||(this.fissionChart[_]={}),this.fissionChart[_][l]=[T],this.fusionChart[l][T]=_,this.fusionChart[T][l]=_}}}getRaceFissions(t){return this.fissionChart[t]||{}}getRaceFusions(t){const n=this.speciesLookup[t];return n?this.fusionChart["3"+n]||{}:this.fusionChart[t]||{}}getRaceFusion(t,n){return this.getRaceFusions(t)[n]||""}getLightDark(t){return 0}getElemModifiers(t){return{}}getElemFusions(t){return{}}isConvertedRace(t){return!1}}var Q=d(3837),M=d(6213),S=d(7548),Z=d(7862),P=d(9015),F=d(2416);const k=["Deity","Megami","Fury","Lady"],b=["Vile","Tyrant","Reaper"],D=["Entity","Zealot"];function A(v,t,n){const u=[],{race:h,lvl:o}=t.getDemon(v),m=2*(n.lvlModifier-3),r=t.getResultDemonLvls(h),p=r.indexOf(o);if(-1===D.indexOf(h)||-1===p)return u;const f=r[p-1]?2*r[p-1]-m:0,l=r[p+1]?2*o-m:200;for(const C of k)for(const T of t.getIngredientDemonLvls(C)){const _=t.reverseLookupDemon(C,T),I=f-T,Y=l-T;for(const w of b)for(const B of t.getIngredientDemonLvls(w)){const a=t.reverseLookupDemon(w,B);I<B&&B<=Y&&u.push({name1:_,name2:a})}}return u}function U(v,t,n){const u=[],{race:h,lvl:o}=t.getDemon(v),m=3*(n.tripleChart.lvlModifier-1),r=t.getResultDemonLvls(h),p=r.indexOf(o);if(-1===D.indexOf(h)||-1===p)return u;const f=r[p-1]?3*r[p-1]-m:0,l=3*o-m;for(const C of k)for(const T of t.getIngredientDemonLvls(C)){const _=t.reverseLookupDemon(C,T),I=f-T,Y=l-T;for(const w of b)for(const B of t.getIngredientDemonLvls(w)){const a=t.reverseLookupDemon(w,B),R=I-B,s=Y-B;for(const c of k)for(const g of t.getIngredientDemonLvls(c)){const L=t.reverseLookupDemon(c,g);R<g&&g<=s&&_.localeCompare(L)<0&&u.push({name1:_,name2:a,name3:L})}for(const c of b)for(const g of t.getIngredientDemonLvls(c)){const L=t.reverseLookupDemon(c,g);R<g&&g<=s&&a.localeCompare(L)<0&&u.push({name1:_,name2:a,name3:L})}}}return u}var y=d(6748);function E(v,t,n){const{normalChart:u,tripleChart:h,raceOrder:o}=n,m=[];for(const r of Object.keys(h.getRaceFissions(v)))for(const p of t.getIngredientDemonLvls(r)){const f=t.reverseLookupDemon(r,p);for(const[l,C]of Object.entries(u.getRaceFissions(r)))for(const T of t.getIngredientDemonLvls(l))if(p>T||p===T&&o[r]<o[l]){const _=t.reverseLookupDemon(l,T);for(const I of C)for(const Y of t.getIngredientDemonLvls(I))if(p>Y||p===Y&&o[r]<o[I]){const w=t.reverseLookupDemon(I,Y);m.push({name1:f,name2:_,name3:w})}}}return m}function W(v,t,n){const{tripleChart:u}=n,h=[];for(const o of Object.keys(u.getRaceFissions(v))){const m=t.getIngredientDemonLvls(o);for(let r=0;r<m.length;r++){const p=t.reverseLookupDemon(o,m[r]);for(let f=r+1;f<m.length;f++){const l=t.reverseLookupDemon(o,m[f]);for(let C=f+1;C<m.length;C++){const T=t.reverseLookupDemon(o,m[C]);h.push({name1:p,name2:l,name3:T})}}}}return h}var N=d(923);function z(v,t,n){const u=n.tripleChart.elementDemons.filter(o=>o.indexOf(v)>-1);let h=[];for(const o of u){const m=o.replace(v,"").replace(" x ",""),r=(0,N.Eh)(o,t,n.tripleChart).concat((0,N.s0)(o,t,n.tripleChart));h=h.concat(r.map(p=>({name1:m,name2:p.name1,name3:p.name2})))}return h}var J=d(6071),K=d(4769);let O=(()=>{class v{constructor(n){this.fusionCalculator=S.YP,this.fissionCalculator=S.uC,this.triFusionCalculator=new M.e([J.UN,J.jm],[]),this.triFissionCalculator=new M.e([y.Mg],[]),this.compConfig=n,this.appName=n.appTitle+" Fusion Calculator",this.compendium=new i.X(new e(n)).asObservable();const u=new x(n);let h,o;n.useSpeciesFusion?(h=new H(n),o=h):(h=u,o=new x(n,!0)),this.fusionChart=new i.X(new x(n)).asObservable(),this.squareChart=new i.X({normalChart:h,tripleChart:o,raceOrder:n.raceOrder}).asObservable(),n.darknessRecipes&&(this.fusionCalculator=S.Q0,this.fissionCalculator=S.oA),n.tripleElementTable&&(this.triFissionCalculator=new M.e([y.Mg,y.D4],[])),n.appCssClasses.includes("dssh")&&(this.fissionCalculator=new Q.N([Z.Mg,Z.Aq,A],[F.Q]),this.triFusionCalculator=new M.e([J.UN,J.jm,J.e7,J.Hd],[z]),this.triFissionCalculator=new M.e([y.Mg,y.D4,U],[E,W])),(n.appCssClasses.includes("smt1")||n.appCssClasses.includes("smt2"))&&(this.fissionCalculator=new Q.N([Z.Mg,Z.Ii,P.f,Z.Aq],[F.Q]))}updateFusionSettings(n){return{}}static#e=this.\u0275fac=function(u){return new(u||v)(K.LFG(S.I7))};static#t=this.\u0275prov=K.Yz7({token:v,factory:v.\u0275fac})}return v})()},604:(G,$,d)=>{d.d($,{p:()=>Q});var i=d(6814),e=d(6208),j=d(8325),x=d(6829),H=d(4769);let Q=(()=>{class M{static forRoot(){return{ngModule:M}}static#e=this.\u0275fac=function(P){return new(P||M)};static#t=this.\u0275mod=H.oAB({type:M});static#s=this.\u0275inj=H.cJS({imports:[i.ez,e.m,j.a,x.V]})}return M})()}}]);