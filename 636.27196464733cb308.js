"use strict";(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[636],{9023:(z,H,d)=>{d.d(H,{q:()=>$});var S=d(2755),e=d(1090),i=d(2598),_=d(345),B=d(8935),N=d(177);function M(O,b){if(1&O&&(i.j41(0,"th"),i.EFF(1),i.k0s()),2&O){const k=b.$implicit,D=i.XpG();i.R7$(1),i.JRh(k.slice(0,D.nameCut))}}function P(O,b){if(1&O&&(i.j41(0,"td",4),i.EFF(1),i.k0s()),2&O){const k=b.$implicit,D=i.XpG(2);i.Y8G("ngClass",k.slice(0,4)),i.R7$(1),i.JRh(k.slice(4,D.nameCut+4))}}function G(O,b){if(1&O&&(i.j41(0,"tr")(1,"th"),i.EFF(2),i.k0s(),i.DNE(3,P,2,2,"td",3),i.j41(4,"th"),i.EFF(5),i.k0s()()),2&O){const k=b.$implicit;i.R7$(2),i.JRh(k[0]),i.R7$(1),i.Y8G("ngForOf",k.slice(1,k.length-1)),i.R7$(2),i.JRh(k[k.length-1])}}function J(O,b){if(1&O&&(i.j41(0,"th"),i.EFF(1),i.k0s()),2&O){const k=b.$implicit,D=i.XpG();i.R7$(1),i.JRh(k.slice(0,D.nameCut))}}function V(O,b){if(1&O&&(i.j41(0,"tr")(1,"th",0),i.EFF(2),i.k0s()()),2&O){const k=i.XpG();i.R7$(1),i.BMQ("colspan",k.table[0].length),i.R7$(1),i.Lme("",k.appName," ",k.tripTitle,"")}}class ${static{this.RESULT_COLORS=Object.entries({oran:["-2","Erthys","Gnome","Saki","Saki Mitama","Random","\u30a2\u30fc\u30b7\u30fc\u30ba","\u30ce\u30fc\u30e0","\u30b5\u30ad\u30df\u30bf\u30de"],redd:["-1","Flaemis","Salamander","Ara ","Ara Mitama","Fiend","\u30d5\u30ec\u30a4\u30df\u30fc\u30ba","\u30b5\u30e9\u30de\u30f3\u30c0\u30fc","\u30a2\u30e9\u30df\u30bf\u30de"],gree:["1","Aeros","Sylph","Kusi","Kusi Mitama","UMA","\u30a8\u30a2\u30ed\u30b9","\u30b7\u30eb\u30ad\u30fc","\u30af\u30b7\u30df\u30bf\u30de"],blue:["2","Aquans","Undine","Nigi","Nigi Mitama","Enigma","\u30a2\u30af\u30a2\u30f3\u30ba","\u30a6\u30f3\u30c7\u30a3\u30fc\u30cd","\u30cb\u30ae\u30df\u30bf\u30de"]})}constructor(b,k){this.title2=b,this.route=k,this.normTitle="Normal Fusions",this.tripTitle="",this.isPersona=!1,this.filterDarks=!0,this.lang="en",this.msgs=e.qh,this.subscriptions=[],this.table=[],this.nameCut=4}ngOnInit(){this.subscriptions.push(this.route.parent.data.subscribe(b=>{this.appName=b.appName||"Shin Megami Tensei",this.nameCut=parseInt((0,S.oO)(this.msgs.NameCut,b.lang)),this.title2.setTitle((0,S.oO)(this.msgs.AppTitle,b.lang).replace("$APP",this.appName))}))}ngOnChanges(){this.normChart&&this.fillFusionChart()}ngOnDestroy(){for(const b of this.subscriptions)b.unsubscribe()}fillFusionChart(){const b="noneNone",D=$.RESULT_COLORS.reduce((t,[n,m])=>m.reduce((l,g)=>(l[g]=n,l),t),{}),L=this.normChart.elementDemons;let A=[],U=this.normChart.races,y=[];this.filterDarks&&(A=this.normChart.races.filter(t=>this.normChart.getLightDark(t)>0),U=this.normChart.races.filter(t=>0===this.normChart.getLightDark(t)),y=this.normChart.races.filter(t=>-1===this.normChart.getLightDark(t)),0===y.length&&A.length>0&&(A=this.normChart.races.filter(t=>this.normChart.getLightDark(t)>-1),U=[],y=this.normChart.races.filter(t=>this.normChart.getLightDark(t)<-1)));const W=A.length-y.length,j=A.concat(U,L),w=y.length?y.concat(Array(j.length-y.length).fill("")):j,Q=this.mitaTable?j:A.concat(U,Array(L.length).fill("")),R=this.mitaTable||y.length?Array(W).fill("").concat(y,U,L):j;this.table=[[""].concat(j,[""])];for(let t=0;t<R.length;t++){const n=Array(j.length+2).fill("empt-"),m=R[t],l=Q[t],g=-1!==L.indexOf(m),f=-1!==L.indexOf(l);this.table.push(n),n[0]=m,n[n.length-1]=l;for(let o=t;o<j.length;o++){const p=j[o],c=-1!==L.indexOf(p);if(c&&f){const r=L.indexOf(l),v=L.indexOf(p),C=this.mitaTable[v][r].replace("-","");n[o+1]=C?(D[C]||"norm")+C:b}else if(c&&l){const r=this.normChart.getElemFusions(p)[l];n[o+1]=r?(D[r]||"rank")+(r>0?"+":"")+r.toString():b}else if(p&&l){const r=this.isPersona&&p===l?p:this.normChart.getRaceFusion(p,l);n[o+1]=r?(D[r]||(p===l?"elem":"norm"))+r:b}}if(this.tripChart)for(let o=0;o<=t-W;o++){const p=w[o];if(p&&g){const c=this.tripChart.getElemFusions(m)[p];n[o+1]=c?(D[c]||"rank")+(c>0?"+":"")+c.toString():b}else if(p&&m){const c=this.tripChart.getRaceFusion(p,m);n[o+1]=c?(D[c]||(p===m?"elem":"trip"))+c:b}}if(-1!==m.indexOf(" x ")){const[o,p]=m.split(" x "),c=o.slice(0,3)+"x"+p.slice(0,3);n[0]=c,n[n.length-1]=c}else if(-1!==m.indexOf(" ")){const o=m.split(" ")[0];n[0]=o,n[n.length-1]=o}}for(let t=0;t<this.table[0].length;t++){const n=this.table[0][t];if(-1!==n.indexOf(" x ")){const[m,l]=n.split(" x ");this.table[0][t]=m.slice(0,2)+l.slice(0,2)}}this.table.push([""].concat(w,[""]))}static{this.\u0275fac=function(k){return new(k||$)(i.rXU(_.hE),i.rXU(B.nX))}}static{this.\u0275cmp=i.VBU({type:$,selectors:[["app-fusion-chart"]],inputs:{normChart:"normChart",tripChart:"tripChart",mitaTable:"mitaTable",normTitle:"normTitle",tripTitle:"tripTitle",isPersona:"isPersona",filterDarks:"filterDarks",lang:"lang",counter:"counter"},features:[i.OA$],decls:12,vars:7,consts:[[1,"title"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(k,D){1&k&&(i.j41(0,"table")(1,"tbody")(2,"tr")(3,"th",0),i.EFF(4),i.k0s()(),i.j41(5,"tr"),i.DNE(6,M,2,1,"th",1),i.k0s(),i.DNE(7,G,6,3,"tr",1),i.j41(8,"tr"),i.DNE(9,J,2,1,"th",1),i.k0s(),i.DNE(10,V,3,3,"tr",2),i.k0s(),i.nrm(11,"tbody"),i.k0s()),2&k&&(i.R7$(3),i.BMQ("colspan",D.table[0].length),i.R7$(1),i.Lme("",D.appName," ",D.normTitle,""),i.R7$(2),i.Y8G("ngForOf",D.table[0]),i.R7$(1),i.Y8G("ngForOf",D.table.slice(1,D.table.length-1)),i.R7$(2),i.Y8G("ngForOf",D.table[D.table.length-1]),i.R7$(1),i.Y8G("ngIf",D.tripTitle))},dependencies:[N.YU,N.Sq,N.bT],styles:["table[_ngcontent-%COMP%]{width:auto;margin:0 auto;white-space:nowrap}td.elem[_ngcontent-%COMP%]{color:#0f0}td.trip[_ngcontent-%COMP%]{color:#d3d3d3}td.oran[_ngcontent-%COMP%]{color:orange}td.redd[_ngcontent-%COMP%]{color:red}td.gree[_ngcontent-%COMP%]{color:#0f0}td.blue[_ngcontent-%COMP%]{color:#0ff}td.none[_ngcontent-%COMP%]{color:transparent}td.empt[_ngcontent-%COMP%]{background-color:transparent;color:transparent}"],changeDetection:0})}}},1151:(z,H,d)=>{d.d(H,{S:()=>X});var S=d(8935),e=d(2598),i=d(6170),_=d(177),B=d(5583);let N=(()=>{class a{constructor(s){this.appCssClasses=["smtnes","smt1"],this.appCssClasses=s.compConfig.appCssClasses}static{this.\u0275fac=function(u){return new(u||a)(e.rXU(i.i))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-smt1-compendium"]],decls:1,vars:2,consts:[[3,"ngClass","hasSettings"]],template:function(u,h){1&u&&e.nrm(0,"app-demon-compendium",0),2&u&&e.Y8G("ngClass",h.appCssClasses)("hasSettings",!1)},dependencies:[_.YU,B.f],styles:[".devilsum div.element-icon,.smtnes div.element-icon{height:12px;background-size:12px;background-repeat:no-repeat;background-position:center;color:transparent}.smtnes div.element-icon.sword{background-image:url(/assets/images/smt4f/sword.png)}.smtnes div.element-icon.gun{background-image:url(/assets/images/smtsj/gun.png)}.smtnes div.element-icon.fire{background-image:url(/assets/images/smtsj/fir.png)}.smtnes div.element-icon.i4{background-image:url(/assets/images/smtsj/fir.png)}.smtnes div.element-icon.ice{background-image:url(/assets/images/smtsj/ice.png)}.smtnes div.element-icon.i5{background-image:url(/assets/images/smtsj/ice.png)}.smtnes div.element-icon.elec{background-image:url(/assets/images/smtsj/ele.png)}.smtnes div.element-icon.i6{background-image:url(/assets/images/smtsj/ele.png)}.smtnes div.element-icon.force{background-image:url(/assets/images/smtsj/win.png)}.smtnes div.element-icon.i7{background-image:url(/assets/images/smtsj/win.png)}.smtnes div.element-icon.nerve{background-image:url(/assets/images/smt4f/panic.png)}.smtnes div.element-icon.almighty{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.i13{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.expel{background-image:url(/assets/images/smtsj/exp.png)}.smtnes div.element-icon.i8{background-image:url(/assets/images/smtsj/exp.png)}.smtnes div.element-icon.death{background-image:url(/assets/images/smtsj/cur.png)}.smtnes div.element-icon.i9{background-image:url(/assets/images/smtsj/cur.png)}.smtnes div.element-icon.curse{background-image:url(/assets/images/smt4f/poison.png)}.smtnes div.element-icon.bind{background-image:url(/assets/images/smt4f/bind.png)}.smtnes div.element-icon.rush{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.punch{background-image:url(/assets/images/smt4f/sword.png)}.smtnes div.element-icon.kick{background-image:url(/assets/images/smtsj/gun.png)}.smtnes div.element-icon.flying{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.energy{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.recovery{background-image:url(/assets/images/smtsj/rec.png)}.smtnes div.element-icon.support{background-image:url(/assets/images/smtsj/sup.png)}.smtnes div.element-icon.special{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.attack{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.tech{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.slash{background-image:url(/assets/images/smt4f/sword.png)}.smtnes div.element-icon.charge{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.blunt{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.handgun{background-image:url(/assets/images/smtsj/gun.png)}.smtnes div.element-icon.penetrate{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.spread{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.mystic{background-image:url(/assets/images/smt4f/poison.png)}.smtnes div.element-icon.mind{background-image:url(/assets/images/smt4f/bind.png)}.smtnes div.element-icon.suicide{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.passive{background-image:url(/assets/images/smtsj/pas.png)}.smtnes div.element-icon.defend{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.phys{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.gro{background-image:url(/assets/images/smt4f/sword.png)}.smtnes div.element-icon.air{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.fir{background-image:url(/assets/images/smtsj/fir.png)}.smtnes div.element-icon.ele{background-image:url(/assets/images/smtsj/ele.png)}.smtnes div.element-icon.for{background-image:url(/assets/images/smtsj/win.png)}.smtnes div.element-icon.gig{background-image:url(/assets/images/smt4f/bind.png)}.smtnes div.element-icon.alm{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.lig{background-image:url(/assets/images/smtsj/exp.png)}.smtnes div.element-icon.dar{background-image:url(/assets/images/smtsj/cur.png)}.smtnes div.element-icon.phy{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.ail{background-image:url(/assets/images/smtsj/ail.png)}.smtnes div.element-icon.rec{background-image:url(/assets/images/smtsj/rec.png)}.smtnes div.element-icon.sup{background-image:url(/assets/images/smtsj/sup.png)}.smtnes div.element-icon.psy{background-image:url(/assets/images/smt4f/panic.png)}.smtnes div.element-icon.spear{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.thrown{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.ailment{background-image:url(/assets/images/smtsj/ail.png)}.smtnes div.element-icon.quad{background-image:url(/assets/images/smt4f/curse.png)}.smtnes div.element-icon.elem{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.none{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.strike{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.i0{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.skill{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.temp{background-image:url(/assets/images/smt4f/smirk.png)}.smtnes div.element-icon.i17{background-image:url(/assets/images/smt4f/smirk.png)}.smtnes div.element-icon.dark{background-image:url(/assets/images/smt4f/curse.png)}.smtnes div.element-icon.i18{background-image:url(/assets/images/smt4f/curse.png)}.smtnes div.element-icon.witch{background-image:url(/assets/images/smtsj/ail.png)}.smtnes div.element-icon.i19{background-image:url(/assets/images/smtsj/ail.png)}.smtnes div.element-icon.rea{background-image:url(/assets/images/smtsj/rec.png)}.smtnes div.element-icon.i20{background-image:url(/assets/images/smtsj/rec.png)}.smtnes div.element-icon.reb{background-image:url(/assets/images/smtsj/sup.png)}.smtnes div.element-icon.i21{background-image:url(/assets/images/smtsj/sup.png)}.smtnes div.element-icon.element{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.hero{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.i22{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.i23{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.i24{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.starter{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.autorec{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.phase{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.explore{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.area{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.plugin{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.self{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.universe{background-image:url(/assets/images/smtsj/spe.png)}.smtnes td.align.ll,.smtnes td.align.nl,.smtnes td.align.dl{color:#0ff}.smtnes td.align.lc,.smtnes td.align.nc,.smtnes td.align.dc{color:tomato}.smtnes td.align.el{color:#0f0}.smtnes td.align.ec{color:gold}.smt1 th.title,.smt1 th.nav.active,.smt1 th.nav.active a{background-color:#608341;color:#fff}.smt2 th.title,.smt2 th.nav.active,.smt2 th.nav.active a{background-color:#2f4f4f;color:#fff}.smtif th.title,.smtif th.nav.active,.smtif th.nav.active a{background-color:#8fbc8f;color:#000}.dsum th.title,.dsum th.nav.active,.dsum th.nav.active a{background-color:#4372aa;color:#fff}.dssh th.title,.dssh th.nav.active,.dssh th.nav.active a{background-color:#302878;color:#fff}.mjn2 th.title,.mjn2 th.nav.active,.mjn2 th.nav.active a{background-color:#514f7e;color:#fff}.smt9 th.title,.smt9 th.nav.active,.smt9 th.nav.active a{background-color:#693cbe;color:#fff}.smtim th.title,.smtim th.nav.active,.smtim th.nav.active a{background-color:#009d96;color:#fff}\n"],encapsulation:2,changeDetection:0})}}return a})();var M=d(9404),P=d(345),G=d(9629);let J=(()=>{class a extends M.M{constructor(s,u,h){super(s,u,h),this.appName=`List of Demons - ${h.appName}`,this.compConfig=h.compConfig,this.defaultSortFun=(F,K)=>200*(this.compConfig.raceOrder[F.race]-this.compConfig.raceOrder[K.race])+K.lvl-F.lvl}static{this.\u0275fac=function(u){return new(u||a)(e.rXU(P.hE),e.rXU(e.gRc),e.rXU(i.i))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-demon-list-container"]],features:[e.Vt3],decls:2,vars:7,consts:[[3,"raceOrder","statHeaders","resistHeaders","inheritOrder","rowData"]],template:function(u,h){1&u&&(e.nrm(0,"app-smt-demon-list",0),e.nI1(1,"async")),2&u&&e.Y8G("raceOrder",h.compConfig.raceOrder)("statHeaders",h.compConfig.baseStats)("resistHeaders",h.compConfig.resistElems)("inheritOrder",h.compConfig.elemOrder)("rowData",e.bMT(1,5,h.demons))},dependencies:[G.F,_.Jj],encapsulation:2,changeDetection:0})}}return a})();var V=d(9454),$=d(2940);let O=(()=>{class a extends V.E{constructor(s,u,h){super(s,u,h),this.appName=`List of Skills - ${h.appName}`,this.compConfig=h.compConfig,this.defaultSortFun=(F,K)=>1e4*(this.compConfig.elemOrder[F.element]-this.compConfig.elemOrder[K.element])+F.rank-K.rank}static{this.\u0275fac=function(u){return new(u||a)(e.rXU(P.hE),e.rXU(e.gRc),e.rXU(i.i))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-skill-list-container"]],features:[e.Vt3],decls:2,vars:6,consts:[[3,"elemOrder","hasRank","hasTarget","rowData"]],template:function(u,h){1&u&&(e.nrm(0,"app-smt-skill-list",0),e.nI1(1,"async")),2&u&&e.Y8G("elemOrder",h.compConfig.elemOrder)("hasRank",!1)("hasTarget",!0)("rowData",e.bMT(1,4,h.skills))},dependencies:[$.p,_.Jj],encapsulation:2,changeDetection:0})}}return a})();var b=d(9023);function k(a,E){if(1&a&&(e.j41(0,"th"),e.EFF(1),e.k0s()),2&a){const s=E.$implicit;e.R7$(1),e.JRh(s.slice(0,4))}}function D(a,E){if(1&a&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&a){const s=E.$implicit;e.R7$(1),e.JRh(s.slice(0,4))}}function L(a,E){if(1&a&&(e.j41(0,"tr")(1,"th"),e.EFF(2),e.k0s(),e.DNE(3,D,2,1,"td",1),e.j41(4,"th"),e.EFF(5),e.k0s()()),2&a){const s=E.$implicit;e.R7$(2),e.JRh(s[0]),e.R7$(1),e.Y8G("ngForOf",s.slice(1,s.length-1)),e.R7$(2),e.JRh(s[s.length-1])}}function A(a,E){if(1&a&&(e.j41(0,"th"),e.EFF(1),e.k0s()),2&a){const s=E.$implicit;e.R7$(1),e.JRh(s.slice(0,4))}}let U=(()=>{class a{constructor(){this.table=[]}ngOnChanges(){this.fillFusionChart()}fillFusionChart(){this.table=[];const s=this.speciesChart.races,u=[""].concat(s,[""]);this.table.push(u);for(let h=0;h<s.length;h++)for(let F=h+1;F<s.length;F++){const K="3"+s[h]+"|3"+s[F];this.table.push([s[h]].concat(s.map(Z=>this.speciesChart.getRaceFusion("3"+Z,K)),[s[F]]))}this.table.push(u)}static{this.\u0275fac=function(u){return new(u||a)}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-species-triple-chart"]],inputs:{speciesChart:"speciesChart",title:"title"},features:[e.OA$],decls:9,vars:5,consts:[[1,"title"],[4,"ngFor","ngForOf"]],template:function(u,h){1&u&&(e.j41(0,"table")(1,"tr")(2,"th",0),e.EFF(3),e.k0s()(),e.j41(4,"tr"),e.DNE(5,k,2,1,"th",1),e.k0s(),e.DNE(6,L,6,3,"tr",1),e.j41(7,"tr"),e.DNE(8,A,2,1,"th",1),e.k0s()()),2&u&&(e.R7$(2),e.BMQ("colspan",h.table[0].length),e.R7$(1),e.JRh(h.title),e.R7$(2),e.Y8G("ngForOf",h.table[0]),e.R7$(1),e.Y8G("ngForOf",h.table.slice(1,h.table.length-1)),e.R7$(2),e.Y8G("ngForOf",h.table[h.table.length-1]))},dependencies:[_.Sq],styles:["table[_ngcontent-%COMP%]{width:auto;margin:0 auto}td.elem[_ngcontent-%COMP%]{color:#0f0}td.trip[_ngcontent-%COMP%]{color:#d3d3d3}td.ra-2[_ngcontent-%COMP%]{color:orange}td.ra-1[_ngcontent-%COMP%]{color:red}td.ran1[_ngcontent-%COMP%]{color:#0f0}td.ran2[_ngcontent-%COMP%]{color:#0ff}td.None[_ngcontent-%COMP%]{color:#222}td.Sala[_ngcontent-%COMP%], td.Flae[_ngcontent-%COMP%], td.Ara[_ngcontent-%COMP%], td.Fien[_ngcontent-%COMP%]{color:red}td.Undi[_ngcontent-%COMP%], td.Aqua[_ngcontent-%COMP%], td.Nigi[_ngcontent-%COMP%], td.Enig[_ngcontent-%COMP%]{color:#0ff}td.Sylp[_ngcontent-%COMP%], td.Aero[_ngcontent-%COMP%], td.Kusi[_ngcontent-%COMP%], td.UMA[_ngcontent-%COMP%]{color:#0f0}td.Gnom[_ngcontent-%COMP%], td.Erth[_ngcontent-%COMP%], td.Saki[_ngcontent-%COMP%], td.Rand[_ngcontent-%COMP%]{color:orange}td.Empt[_ngcontent-%COMP%]{background-color:#000;color:transparent}"],changeDetection:0})}}return a})();function y(a,E){if(1&a&&(e.qex(0),e.nrm(1,"app-fusion-chart",1)(2,"app-fusion-chart",1),e.bVm()),2&a){const s=e.XpG();e.R7$(1),e.Y8G("normChart",s.normChart)("tripChart",s.normChart)("mitaTable",s.mitamaTable)("normTitle","Light and Neutral Normal Fusions")("tripTitle","Dark Normal Fusions"),e.R7$(1),e.Y8G("normChart",s.tripChart)("tripChart",s.tripChart)("mitaTable",s.tripleMitamaTable)("normTitle","Light and Neutral Triple Fusions")("tripTitle","Dark Triple Fusions")}}function W(a,E){if(1&a&&(e.qex(0),e.nrm(1,"app-fusion-chart",2)(2,"app-species-triple-chart",3),e.bVm()),2&a){const s=e.XpG();e.R7$(1),e.Y8G("normChart",s.fullChart)("mitaTable",s.mitamaTable)("filterDarks",!1)("normTitle","Normal Fusions"),e.R7$(1),e.Y8G("speciesChart",s.tripChart)("title",s.appName+" - Triple Fusions")}}function j(a,E){if(1&a&&(e.qex(0),e.nrm(1,"app-fusion-chart",1)(2,"app-species-triple-chart",3),e.bVm()),2&a){const s=e.XpG();e.R7$(1),e.Y8G("normChart",s.fullChart)("tripChart",s.fullChart)("mitaTable",s.mitamaTable)("normTitle","Light and Neutral Normal Fusions")("tripTitle","Dark Normal Fusions"),e.R7$(1),e.Y8G("speciesChart",s.tripChart)("title",s.appName+" - Triple Fusions")}}let w=(()=>{class a{constructor(s){this.fusionDataService=s,this.subscriptions=[]}ngOnInit(){const s=this.fusionDataService.compConfig;this.appName=s.appTitle,this.mitamaTable=s.mitamaTable,this.tripleMitamaTable=s.tripleMitamaTable,this.hasDarkRanks=s.darknessRecipes,this.fusionDataService.compConfig.useSpeciesFusion&&this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(u=>{this.fullChart=u})),this.subscriptions.push(this.fusionDataService.squareChart.subscribe(u=>{this.normChart=u.normalChart,this.tripChart=u.tripleChart}))}ngOnDestroy(){for(const s of this.subscriptions)s.unsubscribe()}static{this.\u0275fac=function(u){return new(u||a)(e.rXU(i.i))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-fusion-chart-container"]],decls:3,vars:3,consts:[[4,"ngIf"],[3,"normChart","tripChart","mitaTable","normTitle","tripTitle"],[3,"normChart","mitaTable","filterDarks","normTitle"],[3,"speciesChart","title"]],template:function(u,h){1&u&&(e.DNE(0,y,3,10,"ng-container",0),e.DNE(1,W,3,6,"ng-container",0),e.DNE(2,j,3,7,"ng-container",0)),2&u&&(e.Y8G("ngIf",!h.fullChart),e.R7$(1),e.Y8G("ngIf",h.fullChart&&!h.hasDarkRanks),e.R7$(1),e.Y8G("ngIf",h.fullChart&&h.hasDarkRanks))},dependencies:[_.bT,b.q,U],encapsulation:2,changeDetection:0})}}return a})();var Q=d(5692),R=d(3679),t=d(2223),n=d(302),m=d(6122),l=d(8696);function g(a,E){if(1&a&&e.nrm(0,"app-demon-stats",8),2&a){const s=e.XpG(2);e.Y8G("title","Attacks")("statHeaders",s.compConfig.baseAtks)("stats",s.demon.atks)}}function f(a,E){if(1&a&&e.nrm(0,"app-demon-skills",5),2&a){const s=e.XpG(2);e.Y8G("title","Inheritable Skills")("hasTarget",!0)("hasLvl",!1)("elemOrder",s.compConfig.elemOrder)("compendium",s.compendium)("skillLevels",s.compConfig.inheritSkills[s.demon.inherits])}}const o=function(){return["Drop"]};function p(a,E){if(1&a&&(e.qex(0),e.j41(1,"app-demon-stats",2)(2,"td"),e.EFF(3),e.k0s()(),e.DNE(4,g,1,3,"app-demon-stats",3),e.nrm(5,"app-demon-resists",4)(6,"app-demon-skills",5),e.DNE(7,f,1,6,"app-demon-skills",6),e.nrm(8,"app-smt-fusions",7),e.bVm()),2&a){const s=e.XpG();e.R7$(1),e.Y8G("title","Lvl "+s.demon.lvl+" "+s.demon.race+" "+s.demon.name)("price",s.demon.price)("statHeaders",s.compConfig.baseStats)("fusionHeaders",e.lJ4(18,o))("stats",s.demon.stats)("inherits",s.demon.inherits),e.R7$(2),e.JRh(s.demon.drop),e.R7$(1),e.Y8G("ngIf",s.compConfig.baseAtks.length),e.R7$(1),e.Y8G("resistHeaders",s.compConfig.resistElems)("resists",s.demon.resists),e.R7$(1),e.Y8G("title","Innate Skills")("hasTarget",!0)("hasLvl",!1)("elemOrder",s.compConfig.elemOrder)("compendium",s.compendium)("skillLevels",s.demon.skills),e.R7$(1),e.Y8G("ngIf",s.compConfig.inheritSkills),e.R7$(1),e.Y8G("hasTripleFusion",!0)}}function c(a,E){if(1&a&&e.nrm(0,"app-demon-missing",9),2&a){const s=e.XpG();e.Y8G("name",s.name)}}let r=(()=>{class a{static{this.\u0275fac=function(u){return new(u||a)}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"title","price","statHeaders","fusionHeaders","stats","inherits"],[3,"title","statHeaders","stats",4,"ngIf"],[3,"resistHeaders","resists"],[3,"title","hasTarget","hasLvl","elemOrder","compendium","skillLevels"],[3,"title","hasTarget","hasLvl","elemOrder","compendium","skillLevels",4,"ngIf"],[3,"hasTripleFusion"],[3,"title","statHeaders","stats"],[3,"name"]],template:function(u,h){1&u&&(e.DNE(0,p,9,19,"ng-container",0),e.DNE(1,c,1,1,"app-demon-missing",1)),2&u&&(e.Y8G("ngIf",h.demon),e.R7$(1),e.Y8G("ngIf",!h.demon))},dependencies:[_.bT,Q.X,R.C,t.w,n.F,m.L],encapsulation:2,changeDetection:0})}}return a})(),v=(()=>{class a{constructor(s,u,h,F){this.route=s,this.title=u,this.currentDemonService=h,this.fusionDataService=F,this.subscriptions=[],this.appName="Test App",this.appName=F.appName,this.compConfig=F.compConfig}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const s of this.subscriptions)s.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(s=>{this.compendium=s,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(s=>{this.name=s,this.getDemonEntry()})),this.route.params.subscribe(s=>{this.currentDemonService.nextCurrentDemon(s.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(`${this.name} - ${this.appName}`),this.demon=this.compendium.getDemon(this.name))}static{this.\u0275fac=function(u){return new(u||a)(e.rXU(S.nX),e.rXU(P.hE),e.rXU(l.i),e.rXU(i.i))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-demon-entry-container"]],decls:1,vars:4,consts:[[3,"name","demon","compConfig","compendium"]],template:function(u,h){1&u&&e.nrm(0,"app-demon-entry",0),2&u&&e.Y8G("name",h.name)("demon",h.demon)("compConfig",h.compConfig)("compendium",h.compendium)},dependencies:[r],encapsulation:2,changeDetection:0})}}return a})();var C=d(2649),T=d(3452),I=d(6188),x=d(131);const Y=[{path:"",redirectTo:"demons",pathMatch:"full"},{path:"",component:N,data:{fusionTool:"chart"},children:[{path:"chart",component:w}]},{path:"",component:N,children:[{path:"demons/:demonName",component:v,children:[{path:"fissions/triple",component:I.X},{path:"fusions/triple",component:x.W},{path:"fissions",component:C.J},{path:"fusions",component:T.y},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"demons",component:J},{path:"skills",component:O}]},{path:"**",redirectTo:"demons",pathMatch:"full"}];let X=(()=>{class a{static{this.\u0275fac=function(u){return new(u||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({imports:[S.iI.forChild(Y),S.iI]})}}return a})()},6170:(z,H,d)=>{d.d(H,{i:()=>Q});var S=d(4412);class e{constructor(t){this.pairRecipes={},this.initImportedData(t),this.updateDerivedData(t)}initImportedData(t){const n={},m={},l={},g={},f=t.baseStats.length,o=t.resistElems.length,p={};for(const[c,r]of Object.entries(t.resistCodes))p[c]=((r/1e3|8)<<10)+(r%1e3/2.5|0);for(const[c,r]of Object.entries(t.demonData)){const v="Shin Megami Tensei IMAGINE"!==t.appTitle?r.skills.reduce((C,T,I)=>(T&&(C[T.replace("*","")]=I-8),C),{}):r.skills;n[c]={name:c,race:r.race,lvl:r.lvl,currLvl:r.lvl,fusion:"normal",inherits:t.inheritSkills?t.skillElems.indexOf(r.inherit):24,drop:r.drop||"-",price:Math.pow(Math.floor(r.lvl),3),stats:r.stats.slice(0,f),atks:r.atks||[],resists:r.resists.substring(0,o).split("").map(C=>p[C]),align:r.align||t.alignData.races[r.race],skills:v}}for(const[c,r]of Object.entries(t.skillData)){const v="recovery"===r.element?" Rec ":" Dmg ";m[c]={name:c,element:r.element,power:r.power||0,cost:r.cost||0,rank:(r.enemy?99:0)+(1023&r.cost||0)/100,effect:(r.power?r.power.toString()+v:" ")+(r.effect||""),target:r.target,level:0,learnedBy:[]}}for(const c of Object.values(n).sort((r,v)=>r.lvl-v.lvl))for(const[r,v]of Object.entries(c.skills))m[r].learnedBy.push({demon:c.name,level:v});if(t.specialRecipes)for(const[c,r]of Object.entries(t.specialRecipes))n[c].fusion=r.fusion||"special",r.prereq&&(n[c].prereq=r.prereq),r.special&&(l[c]=r.special),r.pairs&&(g[c]=r.pairs.map(v=>{const[C,T]=v.split(" x ");return{name1:C,name2:T}}));this.demons=n,this.skills=m,this.elementDemons=t.elementTable.elems,this.specialRecipes=l,this.pairRecipes=g}updateDerivedData(t){const n={},m={},l={};for(const g of t.races)n[g]={},m[g]=[],l[g]=[];for(const[g,f]of Object.entries(this.demons))n[f.race][f.lvl]=g,m[f.race].push(f.lvl),"normal"===f.fusion&&l[f.race].push(f.lvl);for(const[g,f]of Object.entries(t.species)){const o="3"+g;n[g]={},m[g]=[],l[g]=[],n[o]={},m[o]=[],l[o]=[];for(let p=f.length;p>0;p--){const c=f[p-1];let r=f.length-p;"d"==t.alignData.races[c].charAt(0)?r-=400:(Object.assign(n[g],n[c]),m[g]=m[g].concat(m[c]),l[g]=l[g].concat(l[c]));for(const[v,C]of Object.entries(n[c])){const T=(100*parseInt(v)+r)/100;n[o][T]=C.toString(),m[o].push(T),l[o].push(T)}}}for(const g of Object.keys(m))m[g].sort((f,o)=>f-o),l[g].sort((f,o)=>f-o);this._allDemons=Object.values(this.demons),this._allSkills=Object.values(this.skills),this.invertedDemons=n,this.allIngredients=m,this.allResults=l}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return Object.keys(this.specialRecipes).map(t=>this.demons[t])}getDemon(t){return this.demons[t]}getSkill(t){return this.skills[t]}getSkills(t){const n=t.map(m=>this.skills[m]);return n.sort((m,l)=>1e4*(this.compConfig.elemOrder[m.element]-this.compConfig.elemOrder[l.element])+m.rank-l.rank),n}getIngredientDemonLvls(t){return this.allIngredients[t]||[]}getResultDemonLvls(t){return this.allResults[t]||[]}getSpecialNameEntries(t){return this.specialRecipes[t]||[]}getSpecialNamePairs(t){return this.pairRecipes[t]||[]}reverseLookupDemon(t,n){return this.invertedDemons[t][n]}reverseLookupSpecial(t){return[]}isElementDemon(t){return-1!==this.elementDemons.indexOf(t)}updateFusionSettings(t){}}var i=d(8063);class _ extends i.p{constructor(t,n){super(),this.elementDemons=[],this.lvlModifier=1.5,this.hasDarkTable=!1,this.initCharts(t,n)}initCharts(t,n){this.alignments=t.alignData.races,this.speciesLookup=t.speciesLookup,this.elementDemons=n?t.tripleElementTable.elems:t.elementTable.elems;const m=n?t.tripleTable.races:t.normalTable.races,l=n?t.tripleTable.table:t.normalTable.table,g=i.p.loadFusionTableJson(m,l),f=i.p.loadFissionTableJson(m,[],l);if(this.lvlModifier=n?t.tripleLvlModifier:t.normalLvlModifier,t.darkTable){this.hasDarkTable=!0;const o=n&&t.tripleDarkTable?t.tripleDarkTable.races:t.darkTable.races,p=n&&t.tripleDarkTable?t.tripleDarkTable.table:t.darkTable.table,c=i.p.loadFusionTableJson(o,p),r=i.p.loadFissionTableJson(o,[],p);this.races=m.concat(o.filter(v=>this.getLightDark(v)<0)),this.fusionChart=i.p.mergeFusionTables(g,c),this.fissionChart=i.p.mergeFissionTables(f,r)}else this.races=m,this.fusionChart=g,this.fissionChart=f;if(t.darknessRecipes)for(const[o,p]of Object.entries(t.darknessRecipes)){const c=p;this.fusionChart[o]={},this.fusionChart[o][o]=c,this.fissionChart[c]={},this.fissionChart[c][o]=[o],this.races.includes(o)||this.races.push(o)}if(t.useSpeciesFusion)for(const o of this.races)if(this.fissionChart[o]){const p=this.speciesLookup[o];this.fissionChart[o]["2"+p]=["2"+p]}this.elementChart=i.p.loadElementTableJson(t.elementTable.races,this.elementDemons,n?t.tripleElementTable.table:t.elementTable.table)}getLightDark(t){return"l"==this.alignments[t].charAt(0)?1:"d"==this.alignments[t].charAt(0)?-1:"D"==this.alignments[t].charAt(0)?-2:0}getRaceFissions(t){return this.fissionChart[t]||{}}getRaceFusions(t){return this.fusionChart[t]||{}}getRaceFusion(t,n){return this.getRaceFusions(t)[n]||""}}class B{constructor(t){this.lvlModifier=7.5,this.elementDemons=[],this.initCharts(t)}initCharts(t){const n=t.tripleTable.races,m=t.tripleTable.table,l=n.map(f=>"3"+f);this.speciesLookup=t.speciesLookup,this.fissionChart={},this.fusionChart={},this.races=n;for(const f of l)this.fusionChart[f]={};let g=-1;for(let f=0;f<l.length;f++)for(let o=f+1;o<l.length;o++){const p=l[f],c=l[o],r=p+"|"+c;g+=1,this.fissionChart[r]={},this.fusionChart[r]={},this.fissionChart[r][p]=[c],this.fusionChart[p][c]=r,this.fusionChart[c][p]=r;for(let v=0;v<l.length;v++){const C=l[v],T=m[g][v];this.fissionChart[T]||(this.fissionChart[T]={}),this.fissionChart[T][r]=[C],this.fusionChart[r][C]=T,this.fusionChart[C][r]=T}}}getRaceFissions(t){return this.fissionChart[t]||{}}getRaceFusions(t){const n=this.speciesLookup[t];return n?this.fusionChart["3"+n]||{}:this.fusionChart[t]||{}}getRaceFusion(t,n){return this.getRaceFusions(t)[n]||""}getLightDark(t){return 0}getElemModifiers(t){return{}}getElemFusions(t){return{}}isConvertedRace(t){return!1}}var N=d(7396),M=d(8939),P=d(6947),G=d(7178),J=d(6208),V=d(2338);const $=["Deity","Megami","Fury","Lady"],O=["Vile","Tyrant","Reaper"],b=["Entity","Zealot"];function k(R,t,n){const m=[],{race:l,lvl:g}=t.getDemon(R),f=2*(n.lvlModifier-3),o=t.getResultDemonLvls(l),p=o.indexOf(g);if(-1===b.indexOf(l)||-1===p)return m;const c=o[p-1]?2*o[p-1]-f:0,r=o[p+1]?2*g-f:200;for(const v of $)for(const C of t.getIngredientDemonLvls(v)){const T=t.reverseLookupDemon(v,C),I=c-C,x=r-C;for(const Y of O)for(const X of t.getIngredientDemonLvls(Y)){const a=t.reverseLookupDemon(Y,X);I<X&&X<=x&&m.push({name1:T,name2:a})}}return m}function D(R,t,n){const m=[],{race:l,lvl:g}=t.getDemon(R),f=3*(n.tripleChart.lvlModifier-1),o=t.getResultDemonLvls(l),p=o.indexOf(g);if(-1===b.indexOf(l)||-1===p)return m;const c=o[p-1]?3*o[p-1]-f:0,r=3*g-f;for(const v of $)for(const C of t.getIngredientDemonLvls(v)){const T=t.reverseLookupDemon(v,C),I=c-C,x=r-C;for(const Y of O)for(const X of t.getIngredientDemonLvls(Y)){const a=t.reverseLookupDemon(Y,X),E=I-X,s=x-X;for(const u of $)for(const h of t.getIngredientDemonLvls(u)){const F=t.reverseLookupDemon(u,h);E<h&&h<=s&&T.localeCompare(F)<0&&m.push({name1:T,name2:a,name3:F})}for(const u of O)for(const h of t.getIngredientDemonLvls(u)){const F=t.reverseLookupDemon(u,h);E<h&&h<=s&&a.localeCompare(F)<0&&m.push({name1:T,name2:a,name3:F})}}}return m}var L=d(3357);function A(R,t,n){const{normalChart:m,tripleChart:l,raceOrder:g}=n,f=[];for(const o of Object.keys(l.getRaceFissions(R)))for(const p of t.getIngredientDemonLvls(o)){const c=t.reverseLookupDemon(o,p);for(const[r,v]of Object.entries(m.getRaceFissions(o)))for(const C of t.getIngredientDemonLvls(r))if(p>C||p===C&&g[o]<g[r]){const T=t.reverseLookupDemon(r,C);for(const I of v)for(const x of t.getIngredientDemonLvls(I))if(p>x||p===x&&g[o]<g[I]){const Y=t.reverseLookupDemon(I,x);f.push({name1:c,name2:T,name3:Y})}}}return f}function U(R,t,n){const{tripleChart:m}=n,l=[];for(const g of Object.keys(m.getRaceFissions(R))){const f=t.getIngredientDemonLvls(g);for(let o=0;o<f.length;o++){const p=t.reverseLookupDemon(g,f[o]);for(let c=o+1;c<f.length;c++){const r=t.reverseLookupDemon(g,f[c]);for(let v=c+1;v<f.length;v++){const C=t.reverseLookupDemon(g,f[v]);l.push({name1:p,name2:r,name3:C})}}}}return l}var y=d(7101);function W(R,t,n){const m=n.tripleChart.elementDemons.filter(g=>g.indexOf(R)>-1);let l=[];for(const g of m){const f=g.replace(R,"").replace(" x ",""),o=(0,y.Dy)(g,t,n.tripleChart).concat((0,y.sk)(g,t,n.tripleChart));l=l.concat(o.map(p=>({name1:f,name2:p.name1,name3:p.name2})))}return l}var j=d(1080),w=d(2598);let Q=(()=>{class R{constructor(n){this.fusionCalculator=P.nv,this.fissionCalculator=P.ov,this.triFusionCalculator=new M.$([j.LW,j.FE],[]),this.triFissionCalculator=new M.$([L.Hr],[]),this.compConfig=n,this.appName=n.appTitle+" Fusion Calculator",this.compendium=new S.t(new e(n)).asObservable();const m=new _(n);let l,g;n.useSpeciesFusion?(l=new B(n),g=l):(l=m,g=new _(n,!0)),this.fusionChart=new S.t(new _(n)).asObservable(),this.squareChart=new S.t({normalChart:l,tripleChart:g,raceOrder:n.raceOrder}).asObservable(),n.darknessRecipes&&(this.fusionCalculator=P._J,this.fissionCalculator=P.ty),n.tripleElementTable&&(this.triFissionCalculator=new M.$([L.Hr,L.XN],[])),n.appCssClasses.includes("dssh")&&(this.fissionCalculator=new N.s([G.Hr,G.rj,k],[V.X]),this.triFusionCalculator=new M.$([j.LW,j.FE,j.Hy,j.q6],[W]),this.triFissionCalculator=new M.$([L.Hr,L.XN,D],[A,U])),(n.appCssClasses.includes("smt1")||n.appCssClasses.includes("smt2"))&&(this.fissionCalculator=new N.s([G.Hr,G.Hg,J.i,G.rj],[V.X]))}updateFusionSettings(n){return{}}static{this.\u0275fac=function(m){return new(m||R)(w.KVO(P.HI))}}static{this.\u0275prov=w.jDH({token:R,factory:R.\u0275fac})}}return R})()},1636:(z,H,d)=>{d.d(H,{d:()=>N});var S=d(177),e=d(3887),i=d(9447),_=d(1151),B=d(2598);let N=(()=>{class M{static forRoot(){return{ngModule:M}}static{this.\u0275fac=function(J){return new(J||M)}}static{this.\u0275mod=B.$C({type:M})}static{this.\u0275inj=B.G2t({imports:[S.MD,e.G,i.$,_.S]})}}return M})()}}]);