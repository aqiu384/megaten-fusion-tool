"use strict";(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[159],{609:(q,P,a)=>{a.d(P,{d:()=>T});var o=a(4412);class T{constructor(e,c,u,D,_){this.settingsKey=D,this.settingsVersion=_,this._compendium=e,this._compendium$=new o.t(this._compendium),this.compendium=this._compendium$.asObservable(),this._fusionChart=c,this._fusionChart$=new o.t(this._fusionChart),this.fusionChart=this._fusionChart$.asObservable(),this._fusionSettings=u,this._fusionSettings$=new o.t(this._fusionSettings),this.fusionSettings=this._fusionSettings$.asObservable();const h=JSON.parse(localStorage.getItem(this.settingsKey));h&&h.version&&h.version>=this.settingsVersion&&this.updateFusionSettings(h.settings),window.addEventListener("storage",this.onStorageUpdated.bind(this))}updateToggledSettings(e){this._fusionSettings.updateSaveFile(e),this._compendium.updateFusionSettings(this._fusionSettings.demonToggles),this._compendium$.next(this._compendium),this._fusionSettings$.next(this._fusionSettings)}onStorageUpdated(e){e.key===this.settingsKey&&this.updateToggledSettings(JSON.parse(e.newValue).settings)}updateFusionSettings(e){this.updateToggledSettings(e),localStorage.setItem(this.settingsKey,JSON.stringify({version:this.settingsVersion,settings:this._fusionSettings.saveFile}))}}},9981:(q,P,a)=>{a.d(P,{$v:()=>D,zZ:()=>_});var o=a(6947),T=a(4660),r=a(2598),e=a(177);function c(h,j){if(1&h&&(r.j41(0,"tr")(1,"th"),r.EFF(2),r.k0s()()),2&h){const l=j.$implicit;r.R7$(2),r.JRh(l)}}let u=(()=>{class h{ngOnChanges(){if(this.compendium&&this.pairChart&&(this.trioChart||!this.trioCalculator)){const l=[];for(const g of this.compendium.allDemons.filter(b=>!b.isEnemy)){const b=this.compendium.getSpecialNameEntries(g.name);if(b.length>0){l.push(`${g.name} = ${b.join(" x ")}`);continue}const M=this.pairCalculator.getFusions(g.name,this.compendium,this.pairChart).map(m=>(0,T.on)(m,this.compendium));if(M.length>0&&(M.filter(m=>m.race1!==g.race).length>0||!this.trioCalculator||0===this.trioCalculator.getFusions(g.name,this.compendium,this.trioChart).length)){M.sort((f,F)=>f.price-F.price);const m=M.slice(0,3).map(f=>`${f.name1} x ${f.name2}`).join(", ");l.push(`${g.name} = ${m}`+(M.length>3?`, ${M.length-3} more...`:""))}else{if(this.trioCalculator){const m=this.trioCalculator.getFusions(g.name,this.compendium,this.trioChart).map(f=>(0,T.f7)(f,this.compendium)).filter(f=>f.d1.race!==g.race);if(m.length>0){m.sort((F,y)=>F.price-y.price);const f=m.slice(0,3).map(F=>`${F.d1.name} x ${F.d2.name} x ${F.d3.name}`).join(", ");l.push(`${g.name} = ${f}`+(m.length>3?`, ${m.length-3} more...`:""));continue}}l.push(g.prereq?`${g.name} = ${g.prereq}`:`${g.name} = No fusions found!`)}}this.fissionPreviews=l}}static{this.\u0275fac=function(g){return new(g||h)}}static{this.\u0275cmp=r.VBU({type:h,selectors:[["app-fission-preview-table"]],inputs:{pairCalculator:"pairCalculator",trioCalculator:"trioCalculator",pairChart:"pairChart",trioChart:"trioChart",compendium:"compendium"},features:[r.OA$],decls:6,vars:1,consts:[[1,"entry-table"],[1,"title"],[4,"ngFor","ngForOf"]],template:function(g,b){1&g&&(r.j41(0,"table",0)(1,"tbody")(2,"tr")(3,"th",1),r.EFF(4,"Fission Previews"),r.k0s()(),r.DNE(5,c,3,1,"tr",2),r.k0s()()),2&g&&(r.R7$(5),r.Y8G("ngForOf",b.fissionPreviews))},dependencies:[e.Sq],encapsulation:2,changeDetection:0})}}return h})(),D=(()=>{class h{constructor(l){this.fusionDataService=l,this.subscriptions=[]}ngOnInit(){this.calculator=this.fusionDataService.fissionCalculator,this.subscriptions.push(this.fusionDataService.compendium.subscribe(l=>{this.compendium=l})),this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(l=>{this.fusionChart=l}))}ngOnDestroy(){for(const l of this.subscriptions)l.unsubscribe()}static{this.\u0275fac=function(g){return new(g||h)(r.rXU(o.iJ))}}static{this.\u0275cmp=r.VBU({type:h,selectors:[["app-smt-fission-preview"]],decls:2,vars:3,consts:[[3,"pairCalculator","pairChart","compendium"]],template:function(g,b){1&g&&(r.j41(0,"app-fission-preview-table",0),r.nrm(1,"app-fission-preview-table"),r.k0s()),2&g&&r.Y8G("pairCalculator",b.calculator)("pairChart",b.fusionChart)("compendium",b.compendium)},dependencies:[u],encapsulation:2,changeDetection:0})}}return h})(),_=(()=>{class h{constructor(l){this.fusionTrioService=l,this.subscriptions=[]}ngOnInit(){this.pairCalculator=this.fusionTrioService.fissionCalculator,this.trioCalculator=this.fusionTrioService.triFissionCalculator,this.subscriptions.push(this.fusionTrioService.compendium.subscribe(l=>{this.compendium=l})),this.subscriptions.push(this.fusionTrioService.squareChart.subscribe(l=>{this.fusionChart=l}))}ngOnDestroy(){for(const l of this.subscriptions)l.unsubscribe()}static{this.\u0275fac=function(g){return new(g||h)(r.rXU(o.eG))}}static{this.\u0275cmp=r.VBU({type:h,selectors:[["app-trio-fission-preview"]],decls:2,vars:5,consts:[[3,"pairCalculator","trioCalculator","pairChart","trioChart","compendium"]],template:function(g,b){1&g&&(r.j41(0,"app-fission-preview-table",0),r.nrm(1,"app-fission-preview-table"),r.k0s()),2&g&&r.Y8G("pairCalculator",b.pairCalculator)("trioCalculator",b.trioCalculator)("pairChart",b.fusionChart.normalChart)("trioChart",b.fusionChart)("compendium",b.compendium)},dependencies:[u],encapsulation:2,changeDetection:0})}}return h})()},860:(q,P,a)=>{a.d(P,{B:()=>j});var o=a(2598),T=a(2755),r=a(1090),e=a(345),c=a(177),u=a(4207);function D(l,g){if(1&l){const b=o.RV6();o.qex(0),o.j41(1,"tr")(2,"th"),o.EFF(3,"All Demons"),o.k0s()(),o.j41(4,"tr")(5,"td")(6,"button",4),o.bIt("click",function(){o.eBV(b);const p=o.XpG();return o.Njj(p.toggledAll.emit(!0))}),o.EFF(7,"Enable All"),o.k0s(),o.j41(8,"button",4),o.bIt("click",function(){o.eBV(b);const p=o.XpG();return o.Njj(p.toggledAll.emit(!1))}),o.EFF(9,"Disable All"),o.k0s()()(),o.bVm()}}function _(l,g){if(1&l){const b=o.RV6();o.j41(0,"tr")(1,"td")(2,"label"),o.EFF(3),o.j41(4,"input",5),o.bIt("change",function(){const m=o.eBV(b).$implicit,f=o.XpG(2);return o.Njj(f.toggledName.emit(m.name))}),o.k0s()()()()}if(2&l){const b=g.$implicit;o.R7$(3),o.SpI("",b.caption," "),o.R7$(1),o.Y8G("checked",b.enabled)}}function h(l,g){if(1&l&&(o.qex(0),o.j41(1,"tr")(2,"th"),o.EFF(3),o.k0s()(),o.DNE(4,_,5,2,"tr",3),o.bVm()),2&l){const b=g.$implicit;o.R7$(3),o.JRh(b.category),o.R7$(1),o.Y8G("ngForOf",b.settings)}}let j=(()=>{class l{constructor(b){this.title=b,this.lang="en",this.showEnableAll=!1,this.toggledAll=new o.bkB,this.toggledName=new o.bkB,this.msgs=r.BR}set appTitle(b){this.title.setTitle((0,T.oO)(this.msgs.AppTitle,this.lang)+b)}static{this.\u0275fac=function(M){return new(M||l)(o.rXU(e.hE))}}static{this.\u0275cmp=o.VBU({type:l,selectors:[["app-fusion-settings"]],inputs:{dlcDemons:"dlcDemons",lang:"lang",fusionSettings:"fusionSettings",showEnableAll:"showEnableAll",appTitle:"appTitle"},outputs:{toggledAll:"toggledAll",toggledName:"toggledName"},decls:12,vars:6,consts:[[1,"entry-table"],[1,"title"],[4,"ngIf"],[4,"ngFor","ngForOf"],[2,"width","50%",3,"click"],["type","checkbox",3,"checked","change"]],template:function(M,p){1&M&&(o.qex(0),o.j41(1,"h2"),o.EFF(2),o.nI1(3,"translateComp"),o.k0s(),o.j41(4,"table",0)(5,"thead")(6,"tr")(7,"th",1),o.EFF(8,"Unlock Conditions"),o.k0s()()(),o.j41(9,"tbody"),o.DNE(10,D,10,0,"ng-container",2),o.DNE(11,h,5,2,"ng-container",3),o.k0s()(),o.bVm()),2&M&&(o.R7$(2),o.JRh(o.i5U(3,3,p.msgs.DlcTitle,p.lang)),o.R7$(8),o.Y8G("ngIf",p.showEnableAll),o.R7$(1),o.Y8G("ngForOf",p.fusionSettings.displayHeaders))},dependencies:[c.Sq,c.bT,u.uz],encapsulation:2,changeDetection:0})}}return l})()},6495:(q,P,a)=>{a.d(P,{E:()=>e});var o=a(6947),T=a(2598),r=a(9023);let e=(()=>{class c{constructor(D,_){this.changeDetectorRef=D,this.fusionTrioService=_,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.fusionTrioService.squareChart.subscribe(D=>{this.normChart=D.normalChart,this.tripChart=D.tripleChart}))}ngOnDestroy(){for(const D of this.subscriptions)D.unsubscribe()}static{this.\u0275fac=function(_){return new(_||c)(T.rXU(T.gRc),T.rXU(o.eG))}}static{this.\u0275cmp=T.VBU({type:c,selectors:[["app-triple-fusion-chart"]],decls:1,vars:4,consts:[[3,"normChart","tripChart","normTitle","tripTitle"]],template:function(_,h){1&_&&T.nrm(0,"app-fusion-chart",0),2&_&&T.Y8G("normChart",h.normChart)("tripChart",h.tripChart)("normTitle","Normal Fusions")("tripTitle","Triple Fusions")},dependencies:[r.q],encapsulation:2,changeDetection:0})}}return c})()},6567:(q,P,a)=>{a.d(P,{I:()=>T});var o=a(2598);let T=(()=>{class r{constructor(c,u){this.changeDetector2=c,this.fusionDataService2=u,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.fusionDataService2.compendium.subscribe(c=>{this.changeDetector2.markForCheck(),this.compendium=c})),this.subscriptions.push(this.fusionDataService2.fusionSettings.subscribe(c=>{this.fusionSettings=c}))}ngOnDestroy(){for(const c of this.subscriptions)c.unsubscribe()}toggleAll(c){const u={};for(const D of this.fusionSettings.displayHeaders)for(const _ of D.settings)u[_.name]=c;this.fusionDataService2.updateFusionSettings(u)}toggleName(c){const u={};u[c]=!this.fusionSettings.isEnabled(c),this.fusionDataService2.updateFusionSettings(u)}static{this.\u0275fac=function(u){o.QTQ()}}static{this.\u0275dir=o.FsC({type:r})}}return r})()},1939:(q,P,a)=>{a.d(P,{U:()=>o});class o{constructor(r,e,c=","){this.separator=c,this._displayHeaders=[],this._demonToggles={},this._subappToggles={};for(const{category:D,unlocked:_,conditions:h}of r){const j=[];this._displayHeaders.push({category:D,settings:j});for(const l of Object.keys(h))this._demonToggles[l]=_,j.push({name:l,caption:l.split(c).join(", "),enabled:_})}const u=[];e.length>0&&this._displayHeaders.push({category:"Subapps",settings:u});for(const D of e)this._subappToggles[D]=!1,u.push({name:D,caption:D,enabled:!1})}get displayHeaders(){for(const r of this._displayHeaders)for(const e of r.settings)e.enabled=this.saveFile[e.name];return this._displayHeaders}get subappToggles(){return this._subappToggles}get demonToggles(){const r={};for(const[e,c]of Object.entries(this._demonToggles))for(const u of e.split(this.separator))r[u]=c;return r}get saveFile(){return Object.assign({},this._demonToggles,this._subappToggles)}isEnabled(r){return this._demonToggles[r]||this._subappToggles[r]||!1}updateSaveFile(r){for(const e of[this._demonToggles,this._subappToggles])for(const[c,u]of Object.entries(r))e[c]===!u&&(e[c]=u)}}},5990:(q,P,a)=>{a.d(P,{D:()=>T});var o=a(8063);class T extends o.p{constructor(e,c,u){super(),this.elementDemons=[],this.lvlModifier=.5,this.initCharts(e,u)}initCharts(e,c){const u=e.races,D=e.table,_=[];for(let h=0;h<u.length;h++)_.push(D[h].slice(c?0:h,c?h+1:u.length)),c||(_[h][0]="-");this.races=u,this.lvlModifier=c?4.25:.5,this.fissionChart=o.p.loadFissionTableJson(u,this.elementDemons,_),this.fusionChart=o.p.loadFusionTableJson(u,_),this.elementChart={}}}},5252:(q,P,a)=>{a.d(P,{S:()=>Pe});var o=a(8935),T=a(2755),r=a(1090),e=a(2598),c=a(7269),u=a(177),D=a(5583);let _=(()=>{class s{constructor(t){this.appCssClasses=t.compConfig.appCssClasses;const n=t.compConfig;this.otherLinks=[n.hasQrcodes?{title:"QR Code Generator",link:"qrcodes"}:{title:(0,T.oO)(r.fu.RecipGenerator,t.compConfig.lang),link:"recipes"}],n.hasEnemies&&this.otherLinks.unshift({title:(0,T.oO)(r.fu.ShadowList,t.compConfig.lang),link:"shadows"})}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(c.i))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-pq2-compendium"]],decls:1,vars:3,consts:[[3,"ngClass","mainList","otherLinks"]],template:function(n,i){1&n&&e.nrm(0,"app-demon-compendium",0),2&n&&e.Y8G("ngClass",i.appCssClasses)("mainList","persona")("otherLinks",i.otherLinks)},dependencies:[u.YU,D.f],styles:[".pq2 div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.pq2 div.element-icon.i2055,.pq2 div.element-icon.phy{background-image:url(/assets/images/p5/phys.png)}.pq2 div.element-icon.i3583,.pq2 div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.pq2 div.element-icon.i3071,.pq2 div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.pq2 div.element-icon.i3967,.pq2 div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.pq2 div.element-icon.i3839,.pq2 div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.pq2 div.element-icon.i4063,.pq2 div.element-icon.psy{background-image:url(/assets/images/p5/psy.png)}.pq2 div.element-icon.i4031,.pq2 div.element-icon.nuk{background-image:url(/assets/images/p5/nuke.png)}.pq2 div.element-icon.i4087,.pq2 div.element-icon.ble{background-image:url(/assets/images/p5/bless.png)}.pq2 div.element-icon.i4079,.pq2 div.element-icon.cur{background-image:url(/assets/images/p5/curse.png)}.pq2 div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.pq2 div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.pq2 div.element-icon.i4095,.pq2 div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.pq2 div.element-icon.i2047,.pq2 div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.pq2 div.element-icon.nav{background-image:url(/assets/images/p5/trait.png)}.pq2 div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.pq2 th.title,.pq2 th.nav.active,.pq2 th.nav.active a{color:#fff;background-color:#ff4800}.pq div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.pq div.element-icon.cut{background-image:url(/assets/images/p5/sword.png)}.pq div.element-icon.i3584,.pq div.element-icon.i3591,.pq div.element-icon.bas{background-image:url(/assets/images/p5/phys.png)}.pq div.element-icon.sta{background-image:url(/assets/images/p5/gun.png)}.pq div.element-icon.i376,.pq div.element-icon.i383,.pq div.element-icon.i3960,.pq div.element-icon.i3967,.pq div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.pq div.element-icon.i248,.pq div.element-icon.i255,.pq div.element-icon.i3832,.pq div.element-icon.i3839,.pq div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.pq div.element-icon.i472,.pq div.element-icon.i479,.pq div.element-icon.i4056,.pq div.element-icon.i4063,.pq div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.pq div.element-icon.i440,.pq div.element-icon.i447,.pq div.element-icon.i4024,.pq div.element-icon.i4031,.pq div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.pq div.element-icon.i496,.pq div.element-icon.i503,.pq div.element-icon.i4080,.pq div.element-icon.i4087,.pq div.element-icon.lig{background-image:url(/assets/images/p5/bless.png)}.pq div.element-icon.i488,.pq div.element-icon.i495,.pq div.element-icon.i4072,.pq div.element-icon.i4079,.pq div.element-icon.dar{background-image:url(/assets/images/p5/curse.png)}.pq div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.pq div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.pq div.element-icon.i504,.pq div.element-icon.i511,.pq div.element-icon.i4088,.pq div.element-icon.i4095,.pq div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.pq div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.pq div.element-icon.nav{background-image:url(/assets/images/p5/trait.png)}.pq div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.pq th.title,.pq th.nav.active,.pq th.nav.active a{color:#000;background-color:#aa1ca9}.p5t div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p5t div.element-icon.phy{background-image:url(/assets/images/p5/phys.png)}.p5t div.element-icon.gun{background-image:url(/assets/images/p5/gun.png)}.p5t div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p5t div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p5t div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p5t div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p5t div.element-icon.psy{background-image:url(/assets/images/p5/psy.png)}.p5t div.element-icon.nuk{background-image:url(/assets/images/p5/nuke.png)}.p5t div.element-icon.ble{background-image:url(/assets/images/p5/bless.png)}.p5t div.element-icon.cur{background-image:url(/assets/images/p5/curse.png)}.p5t div.element-icon.i1023,.p5t div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p5t div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p5t div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p5t div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.p5t th.title,.p5t th.nav.active,.p5t th.nav.active a{color:#fff;background-color:#f41000}.p3r th.title,.p3r th.nav.active,.p3r th.nav.active a{color:#000;background-color:#4372aa}.p3r div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p3r div.element-icon.i3583,.p3r div.element-icon.i3585,.p3r div.element-icon.sla{background-image:url(/assets/images/p5/sword.png)}.p3r div.element-icon.i2047,.p3r div.element-icon.i3615,.p3r div.element-icon.str{background-image:url(/assets/images/p5/phys.png)}.p3r div.element-icon.i3071,.p3r div.element-icon.i4065,.p3r div.element-icon.pie{background-image:url(/assets/images/p5/gun.png)}.p3r div.element-icon.i3967,.p3r div.element-icon.i3843,.p3r div.element-icon.i3955,.p3r div.element-icon.i3949,.p3r div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p3r div.element-icon.i3839,.p3r div.element-icon.i3715,.p3r div.element-icon.i3827,.p3r div.element-icon.i3821,.p3r div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p3r div.element-icon.i4063,.p3r div.element-icon.i3651,.p3r div.element-icon.i4051,.p3r div.element-icon.i4045,.p3r div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p3r div.element-icon.i4031,.p3r div.element-icon.i3619,.p3r div.element-icon.i4019,.p3r div.element-icon.i4013,.p3r div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p3r div.element-icon.i4083,.p3r div.element-icon.i3603,.p3r div.element-icon.lig{background-image:url(/assets/images/p5/bless.png)}.p3r div.element-icon.i4077,.p3r div.element-icon.i3597,.p3r div.element-icon.dar{background-image:url(/assets/images/p5/curse.png)}.p3r div.element-icon.i493,.p3r div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.p3r div.element-icon.i499,.p3r div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p3r div.element-icon.i4095,.p3r div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p3r div.element-icon.i511,.p3r div.element-icon.i4088,.p3r div.element-icon.spe{background-image:url(/assets/images/p5/trait.png)}.p3r div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p3r div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}\n"],encapsulation:2,changeDetection:0})}}return s})();var h=a(9404),j=a(345),l=a(9629);let g=(()=>{class s extends h.M{constructor(t,n,i,C){super(t,i,C),this.showAllies=!n.snapshot.data.showShadows,this.showEnemies=!this.showAllies,this.compConfig=C.compConfig,this.defaultSortFun=(E,U)=>200*(this.compConfig.raceOrder[E.race]-this.compConfig.raceOrder[U.race])+U.lvl-E.lvl,this.appName=(0,T.oO)(r.vC.AppPersonas,this.compConfig.lang)+C.appName,this.statHeaders=this.compConfig.baseStats,this.resistHeaders=this.compConfig.hasDemonResists?this.compConfig.resistElems:[],this.inheritOrder=this.compConfig.elemOrder,this.showEnemies&&(this.appName=(0,T.oO)(r.vC.AppShadows,this.compConfig.lang)+C.appName,this.statHeaders=this.compConfig.enemyStats,this.resistHeaders=this.compConfig.resistElems,this.inheritOrder=null)}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(j.hE),e.rXU(o.nX),e.rXU(e.gRc),e.rXU(c.i))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-demon-list-container"]],features:[e.Vt3],decls:2,vars:9,consts:[[3,"lang","isEnemy","raceOrder","statHeaders","resistHeaders","inheritOrder","rowData"]],template:function(n,i){1&n&&(e.nrm(0,"app-smt-demon-list",0),e.nI1(1,"async")),2&n&&e.Y8G("lang",i.compConfig.lang)("isEnemy",i.showEnemies)("raceOrder",i.compConfig.raceOrder)("statHeaders",i.statHeaders)("resistHeaders",i.resistHeaders)("inheritOrder",i.inheritOrder)("rowData",e.bMT(1,7,i.demons))},dependencies:[l.F,u.Jj],encapsulation:2,changeDetection:0})}}return s})();var b=a(9454),M=a(2940);let p=(()=>{class s extends b.E{constructor(t,n,i){super(t,n,i),this.compConfig=i.compConfig,this.appName=(0,T.oO)(r.vf.AppTitle,this.compConfig.lang)+i.appName,this.defaultSortFun=(C,E)=>1e4*(this.compConfig.elemOrder[C.element]-this.compConfig.elemOrder[E.element])+C.rank-E.rank}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(j.hE),e.rXU(e.gRc),e.rXU(c.i))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-skill-list-container"]],features:[e.Vt3],decls:2,vars:9,consts:[[3,"lang","elemOrder","hasRank","hasTarget","isPersona","transferTitle","rowData"]],template:function(n,i){1&n&&(e.nrm(0,"app-smt-skill-list",0),e.nI1(1,"async")),2&n&&e.Y8G("lang",i.compConfig.lang)("elemOrder",i.compConfig.elemOrder)("hasRank",i.compConfig.hasSkillRanks)("hasTarget",!0)("isPersona",!0)("transferTitle","Skill Card")("rowData",e.bMT(1,7,i.skills))},dependencies:[M.p,u.Jj],encapsulation:2,changeDetection:0})}}return s})();var m=a(5692),f=a(3679),F=a(2223),y=a(302),G=a(9436),R=a(6122),B=a(8696);let v=(()=>{class s{constructor(){this.lang="en"}static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-enemy-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig",lang:"lang"},decls:19,vars:14,consts:[[3,"title","statHeaders","stats"],[1,"entry-table"],["colspan","2",1,"title"],[3,"resistHeaders","resists","ailmentHeaders","ailments"],[3,"hasTarget","hasLvl","elemOrder","compendium","skillLevels"]],template:function(n,i){1&n&&(e.nrm(0,"app-demon-stats",0),e.j41(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),e.EFF(5,"Appearances"),e.k0s()(),e.j41(6,"tr")(7,"th"),e.EFF(8,"Areas"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Drops"),e.k0s()()(),e.j41(11,"tbody")(12,"tr")(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s()()()(),e.nrm(17,"app-demon-resists",3)(18,"app-demon-skills",4)),2&n&&(e.Y8G("title","Lvl "+i.demon.lvl+" "+i.demon.race+" "+i.demon.name)("statHeaders",i.compConfig.enemyStats)("stats",i.demon.stats),e.R7$(14),e.JRh(i.demon.area),e.R7$(2),e.JRh(i.demon.drop),e.R7$(1),e.Y8G("resistHeaders",i.compConfig.resistElems)("resists",i.demon.resists)("ailmentHeaders",i.compConfig.ailmentElems)("ailments",i.demon.ailments),e.R7$(1),e.Y8G("hasTarget",!0)("hasLvl",!1)("elemOrder",i.compConfig.elemOrder)("compendium",i.compendium)("skillLevels",i.demon.skills))},dependencies:[f.C,F.w,y.F],encapsulation:2,changeDetection:0})}}return s})();function $(s,k){if(1&s&&e.nrm(0,"app-demon-resists",7),2&s){const t=e.XpG(2);e.Y8G("lang",t.lang)("resistHeaders",t.compConfig.resistElems)("resists",t.demon.resists)}}function A(s,k){if(1&s&&(e.qex(0),e.nrm(1,"app-demon-stats",2),e.DNE(2,$,1,3,"app-demon-resists",3),e.nrm(3,"app-demon-inherits",4)(4,"app-demon-skills",5)(5,"app-smt-fusions",6),e.bVm()),2&s){const t=e.XpG();e.R7$(1),e.Y8G("lang",t.lang)("title","Lvl "+t.demon.lvl+" "+t.demon.race+" "+t.demon.name)("price",t.demon.price)("statHeaders",t.compConfig.baseStats)("stats",t.demon.stats)("inherits",t.demon.inherits),e.R7$(1),e.Y8G("ngIf",t.compConfig.hasDemonResists),e.R7$(1),e.Y8G("lang",t.lang)("inheritHeaders",t.compConfig.inheritElems)("inherits",t.compendium.getInheritElems(t.demon.inherits)),e.R7$(1),e.Y8G("lang",t.lang)("hasTarget",!0)("elemOrder",t.compConfig.elemOrder)("compendium",t.compendium)("skillLevels",t.demon.skills),e.R7$(1),e.Y8G("lang",t.lang)("hasTripleFusion",t.compConfig.hasTripleFusion)("excludedDlc","excluded"===t.demon.fusion)}}function V(s,k){if(1&s&&e.nrm(0,"app-demon-missing",8),2&s){const t=e.XpG();e.Y8G("name",t.name)}}function O(s,k){if(1&s&&e.nrm(0,"app-demon-entry",1),2&s){const t=e.XpG();e.Y8G("lang",t.compConfig.lang)("name",t.name)("demon",t.demon)("compConfig",t.compConfig)("compendium",t.compendium)}}function S(s,k){if(1&s&&e.nrm(0,"app-enemy-entry",1),2&s){const t=e.XpG();e.Y8G("lang",t.compConfig.lang)("name",t.name)("demon",t.demon)("compConfig",t.compConfig)("compendium",t.compendium)}}let d=(()=>{class s{constructor(){this.lang="en"}static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig",lang:"lang"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"lang","title","price","statHeaders","stats","inherits"],[3,"lang","resistHeaders","resists",4,"ngIf"],[3,"lang","inheritHeaders","inherits"],[3,"lang","hasTarget","elemOrder","compendium","skillLevels"],[3,"lang","hasTripleFusion","excludedDlc"],[3,"lang","resistHeaders","resists"],[3,"name"]],template:function(n,i){1&n&&(e.DNE(0,A,6,18,"ng-container",0),e.DNE(1,V,1,1,"app-demon-missing",1)),2&n&&(e.Y8G("ngIf",i.demon),e.R7$(1),e.Y8G("ngIf",!i.demon))},dependencies:[u.bT,m.X,f.C,F.w,y.F,G.d,R.L],encapsulation:2,changeDetection:0})}}return s})(),L=(()=>{class s{constructor(t,n,i,C){this.route=t,this.title=n,this.currentDemonService=i,this.fusionDataService=C,this.subscriptions=[],this.appName="Test App",this.appName=C.appName,this.compConfig=C.compConfig}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const t of this.subscriptions)t.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(t=>{this.compendium=t,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(t=>{this.name=t,this.getDemonEntry()})),this.route.params.subscribe(t=>{this.currentDemonService.nextCurrentDemon(t.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(`${this.name} - ${this.appName}`),this.demon=this.compendium.getDemon(this.name))}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(o.nX),e.rXU(j.hE),e.rXU(B.i),e.rXU(c.i))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-demon-entry-container"]],decls:2,vars:2,consts:[[3,"lang","name","demon","compConfig","compendium",4,"ngIf"],[3,"lang","name","demon","compConfig","compendium"]],template:function(n,i){1&n&&(e.DNE(0,O,1,5,"app-demon-entry",0),e.DNE(1,S,1,5,"app-enemy-entry",0)),2&n&&(e.Y8G("ngIf",!i.demon||!i.demon.isEnemy),e.R7$(1),e.Y8G("ngIf",i.demon&&i.demon.isEnemy))},dependencies:[u.bT,d,v],encapsulation:2,changeDetection:0})}}return s})();const N=Array(24).fill(0);function I(s,k){return s.split("").map(t=>t.charCodeAt(0)).concat(Array(k-s.length).fill(0))}N[0]=4,N[2]=50,N[4]=50,N[6]=50,N[7]=50,N[8]=50,N[12]=50,N[16]=50,N[20]=50;const X=[].concat(I("aqiu384.github.io",21),I("https://youtu.be/b1KfNEPKncQ",33)),H="kitaro",K="bancho",x=[].concat(I(H,17),I(K,17)),Q=[].concat(I(H,29),I(K,29)),z=[].concat(I(H,17),I(K,17),I("renren",17),I("hamuko",17)),Z=[].concat([34,50],Array(36).fill(31),[31,0,31,0,0,0,1,128]),ee=[].concat([34,50],Array(54).fill(31),[31,0,1,0]);var w=a(4341);let ie=(()=>{class s{constructor(){this.byteArray=[],this.errorLvl="L",this.typeNum=10,this.qrFactory=qrcode(this.typeNum,this.errorLvl),this.qrImg=null}ngOnChanges(){this.createQrcode()}createQrcode(){this.qrFactory=qrcode(this.typeNum,this.errorLvl),this.qrFactory.addData(this.byteArray.map(t=>String.fromCharCode(t)).join("")),this.qrFactory.make(),this.qrImg=this.qrFactory.createImgTag(5)}static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-qrcode"]],inputs:{byteArray:"byteArray",errorLvl:"errorLvl",typeNum:"typeNum"},features:[e.OA$],decls:1,vars:1,consts:[[3,"innerHtml"]],template:function(n,i){1&n&&e.nrm(0,"div",0),2&n&&e.Y8G("innerHtml",i.qrImg,e.npT)},encapsulation:2,changeDetection:0})}}return s})();var oe=a(4207);function ae(s,k){if(1&s&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&s){const t=k.index;e.Y8G("value",t+1),e.R7$(1),e.JRh(t+1)}}function re(s,k){if(1&s&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&s){const t=k.index;e.Y8G("value",t+1),e.R7$(1),e.JRh(t+1)}}function le(s,k){if(1&s&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&s){const t=k.index;e.Y8G("value",t+1),e.R7$(1),e.JRh(t+1)}}function ce(s,k){if(1&s&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&s){const t=k.$implicit;e.Y8G("value",t),e.R7$(1),e.JRh(t)}}function me(s,k){if(1&s&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&s){const t=k.$implicit;e.Y8G("value",t.name),e.R7$(1),e.JRh(t.name)}}function pe(s,k){if(1&s&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&s){const t=k.$implicit;e.Y8G("value",t),e.R7$(1),e.JRh(t)}}function ue(s,k){if(1&s&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&s){const t=k.$implicit;e.Y8G("value",t.name),e.R7$(1),e.JRh(t.name)}}function de(s,k){if(1&s&&(e.qex(0),e.j41(1,"td"),e.EFF(2),e.nI1(3,"skillCostToString"),e.k0s(),e.j41(4,"td"),e.EFF(5),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.bVm()),2&s){const t=k.$implicit;e.R7$(1),e.xc7("color",t.cost?null:"transparent"),e.R7$(1),e.JRh(e.bMT(3,5,t.cost)),e.R7$(3),e.JRh(t.effect),e.R7$(2),e.JRh(t.target)}}function he(s,k){1&s&&(e.j41(0,"td"),e.EFF(1,"-"),e.k0s(),e.j41(2,"td"),e.EFF(3,"-"),e.k0s(),e.j41(4,"td"),e.EFF(5,"-"),e.k0s())}const ge=function(s){return{unique:s}};function fe(s,k){if(1&s){const t=e.RV6();e.qex(0,18),e.j41(1,"tr",19)(2,"td")(3,"select",20),e.bIt("change",function(){const C=e.eBV(t).$implicit,E=e.XpG();return e.Njj(C.controls.name.setValue(E.skills[C.controls.elem.value][0].name))}),e.j41(4,"option",21),e.EFF(5,"-"),e.k0s(),e.DNE(6,pe,2,2,"option",9),e.k0s()(),e.j41(7,"td")(8,"select",22),e.DNE(9,ue,2,2,"option",9),e.k0s()(),e.DNE(10,de,8,7,"ng-container",23),e.DNE(11,he,6,0,"ng-template",null,24,e.C5r),e.k0s(),e.bVm()}if(2&s){const t=k.$implicit,n=k.index,i=e.sdS(12),C=e.XpG();e.Y8G("formGroupName",n),e.R7$(1),e.Y8G("ngClass",e.eq3(6,ge,(C.compendium.getSkill(t.controls.name.value)||C.blankSkill).rank>90)),e.R7$(5),e.Y8G("ngForOf",C.elems),e.R7$(3),e.Y8G("ngForOf",C.skills[t.controls.elem.value]),e.R7$(1),e.Y8G("ngIf",C.compendium.getSkill(t.controls.name.value))("ngIfElse",i)}}let ve=(()=>{class s{constructor(t){this.fb=t,this.defaultRace="Fool",this.defaultDemon="Slime",this.demons={},this.skills={},this.dcodes={},this.scodes={},this.range99=Array(99),this.range299=Array(299),this.price=0,this.blankSkill={code:0,cost:0,level:0,rank:0,target:"Self",name:"-",element:"-",inherit:"-",effect:"-",learnedBy:[],transfer:[]},this.createForm()}ngOnChanges(){this.initDropdowns()}createForm(){const t=[];for(let n=0;n<6;n++)t.push(this.fb.group({elem:"-",name:"-"}));this.form=this.fb.group({language:"eng",lvl:1,hp:1,mp:1,race:this.defaultRace,demon:this.defaultDemon,skills:this.fb.array(t)}),this.form.valueChanges.subscribe(n=>{if(this.form.valid){const i=this.compendium.getDemon(n.demon),C=n.skills.map(Y=>this.compendium.getSkill(Y.name)||this.blankSkill),E={language:n.language,demonCode:i.code,lvl:parseInt(n.lvl,10),exp:-1,hp:parseInt(n.hp,10),mp:parseInt(n.mp,10),skillCodes:C.map(Y=>Y.code)},U=E.skillCodes.reduce((Y,Ge)=>0!==Ge?Y+1:Y,0);this.price=10*Math.floor((800+120*E.lvl)*(1+.25*U)/10),this.passBytes=function te(s,k){return k&&k.includes("2")?function ne(s){const k=N.slice(),t=Array(25).fill(0),n=s.lvl,i=Math.floor((((-.0479755766*n+9.28700353)*n+71.9694228)*n-81.1026214)*n+.120783542),C=s.exp<0?i:s.exp;"jpn"!==s.language&&(k[6]=256-k[6]),t[0]=s.demonCode%256,t[1]=2*s.lvl+Math.floor(s.demonCode/256),t[2]=C%256,t[3]=Math.floor(C/256)%256,t[4]=Math.floor(C/65536);for(let E=0;E<6;E++)t[6+2*E]=s.skillCodes[E]%256,t[6+2*E+1]=Math.floor(s.skillCodes[E]/256);return t[22]=10*s.hp%256,t[23]=10*s.mp%16*16+Math.floor(s.hp/25.6),t[24]=Math.floor(s.mp/1.6),[].concat(k,X,z,ee,t,Array(21).fill(0))}(s):function se(s){const k="jpn"===s.language?x:Q,t=Array(30).fill(0),n=s.lvl,i=Math.floor((((-.07600161*n+14.0603287)*n-.02256972)*n+.59031556)*n-1.87981906),C=s.exp<0?i:s.exp;t[0]=s.demonCode,t[2]=s.lvl,t[6]=C%256,t[7]=Math.floor(C/256)%256,t[8]=Math.floor(C/65536);for(let E=0;E<6;E++)t[10+2*E]=s.skillCodes[E]%256,t[10+2*E+1]=Math.floor(s.skillCodes[E]/256);return t[26]=10*s.hp%256,t[27]=Math.floor(s.hp/25.6),t[28]=10*s.mp%256,t[29]=Math.floor(s.mp/25.6),[].concat(N,X,k,Z,t,Array(40).fill(0))}(s)}(E,this.compConfig.appTitle)}})}initDropdowns(){if(this.demons={},this.skills={"-":[this.blankSkill]},this.dcodes={},this.scodes={0:this.blankSkill},this.compConfig&&this.compendium){for(const t of this.compendium.allDemons.filter(n=>n.code))this.demons[t.race]||(this.demons[t.race]=[]),this.demons[t.race].push(t),this.dcodes[t.code]=t;for(const t of this.compendium.allSkills.filter(n=>n.code))this.skills[t.element]||(this.skills[t.element]=[]),this.skills[t.element].push(t),this.scodes[t.code]=t;for(const t of Object.values(this.demons))t.sort((n,i)=>i.lvl-n.lvl);for(const t of Object.values(this.skills))t.sort((n,i)=>n.rank-i.rank);this.races=this.compConfig.races.filter(t=>this.demons[t]),this.elems=this.compConfig.skillElems.filter(t=>this.skills[t]),this.setDefaultValues(this.defaultDemon)}}changeRace(t){const n=this.demons[t][0];this.form.controls.demon.setValue(n.name),this.setDefaultValues(n.name)}setDefaultValues(t){const n=Array(6).fill(this.blankSkill),i=this.compendium.getDemon(t);let C=0;for(const[E,U]of Object.entries(i.skills))0===U&&(n[C++]=this.compendium.getSkill(E));this.form.patchValue({lvl:Math.floor(i.lvl),hp:i.stats[0],mp:i.stats[1],race:i.race,demon:i.name,skills:n.map(E=>({elem:E.element,name:E.name}))})}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(w.ok))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-password-generator"]],inputs:{defaultRace:"defaultRace",defaultDemon:"defaultDemon",compendium:"compendium",compConfig:"compConfig"},features:[e.OA$],decls:69,vars:9,consts:[[3,"formGroup"],[1,"entry-table"],["colspan","2",1,"title"],[3,"byteArray"],["colspan","7",1,"title"],["formControlName","language"],["value","jpn"],["value","eng"],["formControlName","lvl"],[3,"value",4,"ngFor","ngForOf"],["formControlName","hp"],["formControlName","mp"],["formControlName","race",3,"change"],["formControlName","demon",3,"change"],["formArrayName","skills",1,"list-table"],["colspan","5",1,"title"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"value"],[3,"formGroupName"],[3,"ngClass"],["formControlName","elem",3,"change"],["value","-"],["formControlName","name"],[4,"ngIf","ngIfElse"],["noEntry",""]],template:function(n,i){1&n&&(e.j41(0,"form",0)(1,"h2"),e.EFF(2,"QR Code Generator"),e.k0s(),e.j41(3,"table",1)(4,"tr")(5,"th",2),e.EFF(6,"QR Code"),e.k0s()(),e.j41(7,"tr")(8,"td"),e.nrm(9,"app-qrcode",3),e.k0s()()(),e.j41(10,"table",1)(11,"tr")(12,"th",4),e.EFF(13,"Persona Entry"),e.k0s()(),e.j41(14,"tr")(15,"th"),e.EFF(16,"Price"),e.k0s(),e.j41(17,"th"),e.EFF(18,"Language"),e.k0s(),e.j41(19,"th"),e.EFF(20,"Level"),e.k0s(),e.j41(21,"th"),e.EFF(22,"HP"),e.k0s(),e.j41(23,"th"),e.EFF(24,"MP"),e.k0s(),e.j41(25,"th"),e.EFF(26,"Race"),e.k0s(),e.j41(27,"th"),e.EFF(28,"Demon"),e.k0s()(),e.j41(29,"tr")(30,"td"),e.EFF(31),e.k0s(),e.j41(32,"td")(33,"select",5)(34,"option",6),e.EFF(35,"Japanese"),e.k0s(),e.j41(36,"option",7),e.EFF(37,"English"),e.k0s()()(),e.j41(38,"td")(39,"select",8),e.DNE(40,ae,2,2,"option",9),e.k0s()(),e.j41(41,"td")(42,"select",10),e.DNE(43,re,2,2,"option",9),e.k0s()(),e.j41(44,"td")(45,"select",11),e.DNE(46,le,2,2,"option",9),e.k0s()(),e.j41(47,"td")(48,"select",12),e.bIt("change",function(){return i.changeRace(i.form.controls.race.value)}),e.DNE(49,ce,2,2,"option",9),e.k0s()(),e.j41(50,"td")(51,"select",13),e.bIt("change",function(){return i.setDefaultValues(i.form.controls.demon.value)}),e.DNE(52,me,2,2,"option",9),e.k0s()()()(),e.j41(53,"table",14)(54,"tr")(55,"th",15),e.EFF(56,"Learned Skills"),e.k0s()(),e.j41(57,"tr")(58,"th"),e.EFF(59,"Element"),e.k0s(),e.j41(60,"th"),e.EFF(61,"Name"),e.k0s(),e.j41(62,"th"),e.EFF(63,"Cost"),e.k0s(),e.j41(64,"th"),e.EFF(65,"Effect"),e.k0s(),e.j41(66,"th"),e.EFF(67,"Target"),e.k0s()(),e.DNE(68,fe,13,8,"ng-container",16),e.k0s()()),2&n&&(e.Y8G("formGroup",i.form),e.R7$(9),e.Y8G("byteArray",i.passBytes),e.R7$(22),e.JRh(i.price),e.R7$(9),e.Y8G("ngForOf",i.range99),e.R7$(3),e.Y8G("ngForOf",i.range299),e.R7$(3),e.Y8G("ngForOf",i.range99),e.R7$(3),e.Y8G("ngForOf",i.races),e.R7$(3),e.Y8G("ngForOf",i.demons[i.form.controls.race.value]),e.R7$(16),e.Y8G("ngForOf",i.form.controls.skills.controls))},dependencies:[u.YU,u.Sq,u.bT,w.qT,w.xH,w.y7,w.wz,w.BC,w.cb,w.j4,w.JD,w.$R,w.v8,ie,oe.X2],styles:["td[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}input[_ngcontent-%COMP%]{width:95%;border-width:3px}input.ng-valid[_ngcontent-%COMP%]{border-color:#0f0}input.ng-invalid[_ngcontent-%COMP%]{border-color:red}"],changeDetection:0})}}return s})(),Ce=(()=>{class s{constructor(t,n){this.fusionDataService=t,this.title=n,this.subscriptions=[],this.compConfig=this.fusionDataService.compConfig}ngOnInit(){this.setTitle(),this.subscribeAll()}ngOnDestroy(){this.unsubscribeAll()}setTitle(){this.title.setTitle(`QR Code Generator - ${this.fusionDataService.appName}`)}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(t=>{this.compendium=t}))}unsubscribeAll(){for(const t of this.subscriptions)t.unsubscribe()}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(c.i),e.rXU(j.hE))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-password-generator-container"]],decls:1,vars:2,consts:[[3,"compendium","compConfig"]],template:function(n,i){1&n&&e.nrm(0,"app-password-generator",0),2&n&&e.Y8G("compendium",i.compendium)("compConfig",i.compConfig)},dependencies:[ve],encapsulation:2,changeDetection:0})}}return s})();var be=a(6567),ke=a(860);let Ee=(()=>{class s extends be.I{constructor(t,n){super(t,n),this.changeDetector=t,this.fusionDataService=n,this.appTitle=n.appName,this.lang=n.compConfig.lang}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(e.gRc),e.rXU(c.i))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-fusion-settings-container"]],features:[e.Vt3],decls:1,vars:3,consts:[[3,"lang","appTitle","fusionSettings","toggledName"]],template:function(n,i){1&n&&(e.j41(0,"app-fusion-settings",0),e.bIt("toggledName",function(E){return i.toggleName(E)}),e.k0s()),2&n&&e.Y8G("lang",i.lang)("appTitle",i.appTitle)("fusionSettings",i.fusionSettings)},dependencies:[ke.B],encapsulation:2,changeDetection:0})}}return s})();var _e=a(1289);let Fe=(()=>{class s{constructor(t,n){this.fusionDataService=t,this.title=n,this.subscriptions=[],this.lang="en";const i=this.fusionDataService.compConfig,C=i.translations.en.indexOf(i.lang);this.maxSkills=i.hasDemonResists?8:2,this.lang=i.lang,this.recipeConfig={fissionCalculator:this.fusionDataService.fissionCalculator,fusionCalculator:this.fusionDataService.fusionCalculator,races:i.races,skillElems:i.skillElems,inheritElems:i.inheritElems,displayElems:i.skillElems.reduce((U,Y)=>(U[Y]=(U=>-1===C?U:(i.translations[U]||[])[C]||U)(Y),U),{}),restrictInherits:!0,triExclusiveRaces:i.hasTripleFusion?["Fool","Tower","Moon","Sun","Judgement"]:[],triFissionCalculator:this.fusionDataService.triFissionCalculator,triFusionCalculator:this.fusionDataService.triFusionCalculator,defaultDemon:i.defaultDemon}}ngOnInit(){this.setTitle(),this.subscribeAll()}ngOnDestroy(){this.unsubscribeAll()}setTitle(){this.title.setTitle((0,T.oO)(r.hV.AppTitle,this.lang)+this.fusionDataService.appName)}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(t=>{this.compendium=t})),this.subscriptions.push(this.fusionDataService.squareChart.subscribe(t=>{this.squareChart=t}))}unsubscribeAll(){for(const t of this.subscriptions)t.unsubscribe()}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(c.i),e.rXU(j.hE))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-recipe-generator-container"]],decls:1,vars:5,consts:[[3,"lang","maxSkills","compendium","squareChart","recipeConfig"]],template:function(n,i){1&n&&e.nrm(0,"app-recipe-generator",0),2&n&&e.Y8G("lang",i.lang)("maxSkills",i.maxSkills)("compendium",i.compendium)("squareChart",i.squareChart)("recipeConfig",i.recipeConfig)},dependencies:[_e.h],encapsulation:2,changeDetection:0})}}return s})();var ye=a(9981),De=a(2649),Te=a(3452),Oe=a(6188),Se=a(131);const je=[{path:"",redirectTo:"personas",pathMatch:"full"},{path:"",component:_,data:{fusionTool:"chart"},children:[{path:"chart",component:a(6495).E}]},{path:"",component:_,children:[{path:"personas/:demonName",component:L,children:[{path:"fissions/triple",component:Oe.X},{path:"fusions/triple",component:Se.W},{path:"fissions",component:De.J},{path:"fusions",component:Te.y},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"shadows/:demonName",component:L},{path:"personas",component:g},{path:"shadows",component:g,data:{showShadows:!0}},{path:"skills",component:p},{path:"qrcodes",component:Ce},{path:"recipes",component:Fe},{path:"settings",component:Ee},{path:"previews",component:ye.$v}]},{path:"**",redirectTo:"personas",pathMatch:"full"}];let Pe=(()=>{class s{static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[o.iI.forChild(je),o.iI]})}}return s})()},7269:(q,P,a)=>{a.d(P,{i:()=>M});var o=a(4412);class T{constructor(m,f){this.compConfig=m,this.specialRecipes={},this.initImportedData(),this.updateDerivedData(f)}initImportedData(){const m={},f={},F={},y={},G={},R={};for(const[O,S]of Object.entries(this.compConfig.resistCodes))R[O]=((S/1e4|0)<<10)+(S%1e4/2.5|0);const B="-".repeat(this.compConfig.resistElems.length),v="-".repeat(this.compConfig.ailmentElems.length),$=O=>(O||B).split("").map(S=>R[S]),A=O=>(O||v).split("").map(S=>R[S]),V=this.compConfig.hasDemonResists;for(const O of this.compConfig.demonData)for(const[S,d]of Object.entries(O)){const L=Object.values(d.skills).reduce((I,X)=>0===X?I+1:I,0),N=10*Math.floor((800+120*d.lvl)*(1+.25*L)/10);m[S]={name:S,race:d.race,lvl:d.lvl,currLvl:d.lvl,price:d.price||N,inherits:this.compConfig.inheritTypes[d.inherit||d.inherits],stats:d.stats,skills:d.skills,resists:V?$(d.resists):[],ailments:V?A(d.ailments):[],code:d.code||0,fusion:d.fusion||"normal",prereq:d.prereq||""}}for(const O of this.compConfig.enemyData)for(const[S,d]of Object.entries(O))f[S]={name:S,race:d.race,lvl:d.lvl,currLvl:d.lvl,price:0,inherits:0,stats:d.stats,resists:$(d.resists),ailments:A(d.ailments),skills:d.skills.reduce((L,N)=>(L[N]=0,L),{}),area:d.area,drop:d.drops?.join(", ")||"-",code:0,fusion:"normal",isEnemy:!0};for(const[O,S]of Object.entries(this.compConfig.specialRecipes))y[O]=S,m[O].fusion="special";for(const O of this.compConfig.skillData)for(const[S,d]of Object.entries(O))F[S]={name:S,element:d.elem||d.element,cost:d.cost||0,rank:d.unique?99:d.rank||(1023&d.cost)/100||1,effect:d.effect,target:d.target||"Self",learnedBy:[],transfer:[],code:d.code||0,level:0},d.card&&(F[S].transfer=d.card.split(", ").map(L=>({demon:L,level:-100})));for(const O of this.compConfig.races)G[O]={};for(const O of Object.values(m).sort((S,d)=>S.lvl-d.lvl)){"party"!==O.fusion&&(G[O.race][O.lvl]=O.name);for(const[S,d]of Object.entries(O.skills))F[S].learnedBy.push({demon:O.name,level:d})}this.demons=m,this.enemies=f,this.skills=F,this.specialRecipes=y,this.invertedDemons=G}updateDerivedData(m){const f=Object.assign({},this.demons),F=[],y={},G={};for(const v of Object.values(this.skills))v.learnedBy.length<1&&v.transfer.length<1?v.rank=99:F.push(v);for(const v of this.compConfig.races)y[v]=[],G[v]=[];for(const[v,$]of Object.entries(this.demons))"party"!==$.fusion&&(y[$.race].push($.lvl),this.specialRecipes.hasOwnProperty(v)||G[$.race].push($.lvl));for(const v of this.compConfig.races)y[v].sort(($,A)=>$-A),G[v].sort(($,A)=>$-A);for(const[v,$]of Object.entries(m))if(!$){const{race:A,lvl:V}=this.demons[v];delete f[v],y[A]=y[A].filter(O=>O!==V),G[A]=G[A].filter(O=>O!==V)}const R=Object.keys(f).map(v=>f[v]),B=Object.keys(this.enemies).map(v=>this.enemies[v]);this._allDemons=B.concat(R),this._allSkills=F,this.allIngredients=y,this.allResults=G}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return Object.keys(this.specialRecipes).map(m=>this.demons[m])}getDemon(m){return this.demons[m]||this.enemies[m]}getSkill(m){return this.skills[m]}getSkills(m){const f=this.compConfig.elemOrder,F=m.map(y=>this.skills[y]);return F.sort((y,G)=>1e4*(f[y.element]-f[G.element])+y.rank-G.rank),F}getIngredientDemonLvls(m){return this.allIngredients[m]||[]}getResultDemonLvls(m){return this.allResults[m]||[]}getSpecialNameEntries(m){return this.specialRecipes[m]||[]}getSpecialNamePairs(m){return[]}getInheritElems(m){return m.toString(2).padStart(this.compConfig.inheritElems.length,"0").split("").map(f=>100*parseInt(f))}reverseLookupDemon(m,f){return this.invertedDemons[m][f]}reverseLookupSpecial(m){return[]}isElementDemon(m){return!1}updateFusionSettings(m){this.updateDerivedData(m)}}var r=a(5990),e=a(6947),c=a(7396),u=a(7605),D=a(7178),_=a(609),h=a(1939),j=a(2755),g=a(2598),b=a(8935);let M=(()=>{class p extends _.d{constructor(f,F){const y=F.url.split("/"),G=Object.keys(f.configs)[0],R=f.configs[y[2]||y[1]]||f.configs[y[1]]||f.configs[G],B=R.translations.en.includes(y[1])?y[1]:"en",v="en"===B?R:function l(p,m){const f=p.translations.en.indexOf(m);if(-1===f)return p;const F=Object.entries(p.translations).reduce((R,[B,v])=>(R[B]=v[f],R),{}),y=R=>F[R]||R,G=p.races.map(y);return{appTitle:y(p.appTitle),translations:p.translations,lang:m,races:G,raceOrder:p.raceOrder,appCssClasses:p.appCssClasses,skillData:p.skillData.map(R=>(0,j.en)(R,F)),skillElems:p.skillElems,ailmentElems:p.ailmentElems,elemOrder:p.elemOrder,resistCodes:p.resistCodes,demonData:p.demonData.map(R=>(0,j.C_)(R,F)),baseStats:p.baseStats.map(y),resistElems:p.resistElems,inheritTypes:p.inheritTypes,inheritElems:p.inheritElems,demonUnlocks:(0,j.tQ)(p.demonUnlocks,F),enemyData:p.enemyData.map(R=>(0,j.C_)(R,F)),enemyStats:p.enemyStats.map(y),normalTable:(0,j.ji)(p.normalTable,F),hasTripleFusion:p.hasTripleFusion,hasDemonResists:p.hasDemonResists,hasSkillRanks:p.hasSkillRanks,hasEnemies:p.hasEnemies,hasQrcodes:p.hasQrcodes,specialRecipes:(0,j.Fr)(p.specialRecipes,F),defaultDemon:y(p.defaultDemon),settingsKey:`${p.settingsKey}-${m}`,settingsVersion:p.settingsVersion}}(R,B),$=new r.D(v.normalTable,v.races),A=new h.U(v.demonUnlocks,[]);super(new T(v,A.demonToggles),$,A,v.settingsKey,v.settingsVersion),this.fissionCalculator=e.RT,this.fusionCalculator=e.Se,this.triFissionCalculator=e.I4,this.triFusionCalculator=e.zm,this.compConfig=v,this.appName=v.appTitle+" Fusion Calculator",this._tripleChart=new r.D(v.normalTable,v.races,!0),this._squareChart$=new o.t({normalChart:$,tripleChart:this._tripleChart,raceOrder:v.raceOrder}),this.squareChart=this._squareChart$.asObservable(),v.appCssClasses.includes("p5t")&&(this.fissionCalculator=new c.s([D.Hr],[]),this.fusionCalculator=new c.s([u.Cx],[]))}static{this.\u0275fac=function(F){return new(F||p)(g.KVO(e.HI),g.KVO(b.Ix))}}static{this.\u0275prov=g.jDH({token:p,factory:p.\u0275fac})}}return p})()},159:(q,P,a)=>{a.d(P,{v:()=>D});var o=a(4341),T=a(177),r=a(3887),e=a(9447),c=a(5252),u=a(2598);let D=(()=>{class _{static forRoot(){return{ngModule:_}}static{this.\u0275fac=function(l){return new(l||_)}}static{this.\u0275mod=u.$C({type:_})}static{this.\u0275inj=u.G2t({imports:[T.MD,r.G,o.X1,e.SharedCompendiumModule,c.S]})}}return _})()}}]);