"use strict";(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[503],{3679:(X,G,c)=>{c.d(G,{C:()=>D});var E=c(1090),e=c(2598),F=c(177),t=c(4207);function y(o,n){if(1&o&&(e.j41(0,"h2"),e.EFF(1),e.k0s()),2&o){const a=e.XpG();e.R7$(1),e.JRh(a.title)}}function k(o,n){if(1&o&&(e.j41(0,"th"),e.EFF(1),e.nI1(2,"translateComp"),e.k0s()),2&o){const a=e.XpG();e.R7$(1),e.JRh(e.i5U(2,1,a.msgs.Price,a.lang))}}function T(o,n){if(1&o&&(e.j41(0,"th"),e.EFF(1),e.k0s()),2&o){const a=n.$implicit;e.R7$(1),e.JRh(a)}}function L(o,n){1&o&&(e.j41(0,"th"),e.EFF(1,"Inherits"),e.k0s())}function U(o,n){if(1&o&&(e.j41(0,"th"),e.EFF(1),e.k0s()),2&o){const a=n.$implicit;e.R7$(1),e.JRh(a)}}function O(o,n){if(1&o&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&o){const a=e.XpG();e.R7$(1),e.JRh(a.price)}}function M(o,n){if(1&o&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&o){const a=n.$implicit;e.R7$(1),e.JRh(a)}}function $(o,n){if(1&o&&(e.j41(0,"td")(1,"div"),e.EFF(2),e.k0s()()),2&o){const a=e.XpG();e.R7$(1),e.ZvI("element-icon i",a.inherits,""),e.R7$(1),e.JRh(a.inherits)}}const N=["*"];let D=(()=>{class o{constructor(){this.title="Demon Entry",this.statHeaders=[],this.stats=[],this.fusionHeaders=[],this.price=0,this.lang="en",this.msgs=E.Cj}static{this.\u0275fac=function(h){return new(h||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-demon-stats"]],inputs:{title:"title",statHeaders:"statHeaders",stats:"stats",fusionHeaders:"fusionHeaders",inherits:"inherits",price:"price",lang:"lang"},ngContentSelectors:N,decls:20,vars:13,consts:[[4,"ngIf"],[1,"entry-table"],[1,"title"],[4,"ngFor","ngForOf"]],template:function(h,p){1&h&&(e.NAR(),e.qex(0),e.DNE(1,y,2,1,"h2",0),e.j41(2,"table",1)(3,"thead")(4,"tr")(5,"th",2),e.EFF(6),e.nI1(7,"translateComp"),e.k0s()(),e.j41(8,"tr"),e.DNE(9,k,3,4,"th",0),e.DNE(10,T,2,1,"th",3),e.DNE(11,L,2,0,"th",0),e.DNE(12,U,2,1,"th",3),e.k0s()(),e.j41(13,"tbody")(14,"tr"),e.DNE(15,O,2,1,"td",0),e.DNE(16,M,2,1,"td",3),e.DNE(17,$,3,4,"td",0),e.SdG(18),e.k0s()()(),e.eu8(19),e.bVm()),2&h&&(e.R7$(1),e.Y8G("ngIf",p.title.includes("Lvl")),e.R7$(4),e.BMQ("colSpan",p.stats.length+p.fusionHeaders.length+(p.inherits?1:0)+(p.price?1:0)),e.R7$(1),e.SpI(" ",p.title.includes("Lvl")?e.i5U(7,10,p.msgs.Stats,p.lang):p.title," "),e.R7$(3),e.Y8G("ngIf",p.price),e.R7$(1),e.Y8G("ngForOf",p.statHeaders),e.R7$(1),e.Y8G("ngIf",p.inherits),e.R7$(1),e.Y8G("ngForOf",p.fusionHeaders),e.R7$(3),e.Y8G("ngIf",p.price),e.R7$(1),e.Y8G("ngForOf",p.stats),e.R7$(1),e.Y8G("ngIf",p.inherits))},dependencies:[F.Sq,F.bT,t.uz],encapsulation:2,changeDetection:0})}}return o})()},6122:(X,G,c)=>{c.d(G,{L:()=>N});var E=c(3885),e=c(9108),F=c(1090),t=c(2598),y=c(177),k=c(8935),T=c(4207);const L=function(){return{exact:!0}};function U(D,o){if(1&D&&(t.j41(0,"th",4)(1,"a",5),t.EFF(2),t.nI1(3,"translateComp"),t.k0s()()),2&D){const n=o.$implicit,a=t.XpG();t.xc7("width",100/a.fusionOptions.length,"%"),t.Y8G("routerLink",n.link)("routerLinkActiveOptions",t.lJ4(9,L)),t.R7$(1),t.Y8G("routerLink",n.link),t.R7$(1),t.JRh(t.i5U(3,6,n.title,a.lang))}}function O(D,o){if(1&D&&(t.j41(0,"tr")(1,"th",6),t.EFF(2),t.nI1(3,"translateComp"),t.k0s()()),2&D){const n=t.XpG();t.R7$(1),t.BMQ("colspan",n.fusionOptions.length),t.R7$(1),t.SpI(" ",t.i5U(3,2,n.msgs.DlcExcluded,n.lang)," ")}}function M(D,o){if(1&D&&(t.j41(0,"tr")(1,"th",6),t.SdG(2),t.k0s()()),2&D){const n=t.XpG();t.R7$(1),t.BMQ("colspan",n.fusionOptions.length)}}const $=["*"];let N=(()=>{class D{constructor(){this.hasTripleFusion=!1,this.showFusionAlert=!1,this.excludedDlc=!1,this.lang="en",this.msgs=F.Lq,this.fusionOptions=[{title:this.msgs.NormalFissions,link:"fissions"},{title:this.msgs.NormalFusions,link:"fusions"}]}ngOnInit(){this.hasTripleFusion&&(this.fusionOptions=[{title:this.msgs.DoubleFissions,link:"fissions"},{title:this.msgs.TripleFissions,link:"fissions/triple"},{title:this.msgs.TripleFusions,link:"fusions/triple"},{title:this.msgs.DoubleFusions,link:"fusions"}])}ngOnChanges(){setTimeout(()=>this.stickyTable.nextEdges())}static{this.\u0275fac=function(a){return new(a||D)}}static{this.\u0275cmp=t.VBU({type:D,selectors:[["app-smt-fusions"]],viewQuery:function(a,h){if(1&a&&t.GBs(e.a,5),2&a){let p;t.mGM(p=t.lsd())&&(h.stickyTable=p.first)}},inputs:{hasTripleFusion:"hasTripleFusion",showFusionAlert:"showFusionAlert",excludedDlc:"excludedDlc",lang:"lang"},features:[t.Jv_([E.P]),t.OA$],ngContentSelectors:$,decls:11,vars:3,consts:[["appPositionSticky","",1,"list-table"],["stickyTable",""],["class","nav","routerLinkActive","active",3,"routerLink","width","routerLinkActiveOptions",4,"ngFor","ngForOf"],[4,"ngIf"],["routerLinkActive","active",1,"nav",3,"routerLink","routerLinkActiveOptions"],[3,"routerLink"],[1,"title"]],template:function(a,h){1&a&&(t.NAR(),t.j41(0,"div")(1,"table",0,1)(3,"thead")(4,"tr"),t.DNE(5,U,4,10,"th",2),t.k0s(),t.DNE(6,O,4,5,"tr",3),t.nrm(7,"tr"),t.DNE(8,M,3,1,"tr",3),t.nrm(9,"tr"),t.k0s()(),t.nrm(10,"router-outlet"),t.k0s()),2&a&&(t.R7$(5),t.Y8G("ngForOf",h.fusionOptions),t.R7$(1),t.Y8G("ngIf",h.excludedDlc),t.R7$(2),t.Y8G("ngIf",h.showFusionAlert))},dependencies:[y.Sq,y.bT,k.n3,k.Wk,k.wQ,e.a,T.uz],encapsulation:2,changeDetection:0})}}return D})()},7439:(X,G,c)=>{c.d(G,{S:()=>ot});var E=c(8935),e=c(2755),F=c(1090),t=c(2598),y=c(5768),k=c(177),T=c(5583);let L=(()=>{class i{constructor(s){this.appCssClasses=["smt4","smt4f"],this.appCssClasses=s.compConfig.appCssClasses,this.otherLinks=[{title:(0,e.oO)(F.fu.RecipGenerator,s.compConfig.lang),link:"recipes"}]}static{this.\u0275fac=function(r){return new(r||i)(t.rXU(y.i))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-smt4f-compendium"]],decls:1,vars:2,consts:[[3,"ngClass","otherLinks"]],template:function(r,l){1&r&&t.nrm(0,"app-demon-compendium",0),2&r&&t.Y8G("ngClass",l.appCssClasses)("otherLinks",l.otherLinks)},dependencies:[k.YU,T.f],styles:[".smt4 div.element-icon{height:12px;background-size:12px;background-repeat:no-repeat;background-position:center;color:transparent}.smt4 div.element-icon.phy{background-image:url(/assets/images/smtsj/phy.png)}.smt4 div.element-icon.gun{background-image:url(/assets/images/smt4f/gun.png)}.smt4 div.element-icon.fir{background-image:url(/assets/images/smtsj/fir.png)}.smt4 div.element-icon.ice{background-image:url(/assets/images/smtsj/ice.png)}.smt4 div.element-icon.ele{background-image:url(/assets/images/smtsj/ele.png)}.smt4 div.element-icon.for{background-image:url(/assets/images/smt4f/force.png)}.smt4 div.element-icon.mys{background-image:url(/assets/images/smt4f/curse.png)}.smt4 div.element-icon.lig{background-image:url(/assets/images/smtsj/exp.png)}.smt4 div.element-icon.dea,.smt4 div.element-icon.dar{background-image:url(/assets/images/smtsj/cur.png)}.smt4 div.element-icon.ail{background-image:url(/assets/images/smtsj/ail.png)}.smt4 div.element-icon.min{background-image:url(/assets/images/smt4f/panic.png)}.smt4 div.element-icon.rec{background-image:url(/assets/images/smtsj/rec.png)}.smt4 div.element-icon.alm{background-image:url(/assets/images/smtsj/alm.png)}.smt4 div.element-icon.com,.smt4 div.element-icon.sup{background-image:url(/assets/images/smtsj/sup.png)}.smt4 div.element-icon.pas{background-image:url(/assets/images/smtsj/pas.png)}.smt4 div.element-icon.oth,.smt4 div.element-icon.inn,.smt4 div.element-icon.sab,.smt4 div.element-icon.inv,.smt4 div.element-icon.aut,.smt4 div.element-icon.rac,.smt4 div.element-icon.non,.smt4 div.element-icon.spe{background-image:url(/assets/images/smtsj/spe.png)}.smt4 td.affinity-9,.smt4 td.affinity-8{color:red}.smt4 td.affinity-7{color:#ff4500}.smt4 td.affinity-6{color:tomato}.smt4 td.affinity-5{color:coral}.smt4 td.affinity-4{color:#ff8c00}.smt4 td.affinity-3{color:orange}.smt4 td.affinity-2{color:#ffa07a}.smt4 td.affinity-1{color:gold}.smt4 td.affinity0{color:transparent}.smt4 td.affinity1{color:#7cfc00}.smt4 td.affinity2{color:#0f0}.smt4 td.affinity3{color:#00ff7f}.smt4 td.affinity4{color:#00fa9a}.smt4 td.affinity5{color:#32cd32}.smt4 td.affinity6{color:#3cb371}.smt4 td.affinity7{color:#2e8b57}.smt4 td.affinity8,.smt4 td.affinity9{color:#228b22}.smt4f th.title,.smt4f th.nav.active,.smt4f th.nav.active a{background-color:#fff;color:#000}.smt5 th.title,.smt5 th.nav.active,.smt5 th.nav.active a{background-color:#363361;color:#fff}.sh2 th.title,.sh2 th.nav.active,.sh2 th.nav.active a{background-color:#693cbe;color:#fff}.krch th.title,.krch th.nav.active,.krch th.nav.active a{color:#000;background-color:#856363}.krao th.title,.krao th.nav.active,.krao th.nav.active a{color:#fff;background-color:#8e283d}.ds1 th.title,.ds1 th.nav.active,.ds1 th.nav.active a,.dso th.title,.dso th.nav.active,.dso th.nav.active a{color:#fff;background-color:#e83145}.ds2 th.title,.ds2 th.nav.active,.ds2 th.nav.active a{color:#fff;background-color:#0078e8}\n"],encapsulation:2,changeDetection:0})}}return i})();var U=c(9404),O=c(345),M=c(9629);let $=(()=>{class i extends U.M{constructor(s,r,l){super(s,r,l),this.compConfig=l.compConfig,this.appName=(0,e.oO)(F.vC.AppTitle,this.compConfig.lang)+l.appName,this.defaultSortFun=(R,_)=>200*(this.compConfig.raceOrder[R.race]-this.compConfig.raceOrder[_.race])+_.lvl-R.lvl}static{this.\u0275fac=function(r){return new(r||i)(t.rXU(O.hE),t.rXU(t.gRc),t.rXU(y.i))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-demon-list-container"]],features:[t.Vt3],decls:2,vars:8,consts:[[3,"lang","raceOrder","statHeaders","resistHeaders","affinityHeaders","rowData"]],template:function(r,l){1&r&&(t.nrm(0,"app-smt-demon-list",0),t.nI1(1,"async")),2&r&&t.Y8G("lang",l.compConfig.lang)("raceOrder",l.compConfig.raceOrder)("statHeaders",l.compConfig.baseStats)("resistHeaders",l.compConfig.resistElems)("affinityHeaders",l.compConfig.affinityElems)("rowData",t.bMT(1,6,l.demons))},dependencies:[M.F,k.Jj],encapsulation:2,changeDetection:0})}}return i})();var N=c(9454),D=c(2940);let o=(()=>{class i extends N.E{constructor(s,r,l){super(s,r,l),this.appName=`List of Skills - ${l.appName}`,this.compConfig=l.compConfig,this.appName=(0,e.oO)(F.vf.AppTitle,this.compConfig.lang)+l.appName,this.compConfig=l.compConfig,this.defaultSortFun=(R,_)=>1e4*(this.compConfig.elemOrder[R.element]-this.compConfig.elemOrder[_.element])+R.rank-_.rank}static{this.\u0275fac=function(r){return new(r||i)(t.rXU(O.hE),t.rXU(t.gRc),t.rXU(y.i))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-skill-list-container"]],features:[t.Vt3],decls:2,vars:7,consts:[[3,"lang","elemOrder","hasTarget","hasRank","rowData"]],template:function(r,l){1&r&&(t.nrm(0,"app-smt-skill-list",0),t.nI1(1,"async")),2&r&&t.Y8G("lang",l.compConfig.lang)("elemOrder",l.compConfig.elemOrder)("hasTarget",!0)("hasRank",l.compConfig.hasLightDark)("rowData",t.bMT(1,5,l.skills))},dependencies:[D.p,k.Jj],encapsulation:2,changeDetection:0})}}return i})();var n=c(6567),a=c(860);let h=(()=>{class i extends n.I{constructor(s,r){super(s,r),this.changeDetector=s,this.fusionDataService=r,this.appTitle=r.appName,this.lang=r.compConfig.lang}static{this.\u0275fac=function(r){return new(r||i)(t.rXU(t.gRc),t.rXU(y.i))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-fusion-settings-container"]],features:[t.Vt3],decls:1,vars:4,consts:[[3,"lang","appTitle","fusionSettings","showEnableAll","toggledAll","toggledName"]],template:function(r,l){1&r&&(t.j41(0,"app-fusion-settings",0),t.bIt("toggledAll",function(_){return l.toggleAll(_)})("toggledName",function(_){return l.toggleName(_)}),t.k0s()),2&r&&t.Y8G("lang",l.lang)("appTitle",l.appTitle)("fusionSettings",l.fusionSettings)("showEnableAll",!0)},dependencies:[a.B],encapsulation:2,changeDetection:0})}}return i})();var p=c(5692),C=c(3679),f=c(2223),g=c(9436),v=c(1538),S=c(6122),b=c(4207),Y=c(8696);function K(i,j){if(1&i&&t.nrm(0,"app-demon-inherits",10),2&i){const s=t.XpG(2);t.Y8G("lang",s.compConfig.lang)("hasLvls",!0)("inheritHeaders",s.compConfig.affinityElems)("inherits",s.demon.affinities)}}function V(i,j){if(1&i&&(t.j41(0,"th"),t.EFF(1),t.nI1(2,"translateComp"),t.k0s()),2&i){const s=t.XpG(2);t.R7$(1),t.JRh(t.i5U(2,1,s.skillMsgs.Rank,s.lang))}}function W(i,j){if(1&i&&(t.j41(0,"td"),t.EFF(1),t.k0s()),2&i){const s=t.XpG().$implicit;t.xc7("color",99!==s.skill.rank?null:"transparent"),t.R7$(1),t.JRh(s.skill.rank)}}const A=function(i){return{unique:i}};function x(i,j){if(1&i&&(t.j41(0,"tr",11)(1,"td")(2,"div"),t.EFF(3),t.k0s()(),t.j41(4,"td"),t.EFF(5),t.k0s(),t.j41(6,"td"),t.EFF(7),t.nI1(8,"skillCostToString"),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td"),t.EFF(12),t.k0s(),t.DNE(13,W,2,3,"td",12),t.j41(14,"td"),t.EFF(15),t.nI1(16,"skillLevelToString"),t.k0s()()),2&i){const s=j.$implicit,r=t.XpG(2);t.Y8G("ngClass",t.eq3(19,A,s.skill.rank>90)),t.R7$(2),t.ZvI("element-icon ",s.skill.element,""),t.R7$(1),t.JRh(s.skill.element),t.R7$(2),t.Lme("",s.skill.name," ",s.lvl>0?"+"+s.lvl:s.lvl||"",""),t.R7$(1),t.xc7("color",s.cost?null:"transparent"),t.R7$(1),t.JRh(t.bMT(8,15,s.cost)),t.R7$(3),t.Lme("",s.skill.effect," ",0===s.upgrade?"":"("+(s.upgrade>0?"+":"")+s.upgrade+"%)",""),t.R7$(2),t.JRh(s.skill.target||"Self"),t.R7$(1),t.Y8G("ngIf",r.compConfig.hasLightDark),t.R7$(2),t.JRh(t.bMT(16,17,s.skill.level))}}function Q(i,j){if(1&i&&(t.j41(0,"tr")(1,"td",13),t.EFF(2),t.nI1(3,"translateComp"),t.k0s()()),2&i){const s=t.XpG(2);t.R7$(2),t.JRh(t.i5U(3,1,s.skillMsgs.NoLearnedSkills,s.lang))}}const B=function(i){return[i]};function J(i,j){if(1&i&&(t.nrm(0,"app-fusion-entry-table",14),t.nI1(1,"translateComp")),2&i){const s=t.XpG(2);t.Y8G("title",t.i5U(1,4,s.statMsgs.EvolvesFrom,s.lang))("lang",s.compConfig.lang)("baseUrl","..")("rowData",t.eq3(7,B,s.demon.evolvesFrom))}}function u(i,j){if(1&i&&(t.nrm(0,"app-fusion-entry-table",14),t.nI1(1,"translateComp")),2&i){const s=t.XpG(2);t.Y8G("title",t.i5U(1,4,s.statMsgs.EvolvesTo,s.lang))("lang",s.compConfig.lang)("baseUrl","..")("rowData",t.eq3(7,B,s.demon.evolvesTo))}}function m(i,j){if(1&i&&(t.qex(0),t.nrm(1,"app-demon-stats",2)(2,"app-demon-resists",3),t.DNE(3,K,1,4,"app-demon-inherits",4),t.j41(4,"table",5)(5,"thead")(6,"tr")(7,"th",6),t.EFF(8),t.nI1(9,"translateComp"),t.k0s()(),t.j41(10,"tr")(11,"th"),t.EFF(12),t.nI1(13,"translateComp"),t.k0s(),t.j41(14,"th"),t.EFF(15),t.nI1(16,"translateComp"),t.k0s(),t.j41(17,"th"),t.EFF(18),t.nI1(19,"translateComp"),t.k0s(),t.j41(20,"th"),t.EFF(21),t.nI1(22,"translateComp"),t.k0s(),t.j41(23,"th"),t.EFF(24),t.nI1(25,"translateComp"),t.k0s(),t.DNE(26,V,3,4,"th",0),t.j41(27,"th"),t.EFF(28,"Lvl"),t.k0s()()(),t.j41(29,"tbody"),t.DNE(30,x,17,21,"tr",7),t.DNE(31,Q,4,4,"tr",0),t.nrm(32,"tr"),t.k0s()(),t.DNE(33,J,2,9,"app-fusion-entry-table",8),t.DNE(34,u,2,9,"app-fusion-entry-table",8),t.nrm(35,"app-smt-fusions",9),t.bVm()),2&i){const s=t.XpG();t.R7$(1),t.Y8G("lang",s.compConfig.lang)("title","Lvl "+s.demon.lvl+" "+s.demon.race+" "+s.demon.name)("price",s.compConfig.appCssClasses.includes("ds1")?0:s.demon.price)("statHeaders",s.compConfig.baseStats)("stats",s.demon.stats),t.R7$(1),t.Y8G("lang",s.compConfig.lang)("resistHeaders",s.compConfig.resistElems)("resists",s.demon.resists)("ailmentHeaders",s.compConfig.ailmentElems)("ailments",s.demon.ailments),t.R7$(1),t.Y8G("ngIf",s.demon.affinities&&s.demon.affinities.length),t.R7$(5),t.JRh(t.i5U(9,24,s.skillMsgs.LearnedSkills,s.lang)),t.R7$(4),t.JRh(t.i5U(13,27,s.skillMsgs.Elem,s.lang)),t.R7$(3),t.JRh(t.i5U(16,30,s.skillMsgs.Name,s.lang)),t.R7$(3),t.JRh(t.i5U(19,33,s.skillMsgs.Cost,s.lang)),t.R7$(3),t.JRh(t.i5U(22,36,s.skillMsgs.Effect,s.lang)),t.R7$(3),t.JRh(t.i5U(25,39,s.skillMsgs.Target,s.lang)),t.R7$(2),t.Y8G("ngIf",s.compConfig.hasLightDark),t.R7$(4),t.Y8G("ngForOf",s.skillLvls),t.R7$(1),t.Y8G("ngIf",!s.skillLvls.length),t.R7$(2),t.Y8G("ngIf",s.demon.evolvesFrom),t.R7$(1),t.Y8G("ngIf",s.demon.evolvesTo),t.R7$(1),t.Y8G("lang",s.compConfig.lang)("excludedDlc","excluded"===s.demon.fusion)}}function d(i,j){if(1&i&&t.nrm(0,"app-demon-missing",15),2&i){const s=t.XpG();t.Y8G("name",s.name)}}let I=(()=>{class i{constructor(){this.lang="en",this.statMsgs=F.Cj,this.skillMsgs=F.vf,this.skillLvls=[]}ngOnChanges(){if(this.demon){this.skillLvls=[];for(const s of Object.keys(this.demon.skills)){const l=this.compendium.getSkill(s),R=this.compConfig.affinityElems.indexOf(l.element),_=this.compConfig.affinityBonuses,H=(this.demon.affinities||[])[R];this.skillLvls.push(H&&_.costs[R]&&(64512&l.cost)<=3072?{skill:l,cost:(64512&l.cost)+Math.floor((100-_.costs[R][H+10])/100*(1023&l.cost)),lvl:H,upgrade:_.upgrades[R][H+10]}:{skill:l,cost:l.cost,lvl:0,upgrade:0})}for(const s of this.skillLvls)s.skill.level=this.demon.skills[s.skill.name];this.skillLvls.sort((s,r)=>200*(s.skill.level-r.skill.level)+this.compConfig.elemOrder[s.skill.element]-this.compConfig.elemOrder[r.skill.element])}}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",compConfig:"compConfig",compendium:"compendium",lang:"lang"},features:[t.OA$],decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"lang","title","price","statHeaders","stats"],[3,"lang","resistHeaders","resists","ailmentHeaders","ailments"],[3,"lang","hasLvls","inheritHeaders","inherits",4,"ngIf"],[1,"entry-table"],["colSpan","7",1,"title"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"title","lang","baseUrl","rowData",4,"ngIf"],[3,"lang","excludedDlc"],[3,"lang","hasLvls","inheritHeaders","inherits"],[3,"ngClass"],[3,"color",4,"ngIf"],["colSpan","7"],[3,"title","lang","baseUrl","rowData"],[3,"name"]],template:function(r,l){1&r&&(t.DNE(0,m,36,42,"ng-container",0),t.DNE(1,d,1,1,"app-demon-missing",1)),2&r&&(t.Y8G("ngIf",l.demon),t.R7$(1),t.Y8G("ngIf",!l.demon))},dependencies:[k.YU,k.Sq,k.bT,p.X,C.C,f.w,g.d,v.a,S.L,b.uz,b.X2,b.Q3],encapsulation:2,changeDetection:0})}}return i})(),P=(()=>{class i{constructor(s,r,l,R){this.route=s,this.title=r,this.currentDemonService=l,this.fusionDataService=R,this.subscriptions=[],this.appName=R.appName,this.compConfig=R.compConfig}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const s of this.subscriptions)s.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(s=>{this.compendium=s,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(s=>{this.name=s,this.getDemonEntry()})),this.route.params.subscribe(s=>{this.currentDemonService.nextCurrentDemon(s.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(`${this.name} - ${this.appName}`),this.demon=this.compendium.getDemon(this.name))}static{this.\u0275fac=function(r){return new(r||i)(t.rXU(E.nX),t.rXU(O.hE),t.rXU(Y.i),t.rXU(y.i))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-demon-entry-container"]],decls:1,vars:5,consts:[[3,"lang","name","demon","compConfig","compendium"]],template:function(r,l){1&r&&t.nrm(0,"app-demon-entry",0),2&r&&t.Y8G("lang",l.compConfig.lang)("name",l.name)("demon",l.demon)("compConfig",l.compConfig)("compendium",l.compendium)},dependencies:[I],encapsulation:2,changeDetection:0})}}return i})();var z=c(9023);function Z(i,j){if(1&i&&t.nrm(0,"app-fusion-chart",2),2&i){const s=t.XpG();t.Y8G("lang",s.lang)("normChart",s.normChart)("tripChart",s.normChart)("normTitle","Light and Neutral Normal Fusions")("tripTitle","Dark Normal Fusions")}}function w(i,j){if(1&i&&t.nrm(0,"app-fusion-chart",3),2&i){const s=t.XpG();t.Y8G("lang",s.lang)("filterDarks",!1)("normChart",s.normChart)("mitaTable",s.mitamaTable)}}let q=(()=>{class i{constructor(s,r){this.changeDetectorRef=s,this.fusionDataService=r,this.subscriptions=[],this.lang="en"}ngOnInit(){const s=this.fusionDataService.compConfig;this.lang=s.lang,this.mitamaTable=s.elementTable.pairs||null,this.hasLightDark=s.hasLightDark,this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(r=>{this.changeDetectorRef.markForCheck(),this.normChart=r}))}ngOnDestroy(){for(const s of this.subscriptions)s.unsubscribe()}static{this.\u0275fac=function(r){return new(r||i)(t.rXU(t.gRc),t.rXU(y.i))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-fusion-chart-container"]],decls:2,vars:2,consts:[[3,"lang","normChart","tripChart","normTitle","tripTitle",4,"ngIf"],[3,"lang","filterDarks","normChart","mitaTable",4,"ngIf"],[3,"lang","normChart","tripChart","normTitle","tripTitle"],[3,"lang","filterDarks","normChart","mitaTable"]],template:function(r,l){1&r&&(t.DNE(0,Z,1,5,"app-fusion-chart",0),t.DNE(1,w,1,4,"app-fusion-chart",1)),2&r&&(t.Y8G("ngIf",l.hasLightDark),t.R7$(1),t.Y8G("ngIf",!l.hasLightDark))},dependencies:[k.bT,z.q],encapsulation:2,changeDetection:0})}}return i})();var tt=c(1289);let st=(()=>{class i{constructor(s,r){this.fusionDataService=s,this.title=r,this.subscriptions=[],this.maxSkills=8,this.lang="en";const l=this.fusionDataService.compConfig,R=l.appCssClasses.includes("sh2");this.lang=l.lang,this.appName=(0,e.oO)(F.hV.AppTitle,this.lang)+s.appName,this.maxSkills=l.maxSkillSlots,this.recipeConfig={fissionCalculator:this.fusionDataService.fissionCalculator,fusionCalculator:this.fusionDataService.fusionCalculator,races:l.races,skillElems:l.skillElems,inheritElems:l.affinityElems,displayElems:{},restrictInherits:R,triExclusiveRaces:[],triFissionCalculator:null,triFusionCalculator:null,defaultDemon:l.defaultRecipeDemon}}ngOnInit(){this.title.setTitle(this.appName),this.subscribeAll()}ngOnDestroy(){this.unsubscribeAll()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(s=>{this.compendium=s})),this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(s=>{this.squareChart={normalChart:s,tripleChart:s,raceOrder:this.fusionDataService.compConfig.raceOrder}}))}unsubscribeAll(){for(const s of this.subscriptions)s.unsubscribe()}static{this.\u0275fac=function(r){return new(r||i)(t.rXU(y.i),t.rXU(O.hE))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-recipe-generator-container"]],decls:1,vars:5,consts:[[3,"maxSkills","compendium","squareChart","recipeConfig","lang"]],template:function(r,l){1&r&&t.nrm(0,"app-recipe-generator",0),2&r&&t.Y8G("maxSkills",l.maxSkills)("compendium",l.compendium)("squareChart",l.squareChart)("recipeConfig",l.recipeConfig)("lang",l.lang)},dependencies:[tt.h],encapsulation:2,changeDetection:0})}}return i})();var et=c(2649),nt=c(3452);const it=[{path:"",redirectTo:"demons",pathMatch:"full"},{path:"",component:L,data:{fusionTool:"chart"},children:[{path:"chart",component:q}]},{path:"",component:L,children:[{path:"demons/:demonName",component:P,children:[{path:"fissions",component:et.J},{path:"fusions",component:nt.y},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"demons",component:$},{path:"skills",component:o},{path:"recipes",component:st},{path:"settings",component:h}]},{path:"**",redirectTo:"demons",pathMatch:"full"}];let ot=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[E.iI.forChild(it),E.iI]})}}return i})()},5768:(X,G,c)=>{c.d(G,{i:()=>D});var E=c(2755);function F(o,n){const a={};for(const[h,p]of Object.entries(o))a[n[h]||h]={lvl:p.lvl,result:n[p.result]||p.result};return a}var t=c(4660);class y{constructor(n,a){this.compConfig=n,this.initImportedData(),this.updateDerivedData(a)}initImportedData(){const n={},a={},h={},p={},C={},f={},g={},v={},S="-".repeat(this.compConfig.ailmentElems.length);for(const[u,m]of Object.entries(this.compConfig.fusionSpells))for(const d of m)h[d]=u;for(const[u,m]of Object.entries(this.compConfig.resistCodes))g[u]=(m/1e3|0)<<10,v[u]=m%1e3/2.5|0;const b=(u,m,d)=>(u||m).split("").map((I,P)=>g[I]+(d?.[P]/2.5|0||v[I])),Y="en"===this.compConfig.lang,K=Y?"Innate resistance":"",V=Y?"Self":"\u81ea\u8eab",W=Y?["Weak ","Resist ","Null "]:["\u5f31","\u5f37","\u7121"],A={},x={},Q=this.compConfig.appCssClasses.includes("smt5v"),B=this.compConfig.alignments;for(const[u,m]of"wsn".split("").entries())A[g[m]>>10]=[],x[g[m]>>10]=W[u];for(const[u,m]of Object.entries(x))for(const d of this.compConfig.ailmentElems)A[u].push({name:m+d,element:"pas",effect:K,target:V,cost:0,rank:99,learnedBy:[],level:0});for(const u of this.compConfig.demonData)for(const[m,d]of Object.entries(u)){const I=d.race,P=B[m]||B[I]||"None-None";n[m]={name:m,race:I,align:P,lvl:d.lvl,currLvl:d.currLvl||d.lvl,skills:d.skills,price:2*d.price,stats:d.stats,resists:b(d.resists,d.resists,d.resmods),ailments:b(d.ailments,S,d.ailmods),inherits:parseInt((d.affinities||[-10]).map(z=>z>-10?"1":"0").join(""),2),affinities:d.affinities,fusion:d.fusion||"normal",prereq:d.prereq||""},h[I]&&(n[m].skills[h[I]]=5278),Q&&"-"!==d.innate&&(n[m].price=2*d.innatePrice,n[m].skills=Object.assign({},d.skills),n[m].skills[d.innate]=0,h[P]&&(n[m].skills[h[P]]=4884),h[m]&&(n[m].skills[h[m]]=4884))}for(const u of this.compConfig.demonUnlocks)for(const[m,d]of Object.entries(u.conditions))for(const I of m.split(","))n[I].prereq=d;for(const u of this.compConfig.skillData)for(const[m,d]of Object.entries(u))a[m]={name:m,element:d.element,rank:d.rank,effect:d.effect,damage:d.damage||"",target:d.target||"Self",hits:d.hits||"",cost:d.cost||0,learnedBy:[],level:0},a[m].rank||(a[m].rank=99);for(const u of Object.values(A))for(const m of u)a[m.name]=m;const J=this.compConfig.elementTable;for(const[u,m]of Object.entries((0,t.Jc)(J.elems,J.pairs)))C[u]=m,n[u].fusion="special";for(const[u,m]of Object.entries(this.compConfig.specialRecipes))p[u]=m,"normal"===n[u].fusion&&(n[u].fusion=m.length>0?"special":"accident");for(const[u,m]of Object.entries(this.compConfig.evolveData)){const d=m.result;n[u].evolvesTo={price:n[d].price,race1:n[d].race,lvl1:m.lvl,name1:d},n[d].evolvesFrom={price:n[u].price,race1:n[u].race,lvl1:m.lvl,name1:u}}for(const u of this.compConfig.races)f[u]={};for(const[u,m]of Object.entries(n))f[m.race][m.lvl]=u;for(const u of Object.values(n).sort((m,d)=>m.currLvl-d.currLvl))if("enemy"!==u.fusion){for(const m of Object.keys(u.skills))a[m].learnedBy.push({demon:u.name,level:u.skills[m]});for(let m=0;m<u.ailments.length;m++)A[u.ailments[m]>>10]&&A[u.ailments[m]>>10][m].learnedBy.push({demon:u.name,level:0})}this.demons=n,this.skills=a,this.specialRecipes=p,this.specialPairRecipes=C,this.invertedDemons=f}updateDerivedData(n){const a=Object.assign({},this.demons),h=Object.keys(this.skills).map(f=>this.skills[f]),p={},C={};for(const f of this.compConfig.races)p[f]=[],C[f]=[];for(const[f,g]of Object.entries(this.demons))!this.isElementDemon(f)&&!this.isOverlappingResult(f)&&p[g.race].push(g.lvl),this.specialRecipes.hasOwnProperty(f)||C[g.race].push(g.lvl);for(const f of this.compConfig.races)p[f].sort((g,v)=>g-v),C[f].sort((g,v)=>g-v);for(const f of this.compConfig.races){const g=p[f],v=C[f],S=g.length,b=v.length;S&&b&&g[S-1]!==v[b-1]&&v.push(100)}for(const[f,g]of Object.entries(n))if(!g){const{race:v,lvl:S}=this.demons[f];delete a[f],p[v]=p[v].filter(b=>b!==S),C[v]=C[v].filter(b=>b!==S)}this._allDemons=Object.keys(a).map(f=>a[f]),this._allSkills=h.filter(f=>f.rank<99||f.learnedBy.length>0),this.allIngredients=p,this.allResults=C}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return Object.keys(this.specialRecipes).map(n=>this.demons[n])}getDemon(n){return this.demons[n]}getSkill(n){return this.skills[n]}getSkills(n){const a=this.compConfig.elemOrder,h=n.map(p=>this.skills[p]);return h.sort((p,C)=>1e4*(a[p.element]-a[C.element])+p.rank-C.rank),h}getIngredientDemonLvls(n){return this.allIngredients[n]||[]}getResultDemonLvls(n){return this.allResults[n]||[]}getSpecialNameEntries(n){return this.specialRecipes[n]||[]}getSpecialNamePairs(n){return this.specialPairRecipes[n]||[]}reverseLookupDemon(n,a){return this.invertedDemons[n][a]}reverseLookupSpecial(n){return[]}isElementDemon(n){return this.demons[n]&&this.demons[n].race===this.compConfig.elementRace}isOverlappingResult(n){return!1}updateFusionSettings(n){this.updateDerivedData(n)}}var k=c(8063);let T=(()=>{class o extends k.p{static{this.LIGHT_RACES=["Herald","Megami","Avian","Tree","Deity","Avatar","Holy","Genma","Fury","Lady","Dragon","Kishin","Enigma","Entity","Wargod","Amatsu","Kunitsu","Godly","Chaos","\u5927\u5929\u4f7f","\u5973\u795e","\u970a\u9ce5","\u795e\u6a39","\u9b54\u795e","\u795e\u7363","\u8056\u7363","\u5e7b\u9b54","\u7834\u58ca\u795e","\u5730\u6bcd\u795e","\u9f8d\u795e","\u9b3c\u795e","\u79d8\u795e","\u5a01\u970a","\u8ecd\u795e","\u5929\u6d25\u795e","\u56fd\u6d25\u795e","\u795e\u970a","\u6df7\u6c8c\u738b"]}static{this.DARK_RACES=["Vile","Raptor","Wood","Reaper","Wilder","Jaki","Vermin","Tyrant","Drake","Spirit","Haunt","Ghost","Zealot","\u90aa\u795e","\u51f6\u9ce5","\u5996\u6a39","\u6b7b\u795e","\u5996\u7363","\u90aa\u9b3c","\u5e7d\u866b","\u9b54\u738b","\u90aa\u9f8d","\u60aa\u970a","\u5e7d\u9b3c","\u5e7d\u9b3c","\u72c2\u795e"]}constructor(a){super(),this.initCharts(a)}initCharts(a){const h=a.normalTable.races,p=a.normalTable.table,C=a.elementTable.elems,f=a.elementTable.races,g=a.elementTable.table;this.lvlModifier=a.lvlModifier,this.elementDemons=C,this.fusionChart=k.p.loadFusionTableJson(h,p),this.fissionChart=k.p.loadFissionTableJson(h,C,p),this.elementChart=k.p.loadElementTableJson(f,C,g),this.races=h}getLightDark(a){return-1!==o.LIGHT_RACES.indexOf(a)?1:-1!==o.DARK_RACES.indexOf(a)?-1:0}}return o})();var L=c(6947),U=c(609),O=c(1939),M=c(1090),$=c(2598),N=c(8935);let D=(()=>{class o extends U.d{constructor(a,h){const p=h.url.split("/"),C=Object.keys(a.configs)[0],f=a.configs[p[2]||p[1]]||a.configs[p[1]]||a.configs[C],g=f.translations.en.includes(p[1])?p[1]:"en",v="en"===g?f:function e(o,n){const a=o.translations.en.indexOf(n);if(-1===a)return o;const h=Object.entries(o.translations).reduce((f,[g,v])=>(f[g]=v[a],f),{}),p=f=>h[f]||f,C=o.races.map(p);return{appTitle:p(o.appTitle),translations:o.translations,lang:n,races:C,raceOrder:C.reduce((f,g,v)=>(f[g]=v,f),{}),appCssClasses:o.appCssClasses,affinityElems:o.affinityElems,skillData:o.skillData.map(f=>(0,E.en)(f,h)),skillElems:o.skillElems,elemOrder:o.elemOrder,resistCodes:o.resistCodes,affinityBonuses:o.affinityBonuses,lvlModifier:o.lvlModifier,maxSkillSlots:o.maxSkillSlots,hasLightDark:o.hasLightDark,demonData:o.demonData.map(f=>(0,E.C_)(f,h)),fusionSpells:(0,E.Fr)(o.fusionSpells,h),evolveData:F(o.evolveData,h),alignments:o.alignments,baseStats:o.baseStats.map(p),resistElems:o.resistElems,ailmentElems:o.ailmentElems,demonUnlocks:(0,E.tQ)(o.demonUnlocks,h),normalTable:(0,E.ji)(o.normalTable,h),elementTable:(0,E.ji)(o.elementTable,h),specialRecipes:(0,E.Fr)(o.specialRecipes,h),defaultRecipeDemon:p(o.defaultRecipeDemon),elementRace:p(o.elementRace),settingsKey:`${o.settingsKey}-${n}`,settingsVersion:o.settingsVersion}}(f,g),S=new O.U(v.demonUnlocks,[]);super(new y(v,S.demonToggles),new T(v),S,v.settingsKey,v.settingsVersion),this.fissionCalculator=L.ov,this.fusionCalculator=L.nv,this.compConfig=v,this.appName=this.compConfig.appTitle+(0,E.oO)(M.fu.FusionCalculator,v.lang)}static{this.\u0275fac=function(h){return new(h||o)($.KVO(L.HI),$.KVO(N.Ix))}}static{this.\u0275prov=$.jDH({token:o,factory:o.\u0275fac})}}return o})()},4503:(X,G,c)=>{c.d(G,{G:()=>k});var E=c(177),e=c(3887),F=c(9447),t=c(7439),y=c(2598);let k=(()=>{class T{static forRoot(){return{ngModule:T}}static{this.\u0275fac=function(O){return new(O||T)}}static{this.\u0275mod=y.$C({type:T})}static{this.\u0275inj=y.G2t({imports:[E.MD,e.G,F.$,t.S]})}}return T})()}}]);