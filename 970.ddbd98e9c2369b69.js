"use strict";(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[970],{5939:(w,k,o)=>{o.d(k,{RL:()=>T,gQ:()=>l});var _=o(7548),e=o(6404),c=o(4769),b=o(6814);function D(n,u){if(1&n&&(c.TgZ(0,"tr")(1,"th"),c._uU(2),c.qZA()()),2&n){const d=u.$implicit;c.xp6(2),c.Oqu(d)}}let O=(()=>{var n;class u{ngOnChanges(){if(this.compendium&&this.pairChart&&(this.trioChart||!this.trioCalculator)){const a=[];for(const p of this.compendium.allDemons.filter(f=>!f.isEnemy)){const f=this.compendium.getSpecialNameEntries(p.name);if(f.length>0){a.push(`${p.name} = ${f.join(" x ")}`);continue}const y=this.pairCalculator.getFusions(p.name,this.compendium,this.pairChart).map(E=>(0,e.S6)(E,this.compendium));if(y.length>0&&(y.filter(E=>E.race1!==p.race).length>0||!this.trioCalculator||0===this.trioCalculator.getFusions(p.name,this.compendium,this.trioChart).length)){y.sort((h,g)=>h.price-g.price);const E=y.slice(0,3).map(h=>`${h.name1} x ${h.name2}`).join(", ");a.push(`${p.name} = ${E}`+(y.length>3?`, ${y.length-3} more...`:""))}else{if(this.trioCalculator){const E=this.trioCalculator.getFusions(p.name,this.compendium,this.trioChart).map(h=>(0,e.Aw)(h,this.compendium)).filter(h=>h.d1.race!==p.race);if(E.length>0){E.sort((g,i)=>g.price-i.price);const h=E.slice(0,3).map(g=>`${g.d1.name} x ${g.d2.name} x ${g.d3.name}`).join(", ");a.push(`${p.name} = ${h}`+(E.length>3?`, ${E.length-3} more...`:""));continue}}a.push(p.prereq?`${p.name} = ${p.prereq}`:`${p.name} = No fusions found!`)}}this.fissionPreviews=a}}}return(n=u).\u0275fac=function(a){return new(a||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-fission-preview-table"]],inputs:{pairCalculator:"pairCalculator",trioCalculator:"trioCalculator",pairChart:"pairChart",trioChart:"trioChart",compendium:"compendium"},features:[c.TTD],decls:6,vars:1,consts:[[1,"entry-table"],[1,"title"],[4,"ngFor","ngForOf"]],template:function(a,p){1&a&&(c.TgZ(0,"table",0)(1,"tbody")(2,"tr")(3,"th",1),c._uU(4,"Fission Previews"),c.qZA()(),c.YNc(5,D,3,1,"tr",2),c.qZA()()),2&a&&(c.xp6(5),c.Q6J("ngForOf",p.fissionPreviews))},dependencies:[b.sg],encapsulation:2,changeDetection:0}),u})(),T=(()=>{var n;class u{constructor(a){this.fusionDataService=a,this.subscriptions=[]}ngOnInit(){this.calculator=this.fusionDataService.fissionCalculator,this.subscriptions.push(this.fusionDataService.compendium.subscribe(a=>{this.compendium=a})),this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(a=>{this.fusionChart=a}))}ngOnDestroy(){for(const a of this.subscriptions)a.unsubscribe()}}return(n=u).\u0275fac=function(a){return new(a||n)(c.Y36(_.vE))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-smt-fission-preview"]],decls:2,vars:3,consts:[[3,"pairCalculator","pairChart","compendium"]],template:function(a,p){1&a&&(c.TgZ(0,"app-fission-preview-table",0),c._UZ(1,"app-fission-preview-table"),c.qZA()),2&a&&c.Q6J("pairCalculator",p.calculator)("pairChart",p.fusionChart)("compendium",p.compendium)},dependencies:[O],encapsulation:2,changeDetection:0}),u})(),l=(()=>{var n;class u{constructor(a){this.fusionTrioService=a,this.subscriptions=[]}ngOnInit(){this.pairCalculator=this.fusionTrioService.fissionCalculator,this.trioCalculator=this.fusionTrioService.triFissionCalculator,this.subscriptions.push(this.fusionTrioService.compendium.subscribe(a=>{this.compendium=a})),this.subscriptions.push(this.fusionTrioService.squareChart.subscribe(a=>{this.fusionChart=a}))}ngOnDestroy(){for(const a of this.subscriptions)a.unsubscribe()}}return(n=u).\u0275fac=function(a){return new(a||n)(c.Y36(_.Ir))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-trio-fission-preview"]],decls:2,vars:5,consts:[[3,"pairCalculator","trioCalculator","pairChart","trioChart","compendium"]],template:function(a,p){1&a&&(c.TgZ(0,"app-fission-preview-table",0),c._UZ(1,"app-fission-preview-table"),c.qZA()),2&a&&c.Q6J("pairCalculator",p.pairCalculator)("trioCalculator",p.trioCalculator)("pairChart",p.fusionChart.normalChart)("trioChart",p.fusionChart)("compendium",p.compendium)},dependencies:[O],encapsulation:2,changeDetection:0}),u})()},9052:(w,k,o)=>{o.d(k,{m:()=>b});var _=o(7548),e=o(4769),c=o(8615);let b=(()=>{var D;class O{constructor(l,n){this.changeDetectorRef=l,this.fusionTrioService=n,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.fusionTrioService.squareChart.subscribe(l=>{this.normChart=l.normalChart,this.tripChart=l.tripleChart}))}ngOnDestroy(){for(const l of this.subscriptions)l.unsubscribe()}}return(D=O).\u0275fac=function(l){return new(l||D)(e.Y36(e.sBO),e.Y36(_.Ir))},D.\u0275cmp=e.Xpm({type:D,selectors:[["app-triple-fusion-chart"]],decls:1,vars:4,consts:[[3,"normChart","tripChart","normTitle","tripTitle"]],template:function(l,n){1&l&&e._UZ(0,"app-fusion-chart",0),2&l&&e.Q6J("normChart",n.normChart)("tripChart",n.tripChart)("normTitle","Normal Fusions")("tripTitle","Triple Fusions")},dependencies:[c.R],encapsulation:2,changeDetection:0}),O})()},2812:(w,k,o)=>{o.d(k,{t:()=>e});var _=o(6262);class e extends _.g{constructor(b,D,O){super(),this.elementDemons=[],this.lvlModifier=.5,this.initCharts(b,O)}initCharts(b,D){const O=b.races,T=b.table,l=[];for(let n=0;n<O.length;n++)l.push(T[n].slice(D?0:n,D?n+1:O.length)),D||(l[n][0]="-");this.races=O,this.lvlModifier=D?4.25:.5,this.fissionChart=_.g.loadFissionTableJson(O,this.elementDemons,l),this.fusionChart=_.g.loadFusionTableJson(O,l),this.elementChart={}}}},4806:(w,k,o)=>{o.d(k,{V:()=>K});var _=o(4487),e=o(4769),c=o(8166),b=o(6814),D=o(5390);let O=(()=>{var t;class C{constructor(s){this.appCssClasses=s.compConfig.appCssClasses,this.otherLinks=[{title:"Shadow List",link:"shadows"}],s.compConfig.hasManualInheritance&&this.otherLinks.push({title:"Recipe Generator",link:"recipes"})}}return(t=C).\u0275fac=function(s){return new(s||t)(e.Y36(c.Y))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-p4-compendium"]],decls:1,vars:4,consts:[[3,"ngClass","hasSettings","mainList","otherLinks"]],template:function(s,m){1&s&&e._UZ(0,"app-demon-compendium",0),2&s&&e.Q6J("ngClass",m.appCssClasses)("hasSettings",!1)("mainList","persona")("otherLinks",m.otherLinks)},dependencies:[b.mk,D.e],styles:[".p3 div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p3 div.element-icon.i4096,.p3 div.element-icon.sla{background-image:url(/assets/images/p5/sword.png)}.p3 div.element-icon.i2048,.p3 div.element-icon.str{background-image:url(/assets/images/p5/phys.png)}.p3 div.element-icon.i1024,.p3 div.element-icon.pie{background-image:url(/assets/images/p5/gun.png)}.p3 div.element-icon.i512,.p3 div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p3 div.element-icon.i256,.p3 div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p3 div.element-icon.i128,.p3 div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p3 div.element-icon.i64,.p3 div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p3 div.element-icon.i32,.p3 div.element-icon.lig{background-image:url(/assets/images/p5/bless.png)}.p3 div.element-icon.i16,.p3 div.element-icon.dar{background-image:url(/assets/images/p5/curse.png)}.p3 div.element-icon.i4,.p3 div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.p3 div.element-icon.i3,.p3 div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p3 div.element-icon.i0,.p3 div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p3 div.element-icon.i48,.p3 div.element-icon.spe{background-image:url(/assets/images/p5/trait.png)}.p3 div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p3 div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.p3 th.title,.p3 th.nav.active,.p3 th.nav.active a{color:#000;background-color:#4372aa}.p4 div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p4 div.element-icon.i1083,.p4 div.element-icon.phy{background-image:url(/assets/images/p5/phys.png)}.p4 div.element-icon.i1791,.p4 div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p4 div.element-icon.i1535,.p4 div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p4 div.element-icon.i1983,.p4 div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p4 div.element-icon.i1919,.p4 div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p4 div.element-icon.i1003,.p4 div.element-icon.lig{background-image:url(/assets/images/p5/bless.png)}.p4 div.element-icon.i989,.p4 div.element-icon.dar{background-image:url(/assets/images/p5/curse.png)}.p4 div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.p4 div.element-icon.i1007,.p4 div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p4 div.element-icon.i2047,.p4 div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p3 div.element-icon.spe{background-image:url(/assets/images/p5/trait.png)}.p4 div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p4 div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.p4 th.title,.p4 th.nav.active,.p4 th.nav.active a{color:#000;background-color:#ffe600}\n"],encapsulation:2,changeDetection:0}),C})();var T=o(1032),l=o(6593),n=o(4101);let u=(()=>{var t;class C extends T.l{constructor(s,m,S,F){super(s,S,F),this.showAllies=!m.snapshot.data.showShadows,this.showEnemies=!this.showAllies,this.compConfig=F.compConfig,this.defaultSortFun=(I,A)=>200*(this.compConfig.raceOrder[I.race]-this.compConfig.raceOrder[A.race])+A.lvl-I.lvl,this.appName=`List of Personas - ${F.appName}`,this.statHeaders=this.compConfig.baseStats,this.resistHeaders=this.compConfig.resistElems,this.inheritOrder=this.compConfig.elemOrder,this.showEnemies&&(this.appName=`List of Shadows - ${F.appName}`,this.statHeaders=this.compConfig.enemyStats,this.resistHeaders=this.compConfig.enemyResists,this.inheritOrder=null)}}return(t=C).\u0275fac=function(s){return new(s||t)(e.Y36(l.Dx),e.Y36(_.gz),e.Y36(e.sBO),e.Y36(c.Y))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-demon-list-container"]],features:[e.qOj],decls:2,vars:9,consts:[[3,"isEnemy","hasCurrLvl","raceOrder","statHeaders","resistHeaders","inheritOrder","rowData"]],template:function(s,m){1&s&&(e._UZ(0,"app-smt-demon-list",0),e.ALo(1,"async")),2&s&&e.Q6J("isEnemy",m.showEnemies)("hasCurrLvl",!m.showEnemies)("raceOrder",m.compConfig.raceOrder)("statHeaders",m.statHeaders)("resistHeaders",m.resistHeaders)("inheritOrder",m.inheritOrder)("rowData",e.lcZ(1,7,m.demons))},dependencies:[n.Q,b.Ov],encapsulation:2,changeDetection:0}),C})();var d=o(4330),a=o(3934);let p=(()=>{var t;class C extends d.e{constructor(s,m,S){super(s,m,S),this.compConfig=S.compConfig,this.appName=`List of Skills - ${S.appName}`,this.transferTitle=this.compConfig.hasSkillCards?"Skill Card":"",this.defaultSortFun=(F,I)=>1e4*(this.compConfig.elemOrder[F.element]-this.compConfig.elemOrder[I.element])+F.rank-I.rank}}return(t=C).\u0275fac=function(s){return new(s||t)(e.Y36(l.Dx),e.Y36(e.sBO),e.Y36(c.Y))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-skill-list-container"]],features:[e.qOj],decls:2,vars:7,consts:[[3,"elemOrder","isPersona","transferTitle","hasTarget","rowData"]],template:function(s,m){1&s&&(e._UZ(0,"app-smt-skill-list",0),e.ALo(1,"async")),2&s&&e.Q6J("elemOrder",m.compConfig.elemOrder)("isPersona",!0)("transferTitle",m.transferTitle)("hasTarget",!0)("rowData",e.lcZ(1,5,m.skills))},dependencies:[a.J,b.Ov],encapsulation:2,changeDetection:0}),C})();var f=o(7880),y=o(8520),P=o(1009),E=o(755),h=o(9012),g=o(4069),i=o(8711);const v=function(){return["HP","MP"]};let L=(()=>{var t;class C{}return(t=C).\u0275fac=function(s){return new(s||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-enemy-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig"},decls:19,vars:11,consts:[[3,"title","statHeaders","stats"],[1,"entry-table"],["colspan","2",1,"title"],[3,"resistHeaders","resists"],[3,"elemOrder","compendium","skillLevels"]],template:function(s,m){1&s&&(e._UZ(0,"app-demon-stats",0),e.TgZ(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),e._uU(5,"Appearances"),e.qZA()(),e.TgZ(6,"tr")(7,"th"),e._uU(8,"Areas"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Drops"),e.qZA()()(),e.TgZ(11,"tbody")(12,"tr")(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA()()()(),e._UZ(17,"app-demon-resists",3)(18,"app-demon-skills",4)),2&s&&(e.Q6J("title","Lvl "+m.demon.lvl+" "+m.demon.race+" "+m.demon.name)("statHeaders",e.DdM(10,v).concat(m.compConfig.baseStats))("stats",m.demon.stats.concat(m.demon.estats)),e.xp6(14),e.Oqu(m.demon.area),e.xp6(2),e.Oqu(m.demon.drop),e.xp6(1),e.Q6J("resistHeaders",m.compConfig.enemyResists)("resists",m.demon.resists),e.xp6(1),e.Q6J("elemOrder",m.compConfig.elemOrder)("compendium",m.compendium)("skillLevels",m.demon.skills))},dependencies:[y.O,P.I,E.n],encapsulation:2,changeDetection:0}),C})();function M(t,C){if(1&t&&(e.ynx(0),e._UZ(1,"app-demon-stats",2)(2,"app-demon-resists",3)(3,"app-demon-inherits",4)(4,"app-demon-skills",5)(5,"app-smt-fusions",6),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("title","Lvl "+r.demon.lvl+" "+r.demon.race+" "+r.demon.name)("price",r.demon.price)("statHeaders",r.compConfig.baseStats)("stats",r.demon.stats)("inherits",r.demon.inherits),e.xp6(1),e.Q6J("resistHeaders",r.compConfig.resistElems)("resists",r.demon.resists),e.xp6(1),e.Q6J("hasChance",!r.compConfig.hasManualInheritance)("inheritHeaders",r.compendium.inheritHeaders)("inherits",r.compendium.getInheritElems(r.demon.inherits)),e.xp6(1),e.Q6J("hasRank",!0)("hasTarget",!0)("elemOrder",r.compConfig.elemOrder)("compendium",r.compendium)("skillLevels",r.demon.skills),e.xp6(1),e.Q6J("hasTripleFusion",!0)}}function Z(t,C){if(1&t&&e._UZ(0,"app-demon-missing",7),2&t){const r=e.oxw();e.Q6J("name",r.name)}}function U(t,C){if(1&t&&e._UZ(0,"app-demon-entry",1),2&t){const r=e.oxw();e.Q6J("name",r.name)("demon",r.demon)("compConfig",r.compConfig)("compendium",r.compendium)}}function J(t,C){if(1&t&&e._UZ(0,"app-enemy-entry",1),2&t){const r=e.oxw();e.Q6J("name",r.name)("demon",r.demon)("compConfig",r.compConfig)("compendium",r.compendium)}}let Y=(()=>{var t;class C{}return(t=C).\u0275fac=function(s){return new(s||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"title","price","statHeaders","stats","inherits"],[3,"resistHeaders","resists"],[3,"hasChance","inheritHeaders","inherits"],[3,"hasRank","hasTarget","elemOrder","compendium","skillLevels"],[3,"hasTripleFusion"],[3,"name"]],template:function(s,m){1&s&&(e.YNc(0,M,6,16,"ng-container",0),e.YNc(1,Z,1,1,"app-demon-missing",1)),2&s&&(e.Q6J("ngIf",m.demon),e.xp6(1),e.Q6J("ngIf",!m.demon))},dependencies:[b.O5,f.t,y.O,P.I,E.n,h.N,g.O],encapsulation:2,changeDetection:0}),C})(),R=(()=>{var t;class C{constructor(s,m,S,F){this.route=s,this.title=m,this.currentDemonService=S,this.fusionDataService=F,this.subscriptions=[],this.appName="Test App",this.appName=F.appName,this.compConfig=F.compConfig}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const s of this.subscriptions)s.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(s=>{this.compendium=s,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(s=>{this.name=s,this.getDemonEntry()})),this.route.params.subscribe(s=>{this.currentDemonService.nextCurrentDemon(s.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(`${this.name} - ${this.appName}`),this.demon=this.compendium.getDemon(this.name))}}return(t=C).\u0275fac=function(s){return new(s||t)(e.Y36(_.gz),e.Y36(l.Dx),e.Y36(i.s),e.Y36(c.Y))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-demon-entry-container"]],decls:2,vars:2,consts:[[3,"name","demon","compConfig","compendium",4,"ngIf"],[3,"name","demon","compConfig","compendium"]],template:function(s,m){1&s&&(e.YNc(0,U,1,4,"app-demon-entry",0),e.YNc(1,J,1,4,"app-enemy-entry",0)),2&s&&(e.Q6J("ngIf",!m.demon||!m.demon.isEnemy),e.xp6(1),e.Q6J("ngIf",m.demon&&m.demon.isEnemy))},dependencies:[b.O5,Y,L],encapsulation:2,changeDetection:0}),C})();var $=o(4436);let Q=(()=>{var t;class C{constructor(s,m){this.fusionDataService=s,this.title=m,this.subscriptions=[],this.maxSkills=8;const S=this.fusionDataService.compConfig;this.recipeConfig={fissionCalculator:this.fusionDataService.fissionCalculator,fusionCalculator:this.fusionDataService.fusionCalculator,races:S.races,skillElems:S.skillElems,inheritElems:S.inheritElems,restrictInherits:!0,triExclusiveRaces:["Fool","Fortune","Tower","Judgement","Aeon","Jester"],triFissionCalculator:this.fusionDataService.triFissionCalculator,triFusionCalculator:this.fusionDataService.triFusionCalculator,defaultDemon:"Pixie"}}ngOnInit(){this.setTitle(),this.subscribeAll()}ngOnDestroy(){this.unsubscribeAll()}setTitle(){this.title.setTitle(`Recipe Generator - ${this.fusionDataService.appName}`)}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(s=>{this.compendium=s})),this.subscriptions.push(this.fusionDataService.squareChart.subscribe(s=>{this.squareChart=s}))}unsubscribeAll(){for(const s of this.subscriptions)s.unsubscribe()}}return(t=C).\u0275fac=function(s){return new(s||t)(e.Y36(c.Y),e.Y36(l.Dx))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-recipe-generator-container"]],decls:1,vars:4,consts:[[3,"maxSkills","compendium","squareChart","recipeConfig"]],template:function(s,m){1&s&&e._UZ(0,"app-recipe-generator",0),2&s&&e.Q6J("maxSkills",m.maxSkills)("compendium",m.compendium)("squareChart",m.squareChart)("recipeConfig",m.recipeConfig)},dependencies:[$.X],encapsulation:2,changeDetection:0}),C})();var B=o(5939),N=o(5657),j=o(4689),H=o(6857),x=o(4170);const W=[{path:"",redirectTo:"personas",pathMatch:"full"},{path:"",component:O,data:{fusionTool:"chart"},children:[{path:"chart",component:o(9052).m}]},{path:"",component:O,children:[{path:"shadows/:demonName",component:R},{path:"personas/:demonName",component:R,children:[{path:"fissions/triple",component:H.p},{path:"fusions/triple",component:x.n},{path:"fissions",component:N.t},{path:"fusions",component:j.$},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"personas",component:u},{path:"shadows",component:u,data:{showShadows:!0}},{path:"skills",component:p},{path:"recipes",component:Q},{path:"previews",component:B.gQ}]},{path:"**",redirectTo:"personas",pathMatch:"full"}];let K=(()=>{var t;class C{}return(t=C).\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[_.Bz.forChild(W),_.Bz]}),C})()},8166:(w,k,o)=>{o.d(k,{Y:()=>T});var _=o(5619);class e{constructor(n){this.compConfig=n,this.specialRecipes={},this.dlcDemons={},this.initImportedData(),this.updateDerivedData()}initImportedData(){const n={},u={},d={},a={},p={},f={},y={},P={},E=this.compConfig.races.includes("World")?0:1;for(const[h,g]of Object.entries(this.compConfig.inheritTypes)){const i=parseInt(g.map(v=>v<=E?"0":"1").join(""),2);y[h]=i,P[i]=g}for(const h of this.compConfig.demonData)for(const[g,i]of Object.entries(h))n[g]={name:g,race:i.race,lvl:i.lvl,currLvl:i.lvl,cardLvl:i.cardlvl||0,price:Math.pow(i.stats.reduce((v,L)=>L+v,0),2)+2e3,inherits:y[i.inherits],stats:i.stats,resists:i.resists.split("").map(v=>this.compConfig.resistCodes[v]),skills:i.skills,fusion:i.fusion||"normal",prereq:i.prereq||""};for(const h of this.compConfig.enemyData)for(const[g,i]of Object.entries(h)){let v=[];i.material&&"-"!==i.material&&v.push(i.material),i.gem&&"-"!==i.gem&&v.push(i.gem),i.drops&&(v=v.concat(i.drops)),v.length||v.push("-"),u[g]={name:g,race:i.race,lvl:i.lvl,currLvl:i.lvl,price:0,inherits:0,stats:i.stats.slice(0,2),estats:i.stats.slice(2),resists:i.resists.toLowerCase().split("").map(L=>this.compConfig.resistCodes[L]),skills:i.skills.reduce((L,M)=>(L[M]=0,L),{}),fusion:"normal",area:i.area,drop:v.join(", "),isEnemy:!0}}for(const h of this.compConfig.skillData)for(const[g,i]of Object.entries(h))d[g]={name:g,element:i.element,cost:i.cost||0,rank:i.rank||99,effect:i.power?i.power+" power"+(i.effect?", "+i.effect:""):i.effect,target:i.target||"Self",learnedBy:[],transfer:[],level:0},i.card&&(d[g].transfer=i.card.split(", ").map(v=>({demon:v,level:n[v]?n[v].cardLvl:-100})));for(const[h,g]of Object.entries(this.compConfig.specialRecipes)){const i=g;if(a[h]=i,n[h].fusion="special",2===i.length)for(const v of i)f[v]||(f[v]=[]),f[v].push(h)}for(const h of this.compConfig.races)p[h]={};for(const h of Object.values(n).sort((g,i)=>g.lvl-i.lvl)){"party"!==h.fusion&&(p[h.race][h.lvl]=h.name);for(const[g,i]of Object.entries(h.skills))d[g].learnedBy.push({demon:h.name,level:i})}this.demons=n,this.enemies=u,this.skills=d,this.specialRecipes=a,this.invertedDemons=p,this.invertedSpecials=f,this._inheritTypes=P}updateDerivedData(){const n={},u={},d=[];for(const f of Object.values(this.skills))f.learnedBy.length<1?f.rank=99:d.push(f);for(const f of this.compConfig.races)n[f]=[],u[f]=[];for(const[f,y]of Object.entries(this.demons))"party"!==y.fusion&&(n[y.race].push(y.lvl),this.specialRecipes.hasOwnProperty(f)||u[y.race].push(y.lvl));for(const f of this.compConfig.races)n[f].sort((y,P)=>y-P),u[f].sort((y,P)=>y-P);const a=Object.keys(this.demons).map(f=>this.demons[f]),p=Object.keys(this.enemies).map(f=>this.enemies[f]);this._allDemons=p.concat(a),this._allSkills=d,this.allIngredients=n,this.allResults=u}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return Object.keys(this.specialRecipes).map(n=>this.demons[n])}get inheritHeaders(){return this.compConfig.inheritElems}getDemon(n){return this.demons[n]||this.enemies[n]}getSkill(n){return this.skills[n]}getSkills(n){const u=this.compConfig.elemOrder,d=n.map(a=>this.skills[a]);return d.sort((a,p)=>1e4*(u[a.element]-u[p.element])+a.rank-p.rank),d}getIngredientDemonLvls(n){return this.allIngredients[n]||[]}getResultDemonLvls(n){return this.allResults[n]||[]}getSpecialNameEntries(n){return this.specialRecipes[n]||[]}getSpecialNamePairs(n){return[]}getInheritElems(n){return this.compConfig.hasManualInheritance?n.toString(2).padStart(this.compConfig.inheritElems.length,"0").split("").map(u=>parseInt(u)):this._inheritTypes[n]}reverseLookupDemon(n,u){return this.invertedDemons[n][u]}reverseLookupSpecial(n){return this.invertedSpecials[n]||[]}isElementDemon(n){return!1}}var c=o(2812),b=o(7548),D=o(4769),O=o(4487);let T=(()=>{var l;class n{constructor(d,a){this.fissionCalculator=b.Bz,this.fusionCalculator=b.wC,this.triFissionCalculator=b.nL,this.triFusionCalculator=b.RD;const p=a.url.split("/")[1];this.compConfig=d.configs[d.configs[p]?p:"p4"],this.appName=this.compConfig.appTitle+" Fusion Calculator",this._compendium=new e(this.compConfig),this._compendium$=new _.X(this._compendium),this.compendium=this._compendium$.asObservable(),this._fusionChart=new c.t(this.compConfig.normalTable,this.compConfig.races),this._fusionChart$=new _.X(this._fusionChart),this.fusionChart=this._fusionChart$.asObservable(),this._tripleChart=new c.t(this.compConfig.normalTable,this.compConfig.races,!0),this._squareChart$=new _.X({normalChart:this._fusionChart,tripleChart:this._tripleChart,raceOrder:this.compConfig.raceOrder}),this.squareChart=this._squareChart$.asObservable()}nextDlcDemons(d){}}return(l=n).\u0275fac=function(d){return new(d||l)(D.LFG(b.I7),D.LFG(O.F0))},l.\u0275prov=D.Yz7({token:l,factory:l.\u0275fac}),n})()},8970:(w,k,o)=>{o.d(k,{R:()=>O});var _=o(6814),e=o(6208),c=o(8325),b=o(4806),D=o(4769);let O=(()=>{var T;class l{static forRoot(){return{ngModule:l}}}return(T=l).\u0275fac=function(u){return new(u||T)},T.\u0275mod=D.oAB({type:T}),T.\u0275inj=D.cJS({imports:[_.ez,e.m,c.a,b.V]}),l})()}}]);