"use strict";(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[101],{7277:(ee,K,a)=>{a.d(K,{S:()=>He});var U=a(8935),A=a(2755),G=a(1090),e=a(2598),E=a(7992),S=a(177),V=a(5583);let P=(()=>{class t{constructor(s){this.appCssClasses=s.compConfig.appCssClasses;const i=s.compConfig,n=G.fu;this.otherLinks=[],i.hasEnemies&&this.otherLinks.push({title:(0,A.o)(n.ShadowList,i.lang),link:"shadows"}),!i.hasQrcodes&&i.hasManualInheritance&&this.otherLinks.push({title:(0,A.o)(n.RecipGenerator,i.lang),link:"recipes"}),i.hasQrcodes&&this.otherLinks.push({title:"QR Code Generator",link:"qrcodes"})}static{this.\u0275fac=function(i){return new(i||t)(e.rXU(E.i))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-pq2-compendium"]],decls:1,vars:3,consts:[[3,"ngClass","mainList","otherLinks"]],template:function(i,n){1&i&&e.nrm(0,"app-demon-compendium",0),2&i&&e.Y8G("ngClass",n.appCssClasses)("mainList","persona")("otherLinks",n.otherLinks)},dependencies:[S.YU,V.f],styles:[".p3 div.element-icon.i28716,.p3 div.element-icon.sla{background-image:url(/assets/images/elem-sprites.svg#swo)}.p3 div.element-icon.i28717,.p3 div.element-icon.str{background-image:url(/assets/images/elem-sprites.svg#phy)}.p3 div.element-icon.i28718,.p3 div.element-icon.pie{background-image:url(/assets/images/elem-sprites.svg#gun)}.p3 div.element-icon.i30972,.p3 div.element-icon.fir{background-image:url(/assets/images/elem-sprites.svg#fir)}.p3 div.element-icon.i29948,.p3 div.element-icon.ice{background-image:url(/assets/images/elem-sprites.svg#ice)}.p3 div.element-icon.i29436,.p3 div.element-icon.ele{background-image:url(/assets/images/elem-sprites.svg#ele)}.p3 div.element-icon.i29180,.p3 div.element-icon.win{background-image:url(/assets/images/elem-sprites.svg#win)}.p3 div.element-icon.i4012,.p3 div.element-icon.lig{background-image:url(/assets/images/elem-sprites.svg#lig)}.p3 div.element-icon.i32624,.p3 div.element-icon.dar{background-image:url(/assets/images/elem-sprites.svg#per-dar)}.p3 div.element-icon.i3956,.p3 div.element-icon.ail{background-image:url(/assets/images/elem-sprites.svg#per-ail)}.p3 div.element-icon.i4093,.p3 div.element-icon.rec{background-image:url(/assets/images/elem-sprites.svg#per-rec)}.p3 div.element-icon.i32764,.p3 div.element-icon.alm{background-image:url(/assets/images/elem-sprites.svg#per-alm)}.p3 div.element-icon.i4092{background-image:url(/assets/images/elem-sprites.svg#per-alm)}.p3 div.element-icon.spa,.p3 div.element-icon.spb,.p3 div.element-icon.spe{background-image:url(/assets/images/elem-sprites.svg#per-tra)}.p3 div.element-icon.sup{background-image:url(/assets/images/elem-sprites.svg#per-sup)}.p3 div.element-icon.pas{background-image:url(/assets/images/elem-sprites.svg#per-pas)}.p3 th.title,.p3 th.nav.active,.p3 th.nav.active a{color:#000;background-color:#4372aa}.p4 div.element-icon.i2166,.p4 div.element-icon.phy{background-image:url(/assets/images/elem-sprites.svg#phy)}.p4 div.element-icon.i3582,.p4 div.element-icon.fir{background-image:url(/assets/images/elem-sprites.svg#fir)}.p4 div.element-icon.i3070,.p4 div.element-icon.ice{background-image:url(/assets/images/elem-sprites.svg#ice)}.p4 div.element-icon.i3966,.p4 div.element-icon.ele{background-image:url(/assets/images/elem-sprites.svg#ele)}.p4 div.element-icon.i3838,.p4 div.element-icon.win{background-image:url(/assets/images/elem-sprites.svg#win)}.p4 div.element-icon.i2006,.p4 div.element-icon.lig{background-image:url(/assets/images/elem-sprites.svg#lig)}.p4 div.element-icon.i1978,.p4 div.element-icon.dar{background-image:url(/assets/images/elem-sprites.svg#per-dar)}.p4 div.element-icon.i1979,.p4 div.element-icon.ail{background-image:url(/assets/images/elem-sprites.svg#per-ail)}.p4 div.element-icon.i2014,.p4 div.element-icon.rec{background-image:url(/assets/images/elem-sprites.svg#per-rec)}.p4 div.element-icon.i4094,.p4 div.element-icon.alm{background-image:url(/assets/images/elem-sprites.svg#per-alm)}.p4 div.element-icon.spa,.p4 div.element-icon.spe{background-image:url(/assets/images/elem-sprites.svg#per-tra)}.p4 div.element-icon.i4095,.p4 div.element-icon.sup{background-image:url(/assets/images/elem-sprites.svg#per-sup)}.p4 div.element-icon.pas{background-image:url(/assets/images/elem-sprites.svg#per-pas)}.p4 th.title,.p4 th.nav.active,.p4 th.nav.active a{color:#000;background-color:#ffe600}.p5 div.element-icon.phy,.p5 div.element-icon.i3075{background-image:url(/assets/images/elem-sprites.svg#phy)}.p5 div.element-icon.gun{background-image:url(/assets/images/elem-sprites.svg#gun)}.p5 div.element-icon.fir,.p5 div.element-icon.i3839{background-image:url(/assets/images/elem-sprites.svg#fir)}.p5 div.element-icon.ice,.p5 div.element-icon.i3583{background-image:url(/assets/images/elem-sprites.svg#ice)}.p5 div.element-icon.ele,.p5 div.element-icon.i4031{background-image:url(/assets/images/elem-sprites.svg#ele)}.p5 div.element-icon.win,.p5 div.element-icon.i3967{background-image:url(/assets/images/elem-sprites.svg#win)}.p5 div.element-icon.psy,.p5 div.element-icon.i4079{background-image:url(/assets/images/elem-sprites.svg#psy)}.p5 div.element-icon.nuk,.p5 div.element-icon.i4063{background-image:url(/assets/images/elem-sprites.svg#nuk)}.p5 div.element-icon.ble,.p5 div.element-icon.i1017{background-image:url(/assets/images/elem-sprites.svg#lig)}.p5 div.element-icon.cur,.p5 div.element-icon.i1014{background-image:url(/assets/images/elem-sprites.svg#per-dar)}.p5 div.element-icon.ail,.p5 div.element-icon.i4086{background-image:url(/assets/images/elem-sprites.svg#per-ail)}.p5 div.element-icon.rec,.p5 div.element-icon.i1019{background-image:url(/assets/images/elem-sprites.svg#per-rec)}.p5 div.element-icon.alm,.p5 div.element-icon.i4095{background-image:url(/assets/images/elem-sprites.svg#per-alm)}.p5 div.element-icon.sup{background-image:url(/assets/images/elem-sprites.svg#per-sup)}.p5 div.element-icon.pas,.p5 div.element-icon.i0{background-image:url(/assets/images/elem-sprites.svg#per-pas)}.p5 div.element-icon.tra{background-image:url(/assets/images/elem-sprites.svg#per-tra)}.p5 th.title,.p5 th.nav.active,.p5 th.nav.active a{color:#fff;background-color:#f41000}.pq div.element-icon.cut{background-image:url(/assets/images/elem-sprites.svg#swo)}.pq div.element-icon.i3584,.pq div.element-icon.i3591,.pq div.element-icon.bas{background-image:url(/assets/images/elem-sprites.svg#phy)}.pq div.element-icon.sta{background-image:url(/assets/images/elem-sprites.svg#gun)}.pq div.element-icon.i376,.pq div.element-icon.i383,.pq div.element-icon.i3960,.pq div.element-icon.i3967,.pq div.element-icon.fir{background-image:url(/assets/images/elem-sprites.svg#fir)}.pq div.element-icon.i248,.pq div.element-icon.i255,.pq div.element-icon.i3832,.pq div.element-icon.i3839,.pq div.element-icon.ice{background-image:url(/assets/images/elem-sprites.svg#ice)}.pq div.element-icon.i472,.pq div.element-icon.i479,.pq div.element-icon.i4056,.pq div.element-icon.i4063,.pq div.element-icon.ele{background-image:url(/assets/images/elem-sprites.svg#ele)}.pq div.element-icon.i440,.pq div.element-icon.i447,.pq div.element-icon.i4024,.pq div.element-icon.i4031,.pq div.element-icon.win{background-image:url(/assets/images/elem-sprites.svg#win)}.pq div.element-icon.i496,.pq div.element-icon.i503,.pq div.element-icon.i4080,.pq div.element-icon.i4087,.pq div.element-icon.lig{background-image:url(/assets/images/elem-sprites.svg#lig)}.pq div.element-icon.i488,.pq div.element-icon.i495,.pq div.element-icon.i4072,.pq div.element-icon.i4079,.pq div.element-icon.dar{background-image:url(/assets/images/elem-sprites.svg#per-dar)}.pq div.element-icon.ail{background-image:url(/assets/images/elem-sprites.svg#per-ail)}.pq div.element-icon.rec{background-image:url(/assets/images/elem-sprites.svg#per-rec)}.pq div.element-icon.i504,.pq div.element-icon.i511,.pq div.element-icon.i4088,.pq div.element-icon.i4095,.pq div.element-icon.alm{background-image:url(/assets/images/elem-sprites.svg#per-alm)}.pq div.element-icon.sup{background-image:url(/assets/images/elem-sprites.svg#per-sup)}.pq div.element-icon.nav{background-image:url(/assets/images/elem-sprites.svg#per-tra)}.pq div.element-icon.pas{background-image:url(/assets/images/elem-sprites.svg#per-pas)}.pq th.title,.pq th.nav.active,.pq th.nav.active a{color:#000;background-color:#aa1ca9}.pq2 div.element-icon.i2055,.pq2 div.element-icon.phy{background-image:url(/assets/images/elem-sprites.svg#phy)}.pq2 div.element-icon.i3583,.pq2 div.element-icon.fir{background-image:url(/assets/images/elem-sprites.svg#fir)}.pq2 div.element-icon.i3071,.pq2 div.element-icon.ice{background-image:url(/assets/images/elem-sprites.svg#ice)}.pq2 div.element-icon.i3967,.pq2 div.element-icon.ele{background-image:url(/assets/images/elem-sprites.svg#ele)}.pq2 div.element-icon.i3839,.pq2 div.element-icon.win{background-image:url(/assets/images/elem-sprites.svg#win)}.pq2 div.element-icon.i4063,.pq2 div.element-icon.psy{background-image:url(/assets/images/elem-sprites.svg#psy)}.pq2 div.element-icon.i4031,.pq2 div.element-icon.nuk{background-image:url(/assets/images/elem-sprites.svg#nuk)}.pq2 div.element-icon.i4087,.pq2 div.element-icon.ble{background-image:url(/assets/images/elem-sprites.svg#lig)}.pq2 div.element-icon.i4079,.pq2 div.element-icon.cur{background-image:url(/assets/images/elem-sprites.svg#per-dar)}.pq2 div.element-icon.ail{background-image:url(/assets/images/elem-sprites.svg#per-ail)}.pq2 div.element-icon.rec{background-image:url(/assets/images/elem-sprites.svg#per-rec)}.pq2 div.element-icon.i4095,.pq2 div.element-icon.alm{background-image:url(/assets/images/elem-sprites.svg#per-alm)}.pq2 div.element-icon.i2047,.pq2 div.element-icon.sup{background-image:url(/assets/images/elem-sprites.svg#per-sup)}.pq2 div.element-icon.nav{background-image:url(/assets/images/elem-sprites.svg#per-tra)}.pq2 div.element-icon.pas{background-image:url(/assets/images/elem-sprites.svg#per-pas)}.pq2 th.title,.pq2 th.nav.active,.pq2 th.nav.active a{color:#fff;background-color:#ff4800}.p5t div.element-icon.phy{background-image:url(/assets/images/elem-sprites.svg#phy)}.p5t div.element-icon.gun{background-image:url(/assets/images/elem-sprites.svg#gun)}.p5t div.element-icon.fir{background-image:url(/assets/images/elem-sprites.svg#fir)}.p5t div.element-icon.ice{background-image:url(/assets/images/elem-sprites.svg#ice)}.p5t div.element-icon.ele{background-image:url(/assets/images/elem-sprites.svg#ele)}.p5t div.element-icon.win{background-image:url(/assets/images/elem-sprites.svg#win)}.p5t div.element-icon.psy{background-image:url(/assets/images/elem-sprites.svg#psy)}.p5t div.element-icon.nuk{background-image:url(/assets/images/elem-sprites.svg#nuk)}.p5t div.element-icon.ble{background-image:url(/assets/images/elem-sprites.svg#lig)}.p5t div.element-icon.cur{background-image:url(/assets/images/elem-sprites.svg#per-dar)}.p5t div.element-icon.i1023,.p5t div.element-icon.alm{background-image:url(/assets/images/elem-sprites.svg#per-alm)}.p5t div.element-icon.rec{background-image:url(/assets/images/elem-sprites.svg#per-rec)}.p5t div.element-icon.sup{background-image:url(/assets/images/elem-sprites.svg#per-sup)}.p5t div.element-icon.pas{background-image:url(/assets/images/elem-sprites.svg#per-pas)}.p5t th.title,.p5t th.nav.active,.p5t th.nav.active a{color:#fff;background-color:#f41000}.p3r div.element-icon.i3583,.p3r div.element-icon.i3585,.p3r div.element-icon.sla{background-image:url(/assets/images/elem-sprites.svg#swo)}.p3r div.element-icon.i2047,.p3r div.element-icon.i3615,.p3r div.element-icon.str{background-image:url(/assets/images/elem-sprites.svg#phy)}.p3r div.element-icon.i3071,.p3r div.element-icon.i4065,.p3r div.element-icon.pie{background-image:url(/assets/images/elem-sprites.svg#gun)}.p3r div.element-icon.i3967,.p3r div.element-icon.i3843,.p3r div.element-icon.i3955,.p3r div.element-icon.i3949,.p3r div.element-icon.fir{background-image:url(/assets/images/elem-sprites.svg#fir)}.p3r div.element-icon.i3839,.p3r div.element-icon.i3715,.p3r div.element-icon.i3827,.p3r div.element-icon.i3821,.p3r div.element-icon.ice{background-image:url(/assets/images/elem-sprites.svg#ice)}.p3r div.element-icon.i4063,.p3r div.element-icon.i3651,.p3r div.element-icon.i4051,.p3r div.element-icon.i4045,.p3r div.element-icon.ele{background-image:url(/assets/images/elem-sprites.svg#ele)}.p3r div.element-icon.i4031,.p3r div.element-icon.i3619,.p3r div.element-icon.i4019,.p3r div.element-icon.i4013,.p3r div.element-icon.win{background-image:url(/assets/images/elem-sprites.svg#win)}.p3r div.element-icon.i4083,.p3r div.element-icon.i3603,.p3r div.element-icon.lig{background-image:url(/assets/images/elem-sprites.svg#lig)}.p3r div.element-icon.i4077,.p3r div.element-icon.i3597,.p3r div.element-icon.dar{background-image:url(/assets/images/elem-sprites.svg#per-dar)}.p3r div.element-icon.i493,.p3r div.element-icon.ail{background-image:url(/assets/images/elem-sprites.svg#per-ail)}.p3r div.element-icon.i499,.p3r div.element-icon.rec{background-image:url(/assets/images/elem-sprites.svg#per-rec)}.p3r div.element-icon.i4095,.p3r div.element-icon.alm{background-image:url(/assets/images/elem-sprites.svg#per-alm)}.p3r div.element-icon.i511,.p3r div.element-icon.i4088,.p3r div.element-icon.spe{background-image:url(/assets/images/elem-sprites.svg#per-tra)}.p3r div.element-icon.sup{background-image:url(/assets/images/elem-sprites.svg#per-sup)}.p3r div.element-icon.pas{background-image:url(/assets/images/elem-sprites.svg#per-pas)}.p3r th.title,.p3r th.nav.active,.p3r th.nav.active a{color:#000;background-color:#4372aa}\n"],encapsulation:2,changeDetection:0})}}return t})();var Y=a(9404),w=a(345),I=a(9629);let R=(()=>{class t extends Y.M{constructor(s,i,n,c){super(s,n,c),this.showAllies=!i.snapshot.data.showShadows,this.showEnemies=!this.showAllies,this.compConfig=c.compConfig,this.defaultSortFun=(d,F)=>200*(this.compConfig.raceOrder[d.race]-this.compConfig.raceOrder[F.race])+F.lvl-d.lvl,this.appName=(0,A.o)(G.vC.AppPersonas,this.compConfig.lang)+c.appName,this.statHeaders=this.compConfig.baseStats,this.resistHeaders=this.compConfig.hasDemonResists?this.compConfig.resistElems:[],this.inheritOrder=this.compConfig.elemOrder,this.showEnemies&&(this.appName=(0,A.o)(G.vC.AppShadows,this.compConfig.lang)+c.appName,this.statHeaders=this.compConfig.enemyStats,this.resistHeaders=this.compConfig.resistElems,this.inheritOrder=null)}static{this.\u0275fac=function(i){return new(i||t)(e.rXU(w.hE),e.rXU(U.nX),e.rXU(e.gRc),e.rXU(E.i))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-demon-list-container"]],features:[e.Vt3],decls:2,vars:11,consts:[[3,"lang","isPersona","isEnemy","hasCurrLvl","raceOrder","statHeaders","resistHeaders","inheritOrder","rowData"]],template:function(i,n){1&i&&(e.nrm(0,"app-smt-demon-list",0),e.nI1(1,"async")),2&i&&e.Y8G("lang",n.compConfig.lang)("isPersona",!n.showEnemies)("isEnemy",n.showEnemies)("hasCurrLvl",!n.showEnemies&&n.compConfig.hasTripleFusion)("raceOrder",n.compConfig.raceOrder)("statHeaders",n.statHeaders)("resistHeaders",n.resistHeaders)("inheritOrder",n.inheritOrder)("rowData",e.bMT(1,9,n.demons))},dependencies:[I.F,S.Jj],encapsulation:2,changeDetection:0})}}return t})();var H=a(9454),B=a(2940);let z=(()=>{class t extends H.E{constructor(s,i,n){super(s,i,n),this.compConfig=n.compConfig,this.appName=(0,A.o)(G.vf.AppTitle,this.compConfig.lang)+n.appName,this.transferTitle=this.compConfig.hasSkillCards?"Skill Card":"",this.defaultSortFun=(c,d)=>1e4*(this.compConfig.elemOrder[c.element]-this.compConfig.elemOrder[d.element])+c.rank-d.rank}static{this.\u0275fac=function(i){return new(i||t)(e.rXU(w.hE),e.rXU(e.gRc),e.rXU(E.i))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-skill-list-container"]],features:[e.Vt3],decls:2,vars:9,consts:[[3,"lang","elemOrder","hasRank","hasTarget","isPersona","transferTitle","rowData"]],template:function(i,n){1&i&&(e.nrm(0,"app-smt-skill-list",0),e.nI1(1,"async")),2&i&&e.Y8G("lang",n.compConfig.lang)("elemOrder",n.compConfig.elemOrder)("hasRank",n.compConfig.hasSkillRanks)("hasTarget",!0)("isPersona",!0)("transferTitle",n.transferTitle)("rowData",e.bMT(1,7,n.skills))},dependencies:[B.p,S.Jj],encapsulation:2,changeDetection:0})}}return t})();var X=a(5692),x=a(3679),W=a(2223),Q=a(302),Z=a(9436),j=a(6122),r=a(8696);let f=(()=>{class t{constructor(){this.lang="en"}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-enemy-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig",lang:"lang"},decls:19,vars:14,consts:[[3,"title","statHeaders","stats"],[1,"entry-table"],["colspan","2",1,"title"],[3,"resistHeaders","resists","ailmentHeaders","ailments"],[3,"hasTarget","hasLvl","elemOrder","compendium","skillLevels"]],template:function(i,n){1&i&&(e.nrm(0,"app-demon-stats",0),e.j41(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),e.EFF(5,"Appearances"),e.k0s()(),e.j41(6,"tr")(7,"th"),e.EFF(8,"Areas"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Drops"),e.k0s()()(),e.j41(11,"tbody")(12,"tr")(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s()()()(),e.nrm(17,"app-demon-resists",3)(18,"app-demon-skills",4)),2&i&&(e.Y8G("title","Lvl "+n.demon.lvl+" "+n.demon.race+" "+n.demon.name)("statHeaders",n.compConfig.enemyStats)("stats",n.demon.stats),e.R7$(14),e.JRh(n.demon.area),e.R7$(2),e.JRh(n.demon.drop),e.R7$(1),e.Y8G("resistHeaders",n.compConfig.resistElems)("resists",n.demon.resists)("ailmentHeaders",n.compConfig.ailmentElems)("ailments",n.demon.ailments),e.R7$(1),e.Y8G("hasTarget",!0)("hasLvl",!1)("elemOrder",n.compConfig.elemOrder)("compendium",n.compendium)("skillLevels",n.demon.skills))},dependencies:[x.C,W.w,Q.F],encapsulation:2,changeDetection:0})}}return t})();function m(t,g){if(1&t&&e.nrm(0,"app-demon-resists",7),2&t){const s=e.XpG(2);e.Y8G("lang",s.lang)("resistHeaders",s.compConfig.resistElems)("resists",s.demon.resists)}}function b(t,g){if(1&t&&e.nrm(0,"app-demon-inherits",8),2&t){const s=e.XpG(2);e.Y8G("hasChance",!s.compConfig.hasManualInheritance)("inheritHeaders",s.compConfig.inheritElems)("inherits",s.demon.affinities)}}function v(t,g){if(1&t&&(e.qex(0),e.nrm(1,"app-demon-stats",2),e.DNE(2,m,1,3,"app-demon-resists",3),e.DNE(3,b,1,3,"app-demon-inherits",4),e.nrm(4,"app-demon-skills",5)(5,"app-smt-fusions",6),e.bVm()),2&t){const s=e.XpG();e.R7$(1),e.Y8G("lang",s.lang)("title","Lvl "+s.demon.lvl+" "+s.demon.race+" "+s.demon.name)("price",s.demon.price)("statHeaders",s.compConfig.baseStats)("stats",s.demon.stats)("inherits",s.demon.inherits),e.R7$(1),e.Y8G("ngIf",s.compConfig.hasDemonResists),e.R7$(1),e.Y8G("ngIf",s.compConfig.inheritElems.length),e.R7$(1),e.Y8G("lang",s.lang)("hasRank",s.compConfig.hasSkillRanks)("hasTarget",!0)("elemOrder",s.compConfig.elemOrder)("compendium",s.compendium)("skillLevels",s.demon.skills),e.R7$(1),e.Y8G("lang",s.lang)("hasTripleFusion",s.compConfig.hasTripleFusion)("excludedDlc","excluded"===s.demon.fusion)}}function O(t,g){if(1&t&&e.nrm(0,"app-demon-missing",9),2&t){const s=e.XpG();e.Y8G("name",s.name)}}function p(t,g){if(1&t&&e.nrm(0,"app-demon-entry",1),2&t){const s=e.XpG();e.Y8G("lang",s.compConfig.lang)("name",s.name)("demon",s.demon)("compConfig",s.compConfig)("compendium",s.compendium)}}function l(t,g){if(1&t&&e.nrm(0,"app-enemy-entry",1),2&t){const s=e.XpG();e.Y8G("lang",s.compConfig.lang)("name",s.name)("demon",s.demon)("compConfig",s.compConfig)("compendium",s.compendium)}}let C=(()=>{class t{constructor(){this.lang="en"}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig",lang:"lang"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"lang","title","price","statHeaders","stats","inherits"],[3,"lang","resistHeaders","resists",4,"ngIf"],[3,"hasChance","inheritHeaders","inherits",4,"ngIf"],[3,"lang","hasRank","hasTarget","elemOrder","compendium","skillLevels"],[3,"lang","hasTripleFusion","excludedDlc"],[3,"lang","resistHeaders","resists"],[3,"hasChance","inheritHeaders","inherits"],[3,"name"]],template:function(i,n){1&i&&(e.DNE(0,v,6,17,"ng-container",0),e.DNE(1,O,1,1,"app-demon-missing",1)),2&i&&(e.Y8G("ngIf",n.demon),e.R7$(1),e.Y8G("ngIf",!n.demon))},dependencies:[S.bT,X.X,x.C,W.w,Q.F,Z.d,j.L],encapsulation:2,changeDetection:0})}}return t})(),y=(()=>{class t{constructor(s,i,n,c){this.route=s,this.title=i,this.currentDemonService=n,this.fusionDataService=c,this.subscriptions=[],this.appName="Test App",this.appName=c.appName,this.compConfig=c.compConfig}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const s of this.subscriptions)s.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(s=>{this.compendium=s,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(s=>{this.name=s,this.getDemonEntry()})),this.route.params.subscribe(s=>{this.currentDemonService.nextCurrentDemon(s.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(`${this.name} - ${this.appName}`),this.demon=this.compendium.getDemon(this.name))}static{this.\u0275fac=function(i){return new(i||t)(e.rXU(U.nX),e.rXU(w.hE),e.rXU(r.i),e.rXU(E.i))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-demon-entry-container"]],decls:2,vars:2,consts:[[3,"lang","name","demon","compConfig","compendium",4,"ngIf"],[3,"lang","name","demon","compConfig","compendium"]],template:function(i,n){1&i&&(e.DNE(0,p,1,5,"app-demon-entry",0),e.DNE(1,l,1,5,"app-enemy-entry",0)),2&i&&(e.Y8G("ngIf",!n.demon||!n.demon.isEnemy),e.R7$(1),e.Y8G("ngIf",n.demon&&n.demon.isEnemy))},dependencies:[S.bT,C,f],encapsulation:2,changeDetection:0})}}return t})();var D=a(9023);let N=(()=>{class t{constructor(s){this.fusionDataService=s,this.subscriptions=[],this.mitaTable=[]}ngOnInit(){const s=this.fusionDataService.compConfig;this.hasTripleFusion=s.hasTripleFusion,this.hasMitamaFusion=s.elementTable.elems.length>0,this.subscriptions.push(this.fusionDataService.squareChart.subscribe(i=>{this.normChart=i.normalChart,this.tripChart=i.tripleChart,this.updateMitamas()})),this.hasMitamaFusion&&this.subscriptions.push(this.fusionDataService.compendium.subscribe(i=>{this.compendium=i,this.updateMitamas()}))}ngOnDestroy(){for(const s of this.subscriptions)s.unsubscribe()}updateMitamas(){if(!this.hasMitamaFusion||!this.compendium||!this.normChart)return;const s=this.normChart.elementDemons.map(n=>this.compendium.getDemon(n).race),i=[];for(let n=0;n<s.length;n++){const c=s[n];i.push(s.slice(0,n+1).map(d=>this.normChart.getRaceFusion(c,d)))}this.mitaTable=i}static{this.\u0275fac=function(i){return new(i||t)(e.rXU(E.i))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-fusion-chart-container"]],decls:1,vars:6,consts:[[3,"normChart","tripChart","normTitle","tripTitle","mitaTable","isPersona"]],template:function(i,n){1&i&&e.nrm(0,"app-fusion-chart",0),2&i&&e.Y8G("normChart",n.normChart)("tripChart",n.hasTripleFusion?n.tripChart:null)("normTitle","Normal Fusions")("tripTitle",n.hasTripleFusion?"Triple Fusions":null)("mitaTable",n.hasMitamaFusion?n.mitaTable:null)("isPersona",!0)},dependencies:[D.q],encapsulation:2,changeDetection:0})}}return t})();const T=Array(24).fill(0);function k(t,g){return t.split("").map(s=>s.charCodeAt(0)).concat(Array(g-t.length).fill(0))}T[0]=4,T[2]=50,T[4]=50,T[6]=50,T[7]=50,T[8]=50,T[12]=50,T[16]=50,T[20]=50;const h=[].concat(k("aqiu384.github.io",21),k("https://youtu.be/b1KfNEPKncQ",33)),u="kitaro",o="bancho",J=[].concat(k(u,17),k(o,17)),ie=[].concat(k(u,29),k(o,29)),ne=[].concat(k(u,17),k(o,17),k("renren",17),k("hamuko",17)),oe=[].concat([34,50],Array(36).fill(31),[31,0,31,0,0,0,1,128]),ae=[].concat([34,50],Array(54).fill(31),[31,0,1,0]);var q=a(4341);let ce=(()=>{class t{constructor(){this.byteArray=[],this.errorLvl="L",this.typeNum=10,this.qrFactory=qrcode(this.typeNum,this.errorLvl),this.qrImg=null}ngOnChanges(){this.createQrcode()}createQrcode(){this.qrFactory=qrcode(this.typeNum,this.errorLvl),this.qrFactory.addData(this.byteArray.map(s=>String.fromCharCode(s)).join("")),this.qrFactory.make(),this.qrImg=this.qrFactory.createImgTag(5)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-qrcode"]],inputs:{byteArray:"byteArray",errorLvl:"errorLvl",typeNum:"typeNum"},features:[e.OA$],decls:1,vars:1,consts:[[3,"innerHtml"]],template:function(i,n){1&i&&e.nrm(0,"div",0),2&i&&e.Y8G("innerHtml",n.qrImg,e.npT)},encapsulation:2,changeDetection:0})}}return t})();function pe(t,g){if(1&t&&(e.j41(0,"option",15),e.EFF(1),e.k0s()),2&t){const s=g.index;e.Y8G("value",s+1),e.R7$(1),e.JRh(s+1)}}function ue(t,g){if(1&t&&(e.j41(0,"option",15),e.EFF(1),e.k0s()),2&t){const s=g.index;e.Y8G("value",s+1),e.R7$(1),e.JRh(s+1)}}function de(t,g){if(1&t&&(e.j41(0,"option",15),e.EFF(1),e.k0s()),2&t){const s=g.index;e.Y8G("value",s+1),e.R7$(1),e.JRh(s+1)}}function ge(t,g){if(1&t&&(e.j41(0,"option",15),e.EFF(1),e.k0s()),2&t){const s=g.$implicit;e.Y8G("value",s),e.R7$(1),e.JRh(s)}}function he(t,g){if(1&t&&(e.j41(0,"option",15),e.EFF(1),e.k0s()),2&t){const s=g.$implicit;e.Y8G("value",s.name),e.R7$(1),e.JRh(s.name)}}function fe(t,g){if(1&t&&(e.j41(0,"option",15),e.EFF(1),e.k0s()),2&t){const s=g.$implicit;e.Y8G("value",s),e.R7$(1),e.JRh(s)}}function ve(t,g){if(1&t&&(e.j41(0,"option",15),e.EFF(1),e.k0s()),2&t){const s=g.$implicit;e.Y8G("value",s.name),e.R7$(1),e.JRh(s.name)}}function Ce(t,g){if(1&t){const s=e.RV6();e.qex(0,16),e.j41(1,"tr")(2,"td")(3,"select",17),e.bIt("change",function(){const c=e.eBV(s).$implicit,d=e.XpG();return e.Njj(c.controls.name.setValue(d.skills[c.controls.elem.value][0].name))}),e.DNE(4,fe,2,2,"option",6),e.k0s()(),e.j41(5,"td")(6,"select",18),e.DNE(7,ve,2,2,"option",6),e.k0s()()(),e.bVm()}if(2&t){const s=g.$implicit,i=g.index,n=e.XpG();e.Y8G("formGroupName",i),e.R7$(4),e.Y8G("ngForOf",n.elems),e.R7$(3),e.Y8G("ngForOf",n.skills[s.controls.elem.value])}}let be=(()=>{class t{constructor(s){this.fb=s,this.demons={},this.skills={},this.dcodes={},this.scodes={},this.range99=Array(99),this.range299=Array(299),this.price=0,this.blankSkill={code:0,cost:0,level:0,rank:0,target:"Self",name:"-",element:"-",inherit:"-",effect:"-",learnedBy:[],transfer:[]},this.createForm()}ngOnChanges(){this.initDropdowns()}createForm(){const s=[];for(let i=0;i<6;i++)s.push(this.fb.group({elem:"-",name:"-"}));this.form=this.fb.group({lvl:1,hp:1,mp:1,race:"-",demon:"-",skills:this.fb.array(s)}),this.form.valueChanges.subscribe(i=>{if(this.form.valid){const n=this.compendium.getDemon(i.demon),c=i.skills.map(F=>this.compendium.getSkill(F.name)||this.blankSkill),d={isEnglish:"en"===this.compConfig.lang,demonCode:n.code,lvl:parseInt(i.lvl,10),exp:-1,hp:parseInt(i.hp,10),mp:parseInt(i.mp,10),skillCodes:c.map(F=>F.code)};this.price=this.compConfig.computePrice(n,d),this.passBytes=function re(t,g){return g?function me(t){const g=T.slice(),s=Array(25).fill(0),i=t.lvl,n=Math.floor((((-.0479755766*i+9.28700353)*i+71.9694228)*i-81.1026214)*i+.120783542),c=t.exp<0?n:t.exp;t.isEnglish&&(g[6]=256-g[6]),s[0]=t.demonCode%256,s[1]=2*t.lvl+Math.floor(t.demonCode/256),s[2]=c%256,s[3]=Math.floor(c/256)%256,s[4]=Math.floor(c/65536);for(let d=0;d<6;d++)s[6+2*d]=t.skillCodes[d]%256,s[6+2*d+1]=Math.floor(t.skillCodes[d]/256);return s[22]=10*t.hp%256,s[23]=10*t.mp%16*16+Math.floor(t.hp/25.6),s[24]=Math.floor(t.mp/1.6),[].concat(g,h,ne,ae,s,Array(21).fill(0))}(t):function le(t){const g=t.isEnglish?ie:J,s=Array(30).fill(0),i=t.lvl,n=Math.floor((((-.07600161*i+14.0603287)*i-.02256972)*i+.59031556)*i-1.87981906),c=t.exp<0?n:t.exp;s[0]=t.demonCode,s[2]=t.lvl,s[6]=c%256,s[7]=Math.floor(c/256)%256,s[8]=Math.floor(c/65536);for(let d=0;d<6;d++)s[10+2*d]=t.skillCodes[d]%256,s[10+2*d+1]=Math.floor(t.skillCodes[d]/256);return s[26]=10*t.hp%256,s[27]=Math.floor(t.hp/25.6),s[28]=10*t.mp%256,s[29]=Math.floor(t.mp/25.6),[].concat(T,h,g,oe,s,Array(40).fill(0))}(t)}(d,this.compConfig.appCssClasses.includes("pq2"))}})}initDropdowns(){if(this.demons={},this.skills={"-":[this.blankSkill]},this.dcodes={},this.scodes={0:this.blankSkill},this.compConfig&&this.compendium){for(const s of this.compendium.allDemons.filter(i=>i.code))this.demons[s.race]||(this.demons[s.race]=[]),this.demons[s.race].push(s),this.dcodes[s.code]=s;for(const s of this.compendium.allSkills.filter(i=>i.code))this.skills[s.element]||(this.skills[s.element]=[]),this.skills[s.element].push(s),this.scodes[s.code]=s;for(const s of Object.values(this.demons))s.sort((i,n)=>n.lvl-i.lvl);for(const s of Object.values(this.skills))s.sort((i,n)=>i.rank-n.rank);this.races=this.compConfig.races.filter(s=>this.demons[s]),this.elems=["-"].concat(this.compConfig.skillElems.filter(s=>this.skills[s])),this.setDefaultValues(this.compConfig.defaultDemon)}}changeRace(s){const i=this.demons[s][0];this.form.controls.demon.setValue(i.name),this.setDefaultValues(i.name)}setDefaultValues(s){const i=Array(6).fill(this.blankSkill),n=this.compendium.getDemon(s);let c=0;for(const[d,F]of Object.entries(n.skills))F<2&&(i[c++]=this.compendium.getSkill(d));this.form.patchValue({lvl:Math.floor(n.lvl),hp:n.stats[0],mp:n.stats[1],race:n.race,demon:n.name,skills:i.map(d=>({elem:d.element,name:d.name}))})}static{this.\u0275fac=function(i){return new(i||t)(e.rXU(q.ok))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-password-generator"]],inputs:{compendium:"compendium",compConfig:"compConfig"},features:[e.OA$],decls:57,vars:9,consts:[[3,"formGroup"],[1,"entry-table"],["colspan","2",1,"title"],[3,"byteArray"],["colspan","6",1,"title"],["formControlName","lvl"],[3,"value",4,"ngFor","ngForOf"],["formControlName","hp"],["formControlName","mp"],["formControlName","race",3,"change"],["formControlName","demon",3,"change"],[2,"width","25%"],[2,"width","75%"],["formArrayName","skills"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"value"],[3,"formGroupName"],["formControlName","elem",3,"change"],["formControlName","name"]],template:function(i,n){1&i&&(e.j41(0,"form",0)(1,"h2"),e.EFF(2,"QR Code Generator"),e.k0s(),e.j41(3,"table",1)(4,"tr")(5,"th",2),e.EFF(6,"QR Code"),e.k0s()(),e.j41(7,"tr")(8,"td"),e.nrm(9,"app-qrcode",3),e.k0s()()(),e.j41(10,"table",1)(11,"tr")(12,"th",4),e.EFF(13,"Persona Entry"),e.k0s()(),e.j41(14,"tr")(15,"th"),e.EFF(16,"Price"),e.k0s(),e.j41(17,"th"),e.EFF(18,"Level"),e.k0s(),e.j41(19,"th"),e.EFF(20,"HP"),e.k0s(),e.j41(21,"th"),e.EFF(22,"MP"),e.k0s(),e.j41(23,"th"),e.EFF(24,"Race"),e.k0s(),e.j41(25,"th"),e.EFF(26,"Demon"),e.k0s()(),e.j41(27,"tr")(28,"td"),e.EFF(29),e.k0s(),e.j41(30,"td")(31,"select",5),e.DNE(32,pe,2,2,"option",6),e.k0s()(),e.j41(33,"td")(34,"select",7),e.DNE(35,ue,2,2,"option",6),e.k0s()(),e.j41(36,"td")(37,"select",8),e.DNE(38,de,2,2,"option",6),e.k0s()(),e.j41(39,"td")(40,"select",9),e.bIt("change",function(){return n.changeRace(n.form.controls.race.value)}),e.DNE(41,ge,2,2,"option",6),e.k0s()(),e.j41(42,"td")(43,"select",10),e.bIt("change",function(){return n.setDefaultValues(n.form.controls.demon.value)}),e.DNE(44,he,2,2,"option",6),e.k0s()()()(),e.j41(45,"table",1)(46,"thead")(47,"tr")(48,"th",2),e.EFF(49,"Learned Skills"),e.k0s()(),e.j41(50,"tr")(51,"th",11),e.EFF(52,"Element"),e.k0s(),e.j41(53,"th",12),e.EFF(54,"Name"),e.k0s()()(),e.j41(55,"tbody",13),e.DNE(56,Ce,8,3,"ng-container",14),e.k0s()()()),2&i&&(e.Y8G("formGroup",n.form),e.R7$(9),e.Y8G("byteArray",n.passBytes),e.R7$(20),e.JRh(n.price),e.R7$(3),e.Y8G("ngForOf",n.range99),e.R7$(3),e.Y8G("ngForOf",n.range299),e.R7$(3),e.Y8G("ngForOf",n.range99),e.R7$(3),e.Y8G("ngForOf",n.races),e.R7$(3),e.Y8G("ngForOf",n.demons[n.form.controls.race.value]),e.R7$(12),e.Y8G("ngForOf",n.form.controls.skills.controls))},dependencies:[S.Sq,q.qT,q.xH,q.y7,q.wz,q.BC,q.cb,q.j4,q.JD,q.$R,q.v8,ce],styles:["td[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}input[_ngcontent-%COMP%]{width:95%;border-width:3px}input.ng-valid[_ngcontent-%COMP%]{border-color:#0f0}input.ng-invalid[_ngcontent-%COMP%]{border-color:red}"],changeDetection:0})}}return t})(),ke=(()=>{class t{constructor(s,i){this.fusionDataService=s,this.title=i,this.subscriptions=[],this.compConfig=this.fusionDataService.compConfig}ngOnInit(){this.setTitle(),this.subscribeAll()}ngOnDestroy(){this.unsubscribeAll()}setTitle(){this.title.setTitle(`QR Code Generator - ${this.fusionDataService.appName}`)}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(s=>{this.compendium=s}))}unsubscribeAll(){for(const s of this.subscriptions)s.unsubscribe()}static{this.\u0275fac=function(i){return new(i||t)(e.rXU(E.i),e.rXU(w.hE))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-password-generator-container"]],decls:1,vars:2,consts:[[3,"compendium","compConfig"]],template:function(i,n){1&i&&e.nrm(0,"app-password-generator",0),2&i&&e.Y8G("compendium",n.compendium)("compConfig",n.compConfig)},dependencies:[be],encapsulation:2,changeDetection:0})}}return t})();var ye=a(8948),De=a(860);let Ee=(()=>{class t extends ye.I{constructor(s,i){super(s,i),this.changeDetector=s,this.fusionDataService=i,this.appTitle=i.appName,this.lang=i.compConfig.lang}static{this.\u0275fac=function(i){return new(i||t)(e.rXU(e.gRc),e.rXU(E.i))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-fusion-settings-container"]],features:[e.Vt3],decls:1,vars:4,consts:[[3,"lang","appTitle","fusionSettings","showEnableAll","toggledAll","toggledName"]],template:function(i,n){1&i&&(e.j41(0,"app-fusion-settings",0),e.bIt("toggledAll",function(d){return n.toggleAll(d)})("toggledName",function(d){return n.toggleName(d)}),e.k0s()),2&i&&e.Y8G("lang",n.lang)("appTitle",n.appTitle)("fusionSettings",n.fusionSettings)("showEnableAll",!0)},dependencies:[De.B],encapsulation:2,changeDetection:0})}}return t})();var Fe=a(1289);let Te=(()=>{class t{constructor(s,i){this.fusionDataService=s,this.title=i,this.subscriptions=[],this.lang="en";const n=this.fusionDataService.compConfig;this.maxSkills=n.maxSkillSlots,this.lang=n.lang,this.recipeConfig={fissionCalculator:this.fusionDataService.fissionCalculator,fusionCalculator:this.fusionDataService.fusionCalculator,races:n.races,skillElems:n.skillElems,inheritElems:n.inheritElems,displayElems:n.skillElems.reduce((c,d)=>(c[d]=d,c),{}),restrictInherits:!0,triExclusiveRaces:n.hasTripleFusion?["Fool","Tower","Moon","Sun","Judgement"]:[],triFissionCalculator:this.fusionDataService.triFissionCalculator,triFusionCalculator:this.fusionDataService.triFusionCalculator,defaultDemon:n.defaultDemon}}ngOnInit(){this.setTitle(),this.subscribeAll()}ngOnDestroy(){this.unsubscribeAll()}setTitle(){this.title.setTitle((0,A.o)(G.hV.AppTitle,this.lang)+this.fusionDataService.appName)}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(s=>{this.compendium=s})),this.subscriptions.push(this.fusionDataService.squareChart.subscribe(s=>{this.squareChart=s}))}unsubscribeAll(){for(const s of this.subscriptions)s.unsubscribe()}static{this.\u0275fac=function(i){return new(i||t)(e.rXU(E.i),e.rXU(w.hE))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-recipe-generator-container"]],decls:1,vars:5,consts:[[3,"lang","maxSkills","compendium","squareChart","recipeConfig"]],template:function(i,n){1&i&&e.nrm(0,"app-recipe-generator",0),2&i&&e.Y8G("lang",n.lang)("maxSkills",n.maxSkills)("compendium",n.compendium)("squareChart",n.squareChart)("recipeConfig",n.recipeConfig)},dependencies:[Fe.h],encapsulation:2,changeDetection:0})}}return t})();var $e=a(2649),Se=a(3515),Re=a(1538),Oe=a(1540),Pe=a(4207);function we(t,g){if(1&t&&(e.j41(0,"table",3)(1,"thead")(2,"tr")(3,"th",4),e.EFF(4),e.nI1(5,"translateComp"),e.k0s()()(),e.j41(6,"tbody")(7,"tr")(8,"td"),e.EFF(9),e.k0s()()()()),2&t){const s=e.XpG();e.R7$(4),e.JRh(e.i5U(5,2,s.msgs.SpecialFusionCondition,s.lang)),e.R7$(5),e.JRh(s.fusionPrereq)}}function Ge(t,g){if(1&t&&(e.nrm(0,"app-fusion-entry-table",5),e.nI1(1,"translateComp")),2&t){const s=e.XpG();e.Y8G("lang",s.lang)("title",e.i5U(1,5,s.msgs.SpecialFusionIngredients,s.lang)+s.currentDemon)("baseUrl",s.hasFissionFromDemons?"../../demons":"../..")("rowData",s.fusionEntries)("isFusion",!0)}}function je(t,g){if(1&t&&(e.nrm(0,"app-fusion-pair-table",6),e.nI1(1,"translateComp"),e.nI1(2,"translateComp"),e.nI1(3,"translateComp")),2&t){const s=e.XpG();e.Y8G("lang",s.lang)("title",e.i5U(1,8,s.msgs.Title,s.lang)+s.currentDemon)("leftHeader",e.i5U(2,11,s.msgs.LeftHeader,s.lang))("rightHeader",e.i5U(3,14,s.msgs.RightHeader,s.lang))("leftBaseUrl",s.hasFissionFromDemons?"../../demons":"../..")("rightBaseUrl",s.hasFissionFromDemons?"../../demons":"../..")("raceOrder",s.fusionChart.raceOrder)("rowData",s.fusionPairs)}}let Ne=(()=>{class t extends $e.J{getFusionPairs(){const s=this.calculator.getFusions(this.currentDemon,this.compendium,this.fusionChart).map(this.toFusionPair(this.currentDemon));if(this.fusionChart.elementDemons.length>0)for(const i of(0,Se.iB)(this.currentDemon,this.compendium,this.fusionChart)){const n=(Math.floor(i.lvl1)<<10)+i.lvl2;for(const c of i.names1){const{race:d,lvl:F}=this.compendium.getDemon(c);for(const L of i.names2){const{race:_,lvl:se,price:_e}=this.compendium.getDemon(L);s.push({price:i.price+_e-F,race1:d,lvl1:n,name1:c,race2:_,lvl2:se,name2:L})}}}return s}static{this.\u0275fac=function(){let s;return function(n){return(s||(s=e.xGo(t)))(n||t)}}()}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-p5-fission-table"]],features:[e.Vt3],decls:3,vars:3,consts:[["class","list-table",4,"ngIf"],[3,"lang","title","baseUrl","rowData","isFusion",4,"ngIf"],[3,"lang","title","leftHeader","rightHeader","leftBaseUrl","rightBaseUrl","raceOrder","rowData",4,"ngIf"],[1,"list-table"],[1,"title"],[3,"lang","title","baseUrl","rowData","isFusion"],[3,"lang","title","leftHeader","rightHeader","leftBaseUrl","rightBaseUrl","raceOrder","rowData"]],template:function(i,n){1&i&&(e.DNE(0,we,10,5,"table",0),e.DNE(1,Ge,2,8,"app-fusion-entry-table",1),e.DNE(2,je,4,17,"app-fusion-pair-table",2)),2&i&&(e.Y8G("ngIf",n.fusionPrereq),e.R7$(1),e.Y8G("ngIf",n.fusionEntries.length),e.R7$(1),e.Y8G("ngIf",n.fusionPairs.length||!n.fusionEntries.length))},dependencies:[S.bT,Re.a,Oe.cK,Pe.uz],encapsulation:2,changeDetection:0})}}return t})();var Ae=a(6947),te=a(4660);function Ie(t,g){if(1&t&&(e.j41(0,"tr")(1,"th"),e.EFF(2),e.k0s()()),2&t){const s=g.$implicit;e.R7$(2),e.JRh(s)}}let Me=(()=>{class t{ngOnChanges(){if(this.compendium&&this.pairChart&&(this.trioChart||!this.trioCalculator)){const s=[];for(const i of this.compendium.allDemons.filter(n=>!n.isEnemy)){const n=this.compendium.getSpecialNameEntries(i.name);if(n.length>0){s.push(`${i.name} = ${n.join(" x ")}`);continue}const c=this.pairCalculator.getFusions(i.name,this.compendium,this.pairChart).map(F=>(0,te.on)(F,this.compendium));if(c.length>0&&(c.filter(F=>F.race1!==i.race).length>0||!this.trioCalculator||0===this.trioCalculator.getFusions(i.name,this.compendium,this.trioChart).length)){c.sort((L,_)=>L.price-_.price);const F=c.slice(0,3).map(L=>`${L.name1} x ${L.name2}`).join(", ");s.push(`${i.name} = ${F}`+(c.length>3?`, ${c.length-3} more...`:""))}else{if(this.trioCalculator){const F=this.trioCalculator.getFusions(i.name,this.compendium,this.trioChart).map(L=>(0,te.f7)(L,this.compendium)).filter(L=>L.d1.race!==i.race);if(F.length>0){F.sort((_,se)=>_.price-se.price);const L=F.slice(0,3).map(_=>`${_.d1.name} x ${_.d2.name} x ${_.d3.name}`).join(", ");s.push(`${i.name} = ${L}`+(F.length>3?`, ${F.length-3} more...`:""));continue}}s.push(i.prereq?`${i.name} = ${i.prereq}`:`${i.name} = No fusions found!`)}}this.fissionPreviews=s}}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-fission-preview-table"]],inputs:{pairCalculator:"pairCalculator",trioCalculator:"trioCalculator",pairChart:"pairChart",trioChart:"trioChart",compendium:"compendium"},features:[e.OA$],decls:6,vars:1,consts:[[1,"entry-table"],[1,"title"],[4,"ngFor","ngForOf"]],template:function(i,n){1&i&&(e.j41(0,"table",0)(1,"tbody")(2,"tr")(3,"th",1),e.EFF(4,"Fission Previews"),e.k0s()(),e.DNE(5,Ie,3,1,"tr",2),e.k0s()()),2&i&&(e.R7$(5),e.Y8G("ngForOf",n.fissionPreviews))},dependencies:[S.Sq],encapsulation:2,changeDetection:0})}}return t})(),Le=(()=>{class t{constructor(s){this.fusionDataService=s,this.subscriptions=[]}ngOnInit(){this.calculator=this.fusionDataService.fissionCalculator,this.subscriptions.push(this.fusionDataService.compendium.subscribe(s=>{this.compendium=s})),this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(s=>{this.fusionChart=s}))}ngOnDestroy(){for(const s of this.subscriptions)s.unsubscribe()}static{this.\u0275fac=function(i){return new(i||t)(e.rXU(Ae.iJ))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-smt-fission-preview"]],decls:2,vars:3,consts:[[3,"pairCalculator","pairChart","compendium"]],template:function(i,n){1&i&&(e.j41(0,"app-fission-preview-table",0),e.nrm(1,"app-fission-preview-table"),e.k0s()),2&i&&e.Y8G("pairCalculator",n.calculator)("pairChart",n.fusionChart)("compendium",n.compendium)},dependencies:[Me],encapsulation:2,changeDetection:0})}}return t})();var qe=a(3452),Ue=a(6188),Be=a(131);const Ye=[{path:"",redirectTo:"personas",pathMatch:"full"},{path:"",component:P,data:{fusionTool:"chart"},children:[{path:"chart",component:N}]},{path:"",component:P,children:[{path:"personas/:demonName",component:y,children:[{path:"fissions/triple",component:Ue.X},{path:"fusions/triple",component:Be.W},{path:"fissions",component:Ne},{path:"fusions",component:qe.y},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"shadows/:demonName",component:y},{path:"personas",component:R},{path:"shadows",component:R,data:{showShadows:!0}},{path:"skills",component:z},{path:"qrcodes",component:ke},{path:"recipes",component:Te},{path:"settings",component:Ee},{path:"previews",component:Le}]},{path:"**",redirectTo:"personas",pathMatch:"full"}];let He=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[U.iI.forChild(Ye),U.iI]})}}return t})()},7992:(ee,K,a)=>{a.d(K,{i:()=>Z});var U=a(4412);class A{constructor(r,f){this.compConfig=r,this.specialRecipes={},this.initImportedData(),this.updateDerivedData(f)}initImportedData(){const r={},f={},m={},b={},v={},O={},p={},l={},C=this.compConfig.hasDemonResists,y=this.compConfig.appCssClasses.includes("p5r"),D="-".repeat(this.compConfig.resistElems.length),N="-".repeat(this.compConfig.ailmentElems.length);for(const[h,u]of Object.entries(this.compConfig.resistCodes))p[h]=(u/1e4|0)<<10,l[h]=u%1e4/2.5|0;const T=(h,u,o)=>(h||u).split("").map(($,M)=>p[$]+(o?.[M]/2.5|0||l[$])),k={isEnglish:!0,demonCode:1,lvl:1,exp:0,hp:1,mp:1,skillCodes:[0,0,0,0,0,0]};for(const h of this.compConfig.demonData)for(const[u,o]of Object.entries(h)){const $=this.compConfig.inheritTypes[o.inherit||o.inherits];r[u]={name:u,race:o.race,lvl:o.lvl,currLvl:o.lvl,price:0,inherits:$.reduce((M,J)=>2*M+(J>0?1:0),0),affinities:$,stats:o.stats,resists:C?T(o.resists,D,o.resmods):[],ailments:C?T(o.ailments,N,o.ailmods):[],skills:o.skills,drop:o.item||"",code:o.code||0,fusion:o.fusion||"normal",prereq:o.prereq||"",searchTags:[u,o.race].join(",").toLocaleLowerCase()},k.lvl=r[u].lvl,k.hp=r[u].stats[0],k.mp=r[u].stats[1],k.skillCodes=Object.values(r[u].skills).map(M=>M<2?1:0),r[u].price=this.compConfig.computePrice(r[u],k),y&&(r[u].skills[o.trait||"Agi"]=0)}for(const h of this.compConfig.skillData)for(const[u,o]of Object.entries(h))m[u]={name:u,element:o.elem||o.element,inherit:o.elem||o.element,cost:o.cost||0,rank:o.unique?99:o.rank||(1023&o.cost)/100||1,effect:o.effect,target:o.target||"Self",learnedBy:[],transfer:[],code:o.code||0,level:0},o.card&&(m[u].transfer=o.card.split(", ").map($=>({demon:$,level:r[$]?0:-100})));for(const h of this.compConfig.enemyData)for(const[u,o]of Object.entries(h)){const $=o.drops?.join(", ")||"-";if(f[u]={name:u,race:o.race,lvl:o.lvl,currLvl:o.lvl,price:0,inherits:0,stats:o.stats,resists:T(o.resists,D,o.resmods),ailments:T(o.ailments,N,o.ailmods),skills:o.skills.reduce((M,J)=>(M[J]=0,M),{}),area:o.area,drop:$,code:0,fusion:"normal",isEnemy:!0,searchTags:[u,o.race,o.area,$].join(",").toLocaleLowerCase()},f[u].drop){const M=f[u].drop.split(", "),J=M[M.length-1];m[J]&&m[J].transfer.unshift({demon:o.persona,level:5275})}}for(const{conditions:h}of this.compConfig.demonUnlocks)for(const[u,o]of Object.entries(h))for(const $ of u.split(","))r[$].prereq=o;for(const[h,u]of Object.entries(this.compConfig.specialRecipes)){const o=u;if(b[h]=o,r[h].fusion=o.length>0?"special":"accident",2===o.length)for(const $ of o)O[$]||(O[$]=[]),O[$].push(h)}for(const h of this.compConfig.races)v[h]={};for(const h of Object.values(r).sort((u,o)=>u.lvl-o.lvl)){if(h.drop){const[u,o]=h.drop.split(", ");m[u]&&m[u].transfer.unshift({demon:h.name,level:0}),m[o]&&m[o].transfer.unshift({demon:h.name,level:3865})}"party"!==h.fusion&&(v[h.race][h.lvl]=h.name);for(const[u,o]of Object.entries(h.skills))m[u].learnedBy.push({demon:h.name,level:o})}this.demons=r,this.enemies=f,this.skills=m,this.specialRecipes=b,this.invertedDemons=v,this.invertedSpecials=O}updateDerivedData(r){const f=Object.assign({},this.demons),m=[],b={},v={};for(const l of Object.values(this.skills))l.learnedBy.length<1&&l.transfer.length<1?l.rank=99:m.push(l);for(const l of this.compConfig.races)b[l]=[],v[l]=[];for(const[l,C]of Object.entries(this.demons))"party"!==C.fusion&&(this.isElementDemon(l)||b[C.race].push(C.lvl),this.specialRecipes.hasOwnProperty(l)||v[C.race].push(C.lvl));for(const l of this.compConfig.races)b[l].sort((C,y)=>C-y),v[l].sort((C,y)=>C-y);for(const[l,C]of Object.entries(r))if(!C){const{race:y,lvl:D}=this.demons[l];delete f[l],b[y]=b[y].filter(N=>N!==D),v[y]=v[y].filter(N=>N!==D)}const O=Object.keys(f).map(l=>f[l]),p=Object.keys(this.enemies).map(l=>this.enemies[l]);this._allDemons=p.concat(O),this._allSkills=m,this.allIngredients=b,this.allResults=v}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return Object.keys(this.specialRecipes).filter(r=>!this.isElementDemon(r)).map(r=>this.demons[r])}getDemon(r){return this.demons[r]||this.enemies[r]}getSkill(r){return this.skills[r]}getSkills(r){const f=this.compConfig.elemOrder,m=r.map(b=>this.skills[b]);return m.sort((b,v)=>1e4*(f[b.element]-f[v.element])+b.rank-v.rank),m}getIngredientDemonLvls(r){return this.allIngredients[r]||[]}getResultDemonLvls(r){return this.allResults[r]||[]}getSpecialNameEntries(r){return this.specialRecipes[r]||[]}getSpecialNamePairs(r){return[]}reverseLookupDemon(r,f){return this.invertedDemons[r][f]}reverseLookupSpecial(r){return this.invertedSpecials[r]||[]}isElementDemon(r){return this.specialRecipes.hasOwnProperty(r)&&0===this.specialRecipes[r].length}updateFusionSettings(r){this.updateDerivedData(r)}}var G=a(8063);class e extends G.p{constructor(r,f){super(),this.lvlModifier=.5,this.initCharts(r,f)}initCharts(r,f){const m=r.normalTable.races,b=r.normalTable.table,v=r.elementTable?.elems||[],O=r.elementTable?.races||[],p=r.elementTable?.table||[],l=[];for(let C=0;C<m.length;C++)l.push(b[C].slice(f?0:C,f?C+1:m.length)),f||(l[C][0]="-");this.races=m,this.elementDemons=v,this.raceOrder=r.raceOrder,this.lvlModifier=f?4.25:.5,this.fusionChart=G.p.loadFusionTableJson(m,1===b[0].length?b:l),this.fissionChart=G.p.loadFissionTableJson(m,v,1===b[0].length?b:l),this.elementChart=v.length?G.p.loadElementTableJson(O,v,p):{}}}var E=a(6947),S=a(7605),V=a(9910),P=a(7101);function Y(j,r,f){const m=[],{race:b,lvl:v}=r.getDemon(j);for(const O of f.elementDemons.filter(p=>p!==j)){const{race:p,lvl:l}=r.getDemon(O),C=f.getRaceFusions(b)[p],y=r.getResultDemonLvls(C),N=y.reduce((k,h)=>v+l>=2*h?k+1:k,0),T=r.reverseLookupDemon(C,N===y.length?y[y.length-1]:y[N]);m.push({name1:O,name2:T})}return m}var w=a(7178),I=a(3515),R=a(7396),H=a(609),B=a(1939),z=a(2755),X=a(1090),x=a(2598),W=a(9617),Q=a(8935);let Z=(()=>{class j extends H.d{constructor(f,m,b){const v=b.url.split("/"),O=Object.keys(f.configs)[0],p=f.configs[v[2]||v[1]]||f.configs[v[1]]||f.configs[O],l=m.supportedLanguages.includes(v[1])?v[1]:"en",C={"-":[p.defaultDemon]},y=m.translateRaces(p.races,l),D={appTitle:m.translateAppTitle(p.appTitle,l),lang:l,races:y,raceOrder:y.reduce((k,h,u)=>(k[h]=u,k),{}),appCssClasses:p.appCssClasses,skillData:p.skillData.map(k=>m.translateSkillData(k,l)),skillElems:p.skillElems,ailmentElems:m.translateElems(p.ailmentElems,l),elemOrder:p.elemOrder,resistCodes:p.resistCodes,demonData:p.demonData.map(k=>m.translateDemonData(k,l)),baseStats:m.translateElems(p.baseStats,l),resistElems:p.resistElems,inheritTypes:p.inheritTypes,inheritElems:p.inheritElems,demonUnlocks:m.translateDemonUnlocks(p.demonUnlocks,l),enemyData:p.enemyData.map(k=>m.translateEnemyData(k,l)),enemyStats:p.enemyStats,normalTable:m.translateFusionChart(p.normalTable,l),elementTable:m.translateFusionChart(p.elementTable,l),specialRecipes:m.translateSpecialRecipes(p.specialRecipes,l),maxSkillSlots:p.maxSkillSlots,hasTripleFusion:p.hasTripleFusion,hasDemonResists:p.hasDemonResists,hasSkillRanks:p.hasSkillRanks,hasEnemies:p.hasEnemies,hasQrcodes:p.hasQrcodes,hasSkillCards:p.hasSkillCards,hasManualInheritance:p.hasManualInheritance,computePrice:p.computePrice,defaultDemon:m.translateSpecialRecipes(C,l)["-"][0],settingsKey:m.translateSettingsKey(p.settingsKey,l),settingsVersion:p.settingsVersion},N=new e(D,!1),T=new B.U(D.demonUnlocks,[]);super(new A(D,T.demonToggles),N,T,D.settingsKey,D.settingsVersion),this.fissionCalculator=E.RT,this.fusionCalculator=E.Se,this.triFissionCalculator=E.I4,this.triFusionCalculator=E.zm,this.lang=l,this.compConfig=D,this.appName=D.appTitle+(0,z.o)(X.fu.FusionCalculator,D.lang),this._tripleChart=new e(D,!0),this._squareChart$=new U.t({normalChart:N,tripleChart:this._tripleChart,raceOrder:D.raceOrder}),this.squareChart=this._squareChart$.asObservable(),D.appCssClasses.includes("p5t")&&(this.fissionCalculator=new R.s([w.Hr],[]),this.fusionCalculator=new R.s([S.Cx],[])),D.appCssClasses.includes("p5")&&(this.fissionCalculator=new R.s([w.Hr,I.gt],[]),this.fusionCalculator=new R.s([S.Cx,V.H,S.GW],[P.Dy,P.sk,Y]))}static{this.\u0275fac=function(m){return new(m||j)(x.KVO(E.HI),x.KVO(W.i),x.KVO(Q.Ix))}}static{this.\u0275prov=x.jDH({token:j,factory:j.\u0275fac})}}return j})()},5763:(ee,K,a)=>{a.d(K,{b:()=>G,u:()=>A});const U=JSON.parse('{"Base":"$2","Exact":"$1% $2","Plus":"$2 +$1%","Minus":"$2 -$1%","Times":"$2 x$1","ScalesWith":"pwr scales with $2","PowerAgainst":"$1 pwr against $2","FracDamage":"reduces $2 by $1%","InstakillWhen":"$1% instakill when $2","SmtKaja":"raises $2 1 rank","SmtKunda":"lowers $2 1 rank","PersonaKaja":"$2 x$1 for 3 turns","ElemCharge":"dmg dealt by next $2 attack x$1","ElemWall":"adds $2 resistance for 3 turns","ElemBreak":"removes $2 resistance for 3 turns","ElemBlock":"nullifies next $2 attack","ElemKarn":"repels next $2 attack","ElemMaster":"$2 skill costs x$1","ElemBoost":"$2 dmg dealt x$1","HealBoost":"$2 skill pwr x$1","DodgeElem":"$2 evasion x$1","DodgeElemPlus":"$2 evasion +$1%","ElemPierce":"$2 dmg dealt cannot be resisted, nullified, or drained","ResistElem":"$2 dmg taken x$1","NullElem":"nullifies $2 dmg taken","RepelElem":"repels $2 dmg taken","DrainElem":"drains $2 dmg taken","BanElement":"cancels first $2 attack in battle","AilmentBoost":"$2 affliction rate x$1","ResistAilment":"$2 susceptibility x$1","NullAilment":"prevents $2","PlusAilment":"adds $1% $2 to Phys attacks","CureAilment":"removes $2","PersonaCounterN":"$1% chance to repel $2 dmg taken","PersonaLifeDrainN":"$1 dmg dealt, $2","SmtCounterN":"$1% chance to counter $2 attack with Phys dmg","SmtAllyCounterN":"$1% chance to counter $2 attack to ally with Phys dmg","AutoSkill":"begins battle with $2","AutoSkillWhen":"begins battle with $2 if applicable","FoulBreathN":"raises $2 susceptibility for 3 turns","RegenerateN":"$1% $2 each turn","InvigorateN":"$1 $2 each turn","GrowthN":"$1% $2 gained when not active","LifeAidN":"$1% max $2 after battle","Recarm":"$1% $2 after reviving","Endure":"$2 with 1 HP after a mortal blow once per battle","EnduringSoul":"$2 with 100% HP after a mortal blow once per battle"}');function A(e,E,S){const[V,P,Y,w,I,R,H,B]=e,[z,X,x]=E,W=X.startsWith("FMT")?U[X.substring(3)]:X,Q=parseInt(B.toString()),v=[0===Y?"":`${S?"\u221a":""}${Y} pwr`,w!==I?`${w}-${I} hits`:I<2?"":`${I} hits`,0===R||90<=R&&R<=110?"":`${R}% acc`,H<=5?"":`${H}% crit`,"-"===X?"":W.replace("$1",`${Q<1e3?B:(Q-1e3)/100}`).replace("$2",z)].filter(O=>""!==O).join(", ");return"x"===v.substring(0,1)?v:v.substring(0,1).toUpperCase()+v.substring(1)}function G(e,E){const{a:[S,V,P],b:Y,c:w}=e,[I,R]=Y.slice(0,2),H=w[2],B={elem:V,rank:I,target:"-"===P?"Self":P,cost:R?R+(R>1e3?R>2e3?E[2]:E[1]:E[0]):0,effect:A(Y,w,1024!==E[0])};return"-"!==H&&(B.card=H),89<I&&(B.unique=!0),B}},159:(ee,K,a)=>{a.d(K,{v:()=>V});var U=a(4341),A=a(177),G=a(3887),e=a(9447),E=a(7277),S=a(2598);let V=(()=>{class P{static forRoot(){return{ngModule:P}}static{this.\u0275fac=function(I){return new(I||P)}}static{this.\u0275mod=S.$C({type:P})}static{this.\u0275inj=S.G2t({imports:[A.MD,G.G,U.X1,e.$,E.S]})}}return P})()}}]);