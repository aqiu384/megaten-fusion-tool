"use strict";(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[495],{8664:(M,L,l)=>{l.d(L,{G:()=>t});var e=l(5619);class t{constructor(_,C,O,E,F){this.settingsKey=E,this.settingsVersion=F,this._compendium=_,this._compendium$=new e.X(this._compendium),this.compendium=this._compendium$.asObservable(),this._fusionChart=C,this._fusionChart$=new e.X(this._fusionChart),this.fusionChart=this._fusionChart$.asObservable(),this._fusionSettings=O,this._fusionSettings$=new e.X(this._fusionSettings),this.fusionSettings=this._fusionSettings$.asObservable();const T=JSON.parse(localStorage.getItem(this.settingsKey));T&&T.version&&T.version>=this.settingsVersion&&this.updateFusionSettings(T.settings),window.addEventListener("storage",this.onStorageUpdated.bind(this))}updateToggledSettings(_){this._fusionSettings.updateSaveFile(_),this._compendium.updateFusionSettings(this._fusionSettings.demonToggles),this._compendium$.next(this._compendium),this._fusionSettings$.next(this._fusionSettings)}onStorageUpdated(_){_.key===this.settingsKey&&this.updateToggledSettings(JSON.parse(_.newValue).settings)}updateFusionSettings(_){this.updateToggledSettings(_),localStorage.setItem(this.settingsKey,JSON.stringify({version:this.settingsVersion,settings:this._fusionSettings.saveFile}))}}},8520:(M,L,l)=>{l.d(L,{O:()=>b});var e=l(4769),t=l(6814);function s(v,y){if(1&v&&(e.TgZ(0,"h2"),e._uU(1),e.qZA()),2&v){const D=e.oxw();e.xp6(1),e.Oqu(D.title)}}function _(v,y){if(1&v&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&v){const D=e.oxw();e.xp6(1),e.Oqu(D.langEn?"Price":"\u4fa1\u683c")}}function C(v,y){if(1&v&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&v){const D=y.$implicit;e.xp6(1),e.Oqu(D)}}function O(v,y){1&v&&(e.TgZ(0,"th"),e._uU(1,"Inherits"),e.qZA())}function E(v,y){if(1&v&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&v){const D=y.$implicit;e.xp6(1),e.Oqu(D)}}function F(v,y){if(1&v&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&v){const D=e.oxw();e.xp6(1),e.Oqu(D.price)}}function T(v,y){if(1&v&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&v){const D=y.$implicit;e.xp6(1),e.Oqu(D)}}function x(v,y){if(1&v&&(e.TgZ(0,"td")(1,"div"),e._uU(2),e.qZA()()),2&v){const D=e.oxw();e.xp6(1),e.Gre("element-icon i",D.inherits,""),e.xp6(1),e.Oqu(D.inherits)}}const U=["*"];let b=(()=>{class v{constructor(){this.title="Demon Entry",this.statHeaders=[],this.stats=[],this.fusionHeaders=[],this.price=0,this.langEn=!0}static#t=this.\u0275fac=function(I){return new(I||v)};static#e=this.\u0275cmp=e.Xpm({type:v,selectors:[["app-demon-stats"]],inputs:{title:"title",statHeaders:"statHeaders",stats:"stats",fusionHeaders:"fusionHeaders",inherits:"inherits",price:"price",langEn:"langEn"},ngContentSelectors:U,decls:19,vars:10,consts:[[4,"ngIf"],[1,"entry-table"],[1,"title"],[4,"ngFor","ngForOf"]],template:function(I,o){1&I&&(e.F$t(),e.ynx(0),e.YNc(1,s,2,1,"h2",0),e.TgZ(2,"table",1)(3,"thead")(4,"tr")(5,"th",2),e._uU(6),e.qZA()(),e.TgZ(7,"tr"),e.YNc(8,_,2,1,"th",0),e.YNc(9,C,2,1,"th",3),e.YNc(10,O,2,0,"th",0),e.YNc(11,E,2,1,"th",3),e.qZA()(),e.TgZ(12,"tbody")(13,"tr"),e.YNc(14,F,2,1,"td",0),e.YNc(15,T,2,1,"td",3),e.YNc(16,x,3,4,"td",0),e.Hsn(17),e.qZA()()(),e.GkF(18),e.BQk()),2&I&&(e.xp6(1),e.Q6J("ngIf",o.title.includes("Lvl")),e.xp6(4),e.uIk("colSpan",o.stats.length+o.fusionHeaders.length+(o.inherits?1:0)+(o.price?1:0)),e.xp6(1),e.hij(" ",o.title.includes("Lvl")?o.langEn?"Stats":"\u30b9\u30c6\u30fc\u30bf\u30b9":o.title," "),e.xp6(2),e.Q6J("ngIf",o.price),e.xp6(1),e.Q6J("ngForOf",o.statHeaders),e.xp6(1),e.Q6J("ngIf",o.inherits),e.xp6(1),e.Q6J("ngForOf",o.fusionHeaders),e.xp6(3),e.Q6J("ngIf",o.price),e.xp6(1),e.Q6J("ngForOf",o.stats),e.xp6(1),e.Q6J("ngIf",o.inherits))},dependencies:[t.sg,t.O5],encapsulation:2,changeDetection:0})}return v})()},9822:(M,L,l)=>{l.d(L,{j:()=>O});var e=l(4769),t=l(6593),s=l(6814);function _(E,F){if(1&E){const T=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"label"),e._uU(3),e.TgZ(4,"input",3),e.NdJ("change",function(){const b=e.CHM(T).$implicit,v=e.oxw(2);return e.KtG(v.toggledName.emit(b.name))}),e.qZA()()()()}if(2&E){const T=F.$implicit;e.xp6(3),e.hij("",T.caption," "),e.xp6(1),e.Q6J("checked",T.enabled)}}function C(E,F){if(1&E&&(e.ynx(0),e.TgZ(1,"tr")(2,"th"),e._uU(3),e.qZA()(),e.YNc(4,_,5,2,"tr",2),e.BQk()),2&E){const T=F.$implicit;e.xp6(3),e.Oqu(T.category),e.xp6(1),e.Q6J("ngForOf",T.settings)}}let O=(()=>{class E{constructor(T){this.title=T,this.dlcTitle="Included DLC Demons",this.langEn=!0,this.toggledName=new e.vpe}set appTitle(T){this.title.setTitle((this.langEn?"Fusion Settings - ":"\u5408\u4f53\u8a2d\u5b9a ")+T)}static#t=this.\u0275fac=function(x){return new(x||E)(e.Y36(t.Dx))};static#e=this.\u0275cmp=e.Xpm({type:E,selectors:[["app-fusion-settings"]],inputs:{dlcDemons:"dlcDemons",dlcTitle:"dlcTitle",langEn:"langEn",fusionSettings:"fusionSettings",appTitle:"appTitle"},outputs:{toggledName:"toggledName"},decls:10,vars:2,consts:[[1,"entry-table"],[1,"title"],[4,"ngFor","ngForOf"],["type","checkbox",3,"checked","change"]],template:function(x,U){1&x&&(e.ynx(0),e.TgZ(1,"h2"),e._uU(2),e.qZA(),e.TgZ(3,"table",0)(4,"thead")(5,"tr")(6,"th",1),e._uU(7,"Unlock Conditions"),e.qZA()()(),e.TgZ(8,"tbody"),e.YNc(9,C,5,2,"ng-container",2),e.qZA()(),e.BQk()),2&x&&(e.xp6(2),e.Oqu(U.dlcTitle),e.xp6(7),e.Q6J("ngForOf",U.fusionSettings.displayHeaders))},dependencies:[s.sg],encapsulation:2,changeDetection:0})}return E})()},4069:(M,L,l)=>{l.d(L,{O:()=>U});var e=l(3247),t=l(3808),s=l(4769),_=l(6814),C=l(4487);const O=function(){return{exact:!0}};function E(b,v){if(1&b&&(s.TgZ(0,"th",4)(1,"a",5),s._uU(2),s.qZA()()),2&b){const y=v.$implicit,D=s.oxw();s.Udp("width",100/D.fusionOptions.length,"%"),s.Q6J("routerLink",y.link)("routerLinkActiveOptions",s.DdM(6,O)),s.xp6(1),s.Q6J("routerLink",y.link),s.xp6(1),s.Oqu(y.title)}}function F(b,v){if(1&b&&(s.TgZ(0,"tr")(1,"th",6),s._uU(2),s.qZA()()),2&b){const y=s.oxw();s.xp6(1),s.uIk("colspan",y.fusionOptions.length),s.xp6(1),s.hij(" ",y.langEn?"DLC marked as excluded in fusion settings, results may be inaccurate!":"DLC\u306a\u3057"," ")}}function T(b,v){if(1&b&&(s.TgZ(0,"tr")(1,"th",6),s.Hsn(2),s.qZA()()),2&b){const y=s.oxw();s.xp6(1),s.uIk("colspan",y.fusionOptions.length)}}const x=["*"];let U=(()=>{class b{constructor(){this.hasTripleFusion=!1,this.showFusionAlert=!1,this.excludedDlc=!1,this.langEn=!0,this.fusionOptions=b.NORMAL_FUSIONS_EN}static#t=this.NORMAL_FUSIONS_EN=[{title:"Reverse Fusions",link:"fissions"},{title:"Forward Fusions",link:"fusions"}];static#e=this.NORMAL_FUSIONS_JA=[{title:"\u9006\u5f15\u304d\u5408\u4f53",link:"fissions"},{title:"2\u8eab\u5408\u4f53",link:"fusions"}];static#n=this.TRIPLE_FUSIONS=[{title:"Normal Reverse Fusions",link:"fissions"},{title:"Triple Reverse Fusions",link:"fissions/triple"},{title:"Triple Forward Fusions",link:"fusions/triple"},{title:"Normal Forward Fusions",link:"fusions"}];ngOnInit(){this.fusionOptions=this.hasTripleFusion?b.TRIPLE_FUSIONS:this.langEn?b.NORMAL_FUSIONS_EN:b.NORMAL_FUSIONS_JA}ngOnChanges(){setTimeout(()=>this.stickyTable.nextEdges())}static#s=this.\u0275fac=function(D){return new(D||b)};static#i=this.\u0275cmp=s.Xpm({type:b,selectors:[["app-smt-fusions"]],viewQuery:function(D,I){if(1&D&&s.Gf(t.v,5),2&D){let o;s.iGM(o=s.CRH())&&(I.stickyTable=o.first)}},inputs:{hasTripleFusion:"hasTripleFusion",showFusionAlert:"showFusionAlert",excludedDlc:"excludedDlc",langEn:"langEn"},features:[s._Bn([e.L]),s.TTD],ngContentSelectors:x,decls:11,vars:3,consts:[["appPositionSticky","",1,"list-table"],["stickyTable",""],["class","nav","routerLinkActive","active",3,"routerLink","width","routerLinkActiveOptions",4,"ngFor","ngForOf"],[4,"ngIf"],["routerLinkActive","active",1,"nav",3,"routerLink","routerLinkActiveOptions"],[3,"routerLink"],[1,"title"]],template:function(D,I){1&D&&(s.F$t(),s.TgZ(0,"div")(1,"table",0,1)(3,"thead")(4,"tr"),s.YNc(5,E,3,7,"th",2),s.qZA(),s.YNc(6,F,3,2,"tr",3),s._UZ(7,"tr"),s.YNc(8,T,3,1,"tr",3),s._UZ(9,"tr"),s.qZA()(),s._UZ(10,"router-outlet"),s.qZA()),2&D&&(s.xp6(5),s.Q6J("ngForOf",I.fusionOptions),s.xp6(1),s.Q6J("ngIf",I.excludedDlc),s.xp6(2),s.Q6J("ngIf",I.showFusionAlert))},dependencies:[_.sg,_.O5,C.lC,C.rH,C.Od,t.v],encapsulation:2,changeDetection:0})}return b})()},103:(M,L,l)=>{l.d(L,{s:()=>t});var e=l(4769);let t=(()=>{class s{constructor(C,O){this.changeDetector2=C,this.fusionDataService2=O,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.fusionDataService2.compendium.subscribe(C=>{this.changeDetector2.markForCheck(),this.compendium=C})),this.subscriptions.push(this.fusionDataService2.fusionSettings.subscribe(C=>{this.fusionSettings=C}))}ngOnDestroy(){for(const C of this.subscriptions)C.unsubscribe()}toggleName(C){const O={};O[C]=!this.fusionSettings.isEnabled(C),this.fusionDataService2.updateFusionSettings(O)}static#t=this.\u0275fac=function(O){e.$Z()};static#e=this.\u0275dir=e.lG2({type:s})}return s})()},9778:(M,L,l)=>{l.d(L,{V:()=>e});class e{constructor(s,_,C=","){this.separator=C,this._displayHeaders=[],this._demonToggles={},this._subappToggles={};for(const{category:E,unlocked:F,conditions:T}of s){const x=[];this._displayHeaders.push({category:E,settings:x});for(const U of Object.keys(T))this._demonToggles[U]=F,x.push({name:U,caption:U.split(C).join(", "),enabled:F})}const O=[];_.length>0&&this._displayHeaders.push({category:"Subapps",settings:O});for(const E of _)this._subappToggles[E]=!1,O.push({name:E,caption:E,enabled:!1})}get displayHeaders(){for(const s of this._displayHeaders)for(const _ of s.settings)_.enabled=this.saveFile[_.name];return this._displayHeaders}get subappToggles(){return this._subappToggles}get demonToggles(){const s={};for(const[_,C]of Object.entries(this._demonToggles))for(const O of _.split(this.separator))s[O]=C;return s}get saveFile(){return Object.assign({},this._demonToggles,this._subappToggles)}isEnabled(s){return this._demonToggles[s]||this._subappToggles[s]||!1}updateSaveFile(s){for(const _ of[this._demonToggles,this._subappToggles])for(const[C,O]of Object.entries(s))_[C]===!O&&(_[C]=O)}}},6502:(M,L,l)=>{l.d(L,{V:()=>st});var e=l(4487),t=l(4769),s=l(9293),_=l(6814),C=l(5390);let O=(()=>{class i{constructor(n){this.appCssClasses=["smt4","smt4f"],this.langEn=!0,this.appCssClasses=n.compConfig.appCssClasses,this.langEn="en"===n.compConfig.lang,this.otherLinks=[{title:this.langEn?"Recipe Generator":"\u5408\u4f53\u30ec\u30b7\u30d4",link:"recipes"}]}static#t=this.\u0275fac=function(c){return new(c||i)(t.Y36(s.Y))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-smt4f-compendium"]],decls:1,vars:2,consts:[[3,"ngClass","otherLinks"]],template:function(c,r){1&c&&t._UZ(0,"app-demon-compendium",0),2&c&&t.Q6J("ngClass",r.appCssClasses)("otherLinks",r.otherLinks)},dependencies:[_.mk,C.e],styles:[".smt4 div.element-icon{height:12px;background-size:12px;background-repeat:no-repeat;background-position:center;color:transparent}.smt4 div.element-icon.phy{background-image:url(/assets/images/smtsj/phy.png)}.smt4 div.element-icon.gun{background-image:url(/assets/images/smt4f/gun.png)}.smt4 div.element-icon.fir{background-image:url(/assets/images/smtsj/fir.png)}.smt4 div.element-icon.ice{background-image:url(/assets/images/smtsj/ice.png)}.smt4 div.element-icon.ele{background-image:url(/assets/images/smtsj/ele.png)}.smt4 div.element-icon.for{background-image:url(/assets/images/smt4f/force.png)}.smt4 div.element-icon.lig{background-image:url(/assets/images/smtsj/exp.png)}.smt4 div.element-icon.dar{background-image:url(/assets/images/smtsj/cur.png)}.smt4 div.element-icon.ail{background-image:url(/assets/images/smtsj/ail.png)}.smt4 div.element-icon.rec{background-image:url(/assets/images/smtsj/rec.png)}.smt4 div.element-icon.alm{background-image:url(/assets/images/smtsj/alm.png)}.smt4 div.element-icon.sup{background-image:url(/assets/images/smtsj/sup.png)}.smt4 div.element-icon.pas{background-image:url(/assets/images/smtsj/pas.png)}.smt4 div.element-icon.oth{background-image:url(/assets/images/smtsj/spe.png)}.smt4 div.element-icon.spe{background-image:url(/assets/images/smtsj/spe.png)}.smt4 div.element-icon.sab{background-image:url(/assets/images/smtsj/spe.png)}.smt4 div.element-icon.com{background-image:url(/assets/images/smtsj/sup.png)}.smt4 td.affinity-9,.smt4 td.affinity-8{color:red}.smt4 td.affinity-7{color:#ff4500}.smt4 td.affinity-6{color:tomato}.smt4 td.affinity-5{color:coral}.smt4 td.affinity-4{color:#ff8c00}.smt4 td.affinity-3{color:orange}.smt4 td.affinity-2{color:#ffa07a}.smt4 td.affinity-1{color:gold}.smt4 td.affinity0{color:transparent}.smt4 td.affinity1{color:#7cfc00}.smt4 td.affinity2{color:#0f0}.smt4 td.affinity3{color:#00ff7f}.smt4 td.affinity4{color:#00fa9a}.smt4 td.affinity5{color:#32cd32}.smt4 td.affinity6{color:#3cb371}.smt4 td.affinity7{color:#2e8b57}.smt4 td.affinity8,.smt4 td.affinity9{color:#228b22}.smt4f th.title,.smt4f th.nav.active,.smt4f th.nav.active a{background-color:#fff;color:#000}.smt5 th.title,.smt5 th.nav.active,.smt5 th.nav.active a{background-color:#363361;color:#fff}.sh2 th.title,.sh2 th.nav.active,.sh2 th.nav.active a{background-color:#693cbe;color:#fff}\n"],encapsulation:2,changeDetection:0})}return i})();var E=l(1032),F=l(6593),T=l(4101);let x=(()=>{class i extends E.l{constructor(n,c,r){super(n,c,r),this.langEn=!0,this.compConfig=r.compConfig,this.langEn="en"===this.compConfig.lang,this.appName=(this.langEn?"List of Demons - ":"\u60aa\u9b54\u4e00\u89a7 ")+r.appName,this.defaultSortFun=(A,J)=>200*(this.compConfig.raceOrder[A.race]-this.compConfig.raceOrder[J.race])+J.lvl-A.lvl}static#t=this.\u0275fac=function(c){return new(c||i)(t.Y36(F.Dx),t.Y36(t.sBO),t.Y36(s.Y))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-demon-list-container"]],features:[t.qOj],decls:2,vars:8,consts:[[3,"langEn","raceOrder","statHeaders","resistHeaders","affinityHeaders","rowData"]],template:function(c,r){1&c&&(t._UZ(0,"app-smt-demon-list",0),t.ALo(1,"async")),2&c&&t.Q6J("langEn",r.langEn)("raceOrder",r.compConfig.raceOrder)("statHeaders",r.compConfig.baseStats)("resistHeaders",r.compConfig.resistElems)("affinityHeaders",r.compConfig.affinityElems)("rowData",t.lcZ(1,6,r.demons))},dependencies:[T.Q,_.Ov],encapsulation:2,changeDetection:0})}return i})();var U=l(4330),b=l(3934);let v=(()=>{class i extends U.e{constructor(n,c,r){super(n,c,r),this.langEn=!0,this.appName=`List of Skills - ${r.appName}`,this.compConfig=r.compConfig,this.langEn="en"===this.compConfig.lang,this.appName=(this.langEn?"List of Skills - ":" \u30b9\u30ad\u30eb\u4e00\u89a7 ")+r.appName,this.compConfig=r.compConfig,this.defaultSortFun=(A,J)=>1e4*(this.compConfig.elemOrder[A.element]-this.compConfig.elemOrder[J.element])+A.rank-J.rank}static#t=this.\u0275fac=function(c){return new(c||i)(t.Y36(F.Dx),t.Y36(t.sBO),t.Y36(s.Y))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-skill-list-container"]],features:[t.qOj],decls:2,vars:6,consts:[[3,"langEn","elemOrder","hasTarget","rowData"]],template:function(c,r){1&c&&(t._UZ(0,"app-smt-skill-list",0),t.ALo(1,"async")),2&c&&t.Q6J("langEn",r.langEn)("elemOrder",r.compConfig.elemOrder)("hasTarget",!0)("rowData",t.lcZ(1,4,r.skills))},dependencies:[b.J,_.Ov],encapsulation:2,changeDetection:0})}return i})();var y=l(103),D=l(9822);let I=(()=>{class i extends y.s{constructor(n,c){super(n,c),this.changeDetector=n,this.fusionDataService=c,this.langEn=!0,this.appTitle=c.appName,this.langEn="en"===c.compConfig.lang}static#t=this.\u0275fac=function(c){return new(c||i)(t.Y36(t.sBO),t.Y36(s.Y))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-fusion-settings-container"]],features:[t.qOj],decls:1,vars:4,consts:[[3,"langEn","appTitle","dlcTitle","fusionSettings","toggledName"]],template:function(c,r){1&c&&(t.TgZ(0,"app-fusion-settings",0),t.NdJ("toggledName",function(J){return r.toggleName(J)}),t.qZA()),2&c&&t.Q6J("langEn",r.langEn)("appTitle",r.appTitle)("dlcTitle",r.langEn?"Fusion Settings":"DLC")("fusionSettings",r.fusionSettings)},dependencies:[D.j],encapsulation:2,changeDetection:0})}return i})();var o=l(7880),a=l(8520),p=l(1009),u=l(9012),g=l(4537),d=l(4069),f=l(2173),k=l(8711);function S(i,j){if(1&i&&t._UZ(0,"app-demon-inherits",10),2&i){const n=t.oxw(2);t.Q6J("langEn",n.langEn)("hasLvls",!0)("inheritHeaders",n.compConfig.affinityElems)("inherits",n.demon.affinities)}}function N(i,j){1&i&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Elem"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Name"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Cost"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Effect"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Target"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Rank"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Level"),t.qZA()())}function R(i,j){1&i&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"\u5c5e\u6027"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"\u30b9\u30ad\u30eb\u540d"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"\u6d88\u8cbb"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"\u8aac\u660e"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"\u7bc4\u56f2"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"\u30e9\u30f3\u30af"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Lvl"),t.qZA()())}const w=function(i){return{unique:i}};function q(i,j){if(1&i&&(t.TgZ(0,"tr",11)(1,"td")(2,"div"),t._uU(3),t.qZA()(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"skillCostToString"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.ALo(17,"skillLevelToString"),t.qZA()()),2&i){const n=j.$implicit;t.Q6J("ngClass",t.VKq(19,w,n.skill.rank>90)),t.xp6(2),t.Gre("element-icon ",n.skill.element,""),t.xp6(1),t.Oqu(n.skill.element),t.xp6(2),t.Oqu(n.skill.name+(n.lvl?" +"+n.lvl:"")),t.xp6(1),t.Udp("color",n.cost?null:"transparent"),t.xp6(1),t.Oqu(t.lcZ(8,15,n.cost)),t.xp6(3),t.Oqu(n.skill.effect+(n.upgrade?" (+"+n.upgrade+"%)":"")),t.xp6(2),t.Oqu(n.skill.target||"Self"),t.xp6(1),t.Udp("color",99!==n.skill.rank?null:"transparent"),t.xp6(1),t.Oqu(n.skill.rank),t.xp6(2),t.Oqu(t.lcZ(17,17,n.skill.level))}}function K(i,j){if(1&i&&(t.TgZ(0,"tr")(1,"td",12),t._uU(2),t.qZA()()),2&i){const n=t.oxw(2);t.xp6(2),t.Oqu(n.langEn?"No Learned Skills Found":"\u30b9\u30ad\u30eb\u306a\u3057")}}const Y=function(i){return[i]};function P(i,j){if(1&i&&t._UZ(0,"app-fusion-entry-table",13),2&i){const n=t.oxw(2);t.Q6J("title",n.langEn?"Evolves From":"\u5909\u7570\u304b\u3089")("langEn",n.langEn)("baseUrl","..")("rowData",t.VKq(4,Y,n.demon.evolvesFrom))}}function h(i,j){if(1&i&&t._UZ(0,"app-fusion-entry-table",13),2&i){const n=t.oxw(2);t.Q6J("title",n.langEn?"Evolves To":"\u5909\u7570")("langEn",n.langEn)("baseUrl","..")("rowData",t.VKq(4,Y,n.demon.evolvesTo))}}function m(i,j){if(1&i&&(t.ynx(0),t._UZ(1,"app-demon-stats",2)(2,"app-demon-resists",3),t.YNc(3,S,1,4,"app-demon-inherits",4),t.TgZ(4,"table",5)(5,"thead")(6,"tr")(7,"th",6),t._uU(8),t.qZA()(),t.YNc(9,N,15,0,"tr",0),t.YNc(10,R,15,0,"tr",0),t.qZA(),t.TgZ(11,"tbody"),t.YNc(12,q,18,21,"tr",7),t.YNc(13,K,3,1,"tr",0),t._UZ(14,"tr"),t.qZA()(),t.YNc(15,P,1,6,"app-fusion-entry-table",8),t.YNc(16,h,1,6,"app-fusion-entry-table",8),t._UZ(17,"app-smt-fusions",9),t.BQk()),2&i){const n=t.oxw();t.xp6(1),t.Q6J("langEn",n.langEn)("title","Lvl "+n.demon.lvl+" "+n.demon.race+" "+n.demon.name)("price",n.demon.price)("statHeaders",n.compConfig.baseStats)("stats",n.demon.stats),t.xp6(1),t.Q6J("langEn",n.langEn)("resistHeaders",n.compConfig.resistElems)("resists",n.demon.resists)("ailmentHeaders",n.compConfig.ailmentElems)("ailments",n.demon.ailments),t.xp6(1),t.Q6J("ngIf",n.demon.affinities),t.xp6(5),t.Oqu(n.langEn?"Learned Skills":"\u7fd2\u5f97\u30b9\u30ad\u30eb"),t.xp6(1),t.Q6J("ngIf",n.langEn),t.xp6(1),t.Q6J("ngIf",!n.langEn),t.xp6(2),t.Q6J("ngForOf",n.skillLvls),t.xp6(1),t.Q6J("ngIf",!n.skillLvls.length),t.xp6(2),t.Q6J("ngIf",n.demon.evolvesFrom),t.xp6(1),t.Q6J("ngIf",n.demon.evolvesTo),t.xp6(1),t.Q6J("langEn",n.langEn)("excludedDlc","excluded"===n.demon.fusion)}}function Z(i,j){if(1&i&&t._UZ(0,"app-demon-missing",14),2&i){const n=t.oxw();t.Q6J("name",n.name)}}let B=(()=>{class i{constructor(){this.langEn=!0,this.skillLvls=[]}ngOnChanges(){if(this.demon){this.skillLvls=[];for(const n of Object.keys(this.demon.skills)){const r=this.compendium.getSkill(n),A=this.compConfig.affinityElems.indexOf(r.element),J=this.compConfig.affinityBonuses,H=(this.demon.affinities||[])[A];this.skillLvls.push(H&&J.costs[A]&&(64512&r.cost)<=3072?{skill:r,cost:(64512&r.cost)+Math.floor((100-J.costs[A][H-1])/100*(1023&r.cost)),lvl:H,upgrade:J.upgrades[A][H-1]}:{skill:r,cost:r.cost,lvl:0,upgrade:0})}for(const n of this.skillLvls)n.skill.level=this.demon.skills[n.skill.name];this.skillLvls.sort((n,c)=>200*(n.skill.level-c.skill.level)+this.compConfig.elemOrder[n.skill.element]-this.compConfig.elemOrder[c.skill.element])}}static#t=this.\u0275fac=function(c){return new(c||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",compConfig:"compConfig",compendium:"compendium",langEn:"langEn"},features:[t.TTD],decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"langEn","title","price","statHeaders","stats"],[3,"langEn","resistHeaders","resists","ailmentHeaders","ailments"],[3,"langEn","hasLvls","inheritHeaders","inherits",4,"ngIf"],[1,"entry-table"],["colSpan","7",1,"title"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"title","langEn","baseUrl","rowData",4,"ngIf"],[3,"langEn","excludedDlc"],[3,"langEn","hasLvls","inheritHeaders","inherits"],[3,"ngClass"],["colSpan","7"],[3,"title","langEn","baseUrl","rowData"],[3,"name"]],template:function(c,r){1&c&&(t.YNc(0,m,18,20,"ng-container",0),t.YNc(1,Z,1,1,"app-demon-missing",1)),2&c&&(t.Q6J("ngIf",r.demon),t.xp6(1),t.Q6J("ngIf",!r.demon))},dependencies:[_.mk,_.sg,_.O5,o.t,a.O,p.I,u.N,g.P,d.O,f.tq,f.NL],encapsulation:2,changeDetection:0})}return i})(),Q=(()=>{class i{constructor(n,c,r,A){this.route=n,this.title=c,this.currentDemonService=r,this.fusionDataService=A,this.subscriptions=[],this.langEn=!0,this.appName=A.appName,this.compConfig=A.compConfig,this.langEn="en"===this.compConfig.lang}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const n of this.subscriptions)n.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(n=>{this.compendium=n,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(n=>{this.name=n,this.getDemonEntry()})),this.route.params.subscribe(n=>{this.currentDemonService.nextCurrentDemon(n.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(this.name+(this.langEn?" - ":" ")+this.appName),this.demon=this.compendium.getDemon(this.name))}static#t=this.\u0275fac=function(c){return new(c||i)(t.Y36(e.gz),t.Y36(F.Dx),t.Y36(k.s),t.Y36(s.Y))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-demon-entry-container"]],decls:1,vars:5,consts:[[3,"langEn","name","demon","compConfig","compendium"]],template:function(c,r){1&c&&t._UZ(0,"app-demon-entry",0),2&c&&t.Q6J("langEn",r.langEn)("name",r.name)("demon",r.demon)("compConfig",r.compConfig)("compendium",r.compendium)},dependencies:[B],encapsulation:2,changeDetection:0})}return i})();var G=l(8615);function W(i,j){if(1&i&&t._UZ(0,"app-fusion-chart",2),2&i){const n=t.oxw();t.Q6J("langEn",n.langEn)("normChart",n.normChart)("tripChart",n.normChart)("normTitle",n.langEn?"Light and Neutral Normal Fusions":"LIGHT\u5408\u4f53")("tripTitle",n.langEn?"Dark Normal Fusions":"DARK\u5408\u4f53")}}function $(i,j){if(1&i&&t._UZ(0,"app-fusion-chart",3),2&i){const n=t.oxw();t.Q6J("langEn",n.langEn)("filterDarks",!1)("normChart",n.normChart)}}let V=(()=>{class i{constructor(n,c){this.changeDetectorRef=n,this.fusionDataService=c,this.subscriptions=[],this.langEn=!0}ngOnInit(){this.langEn="en"===this.fusionDataService.compConfig.lang,this.hasLightDark=!this.fusionDataService.compConfig.appCssClasses.includes("sh2"),this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(n=>{this.changeDetectorRef.markForCheck(),this.normChart=n}))}ngOnDestroy(){for(const n of this.subscriptions)n.unsubscribe()}static#t=this.\u0275fac=function(c){return new(c||i)(t.Y36(t.sBO),t.Y36(s.Y))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-fusion-chart-container"]],decls:2,vars:2,consts:[[3,"langEn","normChart","tripChart","normTitle","tripTitle",4,"ngIf"],[3,"langEn","filterDarks","normChart",4,"ngIf"],[3,"langEn","normChart","tripChart","normTitle","tripTitle"],[3,"langEn","filterDarks","normChart"]],template:function(c,r){1&c&&(t.YNc(0,W,1,5,"app-fusion-chart",0),t.YNc(1,$,1,3,"app-fusion-chart",1)),2&c&&(t.Q6J("ngIf",r.hasLightDark),t.xp6(1),t.Q6J("ngIf",!r.hasLightDark))},dependencies:[_.O5,G.R],encapsulation:2,changeDetection:0})}return i})();var X=l(4436);let z=(()=>{class i{constructor(n,c){this.fusionDataService=n,this.title=c,this.subscriptions=[],this.maxSkills=8,this.langEn=!0;const r=this.fusionDataService.compConfig,A=r.appCssClasses.includes("sh2");this.langEn="en"===r.lang,this.appName=(this.langEn?"Recipe Generator - ":"\u5408\u4f53\u30ec\u30b7\u30d4 ")+n.appName,this.maxSkills=A?6:8,this.recipeConfig={fissionCalculator:this.fusionDataService.fissionCalculator,fusionCalculator:this.fusionDataService.fusionCalculator,races:r.races,skillElems:r.skillElems,inheritElems:r.affinityElems,restrictInherits:A,triExclusiveRaces:[],triFissionCalculator:null,triFusionCalculator:null,defaultDemon:r.defaultRecipeDemon}}ngOnInit(){this.title.setTitle(this.appName),this.subscribeAll()}ngOnDestroy(){this.unsubscribeAll()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(n=>{this.compendium=n})),this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(n=>{this.squareChart={normalChart:n,tripleChart:n,raceOrder:this.fusionDataService.compConfig.raceOrder}}))}unsubscribeAll(){for(const n of this.subscriptions)n.unsubscribe()}static#t=this.\u0275fac=function(c){return new(c||i)(t.Y36(s.Y),t.Y36(F.Dx))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-recipe-generator-container"]],decls:1,vars:5,consts:[[3,"maxSkills","compendium","squareChart","recipeConfig","langEn"]],template:function(c,r){1&c&&t._UZ(0,"app-recipe-generator",0),2&c&&t.Q6J("maxSkills",r.maxSkills)("compendium",r.compendium)("squareChart",r.squareChart)("recipeConfig",r.recipeConfig)("langEn",r.langEn)},dependencies:[X.X],encapsulation:2,changeDetection:0})}return i})();var tt=l(5657),et=l(4689);const nt=[{path:"",redirectTo:"demons",pathMatch:"full"},{path:"",component:O,data:{fusionTool:"chart"},children:[{path:"chart",component:V}]},{path:"",component:O,children:[{path:"demons/:demonName",component:Q,children:[{path:"fissions",component:tt.t},{path:"fusions",component:et.$},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"demons",component:x},{path:"skills",component:v},{path:"recipes",component:z},{path:"settings",component:I}]},{path:"**",redirectTo:"demons",pathMatch:"full"}];let st=(()=>{class i{static#t=this.\u0275fac=function(c){return new(c||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[e.Bz.forChild(nt),e.Bz]})}return i})()},9293:(M,L,l)=>{function e(o,a){const p={};for(const[u,g]of Object.entries(o)){const d=Object.assign({},g),f={};for(const[k,S]of Object.entries(g.skills))f[a[k]||k]=S;d.race=a[d.race]||d.race,d.skills=f,p[a[u]||u]=d}return p}function t(o,a){const p={};for(const[u,g]of Object.entries(o)){const d=Object.assign({},g),f=d.target||"Self";d.target=a[f]||f,p[a[u]||u]=d}return p}function s(o,a){const p={};for(const[u,g]of Object.entries(o))p[a[u]||u]=g.map(d=>d.split(" x ").map(f=>a[f]||f).join(" x "));return p}function _(o,a){const p={races:o.races.map(u=>a[u]||u),table:o.table.map(u=>u.map(g=>a[g]||g))};return o.elems&&(p.elems=o.elems.map(u=>a[u]||u),p.table=o.table),p}function C(o,a){const p=[];for(const{category:u,unlocked:g,conditions:d}of o){const f={};for(const[k,S]of Object.entries(d))f[k.split(",").map(R=>a[R]||R).join(",")]=S;p.push({category:a[u]||u,unlocked:g,conditions:f})}return p}function E(o,a){const p={};for(const[u,g]of Object.entries(o))p[a[u]||u]={lvl:g.lvl,result:a[g.result]||g.result};return p}l.d(L,{Y:()=>I});class F{constructor(a,p){this.compConfig=a,this.initImportedData(),this.updateDerivedData(p)}initImportedData(){const a={},p={},u={},g={},d={},f={},k={},S="-".repeat(this.compConfig.ailmentElems.length);for(const[h,m]of Object.entries(this.compConfig.resistCodes))f[h]=(m/1e3|0)<<10,k[h]=m%1e3/2.5|0;const N=(h,m,Z)=>(h||m).split("").map((B,Q)=>f[B]+(Z?.[Q]/2.5|0||k[B])),R="en"===this.compConfig.lang,w=R?"Innate resistance":"",q=R?"Self":"\u81ea\u8eab",K=R?["Weak ","Resist ","Null "]:["\u5f31","\u5f37","\u7121"],Y={},P={};for(const[h,m]of"wsn".split("").entries())Y[f[m]>>10]=[],P[f[m]>>10]=K[h];for(const[h,m]of Object.entries(P))for(const Z of this.compConfig.ailmentElems)Y[h].push({name:m+Z,element:"pas",effect:w,target:q,cost:0,rank:99,learnedBy:[],level:0});for(const[h,m]of Object.entries(this.compConfig.demonData))a[h]={name:h,race:m.race,lvl:m.lvl,currLvl:m.currLvl||m.lvl,skills:m.skills,price:2*m.price,stats:m.stats,resists:N(m.resists,m.resists,m.resmods),ailments:N(m.ailments,S,m.ailmods),inherits:parseInt((m.affinities||[-10]).map(Z=>Z>-10?"1":"0").join(""),2),affinities:m.affinities,fusion:m.fusion||"normal",prereq:m.prereq||""};for(const[h,m]of Object.entries(this.compConfig.skillData))p[h]={name:h,element:m.element,rank:m.rank,effect:m.effect,damage:m.damage||"",target:m.target||"Self",hits:m.hits||"",cost:m.cost||0,learnedBy:[],level:0},p[h].rank||(p[h].rank=99);for(const h of Object.values(Y))for(const m of h)p[m.name]=m;for(const[h,m]of Object.entries(this.compConfig.specialRecipes)){const Z=[],B=[];for(const Q of m)if(Q.includes(" x")){const[G,W]=Q.split(" x ");B.push({name1:G,name2:W})}else Z.push(Q);Z.length>0&&(u[h]=Z),B.length>0&&(g[h]=B),"normal"===a[h].fusion&&(a[h].fusion="special")}for(const[h,m]of Object.entries(this.compConfig.evolveData)){const Z=m.result;a[h].evolvesTo={price:a[Z].price,race1:a[Z].race,lvl1:m.lvl,name1:Z},a[Z].evolvesFrom={price:a[h].price,race1:a[h].race,lvl1:m.lvl,name1:h}}for(const h of this.compConfig.races)d[h]={};for(const[h,m]of Object.entries(a))d[m.race][m.lvl]=h;for(const h of Object.values(a).sort((m,Z)=>m.currLvl-Z.currLvl))if("enemy"!==h.fusion){for(const m of Object.keys(h.skills))p[m].learnedBy.push({demon:h.name,level:h.skills[m]});for(let m=0;m<h.ailments.length;m++)Y[h.ailments[m]>>10]&&Y[h.ailments[m]>>10][m].learnedBy.push({demon:h.name,level:0})}this.demons=a,this.skills=p,this.specialRecipes=u,this.specialPairRecipes=g,this.invertedDemons=d}updateDerivedData(a){const p=Object.assign({},this.demons),u=Object.keys(this.skills).map(f=>this.skills[f]),g={},d={};for(const f of this.compConfig.races)g[f]=[],d[f]=[];for(const[f,k]of Object.entries(this.demons))!this.isElementDemon(f)&&!this.isOverlappingResult(f)&&g[k.race].push(k.lvl),this.specialRecipes.hasOwnProperty(f)||d[k.race].push(k.lvl);for(const f of this.compConfig.races)g[f].sort((k,S)=>k-S),d[f].sort((k,S)=>k-S);for(const f of this.compConfig.races){const k=g[f],S=d[f],N=k.length,R=S.length;N&&R&&k[N-1]!==S[R-1]&&S.push(100)}for(const[f,k]of Object.entries(a))if(!k){const{race:S,lvl:N}=this.demons[f];delete p[f],g[S]=g[S].filter(R=>R!==N),d[S]=d[S].filter(R=>R!==N)}this._allDemons=Object.keys(p).map(f=>p[f]),this._allSkills=u.filter(f=>f.rank<99||f.learnedBy.length>0),this.allIngredients=g,this.allResults=d}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return Object.keys(this.specialRecipes).map(a=>this.demons[a])}getDemon(a){return this.demons[a]}getSkill(a){return this.skills[a]}getSkills(a){const p=this.compConfig.elemOrder,u=a.map(g=>this.skills[g]);return u.sort((g,d)=>1e4*(p[g.element]-p[d.element])+g.rank-d.rank),u}getIngredientDemonLvls(a){return this.allIngredients[a]||[]}getResultDemonLvls(a){return this.allResults[a]||[]}getSpecialNameEntries(a){return this.specialRecipes[a]||[]}getSpecialNamePairs(a){return this.specialPairRecipes[a]||[]}reverseLookupDemon(a,p){return this.invertedDemons[a][p]}reverseLookupSpecial(a){return[]}isElementDemon(a){return this.demons[a].race===this.compConfig.elementRace}isOverlappingResult(a){return!1}updateFusionSettings(a){this.updateDerivedData(a)}}var T=l(6262);let x=(()=>{class o extends T.g{static#t=this.LIGHT_RACES=["Herald","Megami","Avian","Tree","Deity","Avatar","Holy","Genma","Fury","Lady","Dragon","Kishin","Enigma","Entity","Wargod","Amatsu","Kunitsu","Godly","Chaos","\u5927\u5929\u4f7f","\u5973\u795e","\u970a\u9ce5","\u795e\u6a39","\u9b54\u795e","\u795e\u7363","\u8056\u7363","\u5e7b\u9b54","\u7834\u58ca\u795e","\u5730\u6bcd\u795e","\u9f8d\u795e","\u9b3c\u795e","\u79d8\u795e","\u5a01\u970a","\u8ecd\u795e","\u5929\u6d25\u795e","\u56fd\u6d25\u795e","\u795e\u970a","\u6df7\u6c8c\u738b"];static#e=this.DARK_RACES=["Vile","Raptor","Wood","Reaper","Wilder","Jaki","Vermin","Tyrant","Drake","Spirit","Haunt","Ghost","Zealot","\u90aa\u795e","\u51f6\u9ce5","\u5996\u6a39","\u6b7b\u795e","\u5996\u7363","\u90aa\u9b3c","\u5e7d\u866b","\u9b54\u738b","\u90aa\u9f8d","\u60aa\u970a","\u5e7d\u9b3c","\u5e7d\u9b3c","\u72c2\u795e"];constructor(p){super(),this.initCharts(p)}initCharts(p){const u=p.normalTable.races,g=p.normalTable.table,d=p.elementTable.elems,f=p.elementTable.races,k=p.elementTable.table;this.lvlModifier=p.lvlModifier,this.elementDemons=d,this.fusionChart=T.g.loadFusionTableJson(u,g),this.fissionChart=T.g.loadFissionTableJson(u,d,g),this.elementChart=T.g.loadElementTableJson(f,d,k),this.races=u}getLightDark(p){return-1!==o.LIGHT_RACES.indexOf(p)?1:-1!==o.DARK_RACES.indexOf(p)?-1:0}}return o})();var U=l(7548),b=l(8664),v=l(9778),y=l(4769),D=l(4487);let I=(()=>{class o extends b.G{constructor(p,u){const g=u.url.includes("/ja/")?function O(o){const a=Object.entries(o.jaNames).reduce((u,[g,d])=>(u[d]=g,u),{}),p=o.races.map(u=>a[u]||u);return{appTitle:a[o.appTitle]||o.appTitle,races:p,raceOrder:p.reduce((u,g,d)=>(u[g]=d,u),{}),appCssClasses:o.appCssClasses,lang:"ja",jaNames:o.jaNames,affinityElems:o.affinityElems,skillData:t(o.skillData,a),skillElems:o.skillElems,elemOrder:o.elemOrder,resistCodes:o.resistCodes,affinityBonuses:o.affinityBonuses,lvlModifier:o.lvlModifier,demonData:e(o.demonData,a),evolveData:E(o.evolveData,a),baseStats:o.baseStats.map(u=>a[u]||u),resistElems:o.resistElems,ailmentElems:o.ailmentElems.map(u=>a[u]||u),demonUnlocks:C(o.demonUnlocks,a),normalTable:_(o.normalTable,a),elementTable:_(o.elementTable,a),specialRecipes:s(o.specialRecipes,a),settingsKey:o.settingsKey.replace("-ja","")+"-ja",settingsVersion:o.settingsVersion,defaultRecipeDemon:a[o.defaultRecipeDemon]||o.defaultRecipeDemon,elementRace:a[o.elementRace]||o.elementRace}}(p):p,d=new v.V(g.demonUnlocks,[]);super(new F(g,d.demonToggles),new x(g),d,g.settingsKey,g.settingsVersion),this.fissionCalculator=U.uC,this.fusionCalculator=U.YP,this.compConfig=g,this.appName=this.compConfig.appTitle+("en"===this.compConfig.lang?" Fusion Calculator":" \u5408\u4f53\u30a2\u30d7\u30ea")}static#t=this.\u0275fac=function(u){return new(u||o)(y.LFG(U.I7),y.LFG(D.F0))};static#e=this.\u0275prov=y.Yz7({token:o,factory:o.\u0275fac})}return o})()},3495:(M,L,l)=>{l.d(L,{D:()=>O});var e=l(6814),t=l(6208),s=l(8325),_=l(6502),C=l(4769);let O=(()=>{class E{static forRoot(){return{ngModule:E}}static#t=this.\u0275fac=function(x){return new(x||E)};static#e=this.\u0275mod=C.oAB({type:E});static#n=this.\u0275inj=C.cJS({imports:[e.ez,t.m,s.a,_.V]})}return E})()}}]);