"use strict";(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[159],{9981:(J,Y,o)=>{o.d(Y,{$v:()=>U});var w=o(6947),_=o(4660),h=o(2598),e=o(177);function O(y,S){if(1&y&&(h.j41(0,"tr")(1,"th"),h.EFF(2),h.k0s()()),2&y){const u=S.$implicit;h.R7$(2),h.JRh(u)}}let D=(()=>{class y{ngOnChanges(){if(this.compendium&&this.pairChart&&(this.trioChart||!this.trioCalculator)){const u=[];for(const v of this.compendium.allDemons.filter($=>!$.isEnemy)){const $=this.compendium.getSpecialNameEntries(v.name);if($.length>0){u.push(`${v.name} = ${$.join(" x ")}`);continue}const I=this.pairCalculator.getFusions(v.name,this.compendium,this.pairChart).map(r=>(0,_.on)(r,this.compendium));if(I.length>0&&(I.filter(r=>r.race1!==v.race).length>0||!this.trioCalculator||0===this.trioCalculator.getFusions(v.name,this.compendium,this.trioChart).length)){I.sort((p,f)=>p.price-f.price);const r=I.slice(0,3).map(p=>`${p.name1} x ${p.name2}`).join(", ");u.push(`${v.name} = ${r}`+(I.length>3?`, ${I.length-3} more...`:""))}else{if(this.trioCalculator){const r=this.trioCalculator.getFusions(v.name,this.compendium,this.trioChart).map(p=>(0,_.f7)(p,this.compendium)).filter(p=>p.d1.race!==v.race);if(r.length>0){r.sort((f,C)=>f.price-C.price);const p=r.slice(0,3).map(f=>`${f.d1.name} x ${f.d2.name} x ${f.d3.name}`).join(", ");u.push(`${v.name} = ${p}`+(r.length>3?`, ${r.length-3} more...`:""));continue}}u.push(v.prereq?`${v.name} = ${v.prereq}`:`${v.name} = No fusions found!`)}}this.fissionPreviews=u}}static{this.\u0275fac=function(v){return new(v||y)}}static{this.\u0275cmp=h.VBU({type:y,selectors:[["app-fission-preview-table"]],inputs:{pairCalculator:"pairCalculator",trioCalculator:"trioCalculator",pairChart:"pairChart",trioChart:"trioChart",compendium:"compendium"},features:[h.OA$],decls:6,vars:1,consts:[[1,"entry-table"],[1,"title"],[4,"ngFor","ngForOf"]],template:function(v,$){1&v&&(h.j41(0,"table",0)(1,"tbody")(2,"tr")(3,"th",1),h.EFF(4,"Fission Previews"),h.k0s()(),h.DNE(5,O,3,1,"tr",2),h.k0s()()),2&v&&(h.R7$(5),h.Y8G("ngForOf",$.fissionPreviews))},dependencies:[e.Sq],encapsulation:2,changeDetection:0})}}return y})(),U=(()=>{class y{constructor(u){this.fusionDataService=u,this.subscriptions=[]}ngOnInit(){this.calculator=this.fusionDataService.fissionCalculator,this.subscriptions.push(this.fusionDataService.compendium.subscribe(u=>{this.compendium=u})),this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(u=>{this.fusionChart=u}))}ngOnDestroy(){for(const u of this.subscriptions)u.unsubscribe()}static{this.\u0275fac=function(v){return new(v||y)(h.rXU(w.iJ))}}static{this.\u0275cmp=h.VBU({type:y,selectors:[["app-smt-fission-preview"]],decls:2,vars:3,consts:[[3,"pairCalculator","pairChart","compendium"]],template:function(v,$){1&v&&(h.j41(0,"app-fission-preview-table",0),h.nrm(1,"app-fission-preview-table"),h.k0s()),2&v&&h.Y8G("pairCalculator",$.calculator)("pairChart",$.fusionChart)("compendium",$.compendium)},dependencies:[D],encapsulation:2,changeDetection:0})}}return y})()},5990:(J,Y,o)=>{o.d(Y,{D:()=>_});var w=o(8063);class _ extends w.p{constructor(e,O,D){super(),this.elementDemons=[],this.lvlModifier=.5,this.initCharts(e,D)}initCharts(e,O){const D=e.races,U=e.table,j=[];for(let y=0;y<D.length;y++)j.push(U[y].slice(O?0:y,O?y+1:D.length)),O||(j[y][0]="-");this.races=D,this.lvlModifier=O?4.25:.5,this.fissionChart=w.p.loadFissionTableJson(D,this.elementDemons,j),this.fusionChart=w.p.loadFusionTableJson(D,j),this.elementChart={}}}},2753:(J,Y,o)=>{o.d(Y,{S:()=>_e});var w=o(8935),_=o(2755),h=o(1090),e=o(2598),O=o(7269),D=o(177),U=o(5583);let j=(()=>{class t{constructor(n){this.appCssClasses=n.compConfig.appCssClasses;const s=n.compConfig;this.otherLinks=[s.hasQrcodes?{title:"QR Code Generator",link:"qrcodes"}:{title:(0,_.oO)(h.fu.RecipGenerator,n.compConfig.lang),link:"recipes"}],s.hasEnemies&&this.otherLinks.unshift({title:(0,_.oO)(h.fu.ShadowList,n.compConfig.lang),link:"shadows"})}static{this.\u0275fac=function(s){return new(s||t)(e.rXU(O.i))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-pq2-compendium"]],decls:1,vars:3,consts:[[3,"ngClass","mainList","otherLinks"]],template:function(s,i){1&s&&e.nrm(0,"app-demon-compendium",0),2&s&&e.Y8G("ngClass",i.appCssClasses)("mainList","persona")("otherLinks",i.otherLinks)},dependencies:[D.YU,U.f],styles:[".p3 div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p3 div.element-icon.i28716,.p3 div.element-icon.sla{background-image:url(/assets/images/p5/sword.png)}.p3 div.element-icon.i28717,.p3 div.element-icon.str{background-image:url(/assets/images/p5/phys.png)}.p3 div.element-icon.i28718,.p3 div.element-icon.pie{background-image:url(/assets/images/p5/gun.png)}.p3 div.element-icon.i30972,.p3 div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p3 div.element-icon.i29948,.p3 div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p3 div.element-icon.i29436,.p3 div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p3 div.element-icon.i29180,.p3 div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p3 div.element-icon.i4012,.p3 div.element-icon.lig{background-image:url(/assets/images/p5/bless.png)}.p3 div.element-icon.i32624,.p3 div.element-icon.dar{background-image:url(/assets/images/p5/curse.png)}.p3 div.element-icon.i3956,.p3 div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.p3 div.element-icon.i4093,.p3 div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p3 div.element-icon.i32764,.p3 div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p3 div.element-icon.i4092,.p3 div.element-icon.spa,.p3 div.element-icon.spb,.p3 div.element-icon.spe{background-image:url(/assets/images/p5/trait.png)}.p3 div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p3 div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.p3 th.title,.p3 th.nav.active,.p3 th.nav.active a{color:#000;background-color:#4372aa}.p4 div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p4 div.element-icon.i2166,.p4 div.element-icon.phy{background-image:url(/assets/images/p5/phys.png)}.p4 div.element-icon.i3582,.p4 div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p4 div.element-icon.i3070,.p4 div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p4 div.element-icon.i3966,.p4 div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p4 div.element-icon.i3838,.p4 div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p4 div.element-icon.i2006,.p4 div.element-icon.lig{background-image:url(/assets/images/p5/bless.png)}.p4 div.element-icon.i1978,.p4 div.element-icon.dar{background-image:url(/assets/images/p5/curse.png)}.p4 div.element-icon.i1979,.p4 div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.p4 div.element-icon.i2014,.p4 div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p4 div.element-icon.i4094,.p4 div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p4 div.element-icon.spa,.p4 div.element-icon.spe{background-image:url(/assets/images/p5/trait.png)}.p4 div.element-icon.i4095,.p4 div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p4 div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.p4 th.title,.p4 th.nav.active,.p4 th.nav.active a{color:#000;background-color:#ffe600}.pq div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.pq div.element-icon.cut{background-image:url(/assets/images/p5/sword.png)}.pq div.element-icon.i3584,.pq div.element-icon.i3591,.pq div.element-icon.bas{background-image:url(/assets/images/p5/phys.png)}.pq div.element-icon.sta{background-image:url(/assets/images/p5/gun.png)}.pq div.element-icon.i376,.pq div.element-icon.i383,.pq div.element-icon.i3960,.pq div.element-icon.i3967,.pq div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.pq div.element-icon.i248,.pq div.element-icon.i255,.pq div.element-icon.i3832,.pq div.element-icon.i3839,.pq div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.pq div.element-icon.i472,.pq div.element-icon.i479,.pq div.element-icon.i4056,.pq div.element-icon.i4063,.pq div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.pq div.element-icon.i440,.pq div.element-icon.i447,.pq div.element-icon.i4024,.pq div.element-icon.i4031,.pq div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.pq div.element-icon.i496,.pq div.element-icon.i503,.pq div.element-icon.i4080,.pq div.element-icon.i4087,.pq div.element-icon.lig{background-image:url(/assets/images/p5/bless.png)}.pq div.element-icon.i488,.pq div.element-icon.i495,.pq div.element-icon.i4072,.pq div.element-icon.i4079,.pq div.element-icon.dar{background-image:url(/assets/images/p5/curse.png)}.pq div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.pq div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.pq div.element-icon.i504,.pq div.element-icon.i511,.pq div.element-icon.i4088,.pq div.element-icon.i4095,.pq div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.pq div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.pq div.element-icon.nav{background-image:url(/assets/images/p5/trait.png)}.pq div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.pq th.title,.pq th.nav.active,.pq th.nav.active a{color:#000;background-color:#aa1ca9}.pq2 div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.pq2 div.element-icon.i2055,.pq2 div.element-icon.phy{background-image:url(/assets/images/p5/phys.png)}.pq2 div.element-icon.i3583,.pq2 div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.pq2 div.element-icon.i3071,.pq2 div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.pq2 div.element-icon.i3967,.pq2 div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.pq2 div.element-icon.i3839,.pq2 div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.pq2 div.element-icon.i4063,.pq2 div.element-icon.psy{background-image:url(/assets/images/p5/psy.png)}.pq2 div.element-icon.i4031,.pq2 div.element-icon.nuk{background-image:url(/assets/images/p5/nuke.png)}.pq2 div.element-icon.i4087,.pq2 div.element-icon.ble{background-image:url(/assets/images/p5/bless.png)}.pq2 div.element-icon.i4079,.pq2 div.element-icon.cur{background-image:url(/assets/images/p5/curse.png)}.pq2 div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.pq2 div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.pq2 div.element-icon.i4095,.pq2 div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.pq2 div.element-icon.i2047,.pq2 div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.pq2 div.element-icon.nav{background-image:url(/assets/images/p5/trait.png)}.pq2 div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.pq2 th.title,.pq2 th.nav.active,.pq2 th.nav.active a{color:#fff;background-color:#ff4800}.p5t div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p5t div.element-icon.phy{background-image:url(/assets/images/p5/phys.png)}.p5t div.element-icon.gun{background-image:url(/assets/images/p5/gun.png)}.p5t div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p5t div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p5t div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p5t div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p5t div.element-icon.psy{background-image:url(/assets/images/p5/psy.png)}.p5t div.element-icon.nuk{background-image:url(/assets/images/p5/nuke.png)}.p5t div.element-icon.ble{background-image:url(/assets/images/p5/bless.png)}.p5t div.element-icon.cur{background-image:url(/assets/images/p5/curse.png)}.p5t div.element-icon.i1023,.p5t div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p5t div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p5t div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p5t div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.p5t th.title,.p5t th.nav.active,.p5t th.nav.active a{color:#fff;background-color:#f41000}.p3r div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p3r div.element-icon.i3583,.p3r div.element-icon.i3585,.p3r div.element-icon.sla{background-image:url(/assets/images/p5/sword.png)}.p3r div.element-icon.i2047,.p3r div.element-icon.i3615,.p3r div.element-icon.str{background-image:url(/assets/images/p5/phys.png)}.p3r div.element-icon.i3071,.p3r div.element-icon.i4065,.p3r div.element-icon.pie{background-image:url(/assets/images/p5/gun.png)}.p3r div.element-icon.i3967,.p3r div.element-icon.i3843,.p3r div.element-icon.i3955,.p3r div.element-icon.i3949,.p3r div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p3r div.element-icon.i3839,.p3r div.element-icon.i3715,.p3r div.element-icon.i3827,.p3r div.element-icon.i3821,.p3r div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p3r div.element-icon.i4063,.p3r div.element-icon.i3651,.p3r div.element-icon.i4051,.p3r div.element-icon.i4045,.p3r div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p3r div.element-icon.i4031,.p3r div.element-icon.i3619,.p3r div.element-icon.i4019,.p3r div.element-icon.i4013,.p3r div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p3r div.element-icon.i4083,.p3r div.element-icon.i3603,.p3r div.element-icon.lig{background-image:url(/assets/images/p5/bless.png)}.p3r div.element-icon.i4077,.p3r div.element-icon.i3597,.p3r div.element-icon.dar{background-image:url(/assets/images/p5/curse.png)}.p3r div.element-icon.i493,.p3r div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.p3r div.element-icon.i499,.p3r div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p3r div.element-icon.i4095,.p3r div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p3r div.element-icon.i511,.p3r div.element-icon.i4088,.p3r div.element-icon.spe{background-image:url(/assets/images/p5/trait.png)}.p3r div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p3r div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.p3r th.title,.p3r th.nav.active,.p3r th.nav.active a{color:#000;background-color:#4372aa}\n"],encapsulation:2,changeDetection:0})}}return t})();var y=o(9404),S=o(345),u=o(9629);let v=(()=>{class t extends y.M{constructor(n,s,i,m){super(n,i,m),this.showAllies=!s.snapshot.data.showShadows,this.showEnemies=!this.showAllies,this.compConfig=m.compConfig,this.defaultSortFun=(g,M)=>200*(this.compConfig.raceOrder[g.race]-this.compConfig.raceOrder[M.race])+M.lvl-g.lvl,this.appName=(0,_.oO)(h.vC.AppPersonas,this.compConfig.lang)+m.appName,this.statHeaders=this.compConfig.baseStats,this.resistHeaders=this.compConfig.hasDemonResists?this.compConfig.resistElems:[],this.inheritOrder=this.compConfig.elemOrder,this.showEnemies&&(this.appName=(0,_.oO)(h.vC.AppShadows,this.compConfig.lang)+m.appName,this.statHeaders=this.compConfig.enemyStats,this.resistHeaders=this.compConfig.resistElems,this.inheritOrder=null)}static{this.\u0275fac=function(s){return new(s||t)(e.rXU(S.hE),e.rXU(w.nX),e.rXU(e.gRc),e.rXU(O.i))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-demon-list-container"]],features:[e.Vt3],decls:2,vars:10,consts:[[3,"lang","isEnemy","hasCurrLvl","raceOrder","statHeaders","resistHeaders","inheritOrder","rowData"]],template:function(s,i){1&s&&(e.nrm(0,"app-smt-demon-list",0),e.nI1(1,"async")),2&s&&e.Y8G("lang",i.compConfig.lang)("isEnemy",i.showEnemies)("hasCurrLvl",!i.showEnemies&&i.compConfig.hasTripleFusion)("raceOrder",i.compConfig.raceOrder)("statHeaders",i.statHeaders)("resistHeaders",i.resistHeaders)("inheritOrder",i.inheritOrder)("rowData",e.bMT(1,8,i.demons))},dependencies:[u.F,D.Jj],encapsulation:2,changeDetection:0})}}return t})();var $=o(9454),I=o(2940);let l=(()=>{class t extends $.E{constructor(n,s,i){super(n,s,i),this.compConfig=i.compConfig,this.appName=(0,_.oO)(h.vf.AppTitle,this.compConfig.lang)+i.appName,this.transferTitle=this.compConfig.hasSkillCards?"Skill Card":"",this.defaultSortFun=(m,g)=>1e4*(this.compConfig.elemOrder[m.element]-this.compConfig.elemOrder[g.element])+m.rank-g.rank}static{this.\u0275fac=function(s){return new(s||t)(e.rXU(S.hE),e.rXU(e.gRc),e.rXU(O.i))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-skill-list-container"]],features:[e.Vt3],decls:2,vars:9,consts:[[3,"lang","elemOrder","hasRank","hasTarget","isPersona","transferTitle","rowData"]],template:function(s,i){1&s&&(e.nrm(0,"app-smt-skill-list",0),e.nI1(1,"async")),2&s&&e.Y8G("lang",i.compConfig.lang)("elemOrder",i.compConfig.elemOrder)("hasRank",i.compConfig.hasSkillRanks)("hasTarget",!0)("isPersona",!0)("transferTitle",i.transferTitle)("rowData",e.bMT(1,7,i.skills))},dependencies:[I.p,D.Jj],encapsulation:2,changeDetection:0})}}return t})();var r=o(5692),p=o(3679),f=o(2223),C=o(302),R=o(9436),E=o(6122),N=o(8696);let c=(()=>{class t{constructor(){this.lang="en"}static{this.\u0275fac=function(s){return new(s||t)}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-enemy-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig",lang:"lang"},decls:19,vars:14,consts:[[3,"title","statHeaders","stats"],[1,"entry-table"],["colspan","2",1,"title"],[3,"resistHeaders","resists","ailmentHeaders","ailments"],[3,"hasTarget","hasLvl","elemOrder","compendium","skillLevels"]],template:function(s,i){1&s&&(e.nrm(0,"app-demon-stats",0),e.j41(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),e.EFF(5,"Appearances"),e.k0s()(),e.j41(6,"tr")(7,"th"),e.EFF(8,"Areas"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Drops"),e.k0s()()(),e.j41(11,"tbody")(12,"tr")(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s()()()(),e.nrm(17,"app-demon-resists",3)(18,"app-demon-skills",4)),2&s&&(e.Y8G("title","Lvl "+i.demon.lvl+" "+i.demon.race+" "+i.demon.name)("statHeaders",i.compConfig.enemyStats)("stats",i.demon.stats),e.R7$(14),e.JRh(i.demon.area),e.R7$(2),e.JRh(i.demon.drop),e.R7$(1),e.Y8G("resistHeaders",i.compConfig.resistElems)("resists",i.demon.resists)("ailmentHeaders",i.compConfig.ailmentElems)("ailments",i.demon.ailments),e.R7$(1),e.Y8G("hasTarget",!0)("hasLvl",!1)("elemOrder",i.compConfig.elemOrder)("compendium",i.compendium)("skillLevels",i.demon.skills))},dependencies:[p.C,f.w,C.F],encapsulation:2,changeDetection:0})}}return t})();function T(t,d){if(1&t&&e.nrm(0,"app-demon-resists",7),2&t){const n=e.XpG(2);e.Y8G("lang",n.lang)("resistHeaders",n.compConfig.resistElems)("resists",n.demon.resists)}}function P(t,d){if(1&t&&(e.qex(0),e.nrm(1,"app-demon-stats",2),e.DNE(2,T,1,3,"app-demon-resists",3),e.nrm(3,"app-demon-inherits",4)(4,"app-demon-skills",5)(5,"app-smt-fusions",6),e.bVm()),2&t){const n=e.XpG();e.R7$(1),e.Y8G("lang",n.lang)("title","Lvl "+n.demon.lvl+" "+n.demon.race+" "+n.demon.name)("price",n.demon.price)("statHeaders",n.compConfig.baseStats)("stats",n.demon.stats)("inherits",n.demon.inherits),e.R7$(1),e.Y8G("ngIf",n.compConfig.hasDemonResists),e.R7$(1),e.Y8G("hasChance",!n.compConfig.hasManualInheritance)("inheritHeaders",n.compConfig.inheritElems)("inherits",n.demon.affinities),e.R7$(1),e.Y8G("lang",n.lang)("hasRank",n.compConfig.hasSkillRanks)("hasTarget",!0)("elemOrder",n.compConfig.elemOrder)("compendium",n.compendium)("skillLevels",n.demon.skills),e.R7$(1),e.Y8G("lang",n.lang)("hasTripleFusion",n.compConfig.hasTripleFusion)("excludedDlc","excluded"===n.demon.fusion)}}function V(t,d){if(1&t&&e.nrm(0,"app-demon-missing",8),2&t){const n=e.XpG();e.Y8G("name",n.name)}}function A(t,d){if(1&t&&e.nrm(0,"app-demon-entry",1),2&t){const n=e.XpG();e.Y8G("lang",n.compConfig.lang)("name",n.name)("demon",n.demon)("compConfig",n.compConfig)("compendium",n.compendium)}}function k(t,d){if(1&t&&e.nrm(0,"app-enemy-entry",1),2&t){const n=e.XpG();e.Y8G("lang",n.compConfig.lang)("name",n.name)("demon",n.demon)("compConfig",n.compConfig)("compendium",n.compendium)}}let F=(()=>{class t{constructor(){this.lang="en"}static{this.\u0275fac=function(s){return new(s||t)}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig",lang:"lang"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"lang","title","price","statHeaders","stats","inherits"],[3,"lang","resistHeaders","resists",4,"ngIf"],[3,"hasChance","inheritHeaders","inherits"],[3,"lang","hasRank","hasTarget","elemOrder","compendium","skillLevels"],[3,"lang","hasTripleFusion","excludedDlc"],[3,"lang","resistHeaders","resists"],[3,"name"]],template:function(s,i){1&s&&(e.DNE(0,P,6,19,"ng-container",0),e.DNE(1,V,1,1,"app-demon-missing",1)),2&s&&(e.Y8G("ngIf",i.demon),e.R7$(1),e.Y8G("ngIf",!i.demon))},dependencies:[D.bT,r.X,p.C,f.w,C.F,R.d,E.L],encapsulation:2,changeDetection:0})}}return t})(),a=(()=>{class t{constructor(n,s,i,m){this.route=n,this.title=s,this.currentDemonService=i,this.fusionDataService=m,this.subscriptions=[],this.appName="Test App",this.appName=m.appName,this.compConfig=m.compConfig}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const n of this.subscriptions)n.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(n=>{this.compendium=n,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(n=>{this.name=n,this.getDemonEntry()})),this.route.params.subscribe(n=>{this.currentDemonService.nextCurrentDemon(n.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(`${this.name} - ${this.appName}`),this.demon=this.compendium.getDemon(this.name))}static{this.\u0275fac=function(s){return new(s||t)(e.rXU(w.nX),e.rXU(S.hE),e.rXU(N.i),e.rXU(O.i))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-demon-entry-container"]],decls:2,vars:2,consts:[[3,"lang","name","demon","compConfig","compendium",4,"ngIf"],[3,"lang","name","demon","compConfig","compendium"]],template:function(s,i){1&s&&(e.DNE(0,A,1,5,"app-demon-entry",0),e.DNE(1,k,1,5,"app-enemy-entry",0)),2&s&&(e.Y8G("ngIf",!i.demon||!i.demon.isEnemy),e.R7$(1),e.Y8G("ngIf",i.demon&&i.demon.isEnemy))},dependencies:[D.bT,F,c],encapsulation:2,changeDetection:0})}}return t})();const b=Array(24).fill(0);function G(t,d){return t.split("").map(n=>n.charCodeAt(0)).concat(Array(d-t.length).fill(0))}b[0]=4,b[2]=50,b[4]=50,b[6]=50,b[7]=50,b[8]=50,b[12]=50,b[16]=50,b[20]=50;const H=[].concat(G("aqiu384.github.io",21),G("https://youtu.be/b1KfNEPKncQ",33)),B="kitaro",X="bancho",K=[].concat(G(B,17),G(X,17)),W=[].concat(G(B,29),G(X,29)),z=[].concat(G(B,17),G(X,17),G("renren",17),G("hamuko",17)),Z=[].concat([34,50],Array(36).fill(31),[31,0,31,0,0,0,1,128]),ee=[].concat([34,50],Array(54).fill(31),[31,0,1,0]);var q=o(4341);let ie=(()=>{class t{constructor(){this.byteArray=[],this.errorLvl="L",this.typeNum=10,this.qrFactory=qrcode(this.typeNum,this.errorLvl),this.qrImg=null}ngOnChanges(){this.createQrcode()}createQrcode(){this.qrFactory=qrcode(this.typeNum,this.errorLvl),this.qrFactory.addData(this.byteArray.map(n=>String.fromCharCode(n)).join("")),this.qrFactory.make(),this.qrImg=this.qrFactory.createImgTag(5)}static{this.\u0275fac=function(s){return new(s||t)}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-qrcode"]],inputs:{byteArray:"byteArray",errorLvl:"errorLvl",typeNum:"typeNum"},features:[e.OA$],decls:1,vars:1,consts:[[3,"innerHtml"]],template:function(s,i){1&s&&e.nrm(0,"div",0),2&s&&e.Y8G("innerHtml",i.qrImg,e.npT)},encapsulation:2,changeDetection:0})}}return t})();var oe=o(4207);function ae(t,d){if(1&t&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&t){const n=d.index;e.Y8G("value",n+1),e.R7$(1),e.JRh(n+1)}}function re(t,d){if(1&t&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&t){const n=d.index;e.Y8G("value",n+1),e.R7$(1),e.JRh(n+1)}}function le(t,d){if(1&t&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&t){const n=d.index;e.Y8G("value",n+1),e.R7$(1),e.JRh(n+1)}}function ce(t,d){if(1&t&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&t){const n=d.$implicit;e.Y8G("value",n),e.R7$(1),e.JRh(n)}}function me(t,d){if(1&t&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&t){const n=d.$implicit;e.Y8G("value",n.name),e.R7$(1),e.JRh(n.name)}}function pe(t,d){if(1&t&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&t){const n=d.$implicit;e.Y8G("value",n),e.R7$(1),e.JRh(n)}}function de(t,d){if(1&t&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&t){const n=d.$implicit;e.Y8G("value",n.name),e.R7$(1),e.JRh(n.name)}}function ue(t,d){if(1&t&&(e.qex(0),e.j41(1,"td"),e.EFF(2),e.nI1(3,"skillCostToString"),e.k0s(),e.j41(4,"td"),e.EFF(5),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.bVm()),2&t){const n=d.$implicit;e.R7$(1),e.xc7("color",n.cost?null:"transparent"),e.R7$(1),e.JRh(e.bMT(3,5,n.cost)),e.R7$(3),e.JRh(n.effect),e.R7$(2),e.JRh(n.target)}}function ge(t,d){1&t&&(e.j41(0,"td"),e.EFF(1,"-"),e.k0s(),e.j41(2,"td"),e.EFF(3,"-"),e.k0s(),e.j41(4,"td"),e.EFF(5,"-"),e.k0s())}const he=function(t){return{unique:t}};function fe(t,d){if(1&t){const n=e.RV6();e.qex(0,18),e.j41(1,"tr",19)(2,"td")(3,"select",20),e.bIt("change",function(){const m=e.eBV(n).$implicit,g=e.XpG();return e.Njj(m.controls.name.setValue(g.skills[m.controls.elem.value][0].name))}),e.j41(4,"option",21),e.EFF(5,"-"),e.k0s(),e.DNE(6,pe,2,2,"option",9),e.k0s()(),e.j41(7,"td")(8,"select",22),e.DNE(9,de,2,2,"option",9),e.k0s()(),e.DNE(10,ue,8,7,"ng-container",23),e.DNE(11,ge,6,0,"ng-template",null,24,e.C5r),e.k0s(),e.bVm()}if(2&t){const n=d.$implicit,s=d.index,i=e.sdS(12),m=e.XpG();e.Y8G("formGroupName",s),e.R7$(1),e.Y8G("ngClass",e.eq3(6,he,(m.compendium.getSkill(n.controls.name.value)||m.blankSkill).rank>90)),e.R7$(5),e.Y8G("ngForOf",m.elems),e.R7$(3),e.Y8G("ngForOf",m.skills[n.controls.elem.value]),e.R7$(1),e.Y8G("ngIf",m.compendium.getSkill(n.controls.name.value))("ngIfElse",i)}}let ve=(()=>{class t{constructor(n){this.fb=n,this.defaultRace="Fool",this.defaultDemon="Slime",this.demons={},this.skills={},this.dcodes={},this.scodes={},this.range99=Array(99),this.range299=Array(299),this.price=0,this.blankSkill={code:0,cost:0,level:0,rank:0,target:"Self",name:"-",element:"-",inherit:"-",effect:"-",learnedBy:[],transfer:[]},this.createForm()}ngOnChanges(){this.initDropdowns()}createForm(){const n=[];for(let s=0;s<6;s++)n.push(this.fb.group({elem:"-",name:"-"}));this.form=this.fb.group({language:"eng",lvl:1,hp:1,mp:1,race:this.defaultRace,demon:this.defaultDemon,skills:this.fb.array(n)}),this.form.valueChanges.subscribe(s=>{if(this.form.valid){const i=this.compendium.getDemon(s.demon),m=s.skills.map(L=>this.compendium.getSkill(L.name)||this.blankSkill),g={language:s.language,demonCode:i.code,lvl:parseInt(s.lvl,10),exp:-1,hp:parseInt(s.hp,10),mp:parseInt(s.mp,10),skillCodes:m.map(L=>L.code)},M=g.skillCodes.reduce((L,$e)=>0!==$e?L+1:L,0);this.price=10*Math.floor((800+120*g.lvl)*(1+.25*M)/10),this.passBytes=function ne(t,d){return d&&d.includes("2")?function se(t){const d=b.slice(),n=Array(25).fill(0),s=t.lvl,i=Math.floor((((-.0479755766*s+9.28700353)*s+71.9694228)*s-81.1026214)*s+.120783542),m=t.exp<0?i:t.exp;"jpn"!==t.language&&(d[6]=256-d[6]),n[0]=t.demonCode%256,n[1]=2*t.lvl+Math.floor(t.demonCode/256),n[2]=m%256,n[3]=Math.floor(m/256)%256,n[4]=Math.floor(m/65536);for(let g=0;g<6;g++)n[6+2*g]=t.skillCodes[g]%256,n[6+2*g+1]=Math.floor(t.skillCodes[g]/256);return n[22]=10*t.hp%256,n[23]=10*t.mp%16*16+Math.floor(t.hp/25.6),n[24]=Math.floor(t.mp/1.6),[].concat(d,H,z,ee,n,Array(21).fill(0))}(t):function te(t){const d="jpn"===t.language?K:W,n=Array(30).fill(0),s=t.lvl,i=Math.floor((((-.07600161*s+14.0603287)*s-.02256972)*s+.59031556)*s-1.87981906),m=t.exp<0?i:t.exp;n[0]=t.demonCode,n[2]=t.lvl,n[6]=m%256,n[7]=Math.floor(m/256)%256,n[8]=Math.floor(m/65536);for(let g=0;g<6;g++)n[10+2*g]=t.skillCodes[g]%256,n[10+2*g+1]=Math.floor(t.skillCodes[g]/256);return n[26]=10*t.hp%256,n[27]=Math.floor(t.hp/25.6),n[28]=10*t.mp%256,n[29]=Math.floor(t.mp/25.6),[].concat(b,H,d,Z,n,Array(40).fill(0))}(t)}(g,this.compConfig.appTitle)}})}initDropdowns(){if(this.demons={},this.skills={"-":[this.blankSkill]},this.dcodes={},this.scodes={0:this.blankSkill},this.compConfig&&this.compendium){for(const n of this.compendium.allDemons.filter(s=>s.code))this.demons[n.race]||(this.demons[n.race]=[]),this.demons[n.race].push(n),this.dcodes[n.code]=n;for(const n of this.compendium.allSkills.filter(s=>s.code))this.skills[n.element]||(this.skills[n.element]=[]),this.skills[n.element].push(n),this.scodes[n.code]=n;for(const n of Object.values(this.demons))n.sort((s,i)=>i.lvl-s.lvl);for(const n of Object.values(this.skills))n.sort((s,i)=>s.rank-i.rank);this.races=this.compConfig.races.filter(n=>this.demons[n]),this.elems=this.compConfig.skillElems.filter(n=>this.skills[n]),this.setDefaultValues(this.defaultDemon)}}changeRace(n){const s=this.demons[n][0];this.form.controls.demon.setValue(s.name),this.setDefaultValues(s.name)}setDefaultValues(n){const s=Array(6).fill(this.blankSkill),i=this.compendium.getDemon(n);let m=0;for(const[g,M]of Object.entries(i.skills))0===M&&(s[m++]=this.compendium.getSkill(g));this.form.patchValue({lvl:Math.floor(i.lvl),hp:i.stats[0],mp:i.stats[1],race:i.race,demon:i.name,skills:s.map(g=>({elem:g.element,name:g.name}))})}static{this.\u0275fac=function(s){return new(s||t)(e.rXU(q.ok))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-password-generator"]],inputs:{defaultRace:"defaultRace",defaultDemon:"defaultDemon",compendium:"compendium",compConfig:"compConfig"},features:[e.OA$],decls:69,vars:9,consts:[[3,"formGroup"],[1,"entry-table"],["colspan","2",1,"title"],[3,"byteArray"],["colspan","7",1,"title"],["formControlName","language"],["value","jpn"],["value","eng"],["formControlName","lvl"],[3,"value",4,"ngFor","ngForOf"],["formControlName","hp"],["formControlName","mp"],["formControlName","race",3,"change"],["formControlName","demon",3,"change"],["formArrayName","skills",1,"list-table"],["colspan","5",1,"title"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"value"],[3,"formGroupName"],[3,"ngClass"],["formControlName","elem",3,"change"],["value","-"],["formControlName","name"],[4,"ngIf","ngIfElse"],["noEntry",""]],template:function(s,i){1&s&&(e.j41(0,"form",0)(1,"h2"),e.EFF(2,"QR Code Generator"),e.k0s(),e.j41(3,"table",1)(4,"tr")(5,"th",2),e.EFF(6,"QR Code"),e.k0s()(),e.j41(7,"tr")(8,"td"),e.nrm(9,"app-qrcode",3),e.k0s()()(),e.j41(10,"table",1)(11,"tr")(12,"th",4),e.EFF(13,"Persona Entry"),e.k0s()(),e.j41(14,"tr")(15,"th"),e.EFF(16,"Price"),e.k0s(),e.j41(17,"th"),e.EFF(18,"Language"),e.k0s(),e.j41(19,"th"),e.EFF(20,"Level"),e.k0s(),e.j41(21,"th"),e.EFF(22,"HP"),e.k0s(),e.j41(23,"th"),e.EFF(24,"MP"),e.k0s(),e.j41(25,"th"),e.EFF(26,"Race"),e.k0s(),e.j41(27,"th"),e.EFF(28,"Demon"),e.k0s()(),e.j41(29,"tr")(30,"td"),e.EFF(31),e.k0s(),e.j41(32,"td")(33,"select",5)(34,"option",6),e.EFF(35,"Japanese"),e.k0s(),e.j41(36,"option",7),e.EFF(37,"English"),e.k0s()()(),e.j41(38,"td")(39,"select",8),e.DNE(40,ae,2,2,"option",9),e.k0s()(),e.j41(41,"td")(42,"select",10),e.DNE(43,re,2,2,"option",9),e.k0s()(),e.j41(44,"td")(45,"select",11),e.DNE(46,le,2,2,"option",9),e.k0s()(),e.j41(47,"td")(48,"select",12),e.bIt("change",function(){return i.changeRace(i.form.controls.race.value)}),e.DNE(49,ce,2,2,"option",9),e.k0s()(),e.j41(50,"td")(51,"select",13),e.bIt("change",function(){return i.setDefaultValues(i.form.controls.demon.value)}),e.DNE(52,me,2,2,"option",9),e.k0s()()()(),e.j41(53,"table",14)(54,"tr")(55,"th",15),e.EFF(56,"Learned Skills"),e.k0s()(),e.j41(57,"tr")(58,"th"),e.EFF(59,"Element"),e.k0s(),e.j41(60,"th"),e.EFF(61,"Name"),e.k0s(),e.j41(62,"th"),e.EFF(63,"Cost"),e.k0s(),e.j41(64,"th"),e.EFF(65,"Effect"),e.k0s(),e.j41(66,"th"),e.EFF(67,"Target"),e.k0s()(),e.DNE(68,fe,13,8,"ng-container",16),e.k0s()()),2&s&&(e.Y8G("formGroup",i.form),e.R7$(9),e.Y8G("byteArray",i.passBytes),e.R7$(22),e.JRh(i.price),e.R7$(9),e.Y8G("ngForOf",i.range99),e.R7$(3),e.Y8G("ngForOf",i.range299),e.R7$(3),e.Y8G("ngForOf",i.range99),e.R7$(3),e.Y8G("ngForOf",i.races),e.R7$(3),e.Y8G("ngForOf",i.demons[i.form.controls.race.value]),e.R7$(16),e.Y8G("ngForOf",i.form.controls.skills.controls))},dependencies:[D.YU,D.Sq,D.bT,q.qT,q.xH,q.y7,q.wz,q.BC,q.cb,q.j4,q.JD,q.$R,q.v8,ie,oe.X2],styles:["td[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}input[_ngcontent-%COMP%]{width:95%;border-width:3px}input.ng-valid[_ngcontent-%COMP%]{border-color:#0f0}input.ng-invalid[_ngcontent-%COMP%]{border-color:red}"],changeDetection:0})}}return t})(),Ce=(()=>{class t{constructor(n,s){this.fusionDataService=n,this.title=s,this.subscriptions=[],this.compConfig=this.fusionDataService.compConfig}ngOnInit(){this.setTitle(),this.subscribeAll()}ngOnDestroy(){this.unsubscribeAll()}setTitle(){this.title.setTitle(`QR Code Generator - ${this.fusionDataService.appName}`)}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(n=>{this.compendium=n}))}unsubscribeAll(){for(const n of this.subscriptions)n.unsubscribe()}static{this.\u0275fac=function(s){return new(s||t)(e.rXU(O.i),e.rXU(S.hE))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-password-generator-container"]],decls:1,vars:2,consts:[[3,"compendium","compConfig"]],template:function(s,i){1&s&&e.nrm(0,"app-password-generator",0),2&s&&e.Y8G("compendium",i.compendium)("compConfig",i.compConfig)},dependencies:[ve],encapsulation:2,changeDetection:0})}}return t})();var ke=o(6567),be=o(860);let ye=(()=>{class t extends ke.I{constructor(n,s){super(n,s),this.changeDetector=n,this.fusionDataService=s,this.appTitle=s.appName,this.lang=s.compConfig.lang}static{this.\u0275fac=function(s){return new(s||t)(e.rXU(e.gRc),e.rXU(O.i))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-fusion-settings-container"]],features:[e.Vt3],decls:1,vars:3,consts:[[3,"lang","appTitle","fusionSettings","toggledName"]],template:function(s,i){1&s&&(e.j41(0,"app-fusion-settings",0),e.bIt("toggledName",function(g){return i.toggleName(g)}),e.k0s()),2&s&&e.Y8G("lang",i.lang)("appTitle",i.appTitle)("fusionSettings",i.fusionSettings)},dependencies:[be.B],encapsulation:2,changeDetection:0})}}return t})();var Ee=o(1289);let Fe=(()=>{class t{constructor(n,s){this.fusionDataService=n,this.title=s,this.subscriptions=[],this.lang="en";const i=this.fusionDataService.compConfig,m=i.translations.en.indexOf(i.lang);this.maxSkills=i.hasDemonResists?8:2,this.lang=i.lang,this.recipeConfig={fissionCalculator:this.fusionDataService.fissionCalculator,fusionCalculator:this.fusionDataService.fusionCalculator,races:i.races,skillElems:i.skillElems,inheritElems:i.inheritElems,displayElems:i.skillElems.reduce((M,L)=>(M[L]=(M=>-1===m?M:(i.translations[M]||[])[m]||M)(L),M),{}),restrictInherits:!0,triExclusiveRaces:i.hasTripleFusion?["Fool","Tower","Moon","Sun","Judgement"]:[],triFissionCalculator:this.fusionDataService.triFissionCalculator,triFusionCalculator:this.fusionDataService.triFusionCalculator,defaultDemon:i.defaultDemon}}ngOnInit(){this.setTitle(),this.subscribeAll()}ngOnDestroy(){this.unsubscribeAll()}setTitle(){this.title.setTitle((0,_.oO)(h.hV.AppTitle,this.lang)+this.fusionDataService.appName)}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(n=>{this.compendium=n})),this.subscriptions.push(this.fusionDataService.squareChart.subscribe(n=>{this.squareChart=n}))}unsubscribeAll(){for(const n of this.subscriptions)n.unsubscribe()}static{this.\u0275fac=function(s){return new(s||t)(e.rXU(O.i),e.rXU(S.hE))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-recipe-generator-container"]],decls:1,vars:5,consts:[[3,"lang","maxSkills","compendium","squareChart","recipeConfig"]],template:function(s,i){1&s&&e.nrm(0,"app-recipe-generator",0),2&s&&e.Y8G("lang",i.lang)("maxSkills",i.maxSkills)("compendium",i.compendium)("squareChart",i.squareChart)("recipeConfig",i.recipeConfig)},dependencies:[Ee.h],encapsulation:2,changeDetection:0})}}return t})();var De=o(9981),Te=o(2649),Oe=o(3452),Re=o(6188),Se=o(131),je=o(6947),Pe=o(9023);const Ge=[{path:"",redirectTo:"personas",pathMatch:"full"},{path:"",component:j,data:{fusionTool:"chart"},children:[{path:"chart",component:(()=>{class t{constructor(n,s){this.changeDetectorRef=n,this.fusionTrioService=s,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.fusionTrioService.squareChart.subscribe(n=>{this.normChart=n.normalChart,this.tripChart=n.tripleChart}))}ngOnDestroy(){for(const n of this.subscriptions)n.unsubscribe()}static{this.\u0275fac=function(s){return new(s||t)(e.rXU(e.gRc),e.rXU(je.eG))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-triple-fusion-chart"]],decls:1,vars:4,consts:[[3,"normChart","tripChart","normTitle","tripTitle"]],template:function(s,i){1&s&&e.nrm(0,"app-fusion-chart",0),2&s&&e.Y8G("normChart",i.normChart)("tripChart",i.tripChart)("normTitle","Normal Fusions")("tripTitle","Triple Fusions")},dependencies:[Pe.q],encapsulation:2,changeDetection:0})}}return t})()}]},{path:"",component:j,children:[{path:"personas/:demonName",component:a,children:[{path:"fissions/triple",component:Re.X},{path:"fusions/triple",component:Se.W},{path:"fissions",component:Te.J},{path:"fusions",component:Oe.y},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"shadows/:demonName",component:a},{path:"personas",component:v},{path:"shadows",component:v,data:{showShadows:!0}},{path:"skills",component:l},{path:"qrcodes",component:Ce},{path:"recipes",component:Fe},{path:"settings",component:ye},{path:"previews",component:De.$v}]},{path:"**",redirectTo:"personas",pathMatch:"full"}];let _e=(()=>{class t{static{this.\u0275fac=function(s){return new(s||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[w.iI.forChild(Ge),w.iI]})}}return t})()},7269:(J,Y,o)=>{o.d(Y,{i:()=>I});var w=o(4412);class _{constructor(r,p){this.compConfig=r,this.specialRecipes={},this.initImportedData(),this.updateDerivedData(p)}initImportedData(){const r={},p={},f={},C={},R={},E={},N={},c={},T=this.compConfig.hasDemonResists,P="-".repeat(this.compConfig.resistElems.length),V="-".repeat(this.compConfig.ailmentElems.length);for(const[k,F]of Object.entries(this.compConfig.resistCodes))N[k]=(F/1e4|0)<<10,c[k]=F%1e4/2.5|0;const A=(k,F,a)=>(k||F).split("").map((b,G)=>N[b]+(a?.[G]/2.5|0||c[b]));for(const k of this.compConfig.demonData)for(const[F,a]of Object.entries(k)){const b=Object.values(a.skills).reduce((B,X)=>0===X?B+1:B,0),G=10*Math.floor((800+120*a.lvl)*(1+.25*b)/10),H=this.compConfig.inheritTypes[a.inherit||a.inherits];r[F]={name:F,race:a.race,lvl:a.lvl,currLvl:a.lvl,price:a.price||G,inherits:H.reduce((B,X)=>2*B+(X>0?1:0),0),affinities:H,stats:a.stats,skills:a.skills,resists:T?A(a.resists,P,a.resmods):[],ailments:T?A(a.ailments,V,a.ailmods):[],code:a.code||0,fusion:a.fusion||"normal",prereq:""}}for(const{conditions:k}of this.compConfig.demonUnlocks)for(const[F,a]of Object.entries(k))for(const b of F.split(","))r[b].prereq=a;for(const k of this.compConfig.enemyData)for(const[F,a]of Object.entries(k))p[F]={name:F,race:a.race,lvl:a.lvl,currLvl:a.lvl,price:0,inherits:0,stats:a.stats,resists:T?A(a.resists,P,a.resmods):[],ailments:T?A(a.ailments,V,a.ailmods):[],skills:a.skills.reduce((b,G)=>(b[G]=0,b),{}),area:a.area,drop:a.drops?.join(", ")||"-",code:0,fusion:"normal",isEnemy:!0};for(const[k,F]of Object.entries(this.compConfig.specialRecipes)){const a=F;if(C[k]=a,r[k].fusion="special",2===a.length)for(const b of a)E[b]||(E[b]=[]),E[b].push(k)}for(const k of this.compConfig.skillData)for(const[F,a]of Object.entries(k))f[F]={name:F,element:a.elem||a.element,cost:a.cost||0,rank:a.unique?99:a.rank||(1023&a.cost)/100||1,effect:a.effect,target:a.target||"Self",learnedBy:[],transfer:[],code:a.code||0,level:0},a.card&&(f[F].transfer=a.card.split(", ").map(b=>({demon:b,level:-100})));for(const k of this.compConfig.races)R[k]={};for(const k of Object.values(r).sort((F,a)=>F.lvl-a.lvl)){"party"!==k.fusion&&(R[k.race][k.lvl]=k.name);for(const[F,a]of Object.entries(k.skills))f[F].learnedBy.push({demon:k.name,level:a})}this.demons=r,this.enemies=p,this.skills=f,this.specialRecipes=C,this.invertedDemons=R,this.invertedSpecials=E}updateDerivedData(r){const p=Object.assign({},this.demons),f=[],C={},R={};for(const c of Object.values(this.skills))c.learnedBy.length<1&&c.transfer.length<1?c.rank=99:f.push(c);for(const c of this.compConfig.races)C[c]=[],R[c]=[];for(const[c,T]of Object.entries(this.demons))"party"!==T.fusion&&(C[T.race].push(T.lvl),this.specialRecipes.hasOwnProperty(c)||R[T.race].push(T.lvl));for(const c of this.compConfig.races)C[c].sort((T,P)=>T-P),R[c].sort((T,P)=>T-P);for(const[c,T]of Object.entries(r))if(!T){const{race:P,lvl:V}=this.demons[c];delete p[c],C[P]=C[P].filter(A=>A!==V),R[P]=R[P].filter(A=>A!==V)}const E=Object.keys(p).map(c=>p[c]),N=Object.keys(this.enemies).map(c=>this.enemies[c]);this._allDemons=N.concat(E),this._allSkills=f,this.allIngredients=C,this.allResults=R}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return Object.keys(this.specialRecipes).map(r=>this.demons[r])}getDemon(r){return this.demons[r]||this.enemies[r]}getSkill(r){return this.skills[r]}getSkills(r){const p=this.compConfig.elemOrder,f=r.map(C=>this.skills[C]);return f.sort((C,R)=>1e4*(p[C.element]-p[R.element])+C.rank-R.rank),f}getIngredientDemonLvls(r){return this.allIngredients[r]||[]}getResultDemonLvls(r){return this.allResults[r]||[]}getSpecialNameEntries(r){return this.specialRecipes[r]||[]}getSpecialNamePairs(r){return[]}reverseLookupDemon(r,p){return this.invertedDemons[r][p]}reverseLookupSpecial(r){return this.invertedSpecials[r]||[]}isElementDemon(r){return!1}updateFusionSettings(r){this.updateDerivedData(r)}}var h=o(5990),e=o(6947),O=o(7396),D=o(7605),U=o(7178),j=o(609),y=o(1939),S=o(2755),v=o(2598),$=o(8935);let I=(()=>{class l extends j.d{constructor(p,f){const C=f.url.split("/"),R=Object.keys(p.configs)[0],E=p.configs[C[2]||C[1]]||p.configs[C[1]]||p.configs[R],N=E.translations.en.includes(C[1])?C[1]:"en",c="en"===N?E:function u(l,r){const p=l.translations.en.indexOf(r);if(-1===p)return l;const f=Object.entries(l.translations).reduce((E,[N,c])=>(E[N]=c[p],E),{}),C=E=>f[E]||E,R=l.races.map(C);return{appTitle:C(l.appTitle),translations:l.translations,lang:r,races:R,raceOrder:l.raceOrder,appCssClasses:l.appCssClasses,skillData:l.skillData.map(E=>(0,S.en)(E,f)),skillElems:l.skillElems,ailmentElems:l.ailmentElems,elemOrder:l.elemOrder,resistCodes:l.resistCodes,demonData:l.demonData.map(E=>(0,S.C_)(E,f)),baseStats:l.baseStats.map(C),resistElems:l.resistElems,inheritTypes:l.inheritTypes,inheritElems:l.inheritElems,demonUnlocks:(0,S.tQ)(l.demonUnlocks,f),enemyData:l.enemyData.map(E=>(0,S.C_)(E,f)),enemyStats:l.enemyStats.map(C),normalTable:(0,S.ji)(l.normalTable,f),hasTripleFusion:l.hasTripleFusion,hasDemonResists:l.hasDemonResists,hasSkillRanks:l.hasSkillRanks,hasEnemies:l.hasEnemies,hasQrcodes:l.hasQrcodes,hasSkillCards:l.hasSkillCards,hasManualInheritance:l.hasManualInheritance,specialRecipes:(0,S.Fr)(l.specialRecipes,f),defaultDemon:C(l.defaultDemon),settingsKey:`${l.settingsKey}-${r}`,settingsVersion:l.settingsVersion}}(E,N),T=new h.D(c.normalTable,c.races),P=new y.U(c.demonUnlocks,[]);super(new _(c,P.demonToggles),T,P,c.settingsKey,c.settingsVersion),this.fissionCalculator=e.RT,this.fusionCalculator=e.Se,this.triFissionCalculator=e.I4,this.triFusionCalculator=e.zm,this.compConfig=c,this.appName=c.appTitle+" Fusion Calculator",this._tripleChart=new h.D(c.normalTable,c.races,!0),this._squareChart$=new w.t({normalChart:T,tripleChart:this._tripleChart,raceOrder:c.raceOrder}),this.squareChart=this._squareChart$.asObservable(),c.appCssClasses.includes("p5t")&&(this.fissionCalculator=new O.s([U.Hr],[]),this.fusionCalculator=new O.s([D.Cx],[]))}static{this.\u0275fac=function(f){return new(f||l)(v.KVO(e.HI),v.KVO($.Ix))}}static{this.\u0275prov=v.jDH({token:l,factory:l.\u0275fac})}}return l})()},159:(J,Y,o)=>{o.d(Y,{v:()=>U});var w=o(4341),_=o(177),h=o(3887),e=o(9447),O=o(2753),D=o(2598);let U=(()=>{class j{static forRoot(){return{ngModule:j}}static{this.\u0275fac=function(u){return new(u||j)}}static{this.\u0275mod=D.$C({type:j})}static{this.\u0275inj=D.G2t({imports:[_.MD,h.G,w.X1,e.SharedCompendiumModule,O.S]})}}return j})()}}]);