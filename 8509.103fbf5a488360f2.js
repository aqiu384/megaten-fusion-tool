"use strict";(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[8509],{5939:(P,_,o)=>{o.d(_,{RL:()=>D,gQ:()=>f});var k=o(7548),e=o(6404),m=o(4769),C=o(6814);function g(t,h){if(1&t&&(m.TgZ(0,"tr")(1,"th"),m._uU(2),m.qZA()()),2&t){const n=h.$implicit;m.xp6(2),m.Oqu(n)}}let y=(()=>{class t{ngOnChanges(){if(this.compendium&&this.pairChart&&(this.trioChart||!this.trioCalculator)){const n=[];for(const r of this.compendium.allDemons.filter(u=>!u.isEnemy)){const u=this.compendium.getSpecialNameEntries(r.name);if(u.length>0){n.push(`${r.name} = ${u.join(" x ")}`);continue}const p=this.pairCalculator.getFusions(r.name,this.compendium,this.pairChart).map(v=>(0,e.S6)(v,this.compendium));if(p.length>0&&(p.filter(v=>v.race1!==r.race).length>0||!this.trioCalculator||0===this.trioCalculator.getFusions(r.name,this.compendium,this.trioChart).length)){p.sort((O,T)=>O.price-T.price);const v=p.slice(0,3).map(O=>`${O.name1} x ${O.name2}`).join(", ");n.push(`${r.name} = ${v}`+(p.length>3?`, ${p.length-3} more...`:""))}else{if(this.trioCalculator){const v=this.trioCalculator.getFusions(r.name,this.compendium,this.trioChart).map(O=>(0,e.Aw)(O,this.compendium)).filter(O=>O.d1.race!==r.race);if(v.length>0){v.sort((T,d)=>T.price-d.price);const O=v.slice(0,3).map(T=>`${T.d1.name} x ${T.d2.name} x ${T.d3.name}`).join(", ");n.push(`${r.name} = ${O}`+(v.length>3?`, ${v.length-3} more...`:""));continue}}n.push(r.prereq?`${r.name} = ${r.prereq}`:`${r.name} = No fusions found!`)}}this.fissionPreviews=n}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=m.Xpm({type:t,selectors:[["app-fission-preview-table"]],inputs:{pairCalculator:"pairCalculator",trioCalculator:"trioCalculator",pairChart:"pairChart",trioChart:"trioChart",compendium:"compendium"},features:[m.TTD],decls:6,vars:1,consts:[[1,"entry-table"],[1,"title"],[4,"ngFor","ngForOf"]],template:function(r,u){1&r&&(m.TgZ(0,"table",0)(1,"tbody")(2,"tr")(3,"th",1),m._uU(4,"Fission Previews"),m.qZA()(),m.YNc(5,g,3,1,"tr",2),m.qZA()()),2&r&&(m.xp6(5),m.Q6J("ngForOf",u.fissionPreviews))},dependencies:[C.sg],encapsulation:2,changeDetection:0})}return t})(),D=(()=>{class t{constructor(n){this.fusionDataService=n,this.subscriptions=[]}ngOnInit(){this.calculator=this.fusionDataService.fissionCalculator,this.subscriptions.push(this.fusionDataService.compendium.subscribe(n=>{this.compendium=n})),this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(n=>{this.fusionChart=n}))}ngOnDestroy(){for(const n of this.subscriptions)n.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)(m.Y36(k.vE))};static#t=this.\u0275cmp=m.Xpm({type:t,selectors:[["app-smt-fission-preview"]],decls:2,vars:3,consts:[[3,"pairCalculator","pairChart","compendium"]],template:function(r,u){1&r&&(m.TgZ(0,"app-fission-preview-table",0),m._UZ(1,"app-fission-preview-table"),m.qZA()),2&r&&m.Q6J("pairCalculator",u.calculator)("pairChart",u.fusionChart)("compendium",u.compendium)},dependencies:[y],encapsulation:2,changeDetection:0})}return t})(),f=(()=>{class t{constructor(n){this.fusionTrioService=n,this.subscriptions=[]}ngOnInit(){this.pairCalculator=this.fusionTrioService.fissionCalculator,this.trioCalculator=this.fusionTrioService.triFissionCalculator,this.subscriptions.push(this.fusionTrioService.compendium.subscribe(n=>{this.compendium=n})),this.subscriptions.push(this.fusionTrioService.squareChart.subscribe(n=>{this.fusionChart=n}))}ngOnDestroy(){for(const n of this.subscriptions)n.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)(m.Y36(k.Ir))};static#t=this.\u0275cmp=m.Xpm({type:t,selectors:[["app-trio-fission-preview"]],decls:2,vars:5,consts:[[3,"pairCalculator","trioCalculator","pairChart","trioChart","compendium"]],template:function(r,u){1&r&&(m.TgZ(0,"app-fission-preview-table",0),m._UZ(1,"app-fission-preview-table"),m.qZA()),2&r&&m.Q6J("pairCalculator",u.pairCalculator)("trioCalculator",u.trioCalculator)("pairChart",u.fusionChart.normalChart)("trioChart",u.fusionChart)("compendium",u.compendium)},dependencies:[y],encapsulation:2,changeDetection:0})}return t})()},9052:(P,_,o)=>{o.d(_,{m:()=>C});var k=o(7548),e=o(4769),m=o(8615);let C=(()=>{class g{constructor(D,f){this.changeDetectorRef=D,this.fusionTrioService=f,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.fusionTrioService.squareChart.subscribe(D=>{this.normChart=D.normalChart,this.tripChart=D.tripleChart}))}ngOnDestroy(){for(const D of this.subscriptions)D.unsubscribe()}static#e=this.\u0275fac=function(f){return new(f||g)(e.Y36(e.sBO),e.Y36(k.Ir))};static#t=this.\u0275cmp=e.Xpm({type:g,selectors:[["app-triple-fusion-chart"]],decls:1,vars:4,consts:[[3,"normChart","tripChart","normTitle","tripTitle"]],template:function(f,t){1&f&&e._UZ(0,"app-fusion-chart",0),2&f&&e.Q6J("normChart",t.normChart)("tripChart",t.tripChart)("normTitle","Normal Fusions")("tripTitle","Triple Fusions")},dependencies:[m.R],encapsulation:2,changeDetection:0})}return g})()},2812:(P,_,o)=>{o.d(_,{t:()=>e});var k=o(6262);class e extends k.g{constructor(C,g,y){super(),this.elementDemons=[],this.lvlModifier=.5,this.initCharts(C,y)}initCharts(C,g){const y=C.races,D=C.table,f=[];for(let t=0;t<y.length;t++)f.push(D[t].slice(g?0:t,g?t+1:y.length)),g||(f[t][0]="-");this.races=y,this.lvlModifier=g?4.25:.5,this.fissionChart=k.g.loadFissionTableJson(y,this.elementDemons,f),this.fusionChart=k.g.loadFusionTableJson(y,f),this.elementChart={}}}},4806:(P,_,o)=>{o.d(_,{V:()=>W});var k=o(4487),e=o(4769),m=o(8166),C=o(6814),g=o(5390);let y=(()=>{class c{constructor(s){this.appCssClasses=s.compConfig.appCssClasses,this.otherLinks=[{title:"Shadow List",link:"shadows"}],s.compConfig.hasManualInheritance&&this.otherLinks.push({title:"Recipe Generator",link:"recipes"})}static#e=this.\u0275fac=function(l){return new(l||c)(e.Y36(m.Y))};static#t=this.\u0275cmp=e.Xpm({type:c,selectors:[["app-p4-compendium"]],decls:1,vars:4,consts:[[3,"ngClass","hasSettings","mainList","otherLinks"]],template:function(l,a){1&l&&e._UZ(0,"app-demon-compendium",0),2&l&&e.Q6J("ngClass",a.appCssClasses)("hasSettings",!1)("mainList","persona")("otherLinks",a.otherLinks)},dependencies:[C.mk,g.e],styles:[".p3 div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p3 div.element-icon.i28716,.p3 div.element-icon.sla{background-image:url(/assets/images/p5/sword.png)}.p3 div.element-icon.i28717,.p3 div.element-icon.str{background-image:url(/assets/images/p5/phys.png)}.p3 div.element-icon.i28718,.p3 div.element-icon.pie{background-image:url(/assets/images/p5/gun.png)}.p3 div.element-icon.i30972,.p3 div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p3 div.element-icon.i29948,.p3 div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p3 div.element-icon.i29436,.p3 div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p3 div.element-icon.i29180,.p3 div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p3 div.element-icon.i4012,.p3 div.element-icon.lig{background-image:url(/assets/images/p5/bless.png)}.p3 div.element-icon.i32624,.p3 div.element-icon.dar{background-image:url(/assets/images/p5/curse.png)}.p3 div.element-icon.i3956,.p3 div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.p3 div.element-icon.i4093,.p3 div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p3 div.element-icon.i32764,.p3 div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p3 div.element-icon.i4092,.p3 div.element-icon.spa,.p3 div.element-icon.spb,.p3 div.element-icon.spe{background-image:url(/assets/images/p5/trait.png)}.p3 div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p3 div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.p3 th.title,.p3 th.nav.active,.p3 th.nav.active a{color:#000;background-color:#4372aa}.p4 div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p4 div.element-icon.i2166,.p4 div.element-icon.phy{background-image:url(/assets/images/p5/phys.png)}.p4 div.element-icon.i3582,.p4 div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p4 div.element-icon.i3070,.p4 div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p4 div.element-icon.i3966,.p4 div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p4 div.element-icon.i3838,.p4 div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p4 div.element-icon.i2006,.p4 div.element-icon.lig{background-image:url(/assets/images/p5/bless.png)}.p4 div.element-icon.i1978,.p4 div.element-icon.dar{background-image:url(/assets/images/p5/curse.png)}.p4 div.element-icon.i1979,.p4 div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.p4 div.element-icon.i2014,.p4 div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p4 div.element-icon.i4094,.p4 div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p4 div.element-icon.spa,.p4 div.element-icon.spe{background-image:url(/assets/images/p5/trait.png)}.p4 div.element-icon.i4095,.p4 div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p4 div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.p4 th.title,.p4 th.nav.active,.p4 th.nav.active a{color:#000;background-color:#ffe600}\n"],encapsulation:2,changeDetection:0})}return c})();var D=o(1032),f=o(6593),t=o(4101);let h=(()=>{class c extends D.l{constructor(s,l,a,S){super(s,a,S),this.showAllies=!l.snapshot.data.showShadows,this.showEnemies=!this.showAllies,this.compConfig=S.compConfig,this.defaultSortFun=(A,B)=>200*(this.compConfig.raceOrder[A.race]-this.compConfig.raceOrder[B.race])+B.lvl-A.lvl,this.appName=`List of Personas - ${S.appName}`,this.statHeaders=this.compConfig.baseStats,this.resistHeaders=this.compConfig.resistElems,this.inheritOrder=this.compConfig.elemOrder,this.showEnemies&&(this.appName=`List of Shadows - ${S.appName}`,this.statHeaders=this.compConfig.enemyStats,this.resistHeaders=this.compConfig.enemyResists,this.inheritOrder=null)}static#e=this.\u0275fac=function(l){return new(l||c)(e.Y36(f.Dx),e.Y36(k.gz),e.Y36(e.sBO),e.Y36(m.Y))};static#t=this.\u0275cmp=e.Xpm({type:c,selectors:[["app-demon-list-container"]],features:[e.qOj],decls:2,vars:9,consts:[[3,"isEnemy","hasCurrLvl","raceOrder","statHeaders","resistHeaders","inheritOrder","rowData"]],template:function(l,a){1&l&&(e._UZ(0,"app-smt-demon-list",0),e.ALo(1,"async")),2&l&&e.Q6J("isEnemy",a.showEnemies)("hasCurrLvl",!a.showEnemies)("raceOrder",a.compConfig.raceOrder)("statHeaders",a.statHeaders)("resistHeaders",a.resistHeaders)("inheritOrder",a.inheritOrder)("rowData",e.lcZ(1,7,a.demons))},dependencies:[t.Q,C.Ov],encapsulation:2,changeDetection:0})}return c})();var n=o(4330),r=o(3934);let u=(()=>{class c extends n.e{constructor(s,l,a){super(s,l,a),this.compConfig=a.compConfig,this.appName=`List of Skills - ${a.appName}`,this.transferTitle=this.compConfig.hasSkillCards?"Skill Card":"",this.defaultSortFun=(S,A)=>1e4*(this.compConfig.elemOrder[S.element]-this.compConfig.elemOrder[A.element])+S.rank-A.rank}static#e=this.\u0275fac=function(l){return new(l||c)(e.Y36(f.Dx),e.Y36(e.sBO),e.Y36(m.Y))};static#t=this.\u0275cmp=e.Xpm({type:c,selectors:[["app-skill-list-container"]],features:[e.qOj],decls:2,vars:7,consts:[[3,"elemOrder","isPersona","transferTitle","hasTarget","rowData"]],template:function(l,a){1&l&&(e._UZ(0,"app-smt-skill-list",0),e.ALo(1,"async")),2&l&&e.Q6J("elemOrder",a.compConfig.elemOrder)("isPersona",!0)("transferTitle",a.transferTitle)("hasTarget",!0)("rowData",e.lcZ(1,5,a.skills))},dependencies:[r.J,C.Ov],encapsulation:2,changeDetection:0})}return c})();var p=o(7880),E=o(8520),v=o(1009),O=o(755),T=o(9012),d=o(4069),$=o(8711);const i=function(){return["HP","MP"]};let b=(()=>{class c{static#e=this.\u0275fac=function(l){return new(l||c)};static#t=this.\u0275cmp=e.Xpm({type:c,selectors:[["app-enemy-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig"},decls:19,vars:15,consts:[[3,"title","statHeaders","stats"],[1,"entry-table"],["colspan","2",1,"title"],[3,"resistHeaders","resists","ailmentHeaders","ailments"],[3,"hasRank","hasTarget","elemOrder","compendium","skillLevels"]],template:function(l,a){1&l&&(e._UZ(0,"app-demon-stats",0),e.TgZ(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),e._uU(5,"Appearances"),e.qZA()(),e.TgZ(6,"tr")(7,"th"),e._uU(8,"Areas"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Drops"),e.qZA()()(),e.TgZ(11,"tbody")(12,"tr")(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA()()()(),e._UZ(17,"app-demon-resists",3)(18,"app-demon-skills",4)),2&l&&(e.Q6J("title","Lvl "+a.demon.lvl+" "+a.demon.race+" "+a.demon.name)("statHeaders",e.DdM(14,i).concat(a.compConfig.baseStats))("stats",a.demon.stats.concat(a.demon.estats)),e.xp6(14),e.Oqu(a.demon.area),e.xp6(2),e.Oqu(a.demon.drop),e.xp6(1),e.Q6J("resistHeaders",a.compConfig.resistElems)("resists",a.demon.resists)("ailmentHeaders",a.compConfig.ailmentElems)("ailments",a.demon.ailments),e.xp6(1),e.Q6J("hasRank",!0)("hasTarget",!0)("elemOrder",a.compConfig.elemOrder)("compendium",a.compendium)("skillLevels",a.demon.skills))},dependencies:[E.O,v.I,O.n],encapsulation:2,changeDetection:0})}return c})();function w(c,M){if(1&c&&(e.ynx(0),e._UZ(1,"app-demon-stats",2)(2,"app-demon-resists",3)(3,"app-demon-inherits",4)(4,"app-demon-skills",5)(5,"app-smt-fusions",6),e.BQk()),2&c){const s=e.oxw();e.xp6(1),e.Q6J("title","Lvl "+s.demon.lvl+" "+s.demon.race+" "+s.demon.name)("price",s.demon.price)("statHeaders",s.compConfig.baseStats)("stats",s.demon.stats)("inherits",s.demon.inherits),e.xp6(1),e.Q6J("resistHeaders",s.compConfig.resistElems)("resists",s.demon.resists),e.xp6(1),e.Q6J("hasChance",!s.compConfig.hasManualInheritance)("inheritHeaders",s.compConfig.affinityElems)("inherits",s.demon.affinities),e.xp6(1),e.Q6J("hasRank",!0)("hasTarget",!0)("elemOrder",s.compConfig.elemOrder)("compendium",s.compendium)("skillLevels",s.demon.skills),e.xp6(1),e.Q6J("hasTripleFusion",!0)}}function L(c,M){if(1&c&&e._UZ(0,"app-demon-missing",7),2&c){const s=e.oxw();e.Q6J("name",s.name)}}function R(c,M){if(1&c&&e._UZ(0,"app-demon-entry",1),2&c){const s=e.oxw();e.Q6J("name",s.name)("demon",s.demon)("compConfig",s.compConfig)("compendium",s.compendium)}}function F(c,M){if(1&c&&e._UZ(0,"app-enemy-entry",1),2&c){const s=e.oxw();e.Q6J("name",s.name)("demon",s.demon)("compConfig",s.compConfig)("compendium",s.compendium)}}let I=(()=>{class c{static#e=this.\u0275fac=function(l){return new(l||c)};static#t=this.\u0275cmp=e.Xpm({type:c,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"title","price","statHeaders","stats","inherits"],[3,"resistHeaders","resists"],[3,"hasChance","inheritHeaders","inherits"],[3,"hasRank","hasTarget","elemOrder","compendium","skillLevels"],[3,"hasTripleFusion"],[3,"name"]],template:function(l,a){1&l&&(e.YNc(0,w,6,16,"ng-container",0),e.YNc(1,L,1,1,"app-demon-missing",1)),2&l&&(e.Q6J("ngIf",a.demon),e.xp6(1),e.Q6J("ngIf",!a.demon))},dependencies:[C.O5,p.t,E.O,v.I,O.n,T.N,d.O],encapsulation:2,changeDetection:0})}return c})(),N=(()=>{class c{constructor(s,l,a,S){this.route=s,this.title=l,this.currentDemonService=a,this.fusionDataService=S,this.subscriptions=[],this.appName="Test App",this.appName=S.appName,this.compConfig=S.compConfig}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const s of this.subscriptions)s.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(s=>{this.compendium=s,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(s=>{this.name=s,this.getDemonEntry()})),this.route.params.subscribe(s=>{this.currentDemonService.nextCurrentDemon(s.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(`${this.name} - ${this.appName}`),this.demon=this.compendium.getDemon(this.name))}static#e=this.\u0275fac=function(l){return new(l||c)(e.Y36(k.gz),e.Y36(f.Dx),e.Y36($.s),e.Y36(m.Y))};static#t=this.\u0275cmp=e.Xpm({type:c,selectors:[["app-demon-entry-container"]],decls:2,vars:2,consts:[[3,"name","demon","compConfig","compendium",4,"ngIf"],[3,"name","demon","compConfig","compendium"]],template:function(l,a){1&l&&(e.YNc(0,R,1,4,"app-demon-entry",0),e.YNc(1,F,1,4,"app-enemy-entry",0)),2&l&&(e.Q6J("ngIf",!a.demon||!a.demon.isEnemy),e.xp6(1),e.Q6J("ngIf",a.demon&&a.demon.isEnemy))},dependencies:[C.O5,I,b],encapsulation:2,changeDetection:0})}return c})();var U=o(4436);let Z=(()=>{class c{constructor(s,l){this.fusionDataService=s,this.title=l,this.subscriptions=[],this.maxSkills=8;const a=this.fusionDataService.compConfig;this.recipeConfig={fissionCalculator:this.fusionDataService.fissionCalculator,fusionCalculator:this.fusionDataService.fusionCalculator,races:a.races,skillElems:a.skillElems,inheritElems:a.affinityElems,displayElems:{},restrictInherits:!0,triExclusiveRaces:["Fool","Fortune","Tower","Judgement","Aeon","Jester"],triFissionCalculator:this.fusionDataService.triFissionCalculator,triFusionCalculator:this.fusionDataService.triFusionCalculator,defaultDemon:"Pixie"}}ngOnInit(){this.setTitle(),this.subscribeAll()}ngOnDestroy(){this.unsubscribeAll()}setTitle(){this.title.setTitle(`Recipe Generator - ${this.fusionDataService.appName}`)}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(s=>{this.compendium=s})),this.subscriptions.push(this.fusionDataService.squareChart.subscribe(s=>{this.squareChart=s}))}unsubscribeAll(){for(const s of this.subscriptions)s.unsubscribe()}static#e=this.\u0275fac=function(l){return new(l||c)(e.Y36(m.Y),e.Y36(f.Dx))};static#t=this.\u0275cmp=e.Xpm({type:c,selectors:[["app-recipe-generator-container"]],decls:1,vars:4,consts:[[3,"maxSkills","compendium","squareChart","recipeConfig"]],template:function(l,a){1&l&&e._UZ(0,"app-recipe-generator",0),2&l&&e.Q6J("maxSkills",a.maxSkills)("compendium",a.compendium)("squareChart",a.squareChart)("recipeConfig",a.recipeConfig)},dependencies:[U.X],encapsulation:2,changeDetection:0})}return c})();var J=o(5939),Y=o(5657),j=o(4689),x=o(6857),H=o(4170);const K=[{path:"",redirectTo:"personas",pathMatch:"full"},{path:"",component:y,data:{fusionTool:"chart"},children:[{path:"chart",component:o(9052).m}]},{path:"",component:y,children:[{path:"shadows/:demonName",component:N},{path:"personas/:demonName",component:N,children:[{path:"fissions/triple",component:x.p},{path:"fusions/triple",component:H.n},{path:"fissions",component:Y.t},{path:"fusions",component:j.$},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"personas",component:h},{path:"shadows",component:h,data:{showShadows:!0}},{path:"skills",component:u},{path:"recipes",component:Z},{path:"previews",component:J.gQ}]},{path:"**",redirectTo:"personas",pathMatch:"full"}];let W=(()=>{class c{static#e=this.\u0275fac=function(l){return new(l||c)};static#t=this.\u0275mod=e.oAB({type:c});static#s=this.\u0275inj=e.cJS({imports:[k.Bz.forChild(K),k.Bz]})}return c})()},8166:(P,_,o)=>{o.d(_,{Y:()=>D});var k=o(5619);class e{constructor(t){this.compConfig=t,this.specialRecipes={},this.initImportedData(),this.updateDerivedData()}initImportedData(){const t={},h={},n={},r={},u={},p={},E={},v={},O="-".repeat(this.compConfig.ailmentElems.length);for(const[d,$]of Object.entries(this.compConfig.resistCodes))E[d]=($/1e4|0)<<10,v[d]=$%1e4/2.5|0;const T=(d,$,i)=>(d||$).split("").map((b,w)=>E[b]+(i?.[w]/2.5|0||v[b]));for(const d of this.compConfig.demonData)for(const[$,i]of Object.entries(d))t[$]={name:$,race:i.race,lvl:i.lvl,currLvl:i.lvl,cardLvl:i.cardlvl||0,price:Math.pow(i.stats.reduce((b,w)=>w+b,0),2)+2e3,inherits:parseInt((i.affinities||[0]).map(b=>b>0?1:0).join(""),2),affinities:i.affinities,stats:i.stats,resists:T(i.resists,i.resists,i.resmods),ailments:T(i.ailments,O,i.ailmods),skills:i.skills,fusion:i.fusion||"normal",prereq:i.prereq||""};for(const d of this.compConfig.enemyData)for(const[$,i]of Object.entries(d)){let b=[];i.material&&"-"!==i.material&&b.push(i.material),i.gem&&"-"!==i.gem&&b.push(i.gem),i.drops&&(b=b.concat(i.drops)),b.length||b.push("-"),h[$]={name:$,race:i.race,lvl:i.lvl,currLvl:i.lvl,cardLvl:0,price:0,inherits:0,stats:i.stats.slice(0,2),estats:i.stats.slice(2),resists:T(i.resists,i.resists,i.resmods),ailments:T(i.ailments,O,i.ailmods),skills:i.skills.reduce((w,L)=>(w[L]=0,w),{}),fusion:"normal",area:i.area,drop:b.join(", "),isEnemy:!0}}for(const d of this.compConfig.skillData)for(const[$,i]of Object.entries(d))n[$]={name:$,element:i.element,cost:i.cost||0,rank:i.rank||99,effect:i.power?"\u221a"+i.power+" power"+(i.effect?", "+i.effect:""):i.effect,target:i.target||"Self",learnedBy:[],transfer:[],level:0},i.card&&(n[$].transfer=i.card.split(", ").map(b=>({demon:b,level:t[b]?t[b].cardLvl:-100})));for(const[d,$]of Object.entries(this.compConfig.specialRecipes)){const i=$;if(r[d]=i,t[d].fusion="special",2===i.length)for(const b of i)p[b]||(p[b]=[]),p[b].push(d)}for(const d of this.compConfig.races)u[d]={};for(const d of Object.values(t).sort(($,i)=>$.lvl-i.lvl)){"party"!==d.fusion&&(u[d.race][d.lvl]=d.name);for(const[$,i]of Object.entries(d.skills))n[$].learnedBy.push({demon:d.name,level:i})}this.demons=t,this.enemies=h,this.skills=n,this.specialRecipes=r,this.invertedDemons=u,this.invertedSpecials=p}updateDerivedData(){const t={},h={},n=[];for(const p of Object.values(this.skills))p.learnedBy.length<1?p.rank=99:n.push(p);for(const p of this.compConfig.races)t[p]=[],h[p]=[];for(const[p,E]of Object.entries(this.demons))"party"!==E.fusion&&(t[E.race].push(E.lvl),this.specialRecipes.hasOwnProperty(p)||h[E.race].push(E.lvl));for(const p of this.compConfig.races)t[p].sort((E,v)=>E-v),h[p].sort((E,v)=>E-v);const r=Object.keys(this.demons).map(p=>this.demons[p]),u=Object.keys(this.enemies).map(p=>this.enemies[p]);this._allDemons=u.concat(r),this._allSkills=n,this.allIngredients=t,this.allResults=h}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return Object.keys(this.specialRecipes).map(t=>this.demons[t])}getDemon(t){return this.demons[t]||this.enemies[t]}getSkill(t){return this.skills[t]}getSkills(t){const h=this.compConfig.elemOrder,n=t.map(r=>this.skills[r]);return n.sort((r,u)=>1e4*(h[r.element]-h[u.element])+r.rank-u.rank),n}getIngredientDemonLvls(t){return this.allIngredients[t]||[]}getResultDemonLvls(t){return this.allResults[t]||[]}getSpecialNameEntries(t){return this.specialRecipes[t]||[]}getSpecialNamePairs(t){return[]}reverseLookupDemon(t,h){return this.invertedDemons[t][h]}reverseLookupSpecial(t){return this.invertedSpecials[t]||[]}isElementDemon(t){return!1}updateFusionSettings(t){}}var m=o(2812),C=o(7548),g=o(4769),y=o(4487);let D=(()=>{class f{constructor(h,n){this.fissionCalculator=C.Bz,this.fusionCalculator=C.wC,this.triFissionCalculator=C.nL,this.triFusionCalculator=C.RD;const r=n.url.split("/")[1];this.compConfig=h.configs[h.configs[r]?r:"p4"],this.appName=this.compConfig.appTitle+" Fusion Calculator",this._compendium=new e(this.compConfig),this._compendium$=new k.X(this._compendium),this.compendium=this._compendium$.asObservable(),this._fusionChart=new m.t(this.compConfig.normalTable,this.compConfig.races),this._fusionChart$=new k.X(this._fusionChart),this.fusionChart=this._fusionChart$.asObservable(),this._tripleChart=new m.t(this.compConfig.normalTable,this.compConfig.races,!0),this._squareChart$=new k.X({normalChart:this._fusionChart,tripleChart:this._tripleChart,raceOrder:this.compConfig.raceOrder}),this.squareChart=this._squareChart$.asObservable()}updateFusionSettings(h){}static#e=this.\u0275fac=function(n){return new(n||f)(g.LFG(C.I7),g.LFG(y.F0))};static#t=this.\u0275prov=g.Yz7({token:f,factory:f.\u0275fac})}return f})()},8970:(P,_,o)=>{o.d(_,{R:()=>y});var k=o(6814),e=o(6208),m=o(8325),C=o(4806),g=o(4769);let y=(()=>{class D{static forRoot(){return{ngModule:D}}static#e=this.\u0275fac=function(h){return new(h||D)};static#t=this.\u0275mod=g.oAB({type:D});static#s=this.\u0275inj=g.cJS({imports:[k.ez,e.m,m.SharedCompendiumModule,C.V]})}return D})()},3956:(P,_,o)=>{o.d(_,{G:()=>m,t:()=>e});const k=JSON.parse('{"Base":"$2","Exact":"$1% $2","Plus":"$2 +$1%","Times":"$2 x$1","PowerAgainst":"$1 pwr against $2","FracDamage":"reduces $2 by $1%","InstakillWhen":"$1% instakill when $2","SmtKaja":"raises $2 1 rank","SmtKunda":"lowers $2 1 rank","PersonaKaja":"$2 x$1 for 3 turns","ElemCharge":"dmg dealt by next $2 attack x$1","ElemWall":"adds $2 resistance for 3 turns","ElemBreak":"removes $2 resistance for 3 turns","ElemBlock":"nullifies next $2 attack","ElemKarn":"repels next $2 attack","ElemMaster":"$2 skill costs x$1","ElemBoost":"$2 dmg dealt x$1","HealBoost":"$2 skill pwr x$1","DodgeElem":"$2 evasion x$1","ElemPierce":"$2 dmg dealt cannot be resisted, nullified, or drained","ResistElem":"$2 dmg taken x$1","NullElem":"nullifies $2 dmg taken","RepelElem":"repels $2 dmg taken","DrainElem":"drains $2 dmg taken","BanElement":"cancels first $2 attack in battle","AilmentBoost":"$2 affliction rate x$1","ResistAilment":"$2 susceptibility x$1","NullAilment":"prevents $2","PlusAilment":"adds $1% $2 to Phys attacks","CureAilment":"removes $2","PersonaCounterN":"$1% chance to repel $2 dmg taken","PersonaLifeDrainN":"$1 dmg dealt, $2","SmtCounterN":"$1% chance to counter $2 attack with Phys dmg","SmtAllyCounterN":"$1% chance to counter $2 attack to ally with Phys dmg","AutoSkill":"begins battle with $2","AutoSkillWhen":"begins battle with $2 if applicable","FoulBreathN":"raises $2 susceptibility for 3 turns","RegenerateN":"$1% $2 each turn","InvigorateN":"$1 $2 each turn","GrowthN":"$1% $2 gained when not active","LifeAidN":"$1% max $2 after battle","Recarm":"$1% $2 after reviving","Endure":"$2 with 1 HP after a mortal blow once per battle","EnduringSoul":"$2 with 100% HP after a mortal blow once per battle"}');function e(C,g,y){const[D,f,t,h,n,r,u,p]=C,[E,v,O]=g,T=v.startsWith("FMT")?k[v.substring(3)]:v,d=parseInt(p.toString()),F=[0===t?"":`${y?"\u221a":""}${t} pwr`,h!==n?`${h}-${n} hits`:n<2?"":`${n} hits`,0===r||90<=r&&r<=110?"":`${r}% acc`,u<=5?"":`${u}% crit`,"-"===v?"":T.replace("$1",`${d<1e3?p:(d-1e3)/100}`).replace("$2",E)].filter(I=>""!==I).join(", ");return"x"===F.substring(0,1)?F:F.substring(0,1).toUpperCase()+F.substring(1)}function m(C,g){const{a:[y,D,f],b:t,c:h}=C,[n,r]=t.slice(0,2),u=h[2],p={elem:D,rank:n,target:"-"===f?"Self":f,cost:r?r+(r>1e3?r>2e3?g[2]:g[1]:g[0]):0,effect:e(t,h,1024!==g[0])};return"-"!==u&&(p.card=u),89<n&&(p.unique=!0),p}}}]);