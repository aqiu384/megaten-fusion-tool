(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[541],{8623:(e,t,s)=>{"use strict";s.d(t,{d:()=>r});var n=s(5614),i=s(9624),o=s(1116);function a(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"tr"),n.TgZ(1,"td"),n.TgZ(2,"label"),n._uU(3),n.TgZ(4,"input",3),n.NdJ("change",function(){const t=n.CHM(e).$implicit;return n.oxw().toggledName.emit(t.name)}),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=t.$implicit;n.xp6(3),n.hij("",e.name.split(",").join(", ")," "),n.xp6(1),n.Q6J("checked",e.included)}}let r=(()=>{class e{constructor(e){this.title=e,this.dlcTitle="Included DLC Demons",this.langEn=!0,this.toggledName=new n.vpe}set appTitle(e){this.title.setTitle((this.langEn?"Fusion Settings - ":"\u5408\u4f53\u8a2d\u5b9a ")+e)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(i.Dx))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-demon-dlc-settings"]],inputs:{dlcDemons:"dlcDemons",dlcTitle:"dlcTitle",langEn:"langEn",appTitle:"appTitle"},outputs:{toggledName:"toggledName"},decls:10,vars:2,consts:[[1,"entry-table"],[1,"title"],[4,"ngFor","ngForOf"],["type","checkbox",3,"checked","change"]],template:function(e,t){1&e&&(n.ynx(0),n.TgZ(1,"h2"),n._uU(2),n.qZA(),n.TgZ(3,"table",0),n.TgZ(4,"thead"),n.TgZ(5,"tr"),n.TgZ(6,"th",1),n._uU(7,"DLC"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(8,"tbody"),n.YNc(9,a,5,2,"tr",2),n.qZA(),n.qZA(),n.BQk()),2&e&&(n.xp6(2),n.Oqu(t.dlcTitle),n.xp6(7),n.Q6J("ngForOf",t.dlcDemons))},directives:[o.sg],encapsulation:2,changeDetection:0}),e})()},2573:(e,t,s)=>{"use strict";s.d(t,{O:()=>g});var n=s(5614),i=s(1116);function o(e,t){if(1&e&&(n.TgZ(0,"h2"),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Oqu(e.title)}}function a(e,t){if(1&e&&(n.TgZ(0,"th"),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Oqu(e.langEn?"Price":"\u4fa1\u683c")}}function r(e,t){if(1&e&&(n.TgZ(0,"th"),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.xp6(1),n.Oqu(e)}}function l(e,t){1&e&&(n.TgZ(0,"th"),n._uU(1,"Inherits"),n.qZA())}function c(e,t){if(1&e&&(n.TgZ(0,"th"),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.xp6(1),n.Oqu(e)}}function m(e,t){if(1&e&&(n.TgZ(0,"td"),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Oqu(e.price)}}function p(e,t){if(1&e&&(n.TgZ(0,"td"),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.xp6(1),n.Oqu(e)}}function u(e,t){if(1&e&&(n.TgZ(0,"td"),n.TgZ(1,"div"),n._uU(2),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Gre("element-icon i",e.inherits,""),n.xp6(1),n.Oqu(e.inherits)}}const f=["*"];let g=(()=>{class e{constructor(){this.title="Demon Entry",this.statHeaders=[],this.stats=[],this.fusionHeaders=[],this.price=0,this.langEn=!0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-demon-stats"]],inputs:{title:"title",statHeaders:"statHeaders",stats:"stats",fusionHeaders:"fusionHeaders",inherits:"inherits",price:"price",langEn:"langEn"},ngContentSelectors:f,decls:19,vars:10,consts:[[4,"ngIf"],[1,"entry-table"],[1,"title"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(n.F$t(),n.ynx(0),n.YNc(1,o,2,1,"h2",0),n.TgZ(2,"table",1),n.TgZ(3,"thead"),n.TgZ(4,"tr"),n.TgZ(5,"th",2),n._uU(6),n.qZA(),n.qZA(),n.TgZ(7,"tr"),n.YNc(8,a,2,1,"th",0),n.YNc(9,r,2,1,"th",3),n.YNc(10,l,2,0,"th",0),n.YNc(11,c,2,1,"th",3),n.qZA(),n.qZA(),n.TgZ(12,"tbody"),n.TgZ(13,"tr"),n.YNc(14,m,2,1,"td",0),n.YNc(15,p,2,1,"td",3),n.YNc(16,u,3,4,"td",0),n.Hsn(17),n.qZA(),n.qZA(),n.qZA(),n.GkF(18),n.BQk()),2&e&&(n.xp6(1),n.Q6J("ngIf",t.title.includes("Lvl")),n.xp6(4),n.uIk("colSpan",t.stats.length+t.fusionHeaders.length+(t.inherits?1:0)+(t.price?1:0)),n.xp6(1),n.hij(" ",t.title.includes("Lvl")?t.langEn?"Stats":"\u30b9\u30c6\u30fc\u30bf\u30b9":t.title," "),n.xp6(2),n.Q6J("ngIf",t.price),n.xp6(1),n.Q6J("ngForOf",t.statHeaders),n.xp6(1),n.Q6J("ngIf",t.inherits),n.xp6(1),n.Q6J("ngForOf",t.fusionHeaders),n.xp6(3),n.Q6J("ngIf",t.price),n.xp6(1),n.Q6J("ngForOf",t.stats),n.xp6(1),n.Q6J("ngIf",t.inherits))},directives:[i.O5,i.sg],encapsulation:2,changeDetection:0}),e})()},4354:(e,t,s)=>{"use strict";s.d(t,{O:()=>f});var n=s(1501),i=s(649),o=s(5614),a=s(1116),r=s(3522);const l=function(){return{exact:!0}};function c(e,t){if(1&e&&(o.TgZ(0,"th",4),o.TgZ(1,"a",5),o._uU(2),o.qZA(),o.qZA()),2&e){const e=t.$implicit,s=o.oxw();o.Udp("width",100/s.fusionOptions.length,"%"),o.Q6J("routerLink",e.link)("routerLinkActiveOptions",o.DdM(6,l)),o.xp6(1),o.Q6J("routerLink",e.link),o.xp6(1),o.Oqu(e.title)}}function m(e,t){if(1&e&&(o.TgZ(0,"tr"),o.TgZ(1,"th",6),o._uU(2),o.qZA(),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.uIk("colspan",e.fusionOptions.length),o.xp6(1),o.hij(" ",e.langEn?"DLC marked as excluded in fusion settings, results may be inaccurate!":"DLC\u306a\u3057"," ")}}function p(e,t){if(1&e&&(o.TgZ(0,"tr"),o.TgZ(1,"th",6),o.Hsn(2),o.qZA(),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.uIk("colspan",e.fusionOptions.length)}}const u=["*"];let f=(()=>{class e{constructor(){this.hasTripleFusion=!1,this.showFusionAlert=!1,this.excludedDlc=!1,this.langEn=!0,this.fusionOptions=e.NORMAL_FUSIONS_EN}ngOnInit(){this.fusionOptions=this.hasTripleFusion?e.TRIPLE_FUSIONS:this.langEn?e.NORMAL_FUSIONS_EN:e.NORMAL_FUSIONS_JA}ngOnChanges(){setTimeout(()=>this.stickyTable.nextEdges())}}return e.NORMAL_FUSIONS_EN=[{title:"Reverse Fusions",link:"fissions"},{title:"Forward Fusions",link:"fusions"}],e.NORMAL_FUSIONS_JA=[{title:"\u9006\u5f15\u304d\u5408\u4f53",link:"fissions"},{title:"2\u4f53\u5408\u4f53",link:"fusions"}],e.TRIPLE_FUSIONS=[{title:"Normal Reverse Fusions",link:"fissions"},{title:"Triple Reverse Fusions",link:"fissions/triple"},{title:"Triple Forward Fusions",link:"fusions/triple"},{title:"Normal Forward Fusions",link:"fusions"}],e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-smt-fusions"]],viewQuery:function(e,t){if(1&e&&o.Gf(i.v,5),2&e){let e;o.iGM(e=o.CRH())&&(t.stickyTable=e.first)}},inputs:{hasTripleFusion:"hasTripleFusion",showFusionAlert:"showFusionAlert",excludedDlc:"excludedDlc",langEn:"langEn"},features:[o._Bn([n.L]),o.TTD],ngContentSelectors:u,decls:11,vars:3,consts:[["appPositionSticky","",1,"list-table"],["stickyTable",""],["class","nav","routerLinkActive","active",3,"routerLink","width","routerLinkActiveOptions",4,"ngFor","ngForOf"],[4,"ngIf"],["routerLinkActive","active",1,"nav",3,"routerLink","routerLinkActiveOptions"],[3,"routerLink"],[1,"title"]],template:function(e,t){1&e&&(o.F$t(),o.TgZ(0,"div"),o.TgZ(1,"table",0,1),o.TgZ(3,"thead"),o.TgZ(4,"tr"),o.YNc(5,c,3,7,"th",2),o.qZA(),o.YNc(6,m,3,2,"tr",3),o._UZ(7,"tr"),o.YNc(8,p,3,1,"tr",3),o._UZ(9,"tr"),o.qZA(),o.qZA(),o._UZ(10,"router-outlet"),o.qZA()),2&e&&(o.xp6(5),o.Q6J("ngForOf",t.fusionOptions),o.xp6(1),o.Q6J("ngIf",t.excludedDlc),o.xp6(2),o.Q6J("ngIf",t.showFusionAlert))},directives:[i.v,a.sg,a.O5,r.lC,r.Od,r.rH,r.yS],encapsulation:2,changeDetection:0}),e})()},9805:(e,t,s)=>{"use strict";s.d(t,{f:()=>i});var n=s(5614);let i=(()=>{class e{constructor(e,t){this.changeDetector2=e,this.fusionDataService2=t,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.fusionDataService2.compendium.subscribe(e=>{this.changeDetector2.markForCheck(),this.compendium=e,this._dlcDemons=Object.assign({},this.compendium.dlcDemons),this.dlcDemons=Object.entries(this._dlcDemons).map(([e,t])=>({name:e,included:t}))}))}ngOnDestroy(){for(const e of this.subscriptions)e.unsubscribe()}toggleName(e){this._dlcDemons[e]=!this._dlcDemons[e],this.fusionDataService2.nextDlcDemons(this._dlcDemons)}}return e.\u0275fac=function(e){n.$Z()},e.\u0275dir=n.lG2({type:e}),e})()},5314:(e,t,s)=>{"use strict";s.d(t,{V:()=>K});var n=s(3522),i=s(5614),o=s(6746),a=s(7089),r=s(1116);let l=(()=>{class e{constructor(e){this.appCssClasses=["smt4","smt4f"],this.appCssClasses=e.compConfig.appCssClasses,this.langEn="ja"!==e.compConfig.lang,this.otherLinks=this.langEn?[{title:"Recipe Generator",link:"recipes"}]:[]}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(o.Y))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-smt4f-compendium"]],decls:1,vars:2,consts:[[3,"ngClass","otherLinks"]],template:function(e,t){1&e&&i._UZ(0,"app-demon-compendium",0),2&e&&i.Q6J("ngClass",t.appCssClasses)("otherLinks",t.otherLinks)},directives:[a.e,r.mk],styles:[".smt4 div.element-icon{height:12px;background-size:12px;background-repeat:no-repeat;background-position:50%;color:transparent}.smt4 div.element-icon.phy{background-image:url(/assets/images/smtsj/phy.png)}.smt4 div.element-icon.gun{background-image:url(/assets/images/smt4f/gun.png)}.smt4 div.element-icon.fir{background-image:url(/assets/images/smtsj/fir.png)}.smt4 div.element-icon.ice{background-image:url(/assets/images/smtsj/ice.png)}.smt4 div.element-icon.ele{background-image:url(/assets/images/smtsj/ele.png)}.smt4 div.element-icon.for{background-image:url(/assets/images/smt4f/force.png)}.smt4 div.element-icon.lig{background-image:url(/assets/images/smtsj/exp.png)}.smt4 div.element-icon.dar{background-image:url(/assets/images/smtsj/cur.png)}.smt4 div.element-icon.ail{background-image:url(/assets/images/smtsj/ail.png)}.smt4 div.element-icon.rec{background-image:url(/assets/images/smtsj/rec.png)}.smt4 div.element-icon.alm{background-image:url(/assets/images/smtsj/alm.png)}.smt4 div.element-icon.sup{background-image:url(/assets/images/smtsj/sup.png)}.smt4 div.element-icon.pas{background-image:url(/assets/images/smtsj/pas.png)}.smt4 div.element-icon.oth,.smt4 div.element-icon.sab,.smt4 div.element-icon.spe{background-image:url(/assets/images/smtsj/spe.png)}.smt4 div.element-icon.com{background-image:url(/assets/images/smtsj/sup.png)}.smt4 td.affinity-8,.smt4 td.affinity-9{color:red}.smt4 td.affinity-7{color:#ff4500}.smt4 td.affinity-6{color:tomato}.smt4 td.affinity-5{color:coral}.smt4 td.affinity-4{color:#ff8c00}.smt4 td.affinity-3{color:orange}.smt4 td.affinity-2{color:#ffa07a}.smt4 td.affinity-1{color:gold}.smt4 td.affinity0{color:transparent}.smt4 td.affinity1{color:#7cfc00}.smt4 td.affinity2{color:#0f0}.smt4 td.affinity3{color:#00ff7f}.smt4 td.affinity4{color:#00fa9a}.smt4 td.affinity5{color:#32cd32}.smt4 td.affinity6{color:#3cb371}.smt4 td.affinity7{color:#2e8b57}.smt4 td.affinity8,.smt4 td.affinity9{color:#228b22}.smt4f th.nav.active,.smt4f th.nav.active a,.smt4f th.title{background-color:#fff;color:#000}.smt5 th.nav.active,.smt5 th.nav.active a,.smt5 th.title{background-color:#363361;color:#fff}.sh2 th.nav.active,.sh2 th.nav.active a,.sh2 th.title{background-color:#693cbe;color:#fff}"],encapsulation:2,changeDetection:0}),e})();var c=s(5438),m=s(9624),p=s(4008);let u=(()=>{class e extends c.l{constructor(e,t,s){super(e,t,s),this.compConfig=s.compConfig,this.langEn="ja"!==this.compConfig.lang,this.appName=(this.langEn?"List of Demons - ":"\u60aa\u9b54\u4e00\u89a7 ")+s.appName,this.defaultSortFun=(e,t)=>200*(this.compConfig.raceOrder[e.race]-this.compConfig.raceOrder[t.race])+t.lvl-e.lvl}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(m.Dx),i.Y36(i.sBO),i.Y36(o.Y))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-demon-list-container"]],features:[i.qOj],decls:2,vars:8,consts:[[3,"langEn","raceOrder","statHeaders","resistHeaders","affinityHeaders","rowData"]],template:function(e,t){1&e&&(i._UZ(0,"app-smt-demon-list",0),i.ALo(1,"async")),2&e&&i.Q6J("langEn",t.langEn)("raceOrder",t.compConfig.raceOrder)("statHeaders",t.compConfig.baseStats)("resistHeaders",t.compConfig.resistElems)("affinityHeaders",t.compConfig.affinityElems)("rowData",i.lcZ(1,6,t.demons))},directives:[p.Q],pipes:[r.Ov],encapsulation:2,changeDetection:0}),e})();var f=s(9261),g=s(3787);let h=(()=>{class e extends f.e{constructor(e,t,s){super(e,t,s),this.appName=`List of Skills - ${s.appName}`,this.compConfig=s.compConfig,this.langEn="ja"!==this.compConfig.lang,this.appName=(this.langEn?"List of Skills - ":" \u30b9\u30ad\u30eb\u4e00\u89a7 ")+s.appName,this.compConfig=s.compConfig,this.defaultSortFun=(e,t)=>1e4*(this.compConfig.elemOrder[e.element]-this.compConfig.elemOrder[t.element])+e.rank-t.rank}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(m.Dx),i.Y36(i.sBO),i.Y36(o.Y))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-skill-list-container"]],features:[i.qOj],decls:2,vars:6,consts:[[3,"langEn","elemOrder","hasTarget","rowData"]],template:function(e,t){1&e&&(i._UZ(0,"app-smt-skill-list",0),i.ALo(1,"async")),2&e&&i.Q6J("langEn",t.langEn)("elemOrder",t.compConfig.elemOrder)("hasTarget",!0)("rowData",i.lcZ(1,4,t.skills))},directives:[g.J],pipes:[r.Ov],encapsulation:2,changeDetection:0}),e})();var d=s(9805),v=s(8623);let k=(()=>{class e extends d.f{constructor(e,t){super(e,t),this.changeDetector=e,this.fusionDataService=t,this.langEn=!0,this.appTitle=t.appName,this.langEn="ja"!==t.compConfig.lang}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.sBO),i.Y36(o.Y))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-demon-dlc-settings-container"]],features:[i.qOj],decls:1,vars:4,consts:[[3,"langEn","dlcDemons","appTitle","dlcTitle","toggledName"]],template:function(e,t){1&e&&(i.TgZ(0,"app-demon-dlc-settings",0),i.NdJ("toggledName",function(e){return t.toggleName(e)}),i.qZA()),2&e&&i.Q6J("langEn",t.langEn)("dlcDemons",t.dlcDemons)("appTitle",t.appTitle)("dlcTitle",t.langEn?"Included DLC Demons":"DLC")},directives:[v.d],encapsulation:2,changeDetection:0}),e})();var C=s(2573),D=s(858),Z=s(4354),b=s(628),T=s(3015),O=s(4897),E=s(6101),x=s(3966);function y(e,t){if(1&e&&i._UZ(0,"app-demon-inherits",10),2&e){const e=i.oxw(2);i.Q6J("langEn",e.langEn)("hasLvls",!0)("inheritHeaders",e.compConfig.affinityElems)("inherits",e.demon.affinities)}}function A(e,t){1&e&&(i.TgZ(0,"tr"),i.TgZ(1,"th"),i._uU(2,"Elem"),i.qZA(),i.TgZ(3,"th"),i._uU(4,"Name"),i.qZA(),i.TgZ(5,"th"),i._uU(6,"Cost"),i.qZA(),i.TgZ(7,"th"),i._uU(8,"Effect"),i.qZA(),i.TgZ(9,"th"),i._uU(10,"Target"),i.qZA(),i.TgZ(11,"th"),i._uU(12,"Rank"),i.qZA(),i.TgZ(13,"th"),i._uU(14,"Level"),i.qZA(),i.qZA())}function _(e,t){1&e&&(i.TgZ(0,"tr"),i.TgZ(1,"th"),i._uU(2,"\u5c5e\u6027"),i.qZA(),i.TgZ(3,"th"),i._uU(4,"\u30b9\u30ad\u30eb\u540d"),i.qZA(),i.TgZ(5,"th"),i._uU(6,"\u6d88\u8cbb"),i.qZA(),i.TgZ(7,"th"),i._uU(8,"\u8aac\u660e"),i.qZA(),i.TgZ(9,"th"),i._uU(10,"\u7bc4\u56f2"),i.qZA(),i.TgZ(11,"th"),i._uU(12,"\u30e9\u30f3\u30af"),i.qZA(),i.TgZ(13,"th"),i._uU(14,"Lvl"),i.qZA(),i.qZA())}const q=function(e){return{unique:e}};function S(e,t){if(1&e&&(i.TgZ(0,"tr",11),i.TgZ(1,"td"),i.TgZ(2,"div"),i._uU(3),i.qZA(),i.qZA(),i.TgZ(4,"td"),i._uU(5),i.qZA(),i.TgZ(6,"td"),i._uU(7),i.ALo(8,"skillCostToString"),i.qZA(),i.TgZ(9,"td"),i._uU(10),i.qZA(),i.TgZ(11,"td"),i._uU(12),i.qZA(),i.TgZ(13,"td"),i._uU(14),i.qZA(),i.TgZ(15,"td"),i._uU(16),i.ALo(17,"skillLevelToString"),i.qZA(),i.qZA()),2&e){const e=t.$implicit;i.Q6J("ngClass",i.VKq(19,q,e.skill.rank>90)),i.xp6(2),i.Gre("element-icon ",e.skill.element,""),i.xp6(1),i.Oqu(e.skill.element),i.xp6(2),i.Oqu(e.skill.name+(e.lvl?" +"+e.lvl:"")),i.xp6(1),i.Udp("color",e.cost?null:"transparent"),i.xp6(1),i.Oqu(i.lcZ(8,15,e.cost)),i.xp6(3),i.Oqu(e.skill.effect+(e.upgrade?" (+"+e.upgrade+"%)":"")),i.xp6(2),i.Oqu(e.skill.target||"Self"),i.xp6(1),i.Udp("color",99!==e.skill.rank?null:"transparent"),i.xp6(1),i.Oqu(e.skill.rank),i.xp6(2),i.Oqu(i.lcZ(17,17,e.skill.level))}}function N(e,t){if(1&e&&(i.TgZ(0,"tr"),i.TgZ(1,"td",12),i._uU(2),i.qZA(),i.qZA()),2&e){const e=i.oxw(2);i.xp6(2),i.Oqu(e.langEn?"No Learned Skills Found":"\u30b9\u30ad\u30eb\u306a\u3057")}}const L=function(e){return[e]};function U(e,t){if(1&e&&i._UZ(0,"app-fusion-entry-table",13),2&e){const e=i.oxw(2);i.Q6J("title",e.langEn?"Evolves From":"\u5909\u7570\u304b\u3089")("langEn",e.langEn)("baseUrl","..")("rowData",i.VKq(4,L,e.demon.evolvesFrom))}}function F(e,t){if(1&e&&i._UZ(0,"app-fusion-entry-table",13),2&e){const e=i.oxw(2);i.Q6J("title",e.langEn?"Evolves To":"\u5909\u7570")("langEn",e.langEn)("baseUrl","..")("rowData",i.VKq(4,L,e.demon.evolvesTo))}}function j(e,t){if(1&e&&(i.ynx(0),i._UZ(1,"app-demon-stats",2),i._UZ(2,"app-demon-resists",3),i.YNc(3,y,1,4,"app-demon-inherits",4),i.TgZ(4,"table",5),i.TgZ(5,"thead"),i.TgZ(6,"tr"),i.TgZ(7,"th",6),i._uU(8),i.qZA(),i.qZA(),i.YNc(9,A,15,0,"tr",0),i.YNc(10,_,15,0,"tr",0),i.qZA(),i.TgZ(11,"tbody"),i.YNc(12,S,18,21,"tr",7),i.YNc(13,N,3,1,"tr",0),i._UZ(14,"tr"),i.qZA(),i.qZA(),i.YNc(15,U,1,6,"app-fusion-entry-table",8),i.YNc(16,F,1,6,"app-fusion-entry-table",8),i._UZ(17,"app-smt-fusions",9),i.BQk()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("langEn",e.langEn)("title","Lvl "+e.demon.lvl+" "+e.demon.race+" "+e.demon.name)("price",e.demon.price)("statHeaders",e.compConfig.baseStats)("stats",e.demon.stats),i.xp6(1),i.Q6J("langEn",e.langEn)("resistHeaders",e.compConfig.resistElems)("resists",e.demon.resists)("ailmentHeaders",e.compConfig.ailmentElems)("ailments",e.demon.ailments),i.xp6(1),i.Q6J("ngIf",e.demon.affinities),i.xp6(5),i.Oqu(e.langEn?"Learned Skills":"\u7fd2\u5f97\u30b9\u30ad\u30eb"),i.xp6(1),i.Q6J("ngIf",e.langEn),i.xp6(1),i.Q6J("ngIf",!e.langEn),i.xp6(2),i.Q6J("ngForOf",e.skillLvls),i.xp6(1),i.Q6J("ngIf",!e.skillLvls.length),i.xp6(2),i.Q6J("ngIf",e.demon.evolvesFrom),i.xp6(1),i.Q6J("ngIf",e.demon.evolvesTo),i.xp6(1),i.Q6J("langEn",e.langEn)("excludedDlc","excluded"===e.demon.fusion)}}function w(e,t){if(1&e&&i._UZ(0,"app-demon-missing",14),2&e){const e=i.oxw();i.Q6J("name",e.name)}}let I=(()=>{class e{constructor(){this.langEn=!0,this.skillLvls=[]}ngOnChanges(){if(this.demon){this.skillLvls=[];for(const e of Object.keys(this.demon.skills)){const t=this.compendium.getSkill(e);let s=0,n=t.cost,i=0;if(this.demon.affinities&&n<2e3){const e=this.compConfig.affinityElems.indexOf(t.element);s=e>-1?this.demon.affinities[e]:0,i=s>0?this.compConfig.affinityBonuses.upgrades[e][s-1]:0,s>0&&n>0&&(n=1e3+Math.floor((100-this.compConfig.affinityBonuses.costs[e][s-1])/100*(t.cost-1e3)))}this.skillLvls.push({skill:t,cost:n,lvl:s,upgrade:i})}for(const e of this.skillLvls)e.skill.level=this.demon.skills[e.skill.name];this.skillLvls.sort((e,t)=>20*(e.skill.level-t.skill.level)+this.compConfig.elemOrder[e.skill.element]-this.compConfig.elemOrder[t.skill.element])}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",compConfig:"compConfig",compendium:"compendium",langEn:"langEn"},features:[i.TTD],decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"langEn","title","price","statHeaders","stats"],[3,"langEn","resistHeaders","resists","ailmentHeaders","ailments"],[3,"langEn","hasLvls","inheritHeaders","inherits",4,"ngIf"],[1,"entry-table"],["colSpan","7",1,"title"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"title","langEn","baseUrl","rowData",4,"ngIf"],[3,"langEn","excludedDlc"],[3,"langEn","hasLvls","inheritHeaders","inherits"],[3,"ngClass"],["colSpan","7"],[3,"title","langEn","baseUrl","rowData"],[3,"name"]],template:function(e,t){1&e&&(i.YNc(0,j,18,20,"ng-container",0),i.YNc(1,w,1,1,"app-demon-missing",1)),2&e&&(i.Q6J("ngIf",t.demon),i.xp6(1),i.Q6J("ngIf",!t.demon))},directives:[r.O5,C.O,D.I,r.sg,Z.O,b.N,r.mk,T.P,O.t],pipes:[E.tq,E.Lu],encapsulation:2,changeDetection:0}),e})(),J=(()=>{class e{constructor(e,t,s,n){this.route=e,this.title=t,this.currentDemonService=s,this.fusionDataService=n,this.subscriptions=[],this.appName="Test App",this.appName=n.appName,this.compConfig=n.compConfig}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const e of this.subscriptions)e.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(e=>{this.compendium=e,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(e=>{this.name=e,this.getDemonEntry()})),this.route.params.subscribe(e=>{this.currentDemonService.nextCurrentDemon(e.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(this.name+("ja"!==this.compConfig.lang?" - ":" ")+this.appName),this.demon=this.compendium.getDemon(this.name))}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(n.gz),i.Y36(m.Dx),i.Y36(x.s),i.Y36(o.Y))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-demon-entry-container"]],decls:1,vars:5,consts:[[3,"langEn","name","demon","compConfig","compendium"]],template:function(e,t){1&e&&i._UZ(0,"app-demon-entry",0),2&e&&i.Q6J("langEn","ja"!==t.compConfig.lang)("name",t.name)("demon",t.demon)("compConfig",t.compConfig)("compendium",t.compendium)},directives:[I],encapsulation:2,changeDetection:0}),e})();var Y=s(7967);function Q(e,t){if(1&e&&i._UZ(0,"app-fusion-chart",2),2&e){const e=i.oxw();i.Q6J("langEn",e.langEn)("normChart",e.normChart)("tripChart",e.normChart)("normTitle",e.langEn?"Light and Neutral Normal Fusions":"LIGHT\u5408\u4f53")("tripTitle",e.langEn?"Dark Normal Fusions":"DARK\u5408\u4f53")}}function R(e,t){if(1&e&&i._UZ(0,"app-fusion-chart",3),2&e){const e=i.oxw();i.Q6J("langEn",e.langEn)("filterDarks",!1)("normChart",e.normChart)}}let H=(()=>{class e{constructor(e,t){this.changeDetectorRef=e,this.fusionDataService=t,this.subscriptions=[]}ngOnInit(){this.langEn="ja"!==this.fusionDataService.compConfig.lang,this.hasLightDark=!this.fusionDataService.compConfig.appCssClasses.includes("sh2"),this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(e=>{this.changeDetectorRef.markForCheck(),this.normChart=e}))}ngOnDestroy(){for(const e of this.subscriptions)e.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.sBO),i.Y36(o.Y))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-fusion-chart-container"]],decls:2,vars:2,consts:[[3,"langEn","normChart","tripChart","normTitle","tripTitle",4,"ngIf"],[3,"langEn","filterDarks","normChart",4,"ngIf"],[3,"langEn","normChart","tripChart","normTitle","tripTitle"],[3,"langEn","filterDarks","normChart"]],template:function(e,t){1&e&&(i.YNc(0,Q,1,5,"app-fusion-chart",0),i.YNc(1,R,1,3,"app-fusion-chart",1)),2&e&&(i.Q6J("ngIf",t.hasLightDark),i.xp6(1),i.Q6J("ngIf",!t.hasLightDark))},directives:[r.O5,Y.R],encapsulation:2,changeDetection:0}),e})();var B=s(3810);let M=(()=>{class e{constructor(e,t){this.fusionDataService=e,this.title=t,this.subscriptions=[],this.defaultDemon="Pixie",this.maxSkills=8;const s=this.fusionDataService.compConfig,n=s.appCssClasses.includes("sh2");this.maxSkills=n?6:8,this.recipeConfig={fissionCalculator:this.fusionDataService.fissionCalculator,fusionCalculator:this.fusionDataService.fusionCalculator,races:s.races,skillElems:s.skillElems,inheritElems:s.affinityElems,restrictInherits:n,triExclusiveRaces:[],triFissionCalculator:null,triFusionCalculator:null}}ngOnInit(){this.setTitle(),this.subscribeAll()}ngOnDestroy(){this.unsubscribeAll()}setTitle(){this.title.setTitle(`Recipe Generator - ${this.fusionDataService.appName}`)}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(e=>{this.compendium=e})),this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(e=>{this.squareChart={normalChart:e,tripleChart:e,raceOrder:this.fusionDataService.compConfig.raceOrder}}))}unsubscribeAll(){for(const e of this.subscriptions)e.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(o.Y),i.Y36(m.Dx))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-recipe-generator-container"]],decls:1,vars:5,consts:[[3,"defaultDemon","maxSkills","compendium","squareChart","recipeConfig"]],template:function(e,t){1&e&&i._UZ(0,"app-recipe-generator",0),2&e&&i.Q6J("defaultDemon",t.defaultDemon)("maxSkills",t.maxSkills)("compendium",t.compendium)("squareChart",t.squareChart)("recipeConfig",t.recipeConfig)},directives:[B.X],encapsulation:2,changeDetection:0}),e})();var $=s(5946),G=s(2060);const X=[{path:"",redirectTo:"demons",pathMatch:"full"},{path:"",component:l,data:{fusionTool:"chart"},children:[{path:"chart",component:H}]},{path:"",component:l,children:[{path:"demons/:demonName",component:J,children:[{path:"fissions",component:$.t},{path:"fusions",component:G.$},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"demons",component:u},{path:"skills",component:h},{path:"recipes",component:M},{path:"settings",component:k}]},{path:"**",redirectTo:"demons",pathMatch:"full"}];let K=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[n.Bz.forChild(X)],n.Bz]}),e})()},6746:(e,t,s)=>{"use strict";s.d(t,{Y:()=>h});var n=s(8512);function i(e,t){const s={};for(const[n,i]of Object.entries(e)){const e=Object.assign({},i),o={};for(const[s,n]of Object.entries(i.skills))o[t[s]||s]=n;e.race=t[e.race]||e.race,e.skills=o,s[t[n]||n]=e}return s}function o(e,t){const s={};for(const[n,i]of Object.entries(e)){const e=Object.assign({},i),o=e.target||"Self";e.target=t[o]||o,s[t[n]||n]=e}return s}function a(e,t){const s={};for(const[n,i]of Object.entries(e))s[t[n]||n]=i.map(e=>t[e]||e);return s}function r(e,t){const s={};for(const[n,i]of Object.entries(e))s[t[n]||n]={lvl:i.lvl,result:t[i.result]||i.result};return s}function l(e,t){const s={races:e.races.map(e=>t[e]||e),table:e.table.map(e=>e.map(e=>t[e]||e))};return e.elems&&(s.elems=e.elems.map(e=>t[e]||e),s.table=e.table),s}class c{constructor(e){this.compConfig=e,this._dlcDemons={Cleopatra:!1,Mephisto:!1},this.initImportedData(),this.updateDerivedData()}initImportedData(){const e={},t={},s={},n={},i={},o=Array(this.compConfig.ailmentElems.length).fill(100),a={1125:[],50:[],0:[]},r="ja"!==this.compConfig.lang,l=r?"Innate resistance":"",c=r?"Self":"\u81ea\u8eab",m=r?{1125:"Weak ",50:"Resist ",0:"Null "}:{1125:"\u5f31",50:"\u5f37",0:"\u7121"};for(const[p,u]of Object.entries(m))for(const e of this.compConfig.ailmentElems)a[p].push({name:u+e,element:"pas",effect:l,target:c,cost:0,rank:99,learnedBy:[],level:0});for(const[p,u]of Object.entries(this.compConfig.demonData))e[p]={name:p,race:u.race,lvl:u.lvl,currLvl:u.currLvl||u.lvl,skills:u.skills,price:2*u.price,inherits:parseInt((u.affinities||[-9]).map(e=>e<=-9?"0":"1").join(""),2),stats:u.stats,resists:u.resists.split("").map(e=>this.compConfig.resistCodes[e]),affinities:u.affinities,ailments:u.ailments?u.ailments.split("").map(e=>this.compConfig.resistCodes[e]):o,fusion:u.fusion||"normal",prereq:u.prereq||""};for(const[p,u]of Object.entries(this.compConfig.skillData))t[p]={name:p,element:u.element,rank:u.rank,effect:u.effect,damage:u.damage||"",target:u.target||"Self",hits:u.hits||"",cost:u.cost||0,learnedBy:[],level:0},t[p].rank||(t[p].rank=99);for(const p of Object.values(a))for(const e of p)t[e.name]=e;for(const[p,u]of Object.entries(this.compConfig.specialRecipes)){const t=[],i=[];for(const e of u)if(e.includes(" x")){const[t,s]=e.split(" x ");i.push({name1:t,name2:s})}else t.push(e);t.length>0&&(s[p]=t),i.length>0&&(n[p]=i),"normal"===e[p].fusion&&(e[p].fusion="special")}for(const[p,u]of Object.entries(this.compConfig.evolveData)){const t=u.result;e[p].evolvesTo={price:e[t].price,race1:e[t].race,lvl1:u.lvl,name1:t},e[t].evolvesFrom={price:e[p].price,race1:e[p].race,lvl1:u.lvl,name1:p}}for(const p of this.compConfig.races)i[p]={};for(const[p,u]of Object.entries(e))i[u.race][u.lvl]=p;for(const p of Object.values(e).sort((e,t)=>e.currLvl-t.currLvl))if("enemy"!==p.fusion){for(const e of Object.keys(p.skills))t[e].learnedBy.push({demon:p.name,level:p.skills[e]});for(let e=0;e<p.ailments.length;e++)a[p.ailments[e]]&&a[p.ailments[e]][e].learnedBy.push({demon:p.name,level:0})}this._dlcDemons=this.compConfig.dlcDemons.reduce((e,t)=>(e[t]=!1,e),{}),this.demons=e,this.skills=t,this.specialRecipes=s,this.specialPairRecipes=n,this.invertedDemons=i}updateDerivedData(){const e=Object.assign({},this.demons),t=Object.keys(this.skills).map(e=>this.skills[e]),s={},n={};for(const i of this.compConfig.races)s[i]=[],n[i]=[];for(const[i,o]of Object.entries(this.demons))this.isElementDemon(i)||this.isOverlappingResult(i)||s[o.race].push(o.lvl),this.specialRecipes.hasOwnProperty(i)||n[o.race].push(o.lvl);for(const i of this.compConfig.races)s[i].sort((e,t)=>e-t),n[i].sort((e,t)=>e-t);for(const i of this.compConfig.races){const e=s[i],t=n[i],o=e.length,a=t.length;o&&a&&e[o-1]!==t[a-1]&&t.push(100)}for(const[i,o]of Object.entries(this._dlcDemons))for(const t of i.split(","))if(this.demons[t]){if(!o){const{race:i,lvl:o}=this.demons[t];delete e[t],s[i]=s[i].filter(e=>e!==o),n[i]=n[i].filter(e=>e!==o)}this.demons[t].fusion=o?"special":"excluded"}this._allDemons=Object.keys(e).map(t=>e[t]),this._allSkills=t.filter(e=>e.rank<99||e.learnedBy.length>0),this.allIngredients=s,this.allResults=n}get dlcDemons(){return this._dlcDemons}set dlcDemons(e){this._dlcDemons=e,this.updateDerivedData()}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return Object.keys(this.specialRecipes).map(e=>this.demons[e])}getDemon(e){return this.demons[e]}getSkill(e){return this.skills[e]}getSkills(e){const t=this.compConfig.elemOrder,s=e.map(e=>this.skills[e]);return s.sort((e,s)=>1e4*(t[e.element]-t[s.element])+e.rank-s.rank),s}getIngredientDemonLvls(e){return this.allIngredients[e]||[]}getResultDemonLvls(e){return this.allResults[e]||[]}getSpecialNameEntries(e){return this.specialRecipes[e]||[]}getSpecialNamePairs(e){return this.specialPairRecipes[e]||[]}reverseLookupDemon(e,t){return this.invertedDemons[e][t]}reverseLookupSpecial(e){return[]}isElementDemon(e){return"Element"===this.demons[e].race}isOverlappingResult(e){return!1}}var m=s(6829);let p=(()=>{class e extends m.g{constructor(e){super(),this.initCharts(e)}initCharts(e){const t=e.normalTable.races,s=e.normalTable.table,n=e.elementTable.elems,i=e.elementTable.races,o=e.elementTable.table;this.lvlModifier=e.lvlModifier,this.elementDemons=n,this.fusionChart=m.g.loadFusionTableJson(t,s),this.fissionChart=m.g.loadFissionTableJson(t,n,s),this.elementChart=m.g.loadElementTableJson(i,n,o),this.races=t}getLightDark(t){return-1!==e.LIGHT_RACES.indexOf(t)?1:-1!==e.DARK_RACES.indexOf(t)?-1:0}}return e.LIGHT_RACES=["Herald","Megami","Avian","Tree","Deity","Avatar","Holy","Genma","Fury","Lady","Dragon","Kishin","Enigma","Entity","Wargod","Amatsu","Kunitsu","Godly","Chaos","\u5927\u5929\u4f7f","\u5973\u795e","\u970a\u9ce5","\u795e\u6a39","\u9b54\u795e","\u795e\u7363","\u8056\u7363","\u5e7b\u9b54","\u7834\u58ca\u795e","\u5730\u6bcd\u795e","\u9f8d\u795e","\u9b3c\u795e","\u79d8\u795e","\u5a01\u970a","\u8ecd\u795e","\u5929\u6d25\u795e","\u56fd\u6d25\u795e","\u795e\u970a","\u6df7\u6c8c\u738b"],e.DARK_RACES=["Vile","Raptor","Wood","Reaper","Wilder","Jaki","Vermin","Tyrant","Drake","Spirit","Haunt","Ghost","Zealot","\u90aa\u795e","\u51f6\u9ce5","\u5996\u6a39","\u6b7b\u795e","\u5996\u7363","\u90aa\u9b3c","\u5e7d\u866b","\u9b54\u738b","\u90aa\u9f8d","\u60aa\u970a","\u5e7d\u9b3c","\u5e7d\u9b3c","\u72c2\u795e"],e})();var u=s(5539),f=s(5614),g=s(3522);let h=(()=>{class e{constructor(e,t){this.fissionCalculator=u.uC,this.fusionCalculator=u.YP,this.compConfig=t.url.includes("/ja/")?function(e){const t=e.engNames,s=e.races.map(e=>t[e]||e);return{appTitle:t[e.appTitle]||e.appTitle,races:s,raceOrder:e.raceOrder,appCssClasses:e.appCssClasses,lang:"ja",engNames:e.engNames,affinityElems:e.affinityElems,skillData:o(e.skillData,t),skillElems:e.skillElems,elemOrder:e.elemOrder,resistCodes:e.resistCodes,affinityBonuses:e.affinityBonuses,lvlModifier:e.lvlModifier,demonData:i(e.demonData,t),evolveData:r(e.evolveData,t),dlcDemons:e.dlcDemons.map(e=>e.split(",").map(e=>t[e]||e).join(",")),baseStats:e.baseStats.map(e=>t[e]||e),resistElems:e.resistElems,ailmentElems:e.ailmentElems.map(e=>t[e]||e),normalTable:l(e.normalTable,t),elementTable:l(e.elementTable,t),specialRecipes:a(e.specialRecipes,t),settingsKey:e.settingsKey.replace("-ja","")+"-ja",settingsVersion:e.settingsVersion}}(e):e,this.appName=this.compConfig.appTitle+("ja"!==this.compConfig.lang?" Fusion Calculator":" \u5408\u4f53\u30a2\u30d7\u30ea"),this._compendium=new c(this.compConfig),this._compendium$=new n.X(this._compendium),this.compendium=this._compendium$.asObservable(),this._fusionChart=new p(this.compConfig),this._fusionChart$=new n.X(this._fusionChart),this.fusionChart=this._fusionChart$.asObservable();const s=JSON.parse(localStorage.getItem(this.compConfig.settingsKey));s&&s.version&&s.version>=this.compConfig.settingsVersion&&this.nextDlcDemons(s.dlcDemons),window.addEventListener("storage",this.onStorageUpdated.bind(this))}nextDlcDemons(e){localStorage.setItem(this.compConfig.settingsKey,JSON.stringify({version:this.compConfig.settingsVersion,dlcDemons:e})),this._compendium.dlcDemons=e,this._compendium$.next(this._compendium)}onStorageUpdated(e){switch(e.key){case this.compConfig.settingsKey:this._compendium.dlcDemons=JSON.parse(e.newValue).dlcDemons,this._compendium$.next(this._compendium)}}}return e.\u0275fac=function(t){return new(t||e)(f.LFG(u.I7),f.LFG(g.F0))},e.\u0275prov=f.Yz7({token:e,factory:e.\u0275fac}),e})()},4541:(e,t,s)=>{"use strict";s.d(t,{D:()=>l});var n=s(1116),i=s(5425),o=s(6487),a=s(5314),r=s(5614);let l=(()=>{class e{static forRoot(){return{ngModule:e}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[n.ez,i.m,o.a,a.V]]}),e})()}}]);