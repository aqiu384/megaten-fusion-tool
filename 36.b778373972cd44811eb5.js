(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[36],{8623:(e,t,n)=>{"use strict";n.d(t,{d:()=>a});var s=n(5614),i=n(9624),o=n(1116);function r(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"tr"),s.TgZ(1,"td"),s.TgZ(2,"label"),s._uU(3),s.TgZ(4,"input",3),s.NdJ("change",function(){const t=s.CHM(e).$implicit;return s.oxw().toggledName.emit(t.name)}),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=t.$implicit;s.xp6(3),s.hij("",e.name.split(",").join(", ")," "),s.xp6(1),s.Q6J("checked",e.included)}}let a=(()=>{class e{constructor(e){this.title=e,this.dlcTitle="Included DLC Demons",this.toggledName=new s.vpe}set appTitle(e){this.title.setTitle(`Fusion Settings - ${e}`)}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(i.Dx))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-demon-dlc-settings"]],inputs:{dlcDemons:"dlcDemons",dlcTitle:"dlcTitle",appTitle:"appTitle"},outputs:{toggledName:"toggledName"},decls:10,vars:2,consts:[[1,"entry-table"],[1,"title"],[4,"ngFor","ngForOf"],["type","checkbox",3,"checked","change"]],template:function(e,t){1&e&&(s.ynx(0),s.TgZ(1,"h2"),s._uU(2),s.qZA(),s.TgZ(3,"table",0),s.TgZ(4,"thead"),s.TgZ(5,"tr"),s.TgZ(6,"th",1),s._uU(7,"DLC"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(8,"tbody"),s.YNc(9,r,5,2,"tr",2),s.qZA(),s.qZA(),s.BQk()),2&e&&(s.xp6(2),s.Oqu(t.dlcTitle),s.xp6(7),s.Q6J("ngForOf",t.dlcDemons))},directives:[o.sg],encapsulation:2,changeDetection:0}),e})()},628:(e,t,n)=>{"use strict";n.d(t,{N:()=>O});var s=n(5614),i=n(1116),o=n(6101);function r(e,t){if(1&e&&(s.TgZ(0,"th",4),s._uU(1,"Inheritable Skills"),s.qZA()),2&e){const e=s.oxw();s.uIk("colspan",e.inheritHeaders.length)}}function a(e,t){if(1&e&&(s.TgZ(0,"th",4),s._uU(1,"Skill Affinities"),s.qZA()),2&e){const e=s.oxw();s.uIk("colspan",e.inheritHeaders.length)}}function c(e,t){if(1&e&&(s.ynx(0),s._uU(1),s.BQk()),2&e){const e=s.oxw().$implicit;s.xp6(1),s.Oqu(e)}}function l(e,t){if(1&e&&(s.TgZ(0,"div"),s._uU(1),s.qZA()),2&e){const e=s.oxw().$implicit;s.Gre("element-icon ",e,""),s.xp6(1),s.Oqu(e)}}function p(e,t){if(1&e&&(s.TgZ(0,"th"),s.YNc(1,c,2,1,"ng-container",3),s.YNc(2,l,2,4,"div",5),s.qZA()),2&e){const e=s.oxw();s.Udp("width",100/e.inheritHeaders.length,"%"),s.xp6(1),s.Q6J("ngIf",!e.hasIcons),s.xp6(1),s.Q6J("ngIf",e.hasIcons)}}function h(e,t){if(1&e&&(s.TgZ(0,"td"),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Udp("color",e?null:"transparent"),s.xp6(1),s.hij(" ",e?"yes":"no"," ")}}function m(e,t){if(1&e&&(s.TgZ(0,"tr"),s.YNc(1,h,2,3,"td",6),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.inherits)}}function u(e,t){if(1&e&&(s.TgZ(0,"td"),s.ALo(1,"roundInheritPercent"),s._uU(2),s.qZA()),2&e){const e=t.$implicit;s.Gre("affinity",s.lcZ(1,4,100*e),""),s.xp6(2),s.hij(" ",100*e,"% ")}}function g(e,t){if(1&e&&(s.TgZ(0,"tr"),s.YNc(1,u,3,6,"td",7),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.inherits)}}function d(e,t){if(1&e&&(s.TgZ(0,"td"),s._uU(1),s.ALo(2,"affinityToString"),s.qZA()),2&e){const e=t.$implicit;s.Gre("affinity",e,""),s.xp6(1),s.hij(" ",s.lcZ(2,4,e)," ")}}function f(e,t){if(1&e&&(s.TgZ(0,"tr"),s.YNc(1,d,3,6,"td",7),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.inherits)}}let O=(()=>{class e{constructor(){this.inheritHeaders=[],this.inherits=[],this.hasChance=!1,this.hasIcons=!0,this.hasLvls=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-demon-inherits"]],inputs:{inheritHeaders:"inheritHeaders",inherits:"inherits",hasChance:"hasChance",hasIcons:"hasIcons",hasLvls:"hasLvls"},decls:11,vars:6,consts:[[1,"entry-table"],["class","title",4,"ngIf"],[3,"width",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"title"],[3,"class",4,"ngIf"],[3,"color",4,"ngFor","ngForOf"],[3,"class",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(s.TgZ(0,"table",0),s.TgZ(1,"thead"),s.TgZ(2,"tr"),s.YNc(3,r,2,1,"th",1),s.YNc(4,a,2,1,"th",1),s.qZA(),s.TgZ(5,"tr"),s.YNc(6,p,3,4,"th",2),s.qZA(),s.qZA(),s.TgZ(7,"tbody"),s.YNc(8,m,2,1,"tr",3),s.YNc(9,g,2,1,"tr",3),s.YNc(10,f,2,1,"tr",3),s.qZA(),s.qZA()),2&e&&(s.xp6(3),s.Q6J("ngIf",!t.hasLvls),s.xp6(1),s.Q6J("ngIf",t.hasLvls&&t.inheritHeaders.length),s.xp6(2),s.Q6J("ngForOf",t.inheritHeaders),s.xp6(2),s.Q6J("ngIf",!t.hasLvls&&!t.hasChance),s.xp6(1),s.Q6J("ngIf",t.hasChance),s.xp6(1),s.Q6J("ngIf",t.hasLvls))},directives:[i.O5,i.sg],pipes:[o.DY,o.JZ],encapsulation:2,changeDetection:0}),e})()},4209:(e,t,n)=>{"use strict";n.d(t,{n:()=>u});var s=n(5614),i=n(1116),o=n(3787);function r(e,t){1&e&&(s.TgZ(0,"th"),s._uU(1,"Target"),s.qZA())}function a(e,t){1&e&&(s.TgZ(0,"th"),s._uU(1,"Rank"),s.qZA())}function c(e,t){1&e&&(s.TgZ(0,"th"),s._uU(1,"Inherit"),s.qZA())}function l(e,t){1&e&&(s.TgZ(0,"th"),s._uU(1,"Level"),s.qZA())}const p=function(e,t){return{extra:e,unique:t}};function h(e,t){if(1&e&&s._UZ(0,"tr",4),2&e){const e=t.$implicit,n=s.oxw();s.Q6J("hasTarget",n.hasTarget)("hasRank",n.hasRank)("hasInherit",n.hasInherit)("hasLearned",!1)("hasLvl",n.hasLvl)("data",e)("ngClass",s.WLB(7,p,e.rank>70&&e.rank<90,e.rank>90))}}function m(e,t){if(1&e&&(s.TgZ(0,"tr"),s.TgZ(1,"td"),s._uU(2),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.uIk("colspan",e.skillHeaderLen),s.xp6(1),s.hij("No ",e.title," Found")}}let u=(()=>{class e{constructor(){this.title="Learned Skills",this.hasInherit=!1,this.hasTarget=!1,this.hasRank=!1,this.hasLvl=!0,this.skillHeaderLen=5}ngOnInit(){this.nextColIndices()}ngOnChanges(){this.nextSkills()}nextColIndices(){this.hasInherit&&(this.skillHeaderLen+=1),this.hasTarget&&(this.skillHeaderLen+=1),this.hasRank&&(this.skillHeaderLen+=1)}nextSkills(){this.skills=Object.keys(this.skillLevels).map(e=>this.compendium.getSkill(e));for(const e of this.skills)e.level=this.skillLevels[e.name];this.elemOrder&&this.skills.sort((e,t)=>20*(e.level-t.level)+this.elemOrder[e.element]-this.elemOrder[t.element])}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-demon-skills"]],inputs:{title:"title",hasInherit:"hasInherit",hasTarget:"hasTarget",hasRank:"hasRank",hasLvl:"hasLvl",compendium:"compendium",elemOrder:"elemOrder",skillLevels:"skillLevels"},features:[s.TTD],decls:22,vars:8,consts:[[1,"entry-table"],[1,"title"],[4,"ngIf"],["class","app-smt-skill-list-row",3,"hasTarget","hasRank","hasInherit","hasLearned","hasLvl","data","ngClass",4,"ngFor","ngForOf"],[1,"app-smt-skill-list-row",3,"hasTarget","hasRank","hasInherit","hasLearned","hasLvl","data","ngClass"]],template:function(e,t){1&e&&(s.TgZ(0,"table",0),s.TgZ(1,"thead"),s.TgZ(2,"tr"),s.TgZ(3,"th",1),s._uU(4),s.qZA(),s.qZA(),s.TgZ(5,"tr"),s.TgZ(6,"th"),s._uU(7,"Elem"),s.qZA(),s.TgZ(8,"th"),s._uU(9,"Name"),s.qZA(),s.TgZ(10,"th"),s._uU(11,"Cost"),s.qZA(),s.TgZ(12,"th"),s._uU(13,"Effect"),s.qZA(),s.YNc(14,r,2,0,"th",2),s.YNc(15,a,2,0,"th",2),s.YNc(16,c,2,0,"th",2),s.YNc(17,l,2,0,"th",2),s.qZA(),s.qZA(),s.TgZ(18,"tbody"),s.YNc(19,h,1,10,"tr",3),s.YNc(20,m,3,2,"tr",2),s._UZ(21,"tr"),s.qZA(),s.qZA()),2&e&&(s.xp6(3),s.uIk("colSpan",t.skillHeaderLen),s.xp6(1),s.Oqu(t.title),s.xp6(10),s.Q6J("ngIf",t.hasTarget),s.xp6(1),s.Q6J("ngIf",t.hasRank),s.xp6(1),s.Q6J("ngIf",t.hasInherit),s.xp6(1),s.Q6J("ngIf",t.hasLvl),s.xp6(2),s.Q6J("ngForOf",t.skills),s.xp6(1),s.Q6J("ngIf",!t.skills.length))},directives:[i.O5,i.sg,o.W,i.mk],encapsulation:2,changeDetection:0}),e})()},2573:(e,t,n)=>{"use strict";n.d(t,{O:()=>g});var s=n(5614),i=n(1116);function o(e,t){if(1&e&&(s.TgZ(0,"h2"),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.title)}}function r(e,t){1&e&&(s.TgZ(0,"th"),s._uU(1,"Price"),s.qZA())}function a(e,t){if(1&e&&(s.TgZ(0,"th"),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.xp6(1),s.Oqu(e)}}function c(e,t){1&e&&(s.TgZ(0,"th"),s._uU(1,"Inherits"),s.qZA())}function l(e,t){if(1&e&&(s.TgZ(0,"th"),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.xp6(1),s.Oqu(e)}}function p(e,t){if(1&e&&(s.TgZ(0,"td"),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.price)}}function h(e,t){if(1&e&&(s.TgZ(0,"td"),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.xp6(1),s.Oqu(e)}}function m(e,t){if(1&e&&(s.TgZ(0,"td"),s.TgZ(1,"div"),s._uU(2),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Gre("element-icon ",e.inherit,""),s.xp6(1),s.Oqu(e.inherit)}}const u=["*"];let g=(()=>{class e{constructor(){this.title="Demon Entry",this.statHeaders=[],this.stats=[],this.fusionHeaders=[],this.price=0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-demon-stats"]],inputs:{title:"title",statHeaders:"statHeaders",stats:"stats",fusionHeaders:"fusionHeaders",inherit:"inherit",price:"price"},ngContentSelectors:u,decls:19,vars:10,consts:[[4,"ngIf"],[1,"entry-table"],[1,"title"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(s.F$t(),s.ynx(0),s.YNc(1,o,2,1,"h2",0),s.TgZ(2,"table",1),s.TgZ(3,"thead"),s.TgZ(4,"tr"),s.TgZ(5,"th",2),s._uU(6),s.qZA(),s.qZA(),s.TgZ(7,"tr"),s.YNc(8,r,2,0,"th",0),s.YNc(9,a,2,1,"th",3),s.YNc(10,c,2,0,"th",0),s.YNc(11,l,2,1,"th",3),s.qZA(),s.qZA(),s.TgZ(12,"tbody"),s.TgZ(13,"tr"),s.YNc(14,p,2,1,"td",0),s.YNc(15,h,2,1,"td",3),s.YNc(16,m,3,4,"td",0),s.Hsn(17),s.qZA(),s.qZA(),s.qZA(),s.GkF(18),s.BQk()),2&e&&(s.xp6(1),s.Q6J("ngIf",t.title.includes("Lvl")),s.xp6(4),s.uIk("colSpan",t.stats.length+t.fusionHeaders.length+(t.inherit?1:0)+(t.price?1:0)),s.xp6(1),s.hij(" ",t.title.includes("Lvl")?"Stats":t.title," "),s.xp6(2),s.Q6J("ngIf",t.price),s.xp6(1),s.Q6J("ngForOf",t.statHeaders),s.xp6(1),s.Q6J("ngIf",t.inherit),s.xp6(1),s.Q6J("ngForOf",t.fusionHeaders),s.xp6(3),s.Q6J("ngIf",t.price),s.xp6(1),s.Q6J("ngForOf",t.stats),s.xp6(1),s.Q6J("ngIf",t.inherit))},directives:[i.O5,i.sg],encapsulation:2,changeDetection:0}),e})()},7967:(e,t,n)=>{"use strict";n.d(t,{R:()=>u});var s=n(5614),i=n(9624),o=n(3522),r=n(1116);function a(e,t){if(1&e&&(s.TgZ(0,"th"),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.xp6(1),s.Oqu(e.slice(0,4))}}const c=function(e,t){return[e,t]};function l(e,t){if(1&e&&(s.TgZ(0,"td",4),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("ngClass",s.WLB(2,c,e.slice(0,4),e.slice(4,8))),s.xp6(1),s.Oqu(e.slice(4,8))}}function p(e,t){if(1&e&&(s.TgZ(0,"tr"),s.TgZ(1,"th"),s._uU(2),s.qZA(),s.YNc(3,l,2,5,"td",3),s.TgZ(4,"th"),s._uU(5),s.qZA(),s.qZA()),2&e){const e=t.$implicit;s.xp6(2),s.Oqu(e[0]),s.xp6(1),s.Q6J("ngForOf",e.slice(1,e.length-1)),s.xp6(2),s.Oqu(e[e.length-1])}}function h(e,t){if(1&e&&(s.TgZ(0,"th"),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.xp6(1),s.Oqu(e.slice(0,4))}}function m(e,t){if(1&e&&(s.TgZ(0,"tr"),s.TgZ(1,"th",0),s._uU(2),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.uIk("colspan",e.table[0].length),s.xp6(1),s.AsE("",e.appName," - ",e.tripTitle,"")}}let u=(()=>{class e{constructor(e,t){this.title2=e,this.route=t,this.normTitle="Normal Fusions",this.tripTitle="",this.isPersona=!1,this.filterDarks=!0,this.subscriptions=[],this.table=[]}ngOnInit(){this.subscriptions.push(this.route.parent.data.subscribe(e=>{this.appName=e.appName||"Shin Megami Tensei",this.title2.setTitle(`Fusion Chart - ${this.appName} Fusion Calculator`)}))}ngOnChanges(){this.normChart&&this.fillFusionChart()}ngOnDestroy(){for(const e of this.subscriptions)e.unsubscribe()}fillFusionChart(){const e="None",t=this.normChart.elementDemons;let n=[],s=this.normChart.races,i=[];this.filterDarks&&(n=this.normChart.races.filter(e=>this.normChart.getLightDark(e)>0),s=this.normChart.races.filter(e=>0===this.normChart.getLightDark(e)),i=this.normChart.races.filter(e=>-1===this.normChart.getLightDark(e)),0===i.length&&n.length>0&&(n=this.normChart.races.filter(e=>this.normChart.getLightDark(e)>-1),s=[],i=this.normChart.races.filter(e=>this.normChart.getLightDark(e)<-1)));const o=n.length-i.length,r=n.concat(s,t),a=i.length?i.concat(Array(r.length-i.length).fill("")):r,c=this.mitaTable?r:n.concat(s,Array(t.length).fill("")),l=this.mitaTable||i.length?Array(o).fill("").concat(i,s,t):r;this.table=[[""].concat(r,[""])];for(let p=0;p<l.length;p++){const n=Array(r.length+2).fill("Empt-"),s=l[p],i=c[p],h=-1!==t.indexOf(s),m=-1!==t.indexOf(i);this.table.push(n),n[0]=s,n[n.length-1]=i;for(let o=p;o<r.length;o++){const s=r[o],a=-1!==t.indexOf(s);if(a&&m){const r=t.indexOf(i),a=t.indexOf(s);n[o+1]="mita"+(this.mitaTable[r][a-r-1]||e)}else if(a&&i){const e=this.normChart.getElemFusions(s)[i],t=e?e.toString():"";n[o+1]=e?(e>0?"ran"+t+"+":"ra"+t)+t:"rankNone"}else if(s&&i){const t=this.isPersona&&s===i?s:this.normChart.getRaceFusion(s,i);n[o+1]=(s===i?"elem":"norm")+(t||e)}}if(this.tripChart)for(let t=0;t<=p-o;t++){const i=a[t];if(i&&h){const e=this.tripChart.getElemFusions(s)[i],o=e?e.toString():"";n[t+1]=e?(e>0?"ran"+o+"+":"ra"+o)+o:"rankNone"}else if(i&&s){const o=this.tripChart.getRaceFusion(i,s);n[t+1]=(i===s?"elem":"trip")+(o||e)}}if(-1!==s.indexOf(" x ")){const[e,t]=s.split(" x "),i=e.slice(0,3)+"x"+t.slice(0,3);n[0]=i,n[n.length-1]=i}else if(-1!==s.indexOf(" ")){const e=s.split(" ")[0];n[0]=e,n[n.length-1]=e}}for(let p=0;p<this.table[0].length;p++){const e=this.table[0][p];if(-1!==e.indexOf(" x ")){const[t,n]=e.split(" x ");this.table[0][p]=t.slice(0,2)+n.slice(0,2)}}this.table.push([""].concat(a,[""]))}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(i.Dx),s.Y36(o.gz))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-fusion-chart"]],inputs:{normChart:"normChart",tripChart:"tripChart",mitaTable:"mitaTable",normTitle:"normTitle",tripTitle:"tripTitle",isPersona:"isPersona",filterDarks:"filterDarks",counter:"counter"},features:[s.TTD],decls:12,vars:7,consts:[[1,"title"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(e,t){1&e&&(s.TgZ(0,"table"),s.TgZ(1,"tbody"),s.TgZ(2,"tr"),s.TgZ(3,"th",0),s._uU(4),s.qZA(),s.qZA(),s.TgZ(5,"tr"),s.YNc(6,a,2,1,"th",1),s.qZA(),s.YNc(7,p,6,3,"tr",1),s.TgZ(8,"tr"),s.YNc(9,h,2,1,"th",1),s.qZA(),s.YNc(10,m,3,3,"tr",2),s.qZA(),s._UZ(11,"tbody"),s.qZA()),2&e&&(s.xp6(3),s.uIk("colspan",t.table[0].length),s.xp6(1),s.AsE("",t.appName," - ",t.normTitle,""),s.xp6(2),s.Q6J("ngForOf",t.table[0]),s.xp6(1),s.Q6J("ngForOf",t.table.slice(1,t.table.length-1)),s.xp6(2),s.Q6J("ngForOf",t.table[t.table.length-1]),s.xp6(1),s.Q6J("ngIf",t.tripTitle))},directives:[r.sg,r.O5,r.mk],styles:["table[_ngcontent-%COMP%]{width:auto;margin:0 auto}td.elem[_ngcontent-%COMP%]{color:#0f0}td.trip[_ngcontent-%COMP%]{color:#d3d3d3}td.ra-2[_ngcontent-%COMP%]{color:orange}td.ra-1[_ngcontent-%COMP%]{color:red}td.ran1[_ngcontent-%COMP%]{color:#0f0}td.ran2[_ngcontent-%COMP%]{color:#0ff}td.None[_ngcontent-%COMP%]{color:transparent}td.Ara[_ngcontent-%COMP%], td.Fien[_ngcontent-%COMP%], td.Flae[_ngcontent-%COMP%], td.Sala[_ngcontent-%COMP%]{color:red}td.Aqua[_ngcontent-%COMP%], td.Enig[_ngcontent-%COMP%], td.Nigi[_ngcontent-%COMP%], td.Undi[_ngcontent-%COMP%]{color:#0ff}td.Aero[_ngcontent-%COMP%], td.Kusi[_ngcontent-%COMP%], td.Sylp[_ngcontent-%COMP%], td.UMA[_ngcontent-%COMP%]{color:#0f0}td.Erth[_ngcontent-%COMP%], td.Gnom[_ngcontent-%COMP%], td.Rand[_ngcontent-%COMP%], td.Saki[_ngcontent-%COMP%]{color:orange}td.Empt[_ngcontent-%COMP%]{background-color:initial;color:transparent}"],changeDetection:0}),e})()},4354:(e,t,n)=>{"use strict";n.d(t,{O:()=>u});var s=n(1501),i=n(649),o=n(5614),r=n(1116),a=n(3522);const c=function(){return{exact:!0}};function l(e,t){if(1&e&&(o.TgZ(0,"th",4),o.TgZ(1,"a",5),o._uU(2),o.qZA(),o.qZA()),2&e){const e=t.$implicit,n=o.oxw();o.Udp("width",100/n.fusionOptions.length,"%"),o.Q6J("routerLink",e.link)("routerLinkActiveOptions",o.DdM(6,c)),o.xp6(1),o.Q6J("routerLink",e.link),o.xp6(1),o.Oqu(e.title)}}function p(e,t){if(1&e&&(o.TgZ(0,"tr"),o.TgZ(1,"th",6),o._uU(2," DLC marked as excluded in fusion settings, results may be inaccurate! "),o.qZA(),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.uIk("colspan",e.fusionOptions.length)}}function h(e,t){if(1&e&&(o.TgZ(0,"tr"),o.TgZ(1,"th",6),o.Hsn(2),o.qZA(),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.uIk("colspan",e.fusionOptions.length)}}const m=["*"];let u=(()=>{class e{constructor(){this.hasTripleFusion=!1,this.showFusionAlert=!1,this.excludedDlc=!1,this.fusionOptions=e.NORMAL_FUSIONS}ngOnInit(){this.fusionOptions=this.hasTripleFusion?e.TRIPLE_FUSIONS:e.NORMAL_FUSIONS}ngOnChanges(){setTimeout(()=>this.stickyTable.nextEdges())}}return e.NORMAL_FUSIONS=[{title:"Reverse Fusions",link:"fissions"},{title:"Forward Fusions",link:"fusions"}],e.TRIPLE_FUSIONS=[{title:"Normal Reverse Fusions",link:"fissions"},{title:"Triple Reverse Fusions",link:"fissions/triple"},{title:"Triple Forward Fusions",link:"fusions/triple"},{title:"Normal Forward Fusions",link:"fusions"}],e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-smt-fusions"]],viewQuery:function(e,t){if(1&e&&o.Gf(i.v,5),2&e){let e;o.iGM(e=o.CRH())&&(t.stickyTable=e.first)}},inputs:{hasTripleFusion:"hasTripleFusion",showFusionAlert:"showFusionAlert",excludedDlc:"excludedDlc"},features:[o._Bn([s.L]),o.TTD],ngContentSelectors:m,decls:11,vars:3,consts:[["appPositionSticky","",1,"list-table"],["stickyTable",""],["class","nav","routerLinkActive","active",3,"routerLink","width","routerLinkActiveOptions",4,"ngFor","ngForOf"],[4,"ngIf"],["routerLinkActive","active",1,"nav",3,"routerLink","routerLinkActiveOptions"],[3,"routerLink"],[1,"title"]],template:function(e,t){1&e&&(o.F$t(),o.TgZ(0,"div"),o.TgZ(1,"table",0,1),o.TgZ(3,"thead"),o.TgZ(4,"tr"),o.YNc(5,l,3,7,"th",2),o.qZA(),o.YNc(6,p,3,1,"tr",3),o._UZ(7,"tr"),o.YNc(8,h,3,1,"tr",3),o._UZ(9,"tr"),o.qZA(),o.qZA(),o._UZ(10,"router-outlet"),o.qZA()),2&e&&(o.xp6(5),o.Q6J("ngForOf",t.fusionOptions),o.xp6(1),o.Q6J("ngIf",t.excludedDlc),o.xp6(2),o.Q6J("ngIf",t.showFusionAlert))},directives:[i.v,r.sg,r.O5,a.lC,a.Od,a.rH,a.yS],encapsulation:2,changeDetection:0}),e})()},9805:(e,t,n)=>{"use strict";n.d(t,{f:()=>i});var s=n(5614);let i=(()=>{class e{constructor(e,t){this.changeDetector2=e,this.fusionDataService2=t,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.fusionDataService2.compendium.subscribe(e=>{this.changeDetector2.markForCheck(),this.compendium=e,this._dlcDemons=Object.assign({},this.compendium.dlcDemons),this.dlcDemons=Object.entries(this._dlcDemons).map(([e,t])=>({name:e,included:t}))}))}ngOnDestroy(){for(const e of this.subscriptions)e.unsubscribe()}toggleName(e){this._dlcDemons[e]=!this._dlcDemons[e],this.fusionDataService2.nextDlcDemons(this._dlcDemons)}}return e.\u0275fac=function(e){s.$Z()},e.\u0275dir=s.lG2({type:e}),e})()},1187:(e,t,n)=>{"use strict";n.d(t,{V:()=>G});var s=n(3522),i=n(5614),o=n(7089),r=n(1116);const a=function(){return{title:"Shadow List",link:"shadows"}},c=function(e){return[e]};let l=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-p5-compendium"]],decls:1,vars:6,consts:[[3,"ngClass","mainList","otherLinks"]],template:function(e,t){1&e&&i._UZ(0,"app-demon-compendium",0),2&e&&i.Q6J("ngClass","p5")("mainList","persona")("otherLinks",i.VKq(4,c,i.DdM(3,a)))},directives:[o.e,r.mk],styles:[".p5 div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:50%;color:transparent}.p5 div.element-icon.phys{background-image:url(/assets/images/p5/phys.png)}.p5 div.element-icon.gun{background-image:url(/assets/images/p5/gun.png)}.p5 div.element-icon.fire{background-image:url(/assets/images/p5/fire.png)}.p5 div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p5 div.element-icon.elec{background-image:url(/assets/images/p5/elec.png)}.p5 div.element-icon.wind{background-image:url(/assets/images/p5/wind.png)}.p5 div.element-icon.psy{background-image:url(/assets/images/p5/psy.png)}.p5 div.element-icon.nuke{background-image:url(/assets/images/p5/nuke.png)}.p5 div.element-icon.bless{background-image:url(/assets/images/p5/bless.png)}.p5 div.element-icon.curse{background-image:url(/assets/images/p5/curse.png)}.p5 div.element-icon.ailment{background-image:url(/assets/images/p5/ailment.png)}.p5 div.element-icon.healing,.p5 div.element-icon.recovery{background-image:url(/assets/images/p5/healing.png)}.p5 div.element-icon.almighty{background-image:url(/assets/images/p5/almighty.png)}.p5 div.element-icon.support{background-image:url(/assets/images/p5/support.png)}.p5 div.element-icon.passive{background-image:url(/assets/images/p5/passive.png)}.p5 div.element-icon.trait{background-image:url(/assets/images/p5/trait.png)}.p5 th.nav.active,.p5 th.nav.active a,.p5 th.title{color:#fff;background-color:#f41000}"],encapsulation:2,changeDetection:0}),e})();var p=n(5438),h=n(9624),m=n(2592),u=n(4008);let g=(()=>{class e extends p.l{constructor(e,t,n,s){super(e,n,s),this.showAllies=!t.snapshot.data.showShadows,this.showEnemies=!this.showAllies,this.compConfig=s.compConfig,this.defaultSortFun=(e,t)=>200*(this.compConfig.raceOrder[e.race]-this.compConfig.raceOrder[t.race])+t.lvl-e.lvl,this.appName=`List of Personas - ${s.appName}`,this.statHeaders=this.compConfig.baseStats,this.resistHeaders=this.compConfig.resistElems,this.inheritOrder=this.compConfig.elemOrder,this.showEnemies&&(this.appName=`List of Shadows - ${s.appName}`,this.statHeaders=["HP","MP"],this.resistHeaders=this.compConfig.enemyResists,this.inheritOrder=null)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(h.Dx),i.Y36(s.gz),i.Y36(i.sBO),i.Y36(m.Y))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-demon-list-container"]],features:[i.qOj],decls:2,vars:8,consts:[[3,"isEnemy","raceOrder","inheritOrder","statHeaders","resistHeaders","rowData"]],template:function(e,t){1&e&&(i._UZ(0,"app-smt-demon-list",0),i.ALo(1,"async")),2&e&&i.Q6J("isEnemy",t.showEnemies)("raceOrder",t.compConfig.raceOrder)("inheritOrder",t.inheritOrder)("statHeaders",t.statHeaders)("resistHeaders",t.resistHeaders)("rowData",i.lcZ(1,6,t.demons))},directives:[u.Q],pipes:[r.Ov],encapsulation:2,changeDetection:0}),e})();var d=n(9261),f=n(3787);let O=(()=>{class e extends d.e{constructor(e,t,n){super(e,t,n),this.compConfig=n.compConfig,this.appName=`List of Skills - ${n.appName}`,this.defaultSortFun=(e,t)=>1e4*(this.compConfig.elemOrder[e.element]-this.compConfig.elemOrder[t.element])+e.rank-t.rank}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(h.Dx),i.Y36(i.sBO),i.Y36(m.Y))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-skill-list-container"]],features:[i.qOj],decls:2,vars:7,consts:[[3,"elemOrder","hasRank","isPersona","transferTitle","rowData"]],template:function(e,t){1&e&&(i._UZ(0,"app-smt-skill-list",0),i.ALo(1,"async")),2&e&&i.Q6J("elemOrder",t.compConfig.elemOrder)("hasRank",!1)("isPersona",!0)("transferTitle","Skill Card")("rowData",i.lcZ(1,5,t.skills))},directives:[f.J],pipes:[r.Ov],encapsulation:2,changeDetection:0}),e})();var Z=n(2573),v=n(858),T=n(628),k=n(4209),x=n(4354),b=n(4897),C=n(3966);function A(e,t){if(1&e&&(i.TgZ(0,"a",6),i._uU(1),i.qZA()),2&e){const e=i.oxw();i.MGl("routerLink","../../personas/",e.demon.persona,""),i.xp6(1),i.hij(" ",e.demon.persona," ")}}const D=function(){return["EXP","Yen","HP","MP"]},q=function(e,t){return[e,t]};let _=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-enemy-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig"},decls:27,vars:16,consts:[[3,"title","statHeaders","stats"],[1,"entry-table"],["colspan","4",1,"title"],[3,"routerLink",4,"ngIf"],[3,"resistHeaders","resists"],[3,"elemOrder","compendium","skillLevels"],[3,"routerLink"]],template:function(e,t){1&e&&(i._UZ(0,"app-demon-stats",0),i.TgZ(1,"table",1),i.TgZ(2,"thead"),i.TgZ(3,"tr"),i.TgZ(4,"th",2),i._uU(5,"Negotiation"),i.qZA(),i.qZA(),i.TgZ(6,"tr"),i.TgZ(7,"th"),i._uU(8,"Persona"),i.qZA(),i.TgZ(9,"th"),i._uU(10,"Personality"),i.qZA(),i.TgZ(11,"th"),i._uU(12,"Areas"),i.qZA(),i.TgZ(13,"th"),i._uU(14,"Drops"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(15,"tbody"),i.TgZ(16,"tr"),i.TgZ(17,"td"),i.YNc(18,A,2,2,"a",3),i.qZA(),i.TgZ(19,"td"),i._uU(20),i.qZA(),i.TgZ(21,"td"),i._uU(22),i.qZA(),i.TgZ(23,"td"),i._uU(24),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i._UZ(25,"app-demon-resists",4),i._UZ(26,"app-demon-skills",5)),2&e&&(i.Q6J("title","Lvl "+t.demon.lvl+" "+t.demon.race+" "+t.demon.name)("statHeaders",i.DdM(12,D).concat(t.compConfig.baseStats))("stats",i.WLB(13,q,t.demon.exp,t.demon.price).concat(t.demon.stats,t.demon.estats)),i.xp6(18),i.Q6J("ngIf",t.demon.persona&&"-"!=t.demon.persona),i.xp6(2),i.Oqu(t.demon.trait),i.xp6(2),i.Oqu(t.demon.area),i.xp6(2),i.Oqu(t.demon.item),i.xp6(1),i.Q6J("resistHeaders",t.compConfig.resistElems)("resists",t.demon.resists),i.xp6(1),i.Q6J("elemOrder",t.compConfig.elemOrder)("compendium",t.compendium)("skillLevels",t.demon.skills))},directives:[Z.O,r.O5,v.I,k.n,s.yS],encapsulation:2,changeDetection:0}),e})();function y(e,t){if(1&e&&(i.TgZ(0,"li"),i.TgZ(1,"a",14),i._uU(2),i.qZA(),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.MGl("routerLink","../",e,""),i.xp6(1),i.hij("",e," ")}}function N(e,t){if(1&e&&(i.TgZ(0,"li"),i.TgZ(1,"a",14),i._uU(2),i.qZA(),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.MGl("routerLink","../",e,""),i.xp6(1),i.hij("",e," ")}}function L(e,t){if(1&e&&(i.TgZ(0,"tr"),i.TgZ(1,"td"),i._uU(2),i.qZA(),i.TgZ(3,"td"),i.TgZ(4,"ul",13),i.YNc(5,y,3,2,"li",12),i.qZA(),i.qZA(),i.TgZ(6,"td"),i._uU(7),i.qZA(),i.TgZ(8,"td"),i._uU(9),i.qZA(),i.TgZ(10,"td"),i.TgZ(11,"ul",13),i.YNc(12,N,3,2,"li",12),i.qZA(),i.qZA(),i.qZA()),2&e){const e=t.$implicit;i.xp6(2),i.Oqu(e.price),i.xp6(3),i.Q6J("ngForOf",e.names1),i.xp6(2),i.Oqu(e.lvl1),i.xp6(2),i.Oqu(e.lvl2),i.xp6(3),i.Q6J("ngForOf",e.names2)}}function I(e,t){if(1&e&&(i.TgZ(0,"table",8),i.TgZ(1,"thead"),i.TgZ(2,"tr"),i.TgZ(3,"th",9),i._uU(4),i.qZA(),i.qZA(),i.TgZ(5,"tr"),i.TgZ(6,"th",10),i._uU(7,"Price"),i.qZA(),i.TgZ(8,"th",11),i._uU(9,"Ingredient 1"),i.qZA(),i.TgZ(10,"th"),i._uU(11,"Treasure Demon 2"),i.qZA(),i.qZA(),i.TgZ(12,"tr"),i.TgZ(13,"th"),i._uU(14,"Names"),i.qZA(),i.TgZ(15,"th"),i._uU(16,"MinLvl"),i.qZA(),i.TgZ(17,"th"),i._uU(18,"MaxLvl"),i.qZA(),i.TgZ(19,"th"),i._uU(20,"Names"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(21,"tbody"),i.YNc(22,L,13,5,"tr",12),i.qZA(),i.qZA()),2&e){const e=i.oxw().ngIf,t=i.oxw(2);i.xp6(4),i.hij("Ingredient 1 x Treasure Demon 2 = ",t.demon.name,""),i.xp6(18),i.Q6J("ngForOf",e)}}function w(e,t){if(1&e&&(i.ynx(0),i.YNc(1,I,23,2,"table",7),i.BQk()),2&e){const e=t.ngIf;i.xp6(1),i.Q6J("ngIf",e.length)}}const U=function(){return["Electric Chair"]};function F(e,t){if(1&e&&(i.ynx(0),i.TgZ(1,"app-demon-stats",2),i.TgZ(2,"td"),i._uU(3),i.qZA(),i.qZA(),i._UZ(4,"app-demon-resists",3),i._UZ(5,"app-demon-inherits",4),i._UZ(6,"app-demon-skills",5),i.YNc(7,w,2,1,"ng-container",0),i._UZ(8,"app-smt-fusions",6),i.BQk()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("title","Lvl "+e.demon.lvl+" "+e.demon.race+" "+e.demon.name)("price",e.demon.price)("statHeaders",e.compConfig.baseStats)("stats",e.demon.stats)("fusionHeaders",i.DdM(16,U))("inherit",e.demon.inherit),i.xp6(2),i.Oqu(e.demon.item),i.xp6(1),i.Q6J("resistHeaders",e.compConfig.resistElems)("resists",e.demon.resists),i.xp6(1),i.Q6J("inheritHeaders",e.compConfig.inheritElems)("inherits",e.compendium.getInheritElems(e.demon.inherit)),i.xp6(1),i.Q6J("elemOrder",e.compConfig.elemOrder)("compendium",e.compendium)("skillLevels",e.demon.skills),i.xp6(1),i.Q6J("ngIf",e.compendium.splitMultiFusion(e.name)),i.xp6(1),i.Q6J("excludedDlc","excluded"===e.demon.fusion)}}function S(e,t){if(1&e&&i._UZ(0,"app-demon-missing",15),2&e){const e=i.oxw();i.Q6J("name",e.name)}}function J(e,t){if(1&e&&i._UZ(0,"app-demon-entry",1),2&e){const e=i.oxw();i.Q6J("name",e.name)("demon",e.demon)("compConfig",e.compConfig)("compendium",e.compendium)}}function Q(e,t){if(1&e&&i._UZ(0,"app-enemy-entry",1),2&e){const e=i.oxw();i.Q6J("name",e.name)("demon",e.demon)("compConfig",e.compConfig)("compendium",e.compendium)}}let Y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"title","price","statHeaders","stats","fusionHeaders","inherit"],[3,"resistHeaders","resists"],[3,"inheritHeaders","inherits"],[3,"elemOrder","compendium","skillLevels"],[3,"excludedDlc"],["class","entry-table",4,"ngIf"],[1,"entry-table"],["colspan","5",1,"title"],["rowspan","2"],["colspan","3"],[4,"ngFor","ngForOf"],[1,"comma-list"],[3,"routerLink"],[3,"name"]],template:function(e,t){1&e&&(i.YNc(0,F,9,17,"ng-container",0),i.YNc(1,S,1,1,"app-demon-missing",1)),2&e&&(i.Q6J("ngIf",t.demon),i.xp6(1),i.Q6J("ngIf",!t.demon))},directives:[r.O5,Z.O,v.I,T.N,k.n,x.O,r.sg,s.yS,b.t],encapsulation:2,changeDetection:0}),e})(),M=(()=>{class e{constructor(e,t,n,s){this.route=e,this.title=t,this.currentDemonService=n,this.fusionDataService=s,this.subscriptions=[],this.appName="Test App",this.appName=s.appName,this.compConfig=s.compConfig}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const e of this.subscriptions)e.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(e=>{this.compendium=e,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(e=>{this.name=e,this.getDemonEntry()})),this.route.params.subscribe(e=>{this.currentDemonService.nextCurrentDemon(e.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(`${this.name} - ${this.appName}`),this.demon=this.compendium.getDemon(this.name))}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(s.gz),i.Y36(h.Dx),i.Y36(C.s),i.Y36(m.Y))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-demon-entry-container"]],decls:2,vars:2,consts:[[3,"name","demon","compConfig","compendium",4,"ngIf"],[3,"name","demon","compConfig","compendium"]],template:function(e,t){1&e&&(i.YNc(0,J,1,4,"app-demon-entry",0),i.YNc(1,Q,1,4,"app-enemy-entry",0)),2&e&&(i.Q6J("ngIf",!t.demon||!t.demon.isEnemy),i.xp6(1),i.Q6J("ngIf",t.demon&&t.demon.isEnemy))},directives:[r.O5,Y,_],encapsulation:2,changeDetection:0}),e})();var H=n(9805),P=n(8623);let E=(()=>{class e extends H.f{constructor(e,t){super(e,t),this.changeDetector=e,this.fusionDataService=t,this.appTitle=t.appName}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.sBO),i.Y36(m.Y))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-demon-dlc-settings-container"]],features:[i.qOj],decls:1,vars:3,consts:[[3,"dlcDemons","appTitle","dlcTitle","toggledName"]],template:function(e,t){1&e&&(i.TgZ(0,"app-demon-dlc-settings",0),i.NdJ("toggledName",function(e){return t.toggleName(e)}),i.qZA()),2&e&&i.Q6J("dlcDemons",t.dlcDemons)("appTitle",t.appTitle)("dlcTitle","Included DLC Personas")},directives:[P.d],encapsulation:2,changeDetection:0}),e})();var R=n(7967);let j=(()=>{class e{constructor(e,t){this.changeDetectorRef=e,this.fusionDataService=t,this.mitaTable=[],this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(e=>{this.changeDetectorRef.markForCheck(),this.normChart=e,this.updateMitamas()})),this.subscriptions.push(this.fusionDataService.compendium.subscribe(e=>{this.changeDetectorRef.markForCheck(),this.compendium=e,this.updateMitamas()}))}ngOnDestroy(){for(const e of this.subscriptions)e.unsubscribe()}updateMitamas(){if(!this.compendium||!this.normChart)return;const e=this.normChart.elementDemons.map(e=>this.compendium.getDemon(e).race),t=[];for(let n=0;n<e.length;n++){const s=e[n];t.push(e.slice(n+1,e.length).map(e=>this.normChart.getRaceFusion(s,e)))}this.mitaTable=t}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.sBO),i.Y36(m.Y))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-fusion-chart-container"]],decls:1,vars:3,consts:[[3,"normChart","mitaTable","isPersona"]],template:function(e,t){1&e&&i._UZ(0,"app-fusion-chart",0),2&e&&i.Q6J("normChart",t.normChart)("mitaTable",t.mitaTable)("isPersona",!0)},directives:[R.R],encapsulation:2,changeDetection:0}),e})();var $=n(5946),B=n(2060);const X=[{path:"",redirectTo:"personas",pathMatch:"full"},{path:"",component:l,data:{fusionTool:"chart"},children:[{path:"chart",component:j}]},{path:"",component:l,children:[{path:"shadows/:demonName",component:M},{path:"personas/:demonName",component:M,children:[{path:"fissions",component:$.t},{path:"fusions",component:B.$},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"personas",component:g},{path:"shadows",component:g,data:{showShadows:!0}},{path:"skills",component:O},{path:"settings",component:E}]},{path:"**",redirectTo:"personas",pathMatch:"full"}];let G=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[s.Bz.forChild(X)],s.Bz]}),e})()},2592:(e,t,n)=>{"use strict";n.d(t,{Y:()=>O});var s=n(8512);class i{constructor(e){this.compConfig=e,this.initImportedData(),this.updateDerivedData()}initImportedData(){const e={},t={},n={},s={},i={},o={},r={};for(const a of this.compConfig.demonData)for(const[t,n]of Object.entries(a))e[t]={name:t,item:n.item||"",race:n.race,lvl:n.lvl,currLvl:n.lvl,skills:n.skills,price:Math.pow(n.stats.reduce((e,t)=>t+e,0),2)+2e3,stats:n.stats,resists:n.resists.split("").map(e=>this.compConfig.resistCodes[e]),fusion:n.fusion||"normal",inherit:n.inherits,prereq:n.prereq||"",persona:t,trait:"",exp:0},n.itemr&&(e[t].item+=", "+n.itemr);for(const a of this.compConfig.enemyData)for(const[e,n]of Object.entries(a)){const s=[n.material||"-",n.armor||"-",n.card||"-"].filter(e=>"-"!==e);t[e]={name:e,persona:n.persona,trait:n.trait,exp:n.exp,race:n.race,lvl:n.lvl,currLvl:n.lvl,price:n.yen,stats:n.stats.slice(0,2),estats:n.stats.slice(2),resists:n.resists.split("").map(e=>this.compConfig.resistCodes[e]),fusion:"normal",skills:(n.skills||[]).reduce((e,t)=>(e[t]=0,e),{}),area:n.area.join(", "),item:s.join(", ")||"-",isEnemy:!0}}for(const a of this.compConfig.skillData)for(const[e,t]of Object.entries(a))n[e]={name:e,element:t.element,effect:t.effect,rank:t.cost/100||0,cost:t.cost||0,transfer:[],learnedBy:[],level:0},t.card&&(n[e].transfer=[{demon:t.card,level:-100}]),t.unique&&(n[e].rank=99);for(const[a,c]of Object.entries(this.compConfig.specialRecipes)){const t=e[a],n=c;t.fusion="special",s[a]=n,2===n.length&&(r[n[0]]=n[1],r[n[1]]=n[0]),0===n.length&&(t.fusion="recruit")}for(const a of this.compConfig.races)i[a]={};for(const a of Object.values(t))if(a.item){const e=a.item.split(", "),t=e[e.length-1];n[t]&&n[t].transfer.unshift({demon:a.persona,level:5275})}for(const[a,c]of Object.entries(e)){if(c.item){const[e,t]=c.item.split(", ");n[e]&&n[e].transfer.unshift({demon:a,level:0}),n[t]&&n[t].transfer.unshift({demon:a,level:3865})}"party"!==c.fusion&&(i[c.race][c.lvl]=a)}for(const a of Object.values(e))for(const e of Object.keys(a.skills))n[e].learnedBy.push({demon:a.name,level:a.skills[e]});for(const a of this.compConfig.downloadedDemons)o[a]=!0;for(const a of this.compConfig.dlcDemons)o[a]=!1;this.demons=e,this.enemies=t,this.skills=n,this.specialRecipes=s,this.invertedDemons=i,this._dlcDemons=o,this.normalExceptions=r}updateDerivedData(){const e=Object.assign({},this.demons),t=Object.keys(this.skills).map(e=>this.skills[e]).filter(e=>0!==e.learnedBy.length||0!==e.transfer.length),n={},s={};for(const r of this.compConfig.races)n[r]=[],s[r]=[];for(const[r,a]of Object.entries(this.demons))"party"!==a.fusion&&(this.isElementDemon(r)||n[a.race].push(a.lvl),this.specialRecipes.hasOwnProperty(r)&&"World"!==a.race||s[a.race].push(a.lvl));for(const r of this.compConfig.races)n[r].sort((e,t)=>e-t),s[r].sort((e,t)=>e-t);for(const[r,a]of Object.entries(this._dlcDemons))for(const t of r.split(",")){if(!a){const{race:i,lvl:o}=this.demons[t];delete e[t],n[i]=n[i].filter(e=>e!==o),s[i]=s[i].filter(e=>e!==o)}this.demons[t].fusion=a?"normal":"excluded"}const i=Object.keys(e).map(t=>e[t]),o=Object.keys(this.enemies).map(e=>this.enemies[e]);this._allDemons=o.concat(i),this._allSkills=t,this.allIngredients=n,this.allResults=s}get dlcDemons(){return this._dlcDemons}set dlcDemons(e){this._dlcDemons=e,this.updateDerivedData()}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return Object.keys(this.specialRecipes).filter(e=>!this.isElementDemon(e)).map(e=>this.demons[e])}getDemon(e){return this.demons[e]||this.enemies[e]}getSkill(e){return this.skills[e]}getSkills(e){const t=[];for(const[n,s]of Object.entries(e))t.push(this.skills[n]),this.skills[n].level=s;return t.sort((e,t)=>100*(e.level-t.level)+this.compConfig.elemOrder[e.element]-this.compConfig.elemOrder[t.element]),t}getIngredientDemonLvls(e){return this.allIngredients[e]||[]}getResultDemonLvls(e){return this.allResults[e]||[]}getSpecialNameEntries(e){return this.specialRecipes[e]||[]}getSpecialNamePairs(e){return[]}getElementDemons(e){return Object.keys(this.specialRecipes).filter(t=>this.isElementDemon(t)&&t!==e)}getNormalException(e){return this.normalExceptions[e]}getInheritElems(e){return this.compConfig.inheritTypes[e]}reverseLookupDemon(e,t){return this.invertedDemons[e][t]}reverseLookupSpecial(e){return[]}isElementDemon(e){return this.specialRecipes.hasOwnProperty(e)&&0===this.specialRecipes[e].length}isRecruitmentOnly(e){return this.isElementDemon(e)}isExcludedDemon(e){const{race:t,lvl:n}=this.getDemon(e);return-1===this.allIngredients[t].indexOf(n)}splitMultiFusion(e){const t=[],n={},{race:s,lvl:i}=this.getDemon(e),o=this.compConfig.elementTable,r=o.races.indexOf(s),a=this.getResultDemonLvls(s).concat([99]),c=a.indexOf(i),l=[i];if(-1===r||-1===c)return[];for(let p=0;p<o.table[r].length;p++){const e=o.table[r][p];n[e]||(n[e]=[]),n[e].push(o.elems[p])}c>1&&n[2]&&t.push({price:0,names1:[],lvl1:a[c-2],names2:n[2],lvl2:a[c-1]-1}),c>0&&n[1]&&t.push({price:0,names1:[],lvl1:a[c-1],names2:n[1],lvl2:i-1}),n[-1]&&t.push({price:0,names1:[],lvl1:i+1,names2:n[-1],lvl2:a[c+1]}),c<a.length-2&&n[-1]&&(l.push(a[c+1]),t.push({price:0,names1:[this.reverseLookupDemon(s,a[c+1])],lvl1:a[c+1],names2:n[-1],lvl2:a[c+2]})),c<a.length-2&&n[-2]&&t.push({price:0,names2:n[-2],lvl1:a[c+1]+1,lvl2:a[c+2],names1:[]}),c<a.length-3&&n[-2]&&(l.push(a[c+2]),t.push({price:0,names1:[this.reverseLookupDemon(s,a[c+2])],lvl1:a[c+2],names2:n[-2],lvl2:a[c+3]}),t.push({price:0,names1:[this.reverseLookupDemon(s,a[c+1])],lvl1:a[c+2]+1,names2:n[-2],lvl2:a[c+3]}));for(const p of t.filter(e=>0===e.names1.length))for(const e of this.getIngredientDemonLvls(s).filter(e=>!l.includes(e)))e<=p.lvl2&&p.names1.push(this.reverseLookupDemon(s,e));for(const p of t)p.price=Math.pow(3*p.lvl1+7,2)+2e3;return t.filter(e=>e.names1.length>0)}}var o=n(6829);class r extends o.g{constructor(e,t){super(),this.lvlModifier=.5,this.initCharts(e,t)}initCharts(e,t){const n=e.races,s=e.table,i=t.elems,r=t.races,a=t.table;this.elementDemons=i,this.fusionChart=o.g.loadFusionTableJson(n,s),this.fissionChart=o.g.loadFissionTableJson(n,i,s),this.elementChart=o.g.loadElementTableJson(r,i,a),this.races=n}}var a=n(115),c=n(4693),l=n(9658),p=n(601),h=n(4351);function m(e,t,n){const s=[],{race:i,lvl:o}=t.getDemon(e);for(const r of n.elementDemons.filter(t=>t!==e)){const{race:e,lvl:a}=t.getDemon(r),c=n.getRaceFusions(i)[e],l=t.getResultDemonLvls(c),p=l.reduce((e,t)=>o+a>=2*t?e+1:e,0),h=t.reverseLookupDemon(c,p===l.length?l[l.length-1]:l[p]);s.push({name1:r,name2:h})}return s}var u=n(3613),g=n(8521),d=n(5614),f=n(3522);let O=(()=>{class e{constructor(e,t){this.fissionCalculator=new c.N([u.M,g.L],[]),this.fusionCalculator=new c.N([l.ne,p.e,l.Co],[h.Eh,h.s0,m]),this.compConfig=e,this.appName=e.appTitle+" Fusion Calculator",this.fusionSettingsKey=e.settingsKey,this.fusionSettingsVersion=e.settingsVersion,this._compendium=new i(e),this._compendium$=new s.X(this._compendium),this.compendium=this._compendium$.asObservable(),this._fusionChart=new r(e.normalTable,e.elementTable),this._fusionChart$=new s.X(this._fusionChart),this.fusionChart=this._fusionChart$.asObservable();const n=JSON.parse(localStorage.getItem(this.fusionSettingsKey));n&&n.version&&n.version>=this.fusionSettingsVersion&&this.nextDlcDemons(n.dlcDemons),window.addEventListener("storage",this.onStorageUpdated.bind(this))}nextDlcDemons(e){localStorage.setItem(this.fusionSettingsKey,JSON.stringify({version:this.fusionSettingsVersion,dlcDemons:e})),this._compendium.dlcDemons=e,this._compendium$.next(this._compendium)}onStorageUpdated(e){switch(e.key){case this.fusionSettingsKey:this._compendium.dlcDemons=JSON.parse(e.newValue).dlcDemons,this._compendium$.next(this._compendium)}}}return e.\u0275fac=function(t){return new(t||e)(d.LFG(a.I7),d.LFG(f.F0))},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac}),e})()},2891:(e,t,n)=>{"use strict";n.d(t,{f:()=>c});var s=n(1116),i=n(5425),o=n(6487),r=n(1187),a=n(5614);let c=(()=>{class e{static forRoot(){return{ngModule:e}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[s.ez,i.m,o.a,r.V]]}),e})()},9771:e=>{"use strict";e.exports=JSON.parse('{"sn":["phys","gun","fire","ice","elec","wind","psy","nuke","bless","curse","ailment","healing"],"XW":["phys","fire","ice","elec","wind","psy","nuke","bless","curse","ailment","healing","support","almighty"],"bo":["OO--------OO","OOO-OOOOOOOO","OO-OOOOOOOOO","OOOOO-OOOOOO","OOOO-OOOOOOO","OOOOOOO-OOOO","OOOOOO-OOOOO","--OOOOOOO--O","--OOOOOO-OO-","OOOOOOOO-OO-","--OOOOOOO-OO","OOOOOOOOOOOO","OOOOOOOOOOOO"]}')}}]);