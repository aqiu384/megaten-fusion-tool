(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[541],{8623:(t,e,n)=>{"use strict";n.d(e,{d:()=>a});var s=n(5614),i=n(9624),o=n(1116);function r(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"tr"),s.TgZ(1,"td"),s.TgZ(2,"label"),s._uU(3),s.TgZ(4,"input",3),s.NdJ("change",function(){const e=s.CHM(t).$implicit;return s.oxw().toggledName.emit(e.name)}),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=e.$implicit;s.xp6(3),s.hij("",t.name.split(",").join(", ")," "),s.xp6(1),s.Q6J("checked",t.included)}}let a=(()=>{class t{constructor(t){this.title=t,this.dlcTitle="Included DLC Demons",this.langEn=!0,this.toggledName=new s.vpe}set appTitle(t){this.title.setTitle((this.langEn?"Fusion Settings - ":"\u5408\u4f53\u8a2d\u5b9a ")+t)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(i.Dx))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-demon-dlc-settings"]],inputs:{dlcDemons:"dlcDemons",dlcTitle:"dlcTitle",langEn:"langEn",appTitle:"appTitle"},outputs:{toggledName:"toggledName"},decls:10,vars:2,consts:[[1,"entry-table"],[1,"title"],[4,"ngFor","ngForOf"],["type","checkbox",3,"checked","change"]],template:function(t,e){1&t&&(s.ynx(0),s.TgZ(1,"h2"),s._uU(2),s.qZA(),s.TgZ(3,"table",0),s.TgZ(4,"thead"),s.TgZ(5,"tr"),s.TgZ(6,"th",1),s._uU(7,"DLC"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(8,"tbody"),s.YNc(9,r,5,2,"tr",2),s.qZA(),s.qZA(),s.BQk()),2&t&&(s.xp6(2),s.Oqu(e.dlcTitle),s.xp6(7),s.Q6J("ngForOf",e.dlcDemons))},directives:[o.sg],encapsulation:2,changeDetection:0}),t})()},628:(t,e,n)=>{"use strict";n.d(e,{N:()=>Z});var s=n(5614),i=n(1116),o=n(6101);function r(t,e){if(1&t&&(s.TgZ(0,"th",4),s._uU(1,"Inheritable Skills"),s.qZA()),2&t){const t=s.oxw();s.uIk("colspan",t.inheritHeaders.length)}}function a(t,e){if(1&t&&(s.TgZ(0,"th",4),s._uU(1),s.qZA()),2&t){const t=s.oxw();s.uIk("colspan",t.inheritHeaders.length),s.xp6(1),s.hij(" ",t.langEn?"Skill Affinities":"\u30b9\u30ad\u30eb\u9069\u6b63"," ")}}function l(t,e){if(1&t&&(s.ynx(0),s._uU(1),s.BQk()),2&t){const t=s.oxw().$implicit;s.xp6(1),s.Oqu(t)}}function c(t,e){if(1&t&&(s.TgZ(0,"div"),s._uU(1),s.qZA()),2&t){const t=s.oxw().$implicit;s.Gre("element-icon ",t,""),s.xp6(1),s.Oqu(t)}}function m(t,e){if(1&t&&(s.TgZ(0,"th"),s.YNc(1,l,2,1,"ng-container",3),s.YNc(2,c,2,4,"div",5),s.qZA()),2&t){const t=s.oxw();s.Udp("width",100/t.inheritHeaders.length,"%"),s.xp6(1),s.Q6J("ngIf",!t.hasIcons),s.xp6(1),s.Q6J("ngIf",t.hasIcons)}}function p(t,e){if(1&t&&(s.TgZ(0,"td"),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.Udp("color",t?null:"transparent"),s.xp6(1),s.hij(" ",t?"yes":"no"," ")}}function u(t,e){if(1&t&&(s.TgZ(0,"tr"),s.YNc(1,p,2,3,"td",6),s.qZA()),2&t){const t=s.oxw();s.xp6(1),s.Q6J("ngForOf",t.inherits)}}function g(t,e){if(1&t&&(s.TgZ(0,"td"),s.ALo(1,"roundInheritPercent"),s._uU(2),s.qZA()),2&t){const t=e.$implicit;s.Gre("affinity",s.lcZ(1,4,100*t),""),s.xp6(2),s.hij(" ",100*t,"% ")}}function h(t,e){if(1&t&&(s.TgZ(0,"tr"),s.YNc(1,g,3,6,"td",7),s.qZA()),2&t){const t=s.oxw();s.xp6(1),s.Q6J("ngForOf",t.inherits)}}function f(t,e){if(1&t&&(s.TgZ(0,"td"),s._uU(1),s.ALo(2,"affinityToString"),s.qZA()),2&t){const t=e.$implicit;s.Gre("affinity",t,""),s.xp6(1),s.hij(" ",s.lcZ(2,4,t)," ")}}function d(t,e){if(1&t&&(s.TgZ(0,"tr"),s.YNc(1,f,3,6,"td",7),s.qZA()),2&t){const t=s.oxw();s.xp6(1),s.Q6J("ngForOf",t.inherits)}}let Z=(()=>{class t{constructor(){this.inheritHeaders=[],this.inherits=[],this.hasChance=!1,this.hasIcons=!0,this.hasLvls=!1,this.langEn=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-demon-inherits"]],inputs:{inheritHeaders:"inheritHeaders",inherits:"inherits",hasChance:"hasChance",hasIcons:"hasIcons",hasLvls:"hasLvls",langEn:"langEn"},decls:11,vars:6,consts:[[1,"entry-table"],["class","title",4,"ngIf"],[3,"width",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"title"],[3,"class",4,"ngIf"],[3,"color",4,"ngFor","ngForOf"],[3,"class",4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(s.TgZ(0,"table",0),s.TgZ(1,"thead"),s.TgZ(2,"tr"),s.YNc(3,r,2,1,"th",1),s.YNc(4,a,2,2,"th",1),s.qZA(),s.TgZ(5,"tr"),s.YNc(6,m,3,4,"th",2),s.qZA(),s.qZA(),s.TgZ(7,"tbody"),s.YNc(8,u,2,1,"tr",3),s.YNc(9,h,2,1,"tr",3),s.YNc(10,d,2,1,"tr",3),s.qZA(),s.qZA()),2&t&&(s.xp6(3),s.Q6J("ngIf",!e.hasLvls),s.xp6(1),s.Q6J("ngIf",e.hasLvls&&e.inheritHeaders.length),s.xp6(2),s.Q6J("ngForOf",e.inheritHeaders),s.xp6(2),s.Q6J("ngIf",!e.hasLvls&&!e.hasChance),s.xp6(1),s.Q6J("ngIf",e.hasChance),s.xp6(1),s.Q6J("ngIf",e.hasLvls))},directives:[i.O5,i.sg],pipes:[o.DY,o.JZ],encapsulation:2,changeDetection:0}),t})()},2573:(t,e,n)=>{"use strict";n.d(e,{O:()=>h});var s=n(5614),i=n(1116);function o(t,e){if(1&t&&(s.TgZ(0,"h2"),s._uU(1),s.qZA()),2&t){const t=s.oxw();s.xp6(1),s.Oqu(t.title)}}function r(t,e){if(1&t&&(s.TgZ(0,"th"),s._uU(1),s.qZA()),2&t){const t=s.oxw();s.xp6(1),s.Oqu(t.langEn?"Price":"\u4fa1\u683c")}}function a(t,e){if(1&t&&(s.TgZ(0,"th"),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.Oqu(t)}}function l(t,e){1&t&&(s.TgZ(0,"th"),s._uU(1,"Inherits"),s.qZA())}function c(t,e){if(1&t&&(s.TgZ(0,"th"),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.Oqu(t)}}function m(t,e){if(1&t&&(s.TgZ(0,"td"),s._uU(1),s.qZA()),2&t){const t=s.oxw();s.xp6(1),s.Oqu(t.price)}}function p(t,e){if(1&t&&(s.TgZ(0,"td"),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.Oqu(t)}}function u(t,e){if(1&t&&(s.TgZ(0,"td"),s.TgZ(1,"div"),s._uU(2),s.qZA(),s.qZA()),2&t){const t=s.oxw();s.xp6(1),s.Gre("element-icon ",t.inherit,""),s.xp6(1),s.Oqu(t.inherit)}}const g=["*"];let h=(()=>{class t{constructor(){this.title="Demon Entry",this.statHeaders=[],this.stats=[],this.fusionHeaders=[],this.price=0,this.langEn=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-demon-stats"]],inputs:{title:"title",statHeaders:"statHeaders",stats:"stats",fusionHeaders:"fusionHeaders",inherit:"inherit",price:"price",langEn:"langEn"},ngContentSelectors:g,decls:19,vars:10,consts:[[4,"ngIf"],[1,"entry-table"],[1,"title"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(s.F$t(),s.ynx(0),s.YNc(1,o,2,1,"h2",0),s.TgZ(2,"table",1),s.TgZ(3,"thead"),s.TgZ(4,"tr"),s.TgZ(5,"th",2),s._uU(6),s.qZA(),s.qZA(),s.TgZ(7,"tr"),s.YNc(8,r,2,1,"th",0),s.YNc(9,a,2,1,"th",3),s.YNc(10,l,2,0,"th",0),s.YNc(11,c,2,1,"th",3),s.qZA(),s.qZA(),s.TgZ(12,"tbody"),s.TgZ(13,"tr"),s.YNc(14,m,2,1,"td",0),s.YNc(15,p,2,1,"td",3),s.YNc(16,u,3,4,"td",0),s.Hsn(17),s.qZA(),s.qZA(),s.qZA(),s.GkF(18),s.BQk()),2&t&&(s.xp6(1),s.Q6J("ngIf",e.title.includes("Lvl")),s.xp6(4),s.uIk("colSpan",e.stats.length+e.fusionHeaders.length+(e.inherit?1:0)+(e.price?1:0)),s.xp6(1),s.hij(" ",e.title.includes("Lvl")?e.langEn?"Stats":"\u30b9\u30c6\u30fc\u30bf\u30b9":e.title," "),s.xp6(2),s.Q6J("ngIf",e.price),s.xp6(1),s.Q6J("ngForOf",e.statHeaders),s.xp6(1),s.Q6J("ngIf",e.inherit),s.xp6(1),s.Q6J("ngForOf",e.fusionHeaders),s.xp6(3),s.Q6J("ngIf",e.price),s.xp6(1),s.Q6J("ngForOf",e.stats),s.xp6(1),s.Q6J("ngIf",e.inherit))},directives:[i.O5,i.sg],encapsulation:2,changeDetection:0}),t})()},7967:(t,e,n)=>{"use strict";n.d(e,{R:()=>u});var s=n(5614),i=n(9624),o=n(3522),r=n(1116);function a(t,e){if(1&t&&(s.TgZ(0,"th"),s._uU(1),s.qZA()),2&t){const t=e.$implicit,n=s.oxw();s.xp6(1),s.Oqu(t.slice(0,n.nameCut))}}function l(t,e){if(1&t&&(s.TgZ(0,"td",4),s._uU(1),s.qZA()),2&t){const t=e.$implicit,n=s.oxw(2);s.Q6J("ngClass",t.slice(0,4)),s.xp6(1),s.Oqu(t.slice(4,n.nameCut+4))}}function c(t,e){if(1&t&&(s.TgZ(0,"tr"),s.TgZ(1,"th"),s._uU(2),s.qZA(),s.YNc(3,l,2,2,"td",3),s.TgZ(4,"th"),s._uU(5),s.qZA(),s.qZA()),2&t){const t=e.$implicit;s.xp6(2),s.Oqu(t[0]),s.xp6(1),s.Q6J("ngForOf",t.slice(1,t.length-1)),s.xp6(2),s.Oqu(t[t.length-1])}}function m(t,e){if(1&t&&(s.TgZ(0,"th"),s._uU(1),s.qZA()),2&t){const t=e.$implicit,n=s.oxw();s.xp6(1),s.Oqu(t.slice(0,n.nameCut))}}function p(t,e){if(1&t&&(s.TgZ(0,"tr"),s.TgZ(1,"th",0),s._uU(2),s.qZA(),s.qZA()),2&t){const t=s.oxw();s.xp6(1),s.uIk("colspan",t.table[0].length),s.xp6(1),s.AsE("",t.appName," ",t.tripTitle,"")}}let u=(()=>{class t{constructor(t,e){this.title2=t,this.route=e,this.normTitle="Normal Fusions",this.tripTitle="",this.isPersona=!1,this.filterDarks=!0,this.langEn=!0,this.subscriptions=[],this.table=[],this.nameCut=4}ngOnInit(){this.subscriptions.push(this.route.parent.data.subscribe(t=>{this.appName=t.appName||"Shin Megami Tensei",this.nameCut=this.langEn?4:2,this.title2.setTitle(this.langEn?`Fusion Chart - ${this.appName} Fusion Calculator`:`\u5408\u4f53\u8868 ${this.appName} \u5408\u4f53\u30a2\u30d7\u30ea`)}))}ngOnChanges(){this.normChart&&this.fillFusionChart()}ngOnDestroy(){for(const t of this.subscriptions)t.unsubscribe()}fillFusionChart(){const e="noneNone",n=t.RESULT_COLORS.reduce((t,[e,n])=>n.reduce((t,n)=>(t[n]=e,t),t),{}),s=this.normChart.elementDemons;let i=[],o=this.normChart.races,r=[];this.filterDarks&&(i=this.normChart.races.filter(t=>this.normChart.getLightDark(t)>0),o=this.normChart.races.filter(t=>0===this.normChart.getLightDark(t)),r=this.normChart.races.filter(t=>-1===this.normChart.getLightDark(t)),0===r.length&&i.length>0&&(i=this.normChart.races.filter(t=>this.normChart.getLightDark(t)>-1),o=[],r=this.normChart.races.filter(t=>this.normChart.getLightDark(t)<-1)));const a=i.length-r.length,l=i.concat(o,s),c=r.length?r.concat(Array(l.length-r.length).fill("")):l,m=this.mitaTable?l:i.concat(o,Array(s.length).fill("")),p=this.mitaTable||r.length?Array(a).fill("").concat(r,o,s):l;this.table=[[""].concat(l,[""])];for(let t=0;t<p.length;t++){const i=Array(l.length+2).fill("empt-"),o=p[t],r=m[t],u=-1!==s.indexOf(o),g=-1!==s.indexOf(r);this.table.push(i),i[0]=o,i[i.length-1]=r;for(let a=t;a<l.length;a++){const t=l[a],o=-1!==s.indexOf(t);if(o&&g){const o=s.indexOf(r),l=s.indexOf(t),c=this.mitaTable[o][l-o-1];i[a+1]=c?(n[c]||"norm")+c:e}else if(o&&r){const s=this.normChart.getElemFusions(t)[r];i[a+1]=s?(n[s]||"rank")+(s>0?"+":"")+s.toString():e}else if(t&&r){const s=this.isPersona&&t===r?t:this.normChart.getRaceFusion(t,r);i[a+1]=s?(n[s]||(t===r?"elem":"norm"))+s:e}}if(this.tripChart)for(let s=0;s<=t-a;s++){const t=c[s];if(t&&u){const r=this.tripChart.getElemFusions(o)[t];i[s+1]=r?(n[r]||"rank")+(r>0?"+":"")+r.toString():e}else if(t&&o){const r=this.tripChart.getRaceFusion(t,o);i[s+1]=r?(n[r]||(t===o?"elem":"trip"))+r:e}}if(-1!==o.indexOf(" x ")){const[t,e]=o.split(" x "),n=t.slice(0,3)+"x"+e.slice(0,3);i[0]=n,i[i.length-1]=n}else if(-1!==o.indexOf(" ")){const t=o.split(" ")[0];i[0]=t,i[i.length-1]=t}}for(let t=0;t<this.table[0].length;t++){const e=this.table[0][t];if(-1!==e.indexOf(" x ")){const[n,s]=e.split(" x ");this.table[0][t]=n.slice(0,2)+s.slice(0,2)}}this.table.push([""].concat(c,[""]))}}return t.RESULT_COLORS=Object.entries({oran:["-2","Erthys","Gnome","Saki","Saki Mitama","Random","\u30a2\u30fc\u30b7\u30fc\u30ba","\u30ce\u30fc\u30e0","\u30b5\u30ad\u30df\u30bf\u30de"],redd:["-1","Flaemis","Salamander","Ara ","Ara Mitama","Fiend","\u30d5\u30ec\u30a4\u30df\u30fc\u30ba","\u30b5\u30e9\u30de\u30f3\u30c0\u30fc","\u30a2\u30e9\u30df\u30bf\u30de"],gree:["1","Aeros","Sylph","Kusi","Kusi Mitama","UMA","\u30a8\u30a2\u30ed\u30b9","\u30b7\u30eb\u30ad\u30fc","\u30af\u30b7\u30df\u30bf\u30de"],blue:["2","Aquans","Undine","Nigi","Nigi Mitama","Enigma","\u30a2\u30af\u30a2\u30f3\u30ba","\u30a6\u30f3\u30c7\u30a3\u30fc\u30cd","\u30cb\u30ae\u30df\u30bf\u30de"]}),t.\u0275fac=function(e){return new(e||t)(s.Y36(i.Dx),s.Y36(o.gz))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-fusion-chart"]],inputs:{normChart:"normChart",tripChart:"tripChart",mitaTable:"mitaTable",normTitle:"normTitle",tripTitle:"tripTitle",isPersona:"isPersona",filterDarks:"filterDarks",langEn:"langEn",counter:"counter"},features:[s.TTD],decls:12,vars:7,consts:[[1,"title"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(t,e){1&t&&(s.TgZ(0,"table"),s.TgZ(1,"tbody"),s.TgZ(2,"tr"),s.TgZ(3,"th",0),s._uU(4),s.qZA(),s.qZA(),s.TgZ(5,"tr"),s.YNc(6,a,2,1,"th",1),s.qZA(),s.YNc(7,c,6,3,"tr",1),s.TgZ(8,"tr"),s.YNc(9,m,2,1,"th",1),s.qZA(),s.YNc(10,p,3,3,"tr",2),s.qZA(),s._UZ(11,"tbody"),s.qZA()),2&t&&(s.xp6(3),s.uIk("colspan",e.table[0].length),s.xp6(1),s.AsE("",e.appName," ",e.normTitle,""),s.xp6(2),s.Q6J("ngForOf",e.table[0]),s.xp6(1),s.Q6J("ngForOf",e.table.slice(1,e.table.length-1)),s.xp6(2),s.Q6J("ngForOf",e.table[e.table.length-1]),s.xp6(1),s.Q6J("ngIf",e.tripTitle))},directives:[r.sg,r.O5,r.mk],styles:["table[_ngcontent-%COMP%]{width:auto;margin:0 auto;white-space:nowrap}td.elem[_ngcontent-%COMP%]{color:#0f0}td.trip[_ngcontent-%COMP%]{color:#d3d3d3}td.oran[_ngcontent-%COMP%]{color:orange}td.redd[_ngcontent-%COMP%]{color:red}td.gree[_ngcontent-%COMP%]{color:#0f0}td.blue[_ngcontent-%COMP%]{color:#0ff}td.empt[_ngcontent-%COMP%], td.none[_ngcontent-%COMP%]{color:transparent}td.empt[_ngcontent-%COMP%]{background-color:initial}"],changeDetection:0}),t})()},4354:(t,e,n)=>{"use strict";n.d(e,{O:()=>g});var s=n(1501),i=n(649),o=n(5614),r=n(1116),a=n(3522);const l=function(){return{exact:!0}};function c(t,e){if(1&t&&(o.TgZ(0,"th",4),o.TgZ(1,"a",5),o._uU(2),o.qZA(),o.qZA()),2&t){const t=e.$implicit,n=o.oxw();o.Udp("width",100/n.fusionOptions.length,"%"),o.Q6J("routerLink",t.link)("routerLinkActiveOptions",o.DdM(6,l)),o.xp6(1),o.Q6J("routerLink",t.link),o.xp6(1),o.Oqu(t.title)}}function m(t,e){if(1&t&&(o.TgZ(0,"tr"),o.TgZ(1,"th",6),o._uU(2),o.qZA(),o.qZA()),2&t){const t=o.oxw();o.xp6(1),o.uIk("colspan",t.fusionOptions.length),o.xp6(1),o.hij(" ",t.langEn?"DLC marked as excluded in fusion settings, results may be inaccurate!":"DLC\u306a\u3057"," ")}}function p(t,e){if(1&t&&(o.TgZ(0,"tr"),o.TgZ(1,"th",6),o.Hsn(2),o.qZA(),o.qZA()),2&t){const t=o.oxw();o.xp6(1),o.uIk("colspan",t.fusionOptions.length)}}const u=["*"];let g=(()=>{class t{constructor(){this.hasTripleFusion=!1,this.showFusionAlert=!1,this.excludedDlc=!1,this.langEn=!0,this.fusionOptions=t.NORMAL_FUSIONS_EN}ngOnInit(){this.fusionOptions=this.hasTripleFusion?t.TRIPLE_FUSIONS:this.langEn?t.NORMAL_FUSIONS_EN:t.NORMAL_FUSIONS_JA}ngOnChanges(){setTimeout(()=>this.stickyTable.nextEdges())}}return t.NORMAL_FUSIONS_EN=[{title:"Reverse Fusions",link:"fissions"},{title:"Forward Fusions",link:"fusions"}],t.NORMAL_FUSIONS_JA=[{title:"\u9006\u5f15\u304d\u5408\u4f53",link:"fissions"},{title:"2\u4f53\u5408\u4f53",link:"fusions"}],t.TRIPLE_FUSIONS=[{title:"Normal Reverse Fusions",link:"fissions"},{title:"Triple Reverse Fusions",link:"fissions/triple"},{title:"Triple Forward Fusions",link:"fusions/triple"},{title:"Normal Forward Fusions",link:"fusions"}],t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-smt-fusions"]],viewQuery:function(t,e){if(1&t&&o.Gf(i.v,5),2&t){let t;o.iGM(t=o.CRH())&&(e.stickyTable=t.first)}},inputs:{hasTripleFusion:"hasTripleFusion",showFusionAlert:"showFusionAlert",excludedDlc:"excludedDlc",langEn:"langEn"},features:[o._Bn([s.L]),o.TTD],ngContentSelectors:u,decls:11,vars:3,consts:[["appPositionSticky","",1,"list-table"],["stickyTable",""],["class","nav","routerLinkActive","active",3,"routerLink","width","routerLinkActiveOptions",4,"ngFor","ngForOf"],[4,"ngIf"],["routerLinkActive","active",1,"nav",3,"routerLink","routerLinkActiveOptions"],[3,"routerLink"],[1,"title"]],template:function(t,e){1&t&&(o.F$t(),o.TgZ(0,"div"),o.TgZ(1,"table",0,1),o.TgZ(3,"thead"),o.TgZ(4,"tr"),o.YNc(5,c,3,7,"th",2),o.qZA(),o.YNc(6,m,3,2,"tr",3),o._UZ(7,"tr"),o.YNc(8,p,3,1,"tr",3),o._UZ(9,"tr"),o.qZA(),o.qZA(),o._UZ(10,"router-outlet"),o.qZA()),2&t&&(o.xp6(5),o.Q6J("ngForOf",e.fusionOptions),o.xp6(1),o.Q6J("ngIf",e.excludedDlc),o.xp6(2),o.Q6J("ngIf",e.showFusionAlert))},directives:[i.v,r.sg,r.O5,a.lC,a.Od,a.rH,a.yS],encapsulation:2,changeDetection:0}),t})()},9805:(t,e,n)=>{"use strict";n.d(e,{f:()=>i});var s=n(5614);let i=(()=>{class t{constructor(t,e){this.changeDetector2=t,this.fusionDataService2=e,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.fusionDataService2.compendium.subscribe(t=>{this.changeDetector2.markForCheck(),this.compendium=t,this._dlcDemons=Object.assign({},this.compendium.dlcDemons),this.dlcDemons=Object.entries(this._dlcDemons).map(([t,e])=>({name:t,included:e}))}))}ngOnDestroy(){for(const t of this.subscriptions)t.unsubscribe()}toggleName(t){this._dlcDemons[t]=!this._dlcDemons[t],this.fusionDataService2.nextDlcDemons(this._dlcDemons)}}return t.\u0275fac=function(t){s.$Z()},t.\u0275dir=s.lG2({type:t}),t})()},7174:(t,e,n)=>{"use strict";n.d(e,{V:()=>ut});var s=n(3522),i=n(5614),o=n(6746),r=n(7089),a=n(1116);let l=(()=>{class t{constructor(t){this.appCssClasses=["smt4","smt4f"],this.appCssClasses=t.compConfig.appCssClasses,this.langEn="ja"!==t.compConfig.lang,this.otherLinks=this.langEn?[{title:"Recipe Generator",link:"recipes"}]:[]}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(o.Y))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-smt4f-compendium"]],decls:1,vars:2,consts:[[3,"ngClass","otherLinks"]],template:function(t,e){1&t&&i._UZ(0,"app-demon-compendium",0),2&t&&i.Q6J("ngClass",e.appCssClasses)("otherLinks",e.otherLinks)},directives:[r.e,a.mk],styles:[".smt4 div.element-icon{height:12px;background-size:12px;background-repeat:no-repeat;background-position:50%;color:transparent}.smt4 div.element-icon.phy{background-image:url(/assets/images/smtsj/phy.png)}.smt4 div.element-icon.gun{background-image:url(/assets/images/smt4f/gun.png)}.smt4 div.element-icon.fir{background-image:url(/assets/images/smtsj/fir.png)}.smt4 div.element-icon.ice{background-image:url(/assets/images/smtsj/ice.png)}.smt4 div.element-icon.ele{background-image:url(/assets/images/smtsj/ele.png)}.smt4 div.element-icon.for{background-image:url(/assets/images/smt4f/force.png)}.smt4 div.element-icon.lig{background-image:url(/assets/images/smtsj/exp.png)}.smt4 div.element-icon.dar{background-image:url(/assets/images/smtsj/cur.png)}.smt4 div.element-icon.ail{background-image:url(/assets/images/smtsj/ail.png)}.smt4 div.element-icon.rec{background-image:url(/assets/images/smtsj/rec.png)}.smt4 div.element-icon.alm{background-image:url(/assets/images/smtsj/alm.png)}.smt4 div.element-icon.sup{background-image:url(/assets/images/smtsj/sup.png)}.smt4 div.element-icon.pas{background-image:url(/assets/images/smtsj/pas.png)}.smt4 div.element-icon.oth{background-image:url(/assets/images/smtsj/spe.png)}.smt4 td.affinity-8,.smt4 td.affinity-9{color:red}.smt4 td.affinity-7{color:#ff4500}.smt4 td.affinity-6{color:tomato}.smt4 td.affinity-5{color:coral}.smt4 td.affinity-4{color:#ff8c00}.smt4 td.affinity-3{color:orange}.smt4 td.affinity-2{color:#ffa07a}.smt4 td.affinity-1{color:gold}.smt4 td.affinity0{color:transparent}.smt4 td.affinity1{color:#7cfc00}.smt4 td.affinity2{color:#0f0}.smt4 td.affinity3{color:#00ff7f}.smt4 td.affinity4{color:#00fa9a}.smt4 td.affinity5{color:#32cd32}.smt4 td.affinity6{color:#3cb371}.smt4 td.affinity7{color:#2e8b57}.smt4 td.affinity8,.smt4 td.affinity9{color:#228b22}.smt4f th.nav.active,.smt4f th.nav.active a,.smt4f th.title{background-color:#fff;color:#000}.smt5 th.nav.active,.smt5 th.nav.active a,.smt5 th.title{background-color:#363361;color:#fff}"],encapsulation:2,changeDetection:0}),t})();var c=n(5438),m=n(9624),p=n(4008);let u=(()=>{class t extends c.l{constructor(t,e,n){super(t,e,n),this.compConfig=n.compConfig,this.langEn="ja"!==this.compConfig.lang,this.appName=(this.langEn?"List of Demons - ":"\u60aa\u9b54\u4e00\u89a7 ")+n.appName,this.defaultSortFun=(t,e)=>200*(this.compConfig.raceOrder[t.race]-this.compConfig.raceOrder[e.race])+e.lvl-t.lvl}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(m.Dx),i.Y36(i.sBO),i.Y36(o.Y))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-demon-list-container"]],features:[i.qOj],decls:2,vars:8,consts:[[3,"langEn","raceOrder","statHeaders","resistHeaders","affinityHeaders","rowData"]],template:function(t,e){1&t&&(i._UZ(0,"app-smt-demon-list",0),i.ALo(1,"async")),2&t&&i.Q6J("langEn",e.langEn)("raceOrder",e.compConfig.raceOrder)("statHeaders",e.compConfig.baseStats)("resistHeaders",e.compConfig.resistElems)("affinityHeaders",e.compConfig.affinityElems)("rowData",i.lcZ(1,6,e.demons))},directives:[p.Q],pipes:[a.Ov],encapsulation:2,changeDetection:0}),t})();var g=n(9261),h=n(3787);let f=(()=>{class t extends g.e{constructor(t,e,n){super(t,e,n),this.appName=`List of Skills - ${n.appName}`,this.compConfig=n.compConfig,this.langEn="ja"!==this.compConfig.lang,this.appName=(this.langEn?"List of Skills - ":" \u30b9\u30ad\u30eb\u4e00\u89a7 ")+n.appName,this.compConfig=n.compConfig,this.defaultSortFun=(t,e)=>1e4*(this.compConfig.elemOrder[t.element]-this.compConfig.elemOrder[e.element])+t.rank-e.rank}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(m.Dx),i.Y36(i.sBO),i.Y36(o.Y))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-skill-list-container"]],features:[i.qOj],decls:2,vars:6,consts:[[3,"langEn","elemOrder","hasTarget","rowData"]],template:function(t,e){1&t&&(i._UZ(0,"app-smt-skill-list",0),i.ALo(1,"async")),2&t&&i.Q6J("langEn",e.langEn)("elemOrder",e.compConfig.elemOrder)("hasTarget",!0)("rowData",i.lcZ(1,4,e.skills))},directives:[h.J],pipes:[a.Ov],encapsulation:2,changeDetection:0}),t})();var d=n(9805),Z=n(8623);let T=(()=>{class t extends d.f{constructor(t,e){super(t,e),this.changeDetector=t,this.fusionDataService=e,this.langEn=!0,this.appTitle=e.appName,this.langEn="ja"!==e.compConfig.lang}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(i.sBO),i.Y36(o.Y))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-demon-dlc-settings-container"]],features:[i.qOj],decls:1,vars:4,consts:[[3,"langEn","dlcDemons","appTitle","dlcTitle","toggledName"]],template:function(t,e){1&t&&(i.TgZ(0,"app-demon-dlc-settings",0),i.NdJ("toggledName",function(t){return e.toggleName(t)}),i.qZA()),2&t&&i.Q6J("langEn",e.langEn)("dlcDemons",e.dlcDemons)("appTitle",e.appTitle)("dlcTitle",e.langEn?"Included DLC Demons":"DLC")},directives:[Z.d],encapsulation:2,changeDetection:0}),t})();var k=n(2573),v=n(858),C=n(4354),A=n(628),b=n(3015),O=n(4897),q=n(6101),x=n(3966);function D(t,e){if(1&t&&i._UZ(0,"app-demon-inherits",10),2&t){const t=i.oxw(2);i.Q6J("langEn",t.langEn)("hasLvls",!0)("inheritHeaders",t.compConfig.affinityElems)("inherits",t.demon.affinities)}}function _(t,e){1&t&&(i.TgZ(0,"tr"),i.TgZ(1,"th"),i._uU(2,"Elem"),i.qZA(),i.TgZ(3,"th"),i._uU(4,"Name"),i.qZA(),i.TgZ(5,"th"),i._uU(6,"Cost"),i.qZA(),i.TgZ(7,"th"),i._uU(8,"Effect"),i.qZA(),i.TgZ(9,"th"),i._uU(10,"Target"),i.qZA(),i.TgZ(11,"th"),i._uU(12,"Rank"),i.qZA(),i.TgZ(13,"th"),i._uU(14,"Level"),i.qZA(),i.qZA())}function y(t,e){1&t&&(i.TgZ(0,"tr"),i.TgZ(1,"th"),i._uU(2,"\u5c5e\u6027"),i.qZA(),i.TgZ(3,"th"),i._uU(4,"\u30b9\u30ad\u30eb\u540d"),i.qZA(),i.TgZ(5,"th"),i._uU(6,"\u6d88\u8cbb"),i.qZA(),i.TgZ(7,"th"),i._uU(8,"\u8aac\u660e"),i.qZA(),i.TgZ(9,"th"),i._uU(10,"\u7bc4\u56f2"),i.qZA(),i.TgZ(11,"th"),i._uU(12,"\u30e9\u30f3\u30af"),i.qZA(),i.TgZ(13,"th"),i._uU(14,"Lvl"),i.qZA(),i.qZA())}const E=function(t){return{unique:t}};function N(t,e){if(1&t&&(i.TgZ(0,"tr",11),i.TgZ(1,"td"),i.TgZ(2,"div"),i._uU(3),i.qZA(),i.qZA(),i.TgZ(4,"td"),i._uU(5),i.qZA(),i.TgZ(6,"td"),i._uU(7),i.ALo(8,"skillCostToString"),i.qZA(),i.TgZ(9,"td"),i._uU(10),i.qZA(),i.TgZ(11,"td"),i._uU(12),i.qZA(),i.TgZ(13,"td"),i._uU(14),i.qZA(),i.TgZ(15,"td"),i._uU(16),i.ALo(17,"skillLevelToString"),i.qZA(),i.qZA()),2&t){const t=e.$implicit;i.Q6J("ngClass",i.VKq(19,E,t.skill.rank>90)),i.xp6(2),i.Gre("element-icon ",t.skill.element,""),i.xp6(1),i.Oqu(t.skill.element),i.xp6(2),i.Oqu(t.skill.name+(t.lvl?" +"+t.lvl:"")),i.xp6(1),i.Udp("color",t.cost?null:"transparent"),i.xp6(1),i.Oqu(i.lcZ(8,15,t.cost)),i.xp6(3),i.Oqu(t.skill.effect+(t.upgrade?" (+"+t.upgrade+"%)":"")),i.xp6(2),i.Oqu(t.skill.target||"Self"),i.xp6(1),i.Udp("color",99!==t.skill.rank?null:"transparent"),i.xp6(1),i.Oqu(t.skill.rank),i.xp6(2),i.Oqu(i.lcZ(17,17,t.skill.level))}}function U(t,e){if(1&t&&(i.TgZ(0,"tr"),i.TgZ(1,"td",12),i._uU(2),i.qZA(),i.qZA()),2&t){const t=i.oxw(2);i.xp6(2),i.Oqu(t.langEn?"No Learned Skills Found":"\u30b9\u30ad\u30eb\u306a\u3057")}}const F=function(t){return[t]};function S(t,e){if(1&t&&i._UZ(0,"app-fusion-entry-table",13),2&t){const t=i.oxw(2);i.Q6J("title",t.langEn?"Evolves From":"\u5909\u7570\u304b\u3089")("langEn",t.langEn)("baseUrl","..")("rowData",i.VKq(4,F,t.demon.evolvesFrom))}}function L(t,e){if(1&t&&i._UZ(0,"app-fusion-entry-table",13),2&t){const t=i.oxw(2);i.Q6J("title",t.langEn?"Evolves To":"\u5909\u7570")("langEn",t.langEn)("baseUrl","..")("rowData",i.VKq(4,F,t.demon.evolvesTo))}}function J(t,e){if(1&t&&(i.ynx(0),i._UZ(1,"app-demon-stats",2),i._UZ(2,"app-demon-resists",3),i.YNc(3,D,1,4,"app-demon-inherits",4),i.TgZ(4,"table",5),i.TgZ(5,"thead"),i.TgZ(6,"tr"),i.TgZ(7,"th",6),i._uU(8),i.qZA(),i.qZA(),i.YNc(9,_,15,0,"tr",0),i.YNc(10,y,15,0,"tr",0),i.qZA(),i.TgZ(11,"tbody"),i.YNc(12,N,18,21,"tr",7),i.YNc(13,U,3,1,"tr",0),i._UZ(14,"tr"),i.qZA(),i.qZA(),i.YNc(15,S,1,6,"app-fusion-entry-table",8),i.YNc(16,L,1,6,"app-fusion-entry-table",8),i._UZ(17,"app-smt-fusions",9),i.BQk()),2&t){const t=i.oxw();i.xp6(1),i.Q6J("langEn",t.langEn)("title","Lvl "+t.demon.lvl+" "+t.demon.race+" "+t.demon.name)("price",t.demon.price)("statHeaders",t.compConfig.baseStats)("stats",t.demon.stats),i.xp6(1),i.Q6J("langEn",t.langEn)("resistHeaders",t.compConfig.resistElems)("resists",t.demon.resists)("ailmentHeaders",t.compConfig.ailmentElems)("ailments",t.demon.ailments),i.xp6(1),i.Q6J("ngIf",t.demon.affinities),i.xp6(5),i.Oqu(t.langEn?"Learned Skills":"\u7fd2\u5f97\u30b9\u30ad\u30eb"),i.xp6(1),i.Q6J("ngIf",t.langEn),i.xp6(1),i.Q6J("ngIf",!t.langEn),i.xp6(2),i.Q6J("ngForOf",t.skillLvls),i.xp6(1),i.Q6J("ngIf",!t.skillLvls.length),i.xp6(2),i.Q6J("ngIf",t.demon.evolvesFrom),i.xp6(1),i.Q6J("ngIf",t.demon.evolvesTo),i.xp6(1),i.Q6J("langEn",t.langEn)("excludedDlc","excluded"===t.demon.fusion)}}function w(t,e){if(1&t&&i._UZ(0,"app-demon-missing",14),2&t){const t=i.oxw();i.Q6J("name",t.name)}}let I=(()=>{class t{constructor(){this.langEn=!0,this.skillLvls=[]}ngOnChanges(){if(this.demon){this.skillLvls=[];for(const t of Object.keys(this.demon.skills)){const e=this.compendium.getSkill(t);let n=0,s=e.cost,i=0;if(this.demon.affinities&&s<2e3){const t=this.compConfig.affinityElems.indexOf(e.element);n=t>-1?this.demon.affinities[t]:0,i=n>0?this.compConfig.affinityBonuses.upgrades[t][n-1]:0,n>0&&s>0&&(s=1e3+Math.floor((100-this.compConfig.affinityBonuses.costs[t][n-1])/100*(e.cost-1e3)))}this.skillLvls.push({skill:e,cost:s,lvl:n,upgrade:i})}for(const t of this.skillLvls)t.skill.level=this.demon.skills[t.skill.name];this.skillLvls.sort((t,e)=>20*(t.skill.level-e.skill.level)+this.compConfig.elemOrder[t.skill.element]-this.compConfig.elemOrder[e.skill.element])}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",compConfig:"compConfig",compendium:"compendium",langEn:"langEn"},features:[i.TTD],decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"langEn","title","price","statHeaders","stats"],[3,"langEn","resistHeaders","resists","ailmentHeaders","ailments"],[3,"langEn","hasLvls","inheritHeaders","inherits",4,"ngIf"],[1,"entry-table"],["colSpan","7",1,"title"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"title","langEn","baseUrl","rowData",4,"ngIf"],[3,"langEn","excludedDlc"],[3,"langEn","hasLvls","inheritHeaders","inherits"],[3,"ngClass"],["colSpan","7"],[3,"title","langEn","baseUrl","rowData"],[3,"name"]],template:function(t,e){1&t&&(i.YNc(0,J,18,20,"ng-container",0),i.YNc(1,w,1,1,"app-demon-missing",1)),2&t&&(i.Q6J("ngIf",e.demon),i.xp6(1),i.Q6J("ngIf",!e.demon))},directives:[a.O5,k.O,v.I,a.sg,C.O,A.N,a.mk,b.P,O.t],pipes:[q.tq,q.Lu],encapsulation:2,changeDetection:0}),t})(),Q=(()=>{class t{constructor(t,e,n,s){this.route=t,this.title=e,this.currentDemonService=n,this.fusionDataService=s,this.subscriptions=[],this.appName="Test App",this.appName=s.appName,this.compConfig=s.compConfig}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const t of this.subscriptions)t.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(t=>{this.compendium=t,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(t=>{this.name=t,this.getDemonEntry()})),this.route.params.subscribe(t=>{this.currentDemonService.nextCurrentDemon(t.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(this.name+("ja"!==this.compConfig.lang?" - ":" ")+this.appName),this.demon=this.compendium.getDemon(this.name))}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(s.gz),i.Y36(m.Dx),i.Y36(x.s),i.Y36(o.Y))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-demon-entry-container"]],decls:1,vars:5,consts:[[3,"langEn","name","demon","compConfig","compendium"]],template:function(t,e){1&t&&i._UZ(0,"app-demon-entry",0),2&t&&i.Q6J("langEn","ja"!==e.compConfig.lang)("name",e.name)("demon",e.demon)("compConfig",e.compConfig)("compendium",e.compendium)},directives:[I],encapsulation:2,changeDetection:0}),t})();var Y=n(7967);let j=(()=>{class t{constructor(t,e){this.changeDetectorRef=t,this.fusionDataService=e,this.subscriptions=[]}ngOnInit(){this.langEn="ja"!==this.fusionDataService.compConfig.lang,this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(t=>{this.changeDetectorRef.markForCheck(),this.normChart=t}))}ngOnDestroy(){for(const t of this.subscriptions)t.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(i.sBO),i.Y36(o.Y))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-fusion-chart-container"]],decls:1,vars:5,consts:[[3,"langEn","normChart","tripChart","normTitle","tripTitle"]],template:function(t,e){1&t&&i._UZ(0,"app-fusion-chart",0),2&t&&i.Q6J("langEn",e.langEn)("normChart",e.normChart)("tripChart",e.normChart)("normTitle",e.langEn?"Light and Neutral Normal Fusions":"LIGHT\u5408\u4f53")("tripTitle",e.langEn?"Dark Normal Fusions":"DARK\u5408\u4f53")},directives:[Y.R],encapsulation:2,changeDetection:0}),t})();var R=n(115),$=n(9859);function H(t,e,n,s){let i=e,o=[i];const r=n.getSpecialNameEntries(i);if(0!==r.length&&(i=r.find(t=>0===n.getSpecialNameEntries(t).length),o.unshift(r.filter(t=>t!==i).join(" x ")),o.unshift(i)),t.length>0){const e=function(t,e,n){const s=t.slice(0,1);if(t.length<2)return s;let i=s[0];for(const o of t.slice(1)){const t=R.YP.getFusions(i,e,n).map(t=>(0,$.D0)(t,e)).sort((t,e)=>t.price-e.price);let r=!1;for(const e of t)if(e.name1===o){s.push(o),s.push(e.name2),i=s[s.length-1],r=!0;break}if(r)continue;const a=R.YP.getFusions(o,e,n).reduce((t,e)=>(t[e.name1]=e.name2,t),{});for(const e of t)if(a[e.name2]){s.push(e.name1),s.push(e.name2),s.push(o),s.push(a[e.name2]),i=s[s.length-1],r=!0;break}if(!r)return[]}return s}(t,n,s),r=e[e.length-1];let a=M(r,i,n,s);if(0===a.length)for(const t of s.elementDemons){const e=M(r,t,n,s),o=M(t,i,n,s);if(0!==e.length&&0!==o.length){a=e.concat(o.slice(1));break}}o=e.concat(a.slice(1),o.slice(1))}return o}function M(t,e,n,s){const i=[t];if(t===e)return i;const o=R.YP.getFusions(t,n,s).map(t=>(0,$.D0)(t,n)).sort((t,e)=>t.price-e.price);for(const l of o)if(l.name2===e)return i.push(l.name1),i.push(e),i;const r=R.uC.getFusions(e,n,s).map(t=>(0,$.S6)(t,n)).sort((t,e)=>t.price-e.price);o.sort((t,e)=>e.price-t.price);const a=o.reduce((t,e)=>(t[e.name2]=e.name1,t),{});for(const l of r){if(a[l.name1])return i.push(a[l.name1]),i.push(l.name1),i.push(l.name2),i.push(e),i;if(a[l.name2])return i.push(a[l.name2]),i.push(l.name2),i.push(l.name1),i.push(e),i}return[]}var P=n(1462);function B(t,e){if(1&t&&(i.TgZ(0,"option",16),i._uU(1),i.qZA()),2&t){const t=e.$implicit;i.Q6J("value",t),i.xp6(1),i.Oqu(t)}}function G(t,e){if(1&t&&(i.TgZ(0,"option",17),i._uU(1),i.qZA()),2&t){const t=e.$implicit;i.Q6J("ngValue",t),i.xp6(1),i.Oqu(t.name)}}function V(t,e){if(1&t&&(i.TgZ(0,"option",16),i._uU(1),i.qZA()),2&t){const t=e.index;i.Q6J("value",99-t),i.xp6(1),i.Oqu(99-t)}}function X(t,e){if(1&t&&(i.TgZ(0,"option",16),i._uU(1),i.qZA()),2&t){const t=e.$implicit;i.Q6J("value",t),i.xp6(1),i.Oqu(t)}}function K(t,e){if(1&t&&(i.TgZ(0,"option",17),i._uU(1),i.qZA()),2&t){const t=e.$implicit;i.Q6J("ngValue",t),i.xp6(1),i.Oqu(t.name)}}function z(t,e){if(1&t){const t=i.EpF();i.ynx(0),i.TgZ(1,"td"),i.TgZ(2,"select",22),i.NdJ("change",function(){i.CHM(t);const e=i.oxw().$implicit,n=i.oxw();return e.controls.custom.setValue(n.skills[e.controls.elem.value][0])}),i.TgZ(3,"option",23),i._uU(4,"-"),i.qZA(),i.YNc(5,X,2,2,"option",4),i.qZA(),i.qZA(),i.TgZ(6,"td"),i.TgZ(7,"select",24),i.TgZ(8,"option",17),i._uU(9),i.qZA(),i.YNc(10,K,2,2,"option",6),i.qZA(),i.qZA(),i.BQk()}if(2&t){const t=i.oxw().$implicit,e=i.oxw();i.xp6(5),i.Q6J("ngForOf",e.elems),i.xp6(3),i.Q6J("ngValue",t.controls.innate.value),i.xp6(1),i.Oqu(t.controls.innate.value.name),i.xp6(1),i.Q6J("ngForOf",e.skills[t.controls.elem.value])}}function W(t,e){if(1&t&&(i.TgZ(0,"td"),i.TgZ(1,"select",25),i.TgZ(2,"option"),i._uU(3),i.qZA(),i.qZA(),i.qZA(),i.TgZ(4,"td"),i.TgZ(5,"select",25),i.TgZ(6,"option"),i._uU(7),i.qZA(),i.qZA(),i.qZA()),2&t){const t=i.oxw().$implicit;i.xp6(3),i.Oqu(t.controls.innate.value.element),i.xp6(4),i.Oqu(t.controls.innate.value.name)}}function tt(t,e){if(1&t&&(i.ynx(0),i.TgZ(1,"td"),i._uU(2),i.ALo(3,"skillCostToString"),i.qZA(),i.TgZ(4,"td"),i._uU(5),i.qZA(),i.TgZ(6,"td"),i._uU(7),i.qZA(),i.TgZ(8,"td"),i._uU(9),i.qZA(),i.BQk()),2&t){const t=e.ngIf;i.xp6(1),i.Udp("color",t.cost?null:"transparent"),i.xp6(1),i.Oqu(i.lcZ(3,8,t.cost)),i.xp6(3),i.Oqu(t.effect),i.xp6(2),i.Oqu(t.target),i.xp6(1),i.Udp("color",99!==t.rank?null:"transparent"),i.xp6(1),i.Oqu(t.rank)}}function et(t,e){if(1&t&&(i.ynx(0,18),i.TgZ(1,"tr"),i.YNc(2,z,11,4,"ng-container",19),i.YNc(3,W,8,2,"ng-template",null,20,i.W1O),i.YNc(5,tt,10,10,"ng-container",21),i.qZA(),i.BQk()),2&t){const t=e.$implicit,n=e.index,s=i.MAs(4),o=i.oxw();i.Q6J("formGroupName",n),i.xp6(2),i.Q6J("ngIf",!o.form.controls.innateLocked.value||"-"===t.controls.innate.value.name)("ngIfElse",s),i.xp6(3),i.Q6J("ngIf",t.controls.custom.value)}}function nt(t,e){if(1&t&&(i.TgZ(0,"li"),i._uU(1),i.qZA()),2&t){const t=e.$implicit;i.xp6(1),i.Oqu(t)}}function st(t,e){if(1&t&&(i.TgZ(0,"li"),i._uU(1),i.qZA()),2&t){const t=e.$implicit;i.xp6(1),i.Oqu(t)}}function it(t,e){if(1&t&&(i.ynx(0),i._uU(1),i._UZ(2,"br"),i._uU(3),i.BQk()),2&t){const t=i.oxw(2);i.xp6(1),i.AsE(" ",t.recipeResult.join(" x ")," = ",t.recipe.result,""),i.xp6(2),i.hij(" [",t.resultSkills.join(", "),"] ")}}function ot(t,e){1&t&&(i.ynx(0),i._uU(1,"No recipes found"),i.BQk())}function rt(t,e){if(1&t&&(i.TgZ(0,"table",1),i.TgZ(1,"tr"),i.TgZ(2,"th",26),i._uU(3,"Fusion Recipe"),i.qZA(),i.qZA(),i.TgZ(4,"tr"),i.TgZ(5,"th"),i._uU(6,"Left Chain"),i.qZA(),i.TgZ(7,"th"),i._uU(8,"Right Chain"),i.qZA(),i.qZA(),i.TgZ(9,"tr"),i.TgZ(10,"td",13),i.TgZ(11,"ul"),i.YNc(12,nt,2,1,"li",27),i.qZA(),i.qZA(),i.TgZ(13,"td",13),i.TgZ(14,"ul"),i.YNc(15,st,2,1,"li",27),i.qZA(),i.qZA(),i.qZA(),i.TgZ(16,"tr"),i.TgZ(17,"td",28),i.YNc(18,it,4,3,"ng-container",21),i.YNc(19,ot,2,0,"ng-container",21),i.qZA(),i.qZA(),i.qZA()),2&t){const t=i.oxw();i.xp6(12),i.Q6J("ngForOf",t.recipeLeft),i.xp6(3),i.Q6J("ngForOf",t.recipeRight),i.xp6(3),i.Q6J("ngIf",t.recipe.stepR.length),i.xp6(1),i.Q6J("ngIf",!t.recipe.stepR.length)}}let at=(()=>{class t{constructor(t){this.fb=t,this.defaultDemon="Pixie",this.range99=Array(99),this.demons={},this.skills={},this.blankDemon={name:"-",race:"-",lvl:0,currLvl:0,price:0,skills:{},stats:[],resists:[],affinities:[],ailments:[],fusion:"normal",prereq:""},this.blankSkill={name:"-",element:"-",rank:99,cost:0,effect:"",target:"",level:0,learnedBy:[]},this.createForm()}ngOnChanges(){this.initDropdowns()}createForm(){const t=[];for(let e=0;e<8;e++)t.push(this.fb.group({elem:"-",innate:this.blankSkill,custom:this.blankSkill}));this.form=this.fb.group({race:"-",demon:this.blankDemon,skills:this.fb.array(t),innateLocked:!0}),this.form.valueChanges.subscribe(t=>{if(this.form.valid){const e=t.skills.map(t=>t.custom.name).filter(t=>"-"!==t);this.updateRecipe(function(t,e,n,s){const i=n.getDemon(t),o=R.uC.getFusions(t,n,s).map(t=>(0,$.S6)(t,n)).sort((t,e)=>t.price-e.price).find(t=>R.uC.getFusions(t.name1,n,s).length>0&&R.uC.getFusions(t.name2,n,s).length>0),r=o?[o.name1,o.name2]:n.getSpecialNameEntries(t),a=r.map(t=>n.getDemon(t)),l={},c={},m=[],p=n.getSkills(e).filter(t=>t.rank<50&&t.learnedBy.length>0&&!i.skills.hasOwnProperty(t.name));for(const d of p){let t=!1;for(const e of a)if(e.skills.hasOwnProperty(d.name)){t=!0,c[d.name]=e.name;break}t||m.push(d)}for(const d of m){const t=d.learnedBy.map(t=>n.getDemon(t.demon));l[d.name]=t.length>1?t.find(t=>Object.keys(s.getRaceFusions(t.race)).length>0&&"excluded"!==t.fusion).name:t[0].name}const u=[];for(const d of Object.values(l))u.includes(d)||u.push(d);u.sort((t,e)=>s.getLightDark(n.getDemon(t).race)-s.getLightDark(n.getDemon(e).race));const g=Math.ceil(u.length/2);let h=[],f=[];return r.length>1&&(h=H(u.slice(0,g),r[r.length-2],n,s),f=H(u.slice(g),r[r.length-1],n,s)),{chain1:h,chain2:f,stepR:r,skills:Object.assign(l,c),result:t}}(t.demon.name,e,this.compendium,this.fusionChart))}})}updateRecipe(t){const e={};for(const[n,s]of Object.entries(t.skills)){e[s]||(e[s]=[]);const t=this.compendium.getDemon(s).skills[n];e[s].push(n+(t?` (${t})`:""))}this.recipe=t,this.recipeLeft=this.decodeRecipechain(t.chain1,e),this.recipeRight=this.decodeRecipechain(t.chain2,e),this.resultSkills=[],this.recipeResult=[];for(const n of t.stepR)this.recipeResult.push(e[n]?`${n} [${e[n].join(", ")}]`:n);for(const[n,s]of Object.entries(this.compendium.getDemon(t.result).skills).filter(t=>t[1]<2e3).sort((t,e)=>t[1]-e[1]))this.resultSkills.push(n+(s?` (${s})`:""))}decodeRecipechain(t,e){const n=[];for(let s=0;s<t.length-2;s+=2){const i=e[t[s]]?"["+e[t[s]].join(", ")+"] ":"",o=e[t[s+1]]?"["+e[t[s+1]].join(", ")+"] ":"";n.push(`${t[s]} ${i}x ${t[s+1]} ${o}= ${t[s+2]}`)}return n}initDropdowns(){if(this.compConfig&&this.compendium&&this.fusionChart){this.demons={},this.skills={"-":[this.blankSkill]};for(const t of this.compendium.allDemons)this.demons[t.race]||(this.demons[t.race]=[]),this.demons[t.race].push(t);for(const t of this.compendium.allSkills.filter(t=>t.rank<50&&t.learnedBy.length>0))this.skills[t.element]||(this.skills[t.element]=[]),this.skills[t.element].push(t);for(const t of Object.values(this.demons))t.sort((t,e)=>e.lvl-t.lvl);for(const t of Object.values(this.skills))t.sort((t,e)=>t.rank-e.rank);this.races=this.compConfig.races.filter(t=>this.demons[t]),this.elems=this.compConfig.skillElems.filter(t=>this.skills[t]),this.setDemon(this.compendium.getDemon(this.defaultDemon))}}setDemon(t){const e=Array(8).fill(this.blankSkill);let n=0;for(const[s,i]of Object.entries(t.skills))0===i&&(e[n++]=this.compendium.getSkill(s));this.form.patchValue({race:t.race,demon:t,skills:e.map(t=>({elem:t.element,innate:t,custom:t}))})}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(P.qu))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-recipe-generator"]],inputs:{defaultDemon:"defaultDemon",compendium:"compendium",fusionChart:"fusionChart",compConfig:"compConfig"},features:[i.TTD],decls:49,vars:6,consts:[[3,"formGroup"],[1,"entry-table"],["colspan","7",1,"title"],["formControlName","race",3,"change"],[3,"value",4,"ngFor","ngForOf"],["formControlName","demon",3,"change"],[3,"ngValue",4,"ngFor","ngForOf"],["type","checkbox","formControlName","innateLocked",3,"change"],["formArrayName","skills",1,"entry-table"],["colspan","6",1,"title"],[2,"width","5%"],[2,"width","15%"],[2,"width","10%"],[2,"width","50%"],[3,"formGroupName",4,"ngFor","ngForOf"],["class","entry-table",4,"ngIf"],[3,"value"],[3,"ngValue"],[3,"formGroupName"],[4,"ngIf","ngIfElse"],["lockInnate",""],[4,"ngIf"],["formControlName","elem",3,"change"],["value","-"],["formControlName","custom"],["disabled",""],["colspan","2",1,"title"],[4,"ngFor","ngForOf"],["colspan","2",2,"padding","1em","text-align","center"]],template:function(t,e){1&t&&(i.TgZ(0,"form",0),i.TgZ(1,"h2"),i._uU(2,"Recipe Generator"),i.qZA(),i.TgZ(3,"table",1),i.TgZ(4,"tr"),i.TgZ(5,"th",2),i._uU(6,"Demon Entry"),i.qZA(),i.qZA(),i.TgZ(7,"tr"),i.TgZ(8,"th"),i._uU(9,"Race"),i.qZA(),i.TgZ(10,"th"),i._uU(11,"Demon"),i.qZA(),i.TgZ(12,"th"),i._uU(13,"Skill Slots"),i.qZA(),i.TgZ(14,"th"),i._uU(15,"Max Lvl"),i.qZA(),i.qZA(),i.TgZ(16,"tr"),i.TgZ(17,"td"),i.TgZ(18,"select",3),i.NdJ("change",function(){return e.setDemon(e.demons[e.form.controls.race.value][0])}),i.YNc(19,B,2,2,"option",4),i.qZA(),i.qZA(),i.TgZ(20,"td"),i.TgZ(21,"select",5),i.NdJ("change",function(){return e.setDemon(e.form.controls.demon.value)}),i.YNc(22,G,2,2,"option",6),i.qZA(),i.qZA(),i.TgZ(23,"td"),i.TgZ(24,"label"),i._uU(25,"Lock innate skills"),i.TgZ(26,"input",7),i.NdJ("change",function(){return e.setDemon(e.form.controls.demon.value)}),i.qZA(),i.qZA(),i.qZA(),i.TgZ(27,"td"),i.TgZ(28,"select"),i.YNc(29,V,2,2,"option",4),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(30,"table",8),i.TgZ(31,"tr"),i.TgZ(32,"th",9),i._uU(33,"Learned Skills"),i.qZA(),i.qZA(),i.TgZ(34,"tr"),i.TgZ(35,"th",10),i._uU(36,"Elem"),i.qZA(),i.TgZ(37,"th",11),i._uU(38,"Name"),i.qZA(),i.TgZ(39,"th",12),i._uU(40,"Cost"),i.qZA(),i.TgZ(41,"th",13),i._uU(42,"Effect"),i.qZA(),i.TgZ(43,"th",12),i._uU(44,"Target"),i.qZA(),i.TgZ(45,"th",12),i._uU(46,"Rank"),i.qZA(),i.qZA(),i.YNc(47,et,6,4,"ng-container",14),i.qZA(),i.YNc(48,rt,20,4,"table",15),i.qZA()),2&t&&(i.Q6J("formGroup",e.form),i.xp6(19),i.Q6J("ngForOf",e.races),i.xp6(3),i.Q6J("ngForOf",e.demons[e.form.controls.race.value]),i.xp6(7),i.Q6J("ngForOf",e.range99),i.xp6(18),i.Q6J("ngForOf",e.form.controls.skills.controls),i.xp6(1),i.Q6J("ngIf",e.recipe))},directives:[P._Y,P.JL,P.sg,P.EJ,P.JJ,P.u,a.sg,P.Wl,P.CE,a.O5,P.YN,P.Kr,P.x0],pipes:[q.tq],styles:["ul[_ngcontent-%COMP%]{padding:0 1em;list-style:none}td[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),t})(),lt=(()=>{class t{constructor(t,e){this.fusionDataService=t,this.title=e,this.subscriptions=[],this.compConfig=this.fusionDataService.compConfig}ngOnInit(){this.setTitle(),this.subscribeAll()}ngOnDestroy(){this.unsubscribeAll()}setTitle(){this.title.setTitle(`Recipe Generator - ${this.fusionDataService.appName}`)}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(t=>{this.compendium=t})),this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(t=>{this.fusionChart=t}))}unsubscribeAll(){for(const t of this.subscriptions)t.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(o.Y),i.Y36(m.Dx))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-recipe-generator-container"]],decls:1,vars:3,consts:[[3,"compendium","fusionChart","compConfig"]],template:function(t,e){1&t&&i._UZ(0,"app-recipe-generator",0),2&t&&i.Q6J("compendium",e.compendium)("fusionChart",e.fusionChart)("compConfig",e.compConfig)},directives:[at],encapsulation:2,changeDetection:0}),t})();var ct=n(5946),mt=n(2060);const pt=[{path:"",redirectTo:"demons",pathMatch:"full"},{path:"",component:l,data:{fusionTool:"chart"},children:[{path:"chart",component:j}]},{path:"",component:l,children:[{path:"demons/:demonName",component:Q,children:[{path:"fissions",component:ct.t},{path:"fusions",component:mt.$},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"demons",component:u},{path:"skills",component:f},{path:"recipes",component:lt},{path:"settings",component:T}]},{path:"**",redirectTo:"demons",pathMatch:"full"}];let ut=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[s.Bz.forChild(pt)],s.Bz]}),t})()},6746:(t,e,n)=>{"use strict";n.d(e,{Y:()=>f});var s=n(8512);function i(t,e){const n={};for(const[s,i]of Object.entries(t)){const t=Object.assign({},i),o={};for(const[n,s]of Object.entries(i.skills))o[e[n]||n]=s;t.race=e[t.race]||t.race,t.skills=o,n[e[s]||s]=t}return n}function o(t,e){const n={};for(const[s,i]of Object.entries(t)){const t=Object.assign({},i),o=t.target||"Self";t.target=e[o]||o,n[e[s]||s]=t}return n}function r(t,e){const n={};for(const[s,i]of Object.entries(t))n[e[s]||s]=i.map(t=>e[t]||t);return n}function a(t,e){const n={};for(const[s,i]of Object.entries(t))n[e[s]||s]={lvl:i.lvl,result:e[i.result]||i.result};return n}function l(t,e){const n={races:t.races.map(t=>e[t]||t),table:t.table.map(t=>t.map(t=>e[t]||t))};return t.elems&&(n.elems=t.elems.map(t=>e[t]||t),n.table=t.table),n}class c{constructor(t){this.compConfig=t,this._dlcDemons={Cleopatra:!1,Mephisto:!1},this.initImportedData(),this.updateDerivedData()}initImportedData(){const t={},e={},n={},s={},i=Array(this.compConfig.ailmentElems.length).fill(100),o={1125:[],50:[],0:[]},r="ja"!==this.compConfig.lang,a=r?"Innate resistance":"",l=r?"Self":"\u81ea\u8eab",c=r?{1125:"Weak ",50:"Resist ",0:"Null "}:{1125:"\u5f31",50:"\u5f37",0:"\u7121"};for(const[m,p]of Object.entries(c))for(const t of this.compConfig.ailmentElems)o[m].push({name:p+t,element:"pas",effect:a,target:l,cost:0,rank:99,learnedBy:[],level:0});for(const[m,p]of Object.entries(this.compConfig.demonData))t[m]={name:m,race:p.race,lvl:p.lvl,currLvl:p.currLvl||p.lvl,skills:p.skills,price:2*p.price,stats:p.stats,resists:p.resists.split("").map(t=>this.compConfig.resistCodes[t]),affinities:p.affinities,ailments:p.ailments?p.ailments.split("").map(t=>this.compConfig.resistCodes[t]):i,fusion:p.fusion||"normal",prereq:p.prereq||""};for(const[m,p]of Object.entries(this.compConfig.skillData))e[m]={name:m,element:p.element,rank:p.rank,effect:p.effect,damage:p.damage||"",target:p.target||"Self",hits:p.hits||"",cost:p.cost||0,learnedBy:[],level:0},e[m].rank||(e[m].rank=99);for(const m of Object.values(o))for(const t of m)e[t.name]=t;for(const[m,p]of Object.entries(this.compConfig.specialRecipes))n[m]=p,"normal"===t[m].fusion&&(t[m].fusion="special");for(const[m,p]of Object.entries(this.compConfig.evolveData)){const e=p.result;t[m].evolvesTo={price:t[e].price,race1:t[e].race,lvl1:p.lvl,name1:e},t[e].evolvesFrom={price:t[m].price,race1:t[m].race,lvl1:p.lvl,name1:m}}for(const m of this.compConfig.races)s[m]={};for(const[m,p]of Object.entries(t))s[p.race][p.lvl]=m;for(const m of Object.values(t).sort((t,e)=>t.currLvl-e.currLvl))if("enemy"!==m.fusion){for(const t of Object.keys(m.skills))e[t].learnedBy.push({demon:m.name,level:m.skills[t]});for(let t=0;t<m.ailments.length;t++)o[m.ailments[t]]&&o[m.ailments[t]][t].learnedBy.push({demon:m.name,level:0})}this._dlcDemons=this.compConfig.dlcDemons.reduce((t,e)=>(t[e]=!1,t),{}),this.demons=t,this.skills=e,this.specialRecipes=n,this.invertedDemons=s}updateDerivedData(){const t=Object.assign({},this.demons),e=Object.keys(this.skills).map(t=>this.skills[t]),n={},s={};for(const i of this.compConfig.races)n[i]=[],s[i]=[];for(const[i,o]of Object.entries(this.demons))this.isElementDemon(i)||this.isOverlappingResult(i)||n[o.race].push(o.lvl),this.specialRecipes.hasOwnProperty(i)||s[o.race].push(o.lvl);for(const i of this.compConfig.races)n[i].sort((t,e)=>t-e),s[i].sort((t,e)=>t-e);for(const i of this.compConfig.races){const t=n[i],e=s[i],o=t.length,r=e.length;o&&r&&t[o-1]!==e[r-1]&&e.push(100)}for(const[i,o]of Object.entries(this._dlcDemons))for(const e of i.split(","))if(this.demons[e]){if(!o){const{race:i,lvl:o}=this.demons[e];delete t[e],n[i]=n[i].filter(t=>t!==o),s[i]=s[i].filter(t=>t!==o)}this.demons[e].fusion=o?"special":"excluded"}this._allDemons=Object.keys(t).map(e=>t[e]),this._allSkills=e.filter(t=>t.rank<99||t.learnedBy.length>0),this.allIngredients=n,this.allResults=s}get dlcDemons(){return this._dlcDemons}set dlcDemons(t){this._dlcDemons=t,this.updateDerivedData()}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return Object.keys(this.specialRecipes).map(t=>this.demons[t])}getDemon(t){return this.demons[t]}getSkill(t){return this.skills[t]}getSkills(t){const e=this.compConfig.elemOrder,n=t.map(t=>this.skills[t]);return n.sort((t,n)=>1e4*(e[t.element]-e[n.element])+t.rank-n.rank),n}getIngredientDemonLvls(t){return this.allIngredients[t]||[]}getResultDemonLvls(t){return this.allResults[t]||[]}getSpecialNameEntries(t){return this.specialRecipes[t]||[]}getSpecialNamePairs(t){return[]}reverseLookupDemon(t,e){return this.invertedDemons[t][e]}reverseLookupSpecial(t){return[]}isElementDemon(t){return"Element"===this.demons[t].race}isOverlappingResult(t){return!1}}var m=n(6829);let p=(()=>{class t extends m.g{constructor(t){super(),this.lvlModifier=1,this.initCharts(t)}initCharts(t){const e=t.normalTable.races,n=t.normalTable.table,s=t.elementTable.elems,i=t.elementTable.races,o=t.elementTable.table;this.elementDemons=s,this.fusionChart=m.g.loadFusionTableJson(e,n),this.fissionChart=m.g.loadFissionTableJson(e,s,n),this.elementChart=m.g.loadElementTableJson(i,s,o),this.races=e}getLightDark(e){return-1!==t.LIGHT_RACES.indexOf(e)?1:-1!==t.DARK_RACES.indexOf(e)?-1:0}}return t.LIGHT_RACES=["Herald","Megami","Avian","Tree","Deity","Avatar","Holy","Genma","Fury","Lady","Dragon","Kishin","Enigma","Entity","Wargod","Amatsu","Kunitsu","Godly","Chaos","\u5927\u5929\u4f7f","\u5973\u795e","\u970a\u9ce5","\u795e\u6a39","\u9b54\u795e","\u795e\u7363","\u8056\u7363","\u5e7b\u9b54","\u7834\u58ca\u795e","\u5730\u6bcd\u795e","\u9f8d\u795e","\u9b3c\u795e","\u79d8\u795e","\u5a01\u970a","\u8ecd\u795e","\u5929\u6d25\u795e","\u56fd\u6d25\u795e","\u795e\u970a","\u6df7\u6c8c\u738b"],t.DARK_RACES=["Vile","Raptor","Wood","Reaper","Wilder","Jaki","Vermin","Tyrant","Drake","Spirit","Haunt","Ghost","Zealot","\u90aa\u795e","\u51f6\u9ce5","\u5996\u6a39","\u6b7b\u795e","\u5996\u7363","\u90aa\u9b3c","\u5e7d\u866b","\u9b54\u738b","\u90aa\u9f8d","\u60aa\u970a","\u5e7d\u9b3c","\u5e7d\u9b3c","\u72c2\u795e"],t})();var u=n(115),g=n(5614),h=n(3522);let f=(()=>{class t{constructor(t,e){this.fissionCalculator=u.uC,this.fusionCalculator=u.YP,this.compConfig=e.url.includes("/ja/")?function(t){const e=t.engNames,n=t.races.map(t=>e[t]||t);return{appTitle:e[t.appTitle]||t.appTitle,races:n,raceOrder:t.raceOrder,appCssClasses:t.appCssClasses,lang:"ja",engNames:t.engNames,affinityElems:t.affinityElems,skillData:o(t.skillData,e),skillElems:t.skillElems,elemOrder:t.elemOrder,resistCodes:t.resistCodes,affinityBonuses:t.affinityBonuses,demonData:i(t.demonData,e),evolveData:a(t.evolveData,e),dlcDemons:t.dlcDemons.map(t=>t.split(",").map(t=>e[t]||t).join(",")),baseStats:t.baseStats.map(t=>e[t]||t),resistElems:t.resistElems,ailmentElems:t.ailmentElems.map(t=>e[t]||t),normalTable:l(t.normalTable,e),elementTable:l(t.elementTable,e),specialRecipes:r(t.specialRecipes,e),settingsKey:t.settingsKey.replace("-ja","")+"-ja",settingsVersion:t.settingsVersion}}(t):t,this.appName=this.compConfig.appTitle+("ja"!==this.compConfig.lang?" Fusion Calculator":" \u5408\u4f53\u30a2\u30d7\u30ea"),this._compendium=new c(this.compConfig),this._compendium$=new s.X(this._compendium),this.compendium=this._compendium$.asObservable(),this._fusionChart=new p(this.compConfig),this._fusionChart$=new s.X(this._fusionChart),this.fusionChart=this._fusionChart$.asObservable();const n=JSON.parse(localStorage.getItem(this.compConfig.settingsKey));n&&n.version&&n.version>=this.compConfig.settingsVersion&&this.nextDlcDemons(n.dlcDemons),window.addEventListener("storage",this.onStorageUpdated.bind(this))}nextDlcDemons(t){localStorage.setItem(this.compConfig.settingsKey,JSON.stringify({version:this.compConfig.settingsVersion,dlcDemons:t})),this._compendium.dlcDemons=t,this._compendium$.next(this._compendium)}onStorageUpdated(t){switch(t.key){case this.compConfig.settingsKey:this._compendium.dlcDemons=JSON.parse(t.newValue).dlcDemons,this._compendium$.next(this._compendium)}}}return t.\u0275fac=function(e){return new(e||t)(g.LFG(u.I7),g.LFG(h.F0))},t.\u0275prov=g.Yz7({token:t,factory:t.\u0275fac}),t})()},4541:(t,e,n)=>{"use strict";n.d(e,{D:()=>c});var s=n(1462),i=n(1116),o=n(5425),r=n(6487),a=n(7174),l=n(5614);let c=(()=>{class t{static forRoot(){return{ngModule:t}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[i.ez,o.m,s.UX,r.a,a.V]]}),t})()}}]);