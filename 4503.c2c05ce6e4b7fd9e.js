"use strict";(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[4503],{609:(N,y,o)=>{o.d(y,{d:()=>e});var i=o(4412);class e{constructor(t,h,_,k,O){this.settingsKey=k,this.settingsVersion=O,this._compendium=t,this._compendium$=new i.t(this._compendium),this.compendium=this._compendium$.asObservable(),this._fusionChart=h,this._fusionChart$=new i.t(this._fusionChart),this.fusionChart=this._fusionChart$.asObservable(),this._fusionSettings=_,this._fusionSettings$=new i.t(this._fusionSettings),this.fusionSettings=this._fusionSettings$.asObservable();const S=JSON.parse(localStorage.getItem(this.settingsKey));S&&S.version&&S.version>=this.settingsVersion&&this.updateFusionSettings(S.settings),window.addEventListener("storage",this.onStorageUpdated.bind(this))}updateToggledSettings(t){this._fusionSettings.updateSaveFile(t),this._compendium.updateFusionSettings(this._fusionSettings.demonToggles),this._compendium$.next(this._compendium),this._fusionSettings$.next(this._fusionSettings)}onStorageUpdated(t){t.key===this.settingsKey&&this.updateToggledSettings(JSON.parse(t.newValue).settings)}updateFusionSettings(t){this.updateToggledSettings(t),localStorage.setItem(this.settingsKey,JSON.stringify({version:this.settingsVersion,settings:this._fusionSettings.saveFile}))}}},3679:(N,y,o)=>{o.d(y,{C:()=>l});var i=o(1090),e=o(2598),E=o(177),t=o(4207);function h(n,r){if(1&n&&(e.j41(0,"h2"),e.EFF(1),e.k0s()),2&n){const c=e.XpG();e.R7$(1),e.JRh(c.title)}}function _(n,r){if(1&n&&(e.j41(0,"th"),e.EFF(1),e.nI1(2,"translateComp"),e.k0s()),2&n){const c=e.XpG();e.R7$(1),e.JRh(e.i5U(2,1,c.msgs.Price,c.lang))}}function k(n,r){if(1&n&&(e.j41(0,"th"),e.EFF(1),e.k0s()),2&n){const c=r.$implicit;e.R7$(1),e.JRh(c)}}function O(n,r){1&n&&(e.j41(0,"th"),e.EFF(1,"Inherits"),e.k0s())}function S(n,r){if(1&n&&(e.j41(0,"th"),e.EFF(1),e.k0s()),2&n){const c=r.$implicit;e.R7$(1),e.JRh(c)}}function j(n,r){if(1&n&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&n){const c=e.XpG();e.R7$(1),e.JRh(c.price)}}function b(n,r){if(1&n&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&n){const c=r.$implicit;e.R7$(1),e.JRh(c)}}function $(n,r){if(1&n&&(e.j41(0,"td")(1,"div"),e.EFF(2),e.k0s()()),2&n){const c=e.XpG();e.R7$(1),e.ZvI("element-icon i",c.inherits,""),e.R7$(1),e.JRh(c.inherits)}}const F=["*"];let l=(()=>{class n{constructor(){this.title="Demon Entry",this.statHeaders=[],this.stats=[],this.fusionHeaders=[],this.price=0,this.lang="en",this.msgs=i.Cj}static{this.\u0275fac=function(C){return new(C||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-demon-stats"]],inputs:{title:"title",statHeaders:"statHeaders",stats:"stats",fusionHeaders:"fusionHeaders",inherits:"inherits",price:"price",lang:"lang"},ngContentSelectors:F,decls:20,vars:13,consts:[[4,"ngIf"],[1,"entry-table"],[1,"title"],[4,"ngFor","ngForOf"]],template:function(C,d){1&C&&(e.NAR(),e.qex(0),e.DNE(1,h,2,1,"h2",0),e.j41(2,"table",1)(3,"thead")(4,"tr")(5,"th",2),e.EFF(6),e.nI1(7,"translateComp"),e.k0s()(),e.j41(8,"tr"),e.DNE(9,_,3,4,"th",0),e.DNE(10,k,2,1,"th",3),e.DNE(11,O,2,0,"th",0),e.DNE(12,S,2,1,"th",3),e.k0s()(),e.j41(13,"tbody")(14,"tr"),e.DNE(15,j,2,1,"td",0),e.DNE(16,b,2,1,"td",3),e.DNE(17,$,3,4,"td",0),e.SdG(18),e.k0s()()(),e.eu8(19),e.bVm()),2&C&&(e.R7$(1),e.Y8G("ngIf",d.title.includes("Lvl")),e.R7$(4),e.BMQ("colSpan",d.stats.length+d.fusionHeaders.length+(d.inherits?1:0)+(d.price?1:0)),e.R7$(1),e.SpI(" ",d.title.includes("Lvl")?e.i5U(7,10,d.msgs.Stats,d.lang):d.title," "),e.R7$(3),e.Y8G("ngIf",d.price),e.R7$(1),e.Y8G("ngForOf",d.statHeaders),e.R7$(1),e.Y8G("ngIf",d.inherits),e.R7$(1),e.Y8G("ngForOf",d.fusionHeaders),e.R7$(3),e.Y8G("ngIf",d.price),e.R7$(1),e.Y8G("ngForOf",d.stats),e.R7$(1),e.Y8G("ngIf",d.inherits))},dependencies:[E.Sq,E.bT,t.uz],encapsulation:2,changeDetection:0})}}return n})()},860:(N,y,o)=>{o.d(y,{B:()=>j});var i=o(2598),e=o(2755),E=o(1090),t=o(345),h=o(177),_=o(4207);function k(b,$){if(1&b){const F=i.RV6();i.qex(0),i.j41(1,"tr")(2,"th"),i.EFF(3,"All Demons"),i.k0s()(),i.j41(4,"tr")(5,"td")(6,"button",4),i.bIt("click",function(){i.eBV(F);const n=i.XpG();return i.Njj(n.toggledAll.emit(!0))}),i.EFF(7,"Enable All"),i.k0s(),i.j41(8,"button",4),i.bIt("click",function(){i.eBV(F);const n=i.XpG();return i.Njj(n.toggledAll.emit(!1))}),i.EFF(9,"Disable All"),i.k0s()()(),i.bVm()}}function O(b,$){if(1&b){const F=i.RV6();i.j41(0,"tr")(1,"td")(2,"label"),i.EFF(3),i.j41(4,"input",5),i.bIt("change",function(){const r=i.eBV(F).$implicit,c=i.XpG(2);return i.Njj(c.toggledName.emit(r.name))}),i.k0s()()()()}if(2&b){const F=$.$implicit;i.R7$(3),i.SpI("",F.caption," "),i.R7$(1),i.Y8G("checked",F.enabled)}}function S(b,$){if(1&b&&(i.qex(0),i.j41(1,"tr")(2,"th"),i.EFF(3),i.k0s()(),i.DNE(4,O,5,2,"tr",3),i.bVm()),2&b){const F=$.$implicit;i.R7$(3),i.JRh(F.category),i.R7$(1),i.Y8G("ngForOf",F.settings)}}let j=(()=>{class b{constructor(F){this.title=F,this.lang="en",this.showEnableAll=!1,this.toggledAll=new i.bkB,this.toggledName=new i.bkB,this.msgs=E.BR}set appTitle(F){this.title.setTitle((0,e.oO)(this.msgs.AppTitle,this.lang)+F)}static{this.\u0275fac=function(l){return new(l||b)(i.rXU(t.hE))}}static{this.\u0275cmp=i.VBU({type:b,selectors:[["app-fusion-settings"]],inputs:{dlcDemons:"dlcDemons",lang:"lang",fusionSettings:"fusionSettings",showEnableAll:"showEnableAll",appTitle:"appTitle"},outputs:{toggledAll:"toggledAll",toggledName:"toggledName"},decls:12,vars:6,consts:[[1,"entry-table"],[1,"title"],[4,"ngIf"],[4,"ngFor","ngForOf"],[2,"width","50%",3,"click"],["type","checkbox",3,"checked","change"]],template:function(l,n){1&l&&(i.qex(0),i.j41(1,"h2"),i.EFF(2),i.nI1(3,"translateComp"),i.k0s(),i.j41(4,"table",0)(5,"thead")(6,"tr")(7,"th",1),i.EFF(8,"Unlock Conditions"),i.k0s()()(),i.j41(9,"tbody"),i.DNE(10,k,10,0,"ng-container",2),i.DNE(11,S,5,2,"ng-container",3),i.k0s()(),i.bVm()),2&l&&(i.R7$(2),i.JRh(i.i5U(3,3,n.msgs.DlcTitle,n.lang)),i.R7$(8),i.Y8G("ngIf",n.showEnableAll),i.R7$(1),i.Y8G("ngForOf",n.fusionSettings.displayHeaders))},dependencies:[h.Sq,h.bT,_.uz],encapsulation:2,changeDetection:0})}}return b})()},6122:(N,y,o)=>{o.d(y,{L:()=>F});var i=o(3885),e=o(9108),E=o(1090),t=o(2598),h=o(177),_=o(8935),k=o(4207);const O=function(){return{exact:!0}};function S(l,n){if(1&l&&(t.j41(0,"th",4)(1,"a",5),t.EFF(2),t.nI1(3,"translateComp"),t.k0s()()),2&l){const r=n.$implicit,c=t.XpG();t.xc7("width",100/c.fusionOptions.length,"%"),t.Y8G("routerLink",r.link)("routerLinkActiveOptions",t.lJ4(9,O)),t.R7$(1),t.Y8G("routerLink",r.link),t.R7$(1),t.JRh(t.i5U(3,6,r.title,c.lang))}}function j(l,n){if(1&l&&(t.j41(0,"tr")(1,"th",6),t.EFF(2),t.nI1(3,"translateComp"),t.k0s()()),2&l){const r=t.XpG();t.R7$(1),t.BMQ("colspan",r.fusionOptions.length),t.R7$(1),t.SpI(" ",t.i5U(3,2,r.msgs.DlcExcluded,r.lang)," ")}}function b(l,n){if(1&l&&(t.j41(0,"tr")(1,"th",6),t.SdG(2),t.k0s()()),2&l){const r=t.XpG();t.R7$(1),t.BMQ("colspan",r.fusionOptions.length)}}const $=["*"];let F=(()=>{class l{constructor(){this.hasTripleFusion=!1,this.showFusionAlert=!1,this.excludedDlc=!1,this.lang="en",this.msgs=E.Lq,this.fusionOptions=[{title:this.msgs.NormalFissions,link:"fissions"},{title:this.msgs.NormalFusions,link:"fusions"}]}ngOnInit(){this.hasTripleFusion&&(this.fusionOptions=[{title:this.msgs.DoubleFissions,link:"fissions"},{title:this.msgs.TripleFissions,link:"fissions/triple"},{title:this.msgs.TripleFusions,link:"fusions/triple"},{title:this.msgs.DoubleFusions,link:"fusions"}])}ngOnChanges(){setTimeout(()=>this.stickyTable.nextEdges())}static{this.\u0275fac=function(c){return new(c||l)}}static{this.\u0275cmp=t.VBU({type:l,selectors:[["app-smt-fusions"]],viewQuery:function(c,C){if(1&c&&t.GBs(e.a,5),2&c){let d;t.mGM(d=t.lsd())&&(C.stickyTable=d.first)}},inputs:{hasTripleFusion:"hasTripleFusion",showFusionAlert:"showFusionAlert",excludedDlc:"excludedDlc",lang:"lang"},features:[t.Jv_([i.P]),t.OA$],ngContentSelectors:$,decls:11,vars:3,consts:[["appPositionSticky","",1,"list-table"],["stickyTable",""],["class","nav","routerLinkActive","active",3,"routerLink","width","routerLinkActiveOptions",4,"ngFor","ngForOf"],[4,"ngIf"],["routerLinkActive","active",1,"nav",3,"routerLink","routerLinkActiveOptions"],[3,"routerLink"],[1,"title"]],template:function(c,C){1&c&&(t.NAR(),t.j41(0,"div")(1,"table",0,1)(3,"thead")(4,"tr"),t.DNE(5,S,4,10,"th",2),t.k0s(),t.DNE(6,j,4,5,"tr",3),t.nrm(7,"tr"),t.DNE(8,b,3,1,"tr",3),t.nrm(9,"tr"),t.k0s()(),t.nrm(10,"router-outlet"),t.k0s()),2&c&&(t.R7$(5),t.Y8G("ngForOf",C.fusionOptions),t.R7$(1),t.Y8G("ngIf",C.excludedDlc),t.R7$(2),t.Y8G("ngIf",C.showFusionAlert))},dependencies:[h.Sq,h.bT,_.n3,_.Wk,_.wQ,e.a,k.uz],encapsulation:2,changeDetection:0})}}return l})()},6567:(N,y,o)=>{o.d(y,{I:()=>e});var i=o(2598);let e=(()=>{class E{constructor(h,_){this.changeDetector2=h,this.fusionDataService2=_,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.fusionDataService2.compendium.subscribe(h=>{this.changeDetector2.markForCheck(),this.compendium=h})),this.subscriptions.push(this.fusionDataService2.fusionSettings.subscribe(h=>{this.fusionSettings=h}))}ngOnDestroy(){for(const h of this.subscriptions)h.unsubscribe()}toggleAll(h){const _={};for(const k of this.fusionSettings.displayHeaders)for(const O of k.settings)_[O.name]=h;this.fusionDataService2.updateFusionSettings(_)}toggleName(h){const _={};_[h]=!this.fusionSettings.isEnabled(h),this.fusionDataService2.updateFusionSettings(_)}static{this.\u0275fac=function(_){i.QTQ()}}static{this.\u0275dir=i.FsC({type:E})}}return E})()},1939:(N,y,o)=>{o.d(y,{U:()=>i});class i{constructor(E,t,h=","){this.separator=h,this._displayHeaders=[],this._demonToggles={},this._subappToggles={};for(const{category:k,unlocked:O,conditions:S}of E){const j=[];this._displayHeaders.push({category:k,settings:j});for(const b of Object.keys(S))this._demonToggles[b]=O,j.push({name:b,caption:b.split(h).join(", "),enabled:O})}const _=[];t.length>0&&this._displayHeaders.push({category:"Subapps",settings:_});for(const k of t)this._subappToggles[k]=!1,_.push({name:k,caption:k,enabled:!1})}get displayHeaders(){for(const E of this._displayHeaders)for(const t of E.settings)t.enabled=this.saveFile[t.name];return this._displayHeaders}get subappToggles(){return this._subappToggles}get demonToggles(){const E={};for(const[t,h]of Object.entries(this._demonToggles))for(const _ of t.split(this.separator))E[_]=h;return E}get saveFile(){return Object.assign({},this._demonToggles,this._subappToggles)}isEnabled(E){return this._demonToggles[E]||this._subappToggles[E]||!1}updateSaveFile(E){for(const t of[this._demonToggles,this._subappToggles])for(const[h,_]of Object.entries(E))t[h]===!_&&(t[h]=_)}}},7439:(N,y,o)=>{o.d(y,{S:()=>nt});var i=o(8935),e=o(2755),E=o(1090),t=o(2598),h=o(5768),_=o(177),k=o(5583);let O=(()=>{class a{constructor(s){this.appCssClasses=["smt4","smt4f"],this.appCssClasses=s.compConfig.appCssClasses,this.otherLinks=[{title:(0,e.oO)(E.fu.RecipGenerator,s.compConfig.lang),link:"recipes"}]}static{this.\u0275fac=function(p){return new(p||a)(t.rXU(h.i))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-smt4f-compendium"]],decls:1,vars:2,consts:[[3,"ngClass","otherLinks"]],template:function(p,m){1&p&&t.nrm(0,"app-demon-compendium",0),2&p&&t.Y8G("ngClass",m.appCssClasses)("otherLinks",m.otherLinks)},dependencies:[_.YU,k.f],styles:[".smt4 div.element-icon{height:12px;background-size:12px;background-repeat:no-repeat;background-position:center;color:transparent}.smt4 div.element-icon.phy{background-image:url(/assets/images/smtsj/phy.png)}.smt4 div.element-icon.gun{background-image:url(/assets/images/smt4f/gun.png)}.smt4 div.element-icon.fir{background-image:url(/assets/images/smtsj/fir.png)}.smt4 div.element-icon.ice{background-image:url(/assets/images/smtsj/ice.png)}.smt4 div.element-icon.ele{background-image:url(/assets/images/smtsj/ele.png)}.smt4 div.element-icon.for{background-image:url(/assets/images/smt4f/force.png)}.smt4 div.element-icon.lig{background-image:url(/assets/images/smtsj/exp.png)}.smt4 div.element-icon.dar{background-image:url(/assets/images/smtsj/cur.png)}.smt4 div.element-icon.ail{background-image:url(/assets/images/smtsj/ail.png)}.smt4 div.element-icon.rec{background-image:url(/assets/images/smtsj/rec.png)}.smt4 div.element-icon.alm{background-image:url(/assets/images/smtsj/alm.png)}.smt4 div.element-icon.sup{background-image:url(/assets/images/smtsj/sup.png)}.smt4 div.element-icon.pas{background-image:url(/assets/images/smtsj/pas.png)}.smt4 div.element-icon.oth{background-image:url(/assets/images/smtsj/spe.png)}.smt4 div.element-icon.spe{background-image:url(/assets/images/smtsj/spe.png)}.smt4 div.element-icon.sab{background-image:url(/assets/images/smtsj/spe.png)}.smt4 div.element-icon.com{background-image:url(/assets/images/smtsj/sup.png)}.smt4 div.element-icon.inn{background-image:url(/assets/images/smtsj/spe.png)}.smt4 td.affinity-9,.smt4 td.affinity-8{color:red}.smt4 td.affinity-7{color:#ff4500}.smt4 td.affinity-6{color:tomato}.smt4 td.affinity-5{color:coral}.smt4 td.affinity-4{color:#ff8c00}.smt4 td.affinity-3{color:orange}.smt4 td.affinity-2{color:#ffa07a}.smt4 td.affinity-1{color:gold}.smt4 td.affinity0{color:transparent}.smt4 td.affinity1{color:#7cfc00}.smt4 td.affinity2{color:#0f0}.smt4 td.affinity3{color:#00ff7f}.smt4 td.affinity4{color:#00fa9a}.smt4 td.affinity5{color:#32cd32}.smt4 td.affinity6{color:#3cb371}.smt4 td.affinity7{color:#2e8b57}.smt4 td.affinity8,.smt4 td.affinity9{color:#228b22}.smt4f th.title,.smt4f th.nav.active,.smt4f th.nav.active a{background-color:#fff;color:#000}.smt5 th.title,.smt5 th.nav.active,.smt5 th.nav.active a{background-color:#363361;color:#fff}.sh2 th.title,.sh2 th.nav.active,.sh2 th.nav.active a{background-color:#693cbe;color:#fff}\n"],encapsulation:2,changeDetection:0})}}return a})();var S=o(9404),j=o(345),b=o(9629);let $=(()=>{class a extends S.M{constructor(s,p,m){super(s,p,m),this.compConfig=m.compConfig,this.appName=(0,e.oO)(E.vC.AppTitle,this.compConfig.lang)+m.appName,this.defaultSortFun=(T,L)=>200*(this.compConfig.raceOrder[T.race]-this.compConfig.raceOrder[L.race])+L.lvl-T.lvl}static{this.\u0275fac=function(p){return new(p||a)(t.rXU(j.hE),t.rXU(t.gRc),t.rXU(h.i))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-demon-list-container"]],features:[t.Vt3],decls:2,vars:8,consts:[[3,"lang","raceOrder","statHeaders","resistHeaders","affinityHeaders","rowData"]],template:function(p,m){1&p&&(t.nrm(0,"app-smt-demon-list",0),t.nI1(1,"async")),2&p&&t.Y8G("lang",m.compConfig.lang)("raceOrder",m.compConfig.raceOrder)("statHeaders",m.compConfig.baseStats)("resistHeaders",m.compConfig.resistElems)("affinityHeaders",m.compConfig.affinityElems)("rowData",t.bMT(1,6,m.demons))},dependencies:[b.F,_.Jj],encapsulation:2,changeDetection:0})}}return a})();var F=o(9454),l=o(2940);let n=(()=>{class a extends F.E{constructor(s,p,m){super(s,p,m),this.appName=`List of Skills - ${m.appName}`,this.compConfig=m.compConfig,this.appName=(0,e.oO)(E.vf.AppTitle,this.compConfig.lang)+m.appName,this.compConfig=m.compConfig,this.defaultSortFun=(T,L)=>1e4*(this.compConfig.elemOrder[T.element]-this.compConfig.elemOrder[L.element])+T.rank-L.rank}static{this.\u0275fac=function(p){return new(p||a)(t.rXU(j.hE),t.rXU(t.gRc),t.rXU(h.i))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-skill-list-container"]],features:[t.Vt3],decls:2,vars:6,consts:[[3,"lang","elemOrder","hasTarget","rowData"]],template:function(p,m){1&p&&(t.nrm(0,"app-smt-skill-list",0),t.nI1(1,"async")),2&p&&t.Y8G("lang",m.compConfig.lang)("elemOrder",m.compConfig.elemOrder)("hasTarget",!0)("rowData",t.bMT(1,4,m.skills))},dependencies:[l.p,_.Jj],encapsulation:2,changeDetection:0})}}return a})();var r=o(6567),c=o(860);let C=(()=>{class a extends r.I{constructor(s,p){super(s,p),this.changeDetector=s,this.fusionDataService=p,this.appTitle=p.appName,this.lang=p.compConfig.lang}static{this.\u0275fac=function(p){return new(p||a)(t.rXU(t.gRc),t.rXU(h.i))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-fusion-settings-container"]],features:[t.Vt3],decls:1,vars:4,consts:[[3,"lang","appTitle","fusionSettings","showEnableAll","toggledAll","toggledName"]],template:function(p,m){1&p&&(t.j41(0,"app-fusion-settings",0),t.bIt("toggledAll",function(L){return m.toggleAll(L)})("toggledName",function(L){return m.toggleName(L)}),t.k0s()),2&p&&t.Y8G("lang",m.lang)("appTitle",m.appTitle)("fusionSettings",m.fusionSettings)("showEnableAll",!0)},dependencies:[c.B],encapsulation:2,changeDetection:0})}}return a})();var d=o(5692),g=o(3679),D=o(2223),R=o(9436),A=o(1538),M=o(6122),P=o(4207),K=o(8696);function V(a,G){if(1&a&&t.nrm(0,"app-demon-inherits",10),2&a){const s=t.XpG(2);t.Y8G("lang",s.compConfig.lang)("hasLvls",!0)("inheritHeaders",s.compConfig.affinityElems)("inherits",s.demon.affinities)}}const W=function(a){return{unique:a}};function B(a,G){if(1&a&&(t.j41(0,"tr",11)(1,"td")(2,"div"),t.EFF(3),t.k0s()(),t.j41(4,"td"),t.EFF(5),t.k0s(),t.j41(6,"td"),t.EFF(7),t.nI1(8,"skillCostToString"),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td"),t.EFF(12),t.k0s(),t.j41(13,"td"),t.EFF(14),t.k0s(),t.j41(15,"td"),t.EFF(16),t.nI1(17,"skillLevelToString"),t.k0s()()),2&a){const s=G.$implicit;t.Y8G("ngClass",t.eq3(21,W,s.skill.rank>90)),t.R7$(2),t.ZvI("element-icon ",s.skill.element,""),t.R7$(1),t.JRh(s.skill.element),t.R7$(2),t.Lme("",s.skill.name," ",s.lvl>0?"+"+s.lvl:s.lvl||"",""),t.R7$(1),t.xc7("color",s.cost?null:"transparent"),t.R7$(1),t.JRh(t.bMT(8,17,s.cost)),t.R7$(3),t.Lme("",s.skill.effect," ",0===s.upgrade?"":"("+(s.upgrade>0?"+":"")+s.upgrade+"%)",""),t.R7$(2),t.JRh(s.skill.target||"Self"),t.R7$(1),t.xc7("color",99!==s.skill.rank?null:"transparent"),t.R7$(1),t.JRh(s.skill.rank),t.R7$(2),t.JRh(t.bMT(17,19,s.skill.level))}}function x(a,G){if(1&a&&(t.j41(0,"tr")(1,"td",12),t.EFF(2),t.nI1(3,"translateComp"),t.k0s()()),2&a){const s=t.XpG(2);t.R7$(2),t.JRh(t.i5U(3,1,s.skillMsgs.NoLearnedSkills,s.lang))}}const H=function(a){return[a]};function X(a,G){if(1&a&&(t.nrm(0,"app-fusion-entry-table",13),t.nI1(1,"translateComp")),2&a){const s=t.XpG(2);t.Y8G("title",t.i5U(1,4,s.statMsgs.EvolvesFrom,s.lang))("lang",s.compConfig.lang)("baseUrl","..")("rowData",t.eq3(7,H,s.demon.evolvesFrom))}}function v(a,G){if(1&a&&(t.nrm(0,"app-fusion-entry-table",13),t.nI1(1,"translateComp")),2&a){const s=t.XpG(2);t.Y8G("title",t.i5U(1,4,s.statMsgs.EvolvesTo,s.lang))("lang",s.compConfig.lang)("baseUrl","..")("rowData",t.eq3(7,H,s.demon.evolvesTo))}}function u(a,G){if(1&a&&(t.qex(0),t.nrm(1,"app-demon-stats",2)(2,"app-demon-resists",3),t.DNE(3,V,1,4,"app-demon-inherits",4),t.j41(4,"table",5)(5,"thead")(6,"tr")(7,"th",6),t.EFF(8),t.nI1(9,"translateComp"),t.k0s()(),t.j41(10,"tr")(11,"th"),t.EFF(12),t.nI1(13,"translateComp"),t.k0s(),t.j41(14,"th"),t.EFF(15),t.nI1(16,"translateComp"),t.k0s(),t.j41(17,"th"),t.EFF(18),t.nI1(19,"translateComp"),t.k0s(),t.j41(20,"th"),t.EFF(21),t.nI1(22,"translateComp"),t.k0s(),t.j41(23,"th"),t.EFF(24),t.nI1(25,"translateComp"),t.k0s(),t.j41(26,"th"),t.EFF(27),t.nI1(28,"translateComp"),t.k0s(),t.j41(29,"th"),t.EFF(30,"Lvl"),t.k0s()()(),t.j41(31,"tbody"),t.DNE(32,B,18,23,"tr",7),t.DNE(33,x,4,4,"tr",0),t.nrm(34,"tr"),t.k0s()(),t.DNE(35,X,2,9,"app-fusion-entry-table",8),t.DNE(36,v,2,9,"app-fusion-entry-table",8),t.nrm(37,"app-smt-fusions",9),t.bVm()),2&a){const s=t.XpG();t.R7$(1),t.Y8G("lang",s.compConfig.lang)("title","Lvl "+s.demon.lvl+" "+s.demon.race+" "+s.demon.name)("price",s.demon.price)("statHeaders",s.compConfig.baseStats)("stats",s.demon.stats),t.R7$(1),t.Y8G("lang",s.compConfig.lang)("resistHeaders",s.compConfig.resistElems)("resists",s.demon.resists)("ailmentHeaders",s.compConfig.ailmentElems)("ailments",s.demon.ailments),t.R7$(1),t.Y8G("ngIf",s.demon.affinities),t.R7$(5),t.JRh(t.i5U(9,24,s.skillMsgs.LearnedSkills,s.lang)),t.R7$(4),t.JRh(t.i5U(13,27,s.skillMsgs.Elem,s.lang)),t.R7$(3),t.JRh(t.i5U(16,30,s.skillMsgs.Name,s.lang)),t.R7$(3),t.JRh(t.i5U(19,33,s.skillMsgs.Cost,s.lang)),t.R7$(3),t.JRh(t.i5U(22,36,s.skillMsgs.Effect,s.lang)),t.R7$(3),t.JRh(t.i5U(25,39,s.skillMsgs.Target,s.lang)),t.R7$(3),t.JRh(t.i5U(28,42,s.skillMsgs.Rank,s.lang)),t.R7$(5),t.Y8G("ngForOf",s.skillLvls),t.R7$(1),t.Y8G("ngIf",!s.skillLvls.length),t.R7$(2),t.Y8G("ngIf",s.demon.evolvesFrom),t.R7$(1),t.Y8G("ngIf",s.demon.evolvesTo),t.R7$(1),t.Y8G("lang",s.compConfig.lang)("excludedDlc","excluded"===s.demon.fusion)}}function f(a,G){if(1&a&&t.nrm(0,"app-demon-missing",14),2&a){const s=t.XpG();t.Y8G("name",s.name)}}let I=(()=>{class a{constructor(){this.lang="en",this.statMsgs=E.Cj,this.skillMsgs=E.vf,this.skillLvls=[]}ngOnChanges(){if(this.demon){this.skillLvls=[];for(const s of Object.keys(this.demon.skills)){const m=this.compendium.getSkill(s),T=this.compConfig.affinityElems.indexOf(m.element),L=this.compConfig.affinityBonuses,J=(this.demon.affinities||[])[T];this.skillLvls.push(J&&L.costs[T]&&(64512&m.cost)<=3072?{skill:m,cost:(64512&m.cost)+Math.floor((100-L.costs[T][J+10])/100*(1023&m.cost)),lvl:J,upgrade:L.upgrades[T][J+10]}:{skill:m,cost:m.cost,lvl:0,upgrade:0})}for(const s of this.skillLvls)s.skill.level=this.demon.skills[s.skill.name];this.skillLvls.sort((s,p)=>200*(s.skill.level-p.skill.level)+this.compConfig.elemOrder[s.skill.element]-this.compConfig.elemOrder[p.skill.element])}}static{this.\u0275fac=function(p){return new(p||a)}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",compConfig:"compConfig",compendium:"compendium",lang:"lang"},features:[t.OA$],decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"lang","title","price","statHeaders","stats"],[3,"lang","resistHeaders","resists","ailmentHeaders","ailments"],[3,"lang","hasLvls","inheritHeaders","inherits",4,"ngIf"],[1,"entry-table"],["colSpan","7",1,"title"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"title","lang","baseUrl","rowData",4,"ngIf"],[3,"lang","excludedDlc"],[3,"lang","hasLvls","inheritHeaders","inherits"],[3,"ngClass"],["colSpan","7"],[3,"title","lang","baseUrl","rowData"],[3,"name"]],template:function(p,m){1&p&&(t.DNE(0,u,38,45,"ng-container",0),t.DNE(1,f,1,1,"app-demon-missing",1)),2&p&&(t.Y8G("ngIf",m.demon),t.R7$(1),t.Y8G("ngIf",!m.demon))},dependencies:[_.YU,_.Sq,_.bT,d.X,g.C,D.w,R.d,A.a,M.L,P.uz,P.X2,P.Q3],encapsulation:2,changeDetection:0})}}return a})(),U=(()=>{class a{constructor(s,p,m,T){this.route=s,this.title=p,this.currentDemonService=m,this.fusionDataService=T,this.subscriptions=[],this.appName=T.appName,this.compConfig=T.compConfig}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const s of this.subscriptions)s.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(s=>{this.compendium=s,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(s=>{this.name=s,this.getDemonEntry()})),this.route.params.subscribe(s=>{this.currentDemonService.nextCurrentDemon(s.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(`${this.name} - ${this.appName}`),this.demon=this.compendium.getDemon(this.name))}static{this.\u0275fac=function(p){return new(p||a)(t.rXU(i.nX),t.rXU(j.hE),t.rXU(K.i),t.rXU(h.i))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-demon-entry-container"]],decls:1,vars:5,consts:[[3,"lang","name","demon","compConfig","compendium"]],template:function(p,m){1&p&&t.nrm(0,"app-demon-entry",0),2&p&&t.Y8G("lang",m.compConfig.lang)("name",m.name)("demon",m.demon)("compConfig",m.compConfig)("compendium",m.compendium)},dependencies:[I],encapsulation:2,changeDetection:0})}}return a})();var Y=o(9023);function Q(a,G){if(1&a&&t.nrm(0,"app-fusion-chart",2),2&a){const s=t.XpG();t.Y8G("lang",s.lang)("normChart",s.normChart)("tripChart",s.normChart)("normTitle","Light and Neutral Normal Fusions")("tripTitle","Dark Normal Fusions")}}function w(a,G){if(1&a&&t.nrm(0,"app-fusion-chart",3),2&a){const s=t.XpG();t.Y8G("lang",s.lang)("filterDarks",!1)("normChart",s.normChart)}}let z=(()=>{class a{constructor(s,p){this.changeDetectorRef=s,this.fusionDataService=p,this.subscriptions=[],this.lang="en"}ngOnInit(){this.lang=this.fusionDataService.compConfig.lang,this.hasLightDark=!this.fusionDataService.compConfig.appCssClasses.includes("sh2"),this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(s=>{this.changeDetectorRef.markForCheck(),this.normChart=s}))}ngOnDestroy(){for(const s of this.subscriptions)s.unsubscribe()}static{this.\u0275fac=function(p){return new(p||a)(t.rXU(t.gRc),t.rXU(h.i))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-fusion-chart-container"]],decls:2,vars:2,consts:[[3,"lang","normChart","tripChart","normTitle","tripTitle",4,"ngIf"],[3,"lang","filterDarks","normChart",4,"ngIf"],[3,"lang","normChart","tripChart","normTitle","tripTitle"],[3,"lang","filterDarks","normChart"]],template:function(p,m){1&p&&(t.DNE(0,Q,1,5,"app-fusion-chart",0),t.DNE(1,w,1,3,"app-fusion-chart",1)),2&p&&(t.Y8G("ngIf",m.hasLightDark),t.R7$(1),t.Y8G("ngIf",!m.hasLightDark))},dependencies:[_.bT,Y.q],encapsulation:2,changeDetection:0})}}return a})();var Z=o(1289);let q=(()=>{class a{constructor(s,p){this.fusionDataService=s,this.title=p,this.subscriptions=[],this.maxSkills=8,this.lang="en";const m=this.fusionDataService.compConfig,T=m.appCssClasses.includes("sh2");this.lang=m.lang,this.appName=(0,e.oO)(E.hV.AppTitle,this.lang)+s.appName,this.maxSkills=T?6:8,this.recipeConfig={fissionCalculator:this.fusionDataService.fissionCalculator,fusionCalculator:this.fusionDataService.fusionCalculator,races:m.races,skillElems:m.skillElems,inheritElems:m.affinityElems,displayElems:{},restrictInherits:T,triExclusiveRaces:[],triFissionCalculator:null,triFusionCalculator:null,defaultDemon:m.defaultRecipeDemon}}ngOnInit(){this.title.setTitle(this.appName),this.subscribeAll()}ngOnDestroy(){this.unsubscribeAll()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(s=>{this.compendium=s})),this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(s=>{this.squareChart={normalChart:s,tripleChart:s,raceOrder:this.fusionDataService.compConfig.raceOrder}}))}unsubscribeAll(){for(const s of this.subscriptions)s.unsubscribe()}static{this.\u0275fac=function(p){return new(p||a)(t.rXU(h.i),t.rXU(j.hE))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-recipe-generator-container"]],decls:1,vars:5,consts:[[3,"maxSkills","compendium","squareChart","recipeConfig","lang"]],template:function(p,m){1&p&&t.nrm(0,"app-recipe-generator",0),2&p&&t.Y8G("maxSkills",m.maxSkills)("compendium",m.compendium)("squareChart",m.squareChart)("recipeConfig",m.recipeConfig)("lang",m.lang)},dependencies:[Z.h],encapsulation:2,changeDetection:0})}}return a})();var tt=o(2649),st=o(3452);const et=[{path:"",redirectTo:"demons",pathMatch:"full"},{path:"",component:O,data:{fusionTool:"chart"},children:[{path:"chart",component:z}]},{path:"",component:O,children:[{path:"demons/:demonName",component:U,children:[{path:"fissions",component:tt.J},{path:"fusions",component:st.y},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"demons",component:$},{path:"skills",component:n},{path:"recipes",component:q},{path:"settings",component:C}]},{path:"**",redirectTo:"demons",pathMatch:"full"}];let nt=(()=>{class a{static{this.\u0275fac=function(p){return new(p||a)}}static{this.\u0275mod=t.$C({type:a})}static{this.\u0275inj=t.G2t({imports:[i.iI.forChild(et),i.iI]})}}return a})()},5768:(N,y,o)=>{o.d(y,{i:()=>F});var i=o(2755);function E(l,n){const r={};for(const[c,C]of Object.entries(l))r[n[c]||c]={lvl:C.lvl,result:n[C.result]||C.result};return r}class t{constructor(n,r){this.compConfig=n,this.initImportedData(),this.updateDerivedData(r)}initImportedData(){const n={},r={},c={},C={},d={},g={},D={},R={},A="-".repeat(this.compConfig.ailmentElems.length);for(const[v,u]of Object.entries(this.compConfig.fusionSpells))for(const f of u)c[f]=v;for(const[v,u]of Object.entries(this.compConfig.resistCodes))D[v]=(u/1e3|0)<<10,R[v]=u%1e3/2.5|0;const M=(v,u,f)=>(v||u).split("").map((I,U)=>D[I]+(f?.[U]/2.5|0||R[I])),P="en"===this.compConfig.lang,K=P?"Innate resistance":"",V=P?"Self":"\u81ea\u8eab",W=P?["Weak ","Resist ","Null "]:["\u5f31","\u5f37","\u7121"],B={},x={},H=this.compConfig.appCssClasses.includes("smt5v"),X=this.compConfig.alignments;for(const[v,u]of"wsn".split("").entries())B[D[u]>>10]=[],x[D[u]>>10]=W[v];for(const[v,u]of Object.entries(x))for(const f of this.compConfig.ailmentElems)B[v].push({name:u+f,element:"pas",effect:K,target:V,cost:0,rank:99,learnedBy:[],level:0});for(const v of this.compConfig.demonData)for(const[u,f]of Object.entries(v)){const I=f.race,U=X[u]||X[I]||"None-None";n[u]={name:u,race:I,align:U,lvl:f.lvl,currLvl:f.currLvl||f.lvl,skills:f.skills,price:2*f.price,stats:f.stats,resists:M(f.resists,f.resists,f.resmods),ailments:M(f.ailments,A,f.ailmods),inherits:parseInt((f.affinities||[-10]).map(Y=>Y>-10?"1":"0").join(""),2),affinities:f.affinities,fusion:f.fusion||"normal",prereq:f.prereq||""},c[I]&&(n[u].skills[c[I]]=5278),H&&"-"!==f.innate&&(n[u].price=2*f.innatePrice,n[u].skills=Object.assign({},f.skills),n[u].skills[f.innate]=0,c[U]&&(n[u].skills[c[U]]=4884),c[u]&&(n[u].skills[c[u]]=4884))}for(const v of this.compConfig.demonUnlocks)for(const[u,f]of Object.entries(v.conditions))for(const I of u.split(","))n[I].prereq=f;for(const v of this.compConfig.skillData)for(const[u,f]of Object.entries(v))r[u]={name:u,element:f.element,rank:f.rank,effect:f.effect,damage:f.damage||"",target:f.target||"Self",hits:f.hits||"",cost:f.cost||0,learnedBy:[],level:0},r[u].rank||(r[u].rank=99);for(const v of Object.values(B))for(const u of v)r[u.name]=u;for(const[v,u]of Object.entries(this.compConfig.specialRecipes)){const f=[],I=[];for(const U of u)if(U.includes(" x")){const[Y,Q]=U.split(" x ");I.push({name1:Y,name2:Q})}else f.push(U);f.length>0&&(C[v]=f),I.length>0&&(d[v]=I),"normal"===n[v].fusion&&(n[v].fusion="special")}for(const[v,u]of Object.entries(this.compConfig.evolveData)){const f=u.result;n[v].evolvesTo={price:n[f].price,race1:n[f].race,lvl1:u.lvl,name1:f},n[f].evolvesFrom={price:n[v].price,race1:n[v].race,lvl1:u.lvl,name1:v}}for(const v of this.compConfig.races)g[v]={};for(const[v,u]of Object.entries(n))g[u.race][u.lvl]=v;for(const v of Object.values(n).sort((u,f)=>u.currLvl-f.currLvl))if("enemy"!==v.fusion){for(const u of Object.keys(v.skills))r[u].learnedBy.push({demon:v.name,level:v.skills[u]});for(let u=0;u<v.ailments.length;u++)B[v.ailments[u]>>10]&&B[v.ailments[u]>>10][u].learnedBy.push({demon:v.name,level:0})}this.demons=n,this.skills=r,this.specialRecipes=C,this.specialPairRecipes=d,this.invertedDemons=g}updateDerivedData(n){const r=Object.assign({},this.demons),c=Object.keys(this.skills).map(g=>this.skills[g]),C={},d={};for(const g of this.compConfig.races)C[g]=[],d[g]=[];for(const[g,D]of Object.entries(this.demons))!this.isElementDemon(g)&&!this.isOverlappingResult(g)&&C[D.race].push(D.lvl),this.specialRecipes.hasOwnProperty(g)||d[D.race].push(D.lvl);for(const g of this.compConfig.races)C[g].sort((D,R)=>D-R),d[g].sort((D,R)=>D-R);for(const g of this.compConfig.races){const D=C[g],R=d[g],A=D.length,M=R.length;A&&M&&D[A-1]!==R[M-1]&&R.push(100)}for(const[g,D]of Object.entries(n))if(!D){const{race:R,lvl:A}=this.demons[g];delete r[g],C[R]=C[R].filter(M=>M!==A),d[R]=d[R].filter(M=>M!==A)}this._allDemons=Object.keys(r).map(g=>r[g]),this._allSkills=c.filter(g=>g.rank<99||g.learnedBy.length>0),this.allIngredients=C,this.allResults=d}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return Object.keys(this.specialRecipes).map(n=>this.demons[n])}getDemon(n){return this.demons[n]}getSkill(n){return this.skills[n]}getSkills(n){const r=this.compConfig.elemOrder,c=n.map(C=>this.skills[C]);return c.sort((C,d)=>1e4*(r[C.element]-r[d.element])+C.rank-d.rank),c}getIngredientDemonLvls(n){return this.allIngredients[n]||[]}getResultDemonLvls(n){return this.allResults[n]||[]}getSpecialNameEntries(n){return this.specialRecipes[n]||[]}getSpecialNamePairs(n){return this.specialPairRecipes[n]||[]}reverseLookupDemon(n,r){return this.invertedDemons[n][r]}reverseLookupSpecial(n){return[]}isElementDemon(n){return this.demons[n].race===this.compConfig.elementRace}isOverlappingResult(n){return!1}updateFusionSettings(n){this.updateDerivedData(n)}}var h=o(8063);let _=(()=>{class l extends h.p{static{this.LIGHT_RACES=["Herald","Megami","Avian","Tree","Deity","Avatar","Holy","Genma","Fury","Lady","Dragon","Kishin","Enigma","Entity","Wargod","Amatsu","Kunitsu","Godly","Chaos","\u5927\u5929\u4f7f","\u5973\u795e","\u970a\u9ce5","\u795e\u6a39","\u9b54\u795e","\u795e\u7363","\u8056\u7363","\u5e7b\u9b54","\u7834\u58ca\u795e","\u5730\u6bcd\u795e","\u9f8d\u795e","\u9b3c\u795e","\u79d8\u795e","\u5a01\u970a","\u8ecd\u795e","\u5929\u6d25\u795e","\u56fd\u6d25\u795e","\u795e\u970a","\u6df7\u6c8c\u738b"]}static{this.DARK_RACES=["Vile","Raptor","Wood","Reaper","Wilder","Jaki","Vermin","Tyrant","Drake","Spirit","Haunt","Ghost","Zealot","\u90aa\u795e","\u51f6\u9ce5","\u5996\u6a39","\u6b7b\u795e","\u5996\u7363","\u90aa\u9b3c","\u5e7d\u866b","\u9b54\u738b","\u90aa\u9f8d","\u60aa\u970a","\u5e7d\u9b3c","\u5e7d\u9b3c","\u72c2\u795e"]}constructor(r){super(),this.initCharts(r)}initCharts(r){const c=r.normalTable.races,C=r.normalTable.table,d=r.elementTable.elems,g=r.elementTable.races,D=r.elementTable.table;this.lvlModifier=r.lvlModifier,this.elementDemons=d,this.fusionChart=h.p.loadFusionTableJson(c,C),this.fissionChart=h.p.loadFissionTableJson(c,d,C),this.elementChart=h.p.loadElementTableJson(g,d,D),this.races=c}getLightDark(r){return-1!==l.LIGHT_RACES.indexOf(r)?1:-1!==l.DARK_RACES.indexOf(r)?-1:0}}return l})();var k=o(6947),O=o(609),S=o(1939),j=o(1090),b=o(2598),$=o(8935);let F=(()=>{class l extends O.d{constructor(r,c){const C=c.url.split("/"),d=r.translations.en.includes(C[1])?C[1]:"en",g="en"===d?r:function e(l,n){const r=l.translations.en.indexOf(n);if(-1===r)return l;const c=Object.entries(l.translations).reduce((g,[D,R])=>(g[D]=R[r],g),{}),C=g=>c[g]||g,d=l.races.map(C);return{appTitle:C(l.appTitle),translations:l.translations,lang:n,races:d,raceOrder:d.reduce((g,D,R)=>(g[D]=R,g),{}),appCssClasses:l.appCssClasses,affinityElems:l.affinityElems,skillData:l.skillData.map(g=>(0,i.en)(g,c)),skillElems:l.skillElems,elemOrder:l.elemOrder,resistCodes:l.resistCodes,affinityBonuses:l.affinityBonuses,lvlModifier:l.lvlModifier,demonData:l.demonData.map(g=>(0,i.C_)(g,c)),fusionSpells:(0,i.Fr)(l.fusionSpells,c),evolveData:E(l.evolveData,c),alignments:l.alignments,baseStats:l.baseStats.map(C),resistElems:l.resistElems,ailmentElems:l.ailmentElems,demonUnlocks:(0,i.tQ)(l.demonUnlocks,c),normalTable:(0,i.ji)(l.normalTable,c),elementTable:(0,i.ji)(l.elementTable,c),specialRecipes:(0,i.Fr)(l.specialRecipes,c),defaultRecipeDemon:C(l.defaultRecipeDemon),elementRace:C(l.elementRace),settingsKey:`${l.settingsKey}-${n}`,settingsVersion:l.settingsVersion}}(r,d),D=new S.U(g.demonUnlocks,[]);super(new t(g,D.demonToggles),new _(g),D,g.settingsKey,g.settingsVersion),this.fissionCalculator=k.ov,this.fusionCalculator=k.nv,this.compConfig=g,this.appName=this.compConfig.appTitle+(0,i.oO)(j.fu.FusionCalculator,g.lang)}static{this.\u0275fac=function(c){return new(c||l)(b.KVO(k.HI),b.KVO($.Ix))}}static{this.\u0275prov=b.jDH({token:l,factory:l.\u0275fac})}}return l})()},4503:(N,y,o)=>{o.d(y,{G:()=>_});var i=o(177),e=o(3887),E=o(9447),t=o(7439),h=o(2598);let _=(()=>{class k{static forRoot(){return{ngModule:k}}static{this.\u0275fac=function(j){return new(j||k)}}static{this.\u0275mod=h.$C({type:k})}static{this.\u0275inj=h.G2t({imports:[i.MD,e.G,E.SharedCompendiumModule,t.S]})}}return k})()}}]);