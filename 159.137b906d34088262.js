"use strict";(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[159],{8664:(L,F,a)=>{a.d(F,{G:()=>O});var o=a(5619);class O{constructor(e,c,g,D,T){this.settingsKey=D,this.settingsVersion=T,this._compendium=e,this._compendium$=new o.X(this._compendium),this.compendium=this._compendium$.asObservable(),this._fusionChart=c,this._fusionChart$=new o.X(this._fusionChart),this.fusionChart=this._fusionChart$.asObservable(),this._fusionSettings=g,this._fusionSettings$=new o.X(this._fusionSettings),this.fusionSettings=this._fusionSettings$.asObservable();const d=JSON.parse(localStorage.getItem(this.settingsKey));d&&d.version&&d.version>=this.settingsVersion&&this.updateFusionSettings(d.settings),window.addEventListener("storage",this.onStorageUpdated.bind(this))}updateToggledSettings(e){this._fusionSettings.updateSaveFile(e),this._compendium.updateFusionSettings(this._fusionSettings.demonToggles),this._compendium$.next(this._compendium),this._fusionSettings$.next(this._fusionSettings)}onStorageUpdated(e){e.key===this.settingsKey&&this.updateToggledSettings(JSON.parse(e.newValue).settings)}updateFusionSettings(e){this.updateToggledSettings(e),localStorage.setItem(this.settingsKey,JSON.stringify({version:this.settingsVersion,settings:this._fusionSettings.saveFile}))}}},5939:(L,F,a)=>{a.d(F,{RL:()=>D,gQ:()=>T});var o=a(7548),O=a(6404),r=a(4769),e=a(6814);function c(d,Z){if(1&d&&(r.TgZ(0,"tr")(1,"th"),r._uU(2),r.qZA()()),2&d){const l=Z.$implicit;r.xp6(2),r.Oqu(l)}}let g=(()=>{class d{ngOnChanges(){if(this.compendium&&this.pairChart&&(this.trioChart||!this.trioCalculator)){const l=[];for(const h of this.compendium.allDemons.filter(_=>!_.isEnemy)){const _=this.compendium.getSpecialNameEntries(h.name);if(_.length>0){l.push(`${h.name} = ${_.join(" x ")}`);continue}const P=this.pairCalculator.getFusions(h.name,this.compendium,this.pairChart).map(p=>(0,O.S6)(p,this.compendium));if(P.length>0&&(P.filter(p=>p.race1!==h.race).length>0||!this.trioCalculator||0===this.trioCalculator.getFusions(h.name,this.compendium,this.trioChart).length)){P.sort((f,y)=>f.price-y.price);const p=P.slice(0,3).map(f=>`${f.name1} x ${f.name2}`).join(", ");l.push(`${h.name} = ${p}`+(P.length>3?`, ${P.length-3} more...`:""))}else{if(this.trioCalculator){const p=this.trioCalculator.getFusions(h.name,this.compendium,this.trioChart).map(f=>(0,O.Aw)(f,this.compendium)).filter(f=>f.d1.race!==h.race);if(p.length>0){p.sort((y,E)=>y.price-E.price);const f=p.slice(0,3).map(y=>`${y.d1.name} x ${y.d2.name} x ${y.d3.name}`).join(", ");l.push(`${h.name} = ${f}`+(p.length>3?`, ${p.length-3} more...`:""));continue}}l.push(h.prereq?`${h.name} = ${h.prereq}`:`${h.name} = No fusions found!`)}}this.fissionPreviews=l}}static#e=this.\u0275fac=function(h){return new(h||d)};static#t=this.\u0275cmp=r.Xpm({type:d,selectors:[["app-fission-preview-table"]],inputs:{pairCalculator:"pairCalculator",trioCalculator:"trioCalculator",pairChart:"pairChart",trioChart:"trioChart",compendium:"compendium"},features:[r.TTD],decls:6,vars:1,consts:[[1,"entry-table"],[1,"title"],[4,"ngFor","ngForOf"]],template:function(h,_){1&h&&(r.TgZ(0,"table",0)(1,"tbody")(2,"tr")(3,"th",1),r._uU(4,"Fission Previews"),r.qZA()(),r.YNc(5,c,3,1,"tr",2),r.qZA()()),2&h&&(r.xp6(5),r.Q6J("ngForOf",_.fissionPreviews))},dependencies:[e.sg],encapsulation:2,changeDetection:0})}return d})(),D=(()=>{class d{constructor(l){this.fusionDataService=l,this.subscriptions=[]}ngOnInit(){this.calculator=this.fusionDataService.fissionCalculator,this.subscriptions.push(this.fusionDataService.compendium.subscribe(l=>{this.compendium=l})),this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(l=>{this.fusionChart=l}))}ngOnDestroy(){for(const l of this.subscriptions)l.unsubscribe()}static#e=this.\u0275fac=function(h){return new(h||d)(r.Y36(o.vE))};static#t=this.\u0275cmp=r.Xpm({type:d,selectors:[["app-smt-fission-preview"]],decls:2,vars:3,consts:[[3,"pairCalculator","pairChart","compendium"]],template:function(h,_){1&h&&(r.TgZ(0,"app-fission-preview-table",0),r._UZ(1,"app-fission-preview-table"),r.qZA()),2&h&&r.Q6J("pairCalculator",_.calculator)("pairChart",_.fusionChart)("compendium",_.compendium)},dependencies:[g],encapsulation:2,changeDetection:0})}return d})(),T=(()=>{class d{constructor(l){this.fusionTrioService=l,this.subscriptions=[]}ngOnInit(){this.pairCalculator=this.fusionTrioService.fissionCalculator,this.trioCalculator=this.fusionTrioService.triFissionCalculator,this.subscriptions.push(this.fusionTrioService.compendium.subscribe(l=>{this.compendium=l})),this.subscriptions.push(this.fusionTrioService.squareChart.subscribe(l=>{this.fusionChart=l}))}ngOnDestroy(){for(const l of this.subscriptions)l.unsubscribe()}static#e=this.\u0275fac=function(h){return new(h||d)(r.Y36(o.Ir))};static#t=this.\u0275cmp=r.Xpm({type:d,selectors:[["app-trio-fission-preview"]],decls:2,vars:5,consts:[[3,"pairCalculator","trioCalculator","pairChart","trioChart","compendium"]],template:function(h,_){1&h&&(r.TgZ(0,"app-fission-preview-table",0),r._UZ(1,"app-fission-preview-table"),r.qZA()),2&h&&r.Q6J("pairCalculator",_.pairCalculator)("trioCalculator",_.trioCalculator)("pairChart",_.fusionChart.normalChart)("trioChart",_.fusionChart)("compendium",_.compendium)},dependencies:[g],encapsulation:2,changeDetection:0})}return d})()},9822:(L,F,a)=>{a.d(F,{j:()=>Z});var o=a(4769),O=a(3184),r=a(627),e=a(6593),c=a(6814),g=a(2173);function D(l,h){if(1&l){const _=o.EpF();o.ynx(0),o.TgZ(1,"tr")(2,"th"),o._uU(3,"All Demons"),o.qZA()(),o.TgZ(4,"tr")(5,"td")(6,"button",4),o.NdJ("click",function(){o.CHM(_);const u=o.oxw();return o.KtG(u.toggledAll.emit(!0))}),o._uU(7,"Enable All"),o.qZA(),o.TgZ(8,"button",4),o.NdJ("click",function(){o.CHM(_);const u=o.oxw();return o.KtG(u.toggledAll.emit(!1))}),o._uU(9,"Disable All"),o.qZA()()(),o.BQk()}}function T(l,h){if(1&l){const _=o.EpF();o.TgZ(0,"tr")(1,"td")(2,"label"),o._uU(3),o.TgZ(4,"input",5),o.NdJ("change",function(){const p=o.CHM(_).$implicit,f=o.oxw(2);return o.KtG(f.toggledName.emit(p.name))}),o.qZA()()()()}if(2&l){const _=h.$implicit;o.xp6(3),o.hij("",_.caption," "),o.xp6(1),o.Q6J("checked",_.enabled)}}function d(l,h){if(1&l&&(o.ynx(0),o.TgZ(1,"tr")(2,"th"),o._uU(3),o.qZA()(),o.YNc(4,T,5,2,"tr",3),o.BQk()),2&l){const _=h.$implicit;o.xp6(3),o.Oqu(_.category),o.xp6(1),o.Q6J("ngForOf",_.settings)}}let Z=(()=>{class l{constructor(_){this.title=_,this.lang="en",this.showEnableAll=!1,this.toggledAll=new o.vpe,this.toggledName=new o.vpe,this.msgs=r.jI}set appTitle(_){this.title.setTitle((0,O.y0)(this.msgs.AppTitle,this.lang)+_)}static#e=this.\u0275fac=function(P){return new(P||l)(o.Y36(e.Dx))};static#t=this.\u0275cmp=o.Xpm({type:l,selectors:[["app-fusion-settings"]],inputs:{dlcDemons:"dlcDemons",lang:"lang",fusionSettings:"fusionSettings",showEnableAll:"showEnableAll",appTitle:"appTitle"},outputs:{toggledAll:"toggledAll",toggledName:"toggledName"},decls:12,vars:6,consts:[[1,"entry-table"],[1,"title"],[4,"ngIf"],[4,"ngFor","ngForOf"],[2,"width","50%",3,"click"],["type","checkbox",3,"checked","change"]],template:function(P,u){1&P&&(o.ynx(0),o.TgZ(1,"h2"),o._uU(2),o.ALo(3,"translateComp"),o.qZA(),o.TgZ(4,"table",0)(5,"thead")(6,"tr")(7,"th",1),o._uU(8,"Unlock Conditions"),o.qZA()()(),o.TgZ(9,"tbody"),o.YNc(10,D,10,0,"ng-container",2),o.YNc(11,d,5,2,"ng-container",3),o.qZA()(),o.BQk()),2&P&&(o.xp6(2),o.Oqu(o.xi3(3,3,u.msgs.DlcTitle,u.lang)),o.xp6(8),o.Q6J("ngIf",u.showEnableAll),o.xp6(1),o.Q6J("ngForOf",u.fusionSettings.displayHeaders))},dependencies:[c.sg,c.O5,g.zi],encapsulation:2,changeDetection:0})}return l})()},9052:(L,F,a)=>{a.d(F,{m:()=>e});var o=a(7548),O=a(4769),r=a(8615);let e=(()=>{class c{constructor(D,T){this.changeDetectorRef=D,this.fusionTrioService=T,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.fusionTrioService.squareChart.subscribe(D=>{this.normChart=D.normalChart,this.tripChart=D.tripleChart}))}ngOnDestroy(){for(const D of this.subscriptions)D.unsubscribe()}static#e=this.\u0275fac=function(T){return new(T||c)(O.Y36(O.sBO),O.Y36(o.Ir))};static#t=this.\u0275cmp=O.Xpm({type:c,selectors:[["app-triple-fusion-chart"]],decls:1,vars:4,consts:[[3,"normChart","tripChart","normTitle","tripTitle"]],template:function(T,d){1&T&&O._UZ(0,"app-fusion-chart",0),2&T&&O.Q6J("normChart",d.normChart)("tripChart",d.tripChart)("normTitle","Normal Fusions")("tripTitle","Triple Fusions")},dependencies:[r.R],encapsulation:2,changeDetection:0})}return c})()},103:(L,F,a)=>{a.d(F,{s:()=>O});var o=a(4769);let O=(()=>{class r{constructor(c,g){this.changeDetector2=c,this.fusionDataService2=g,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.fusionDataService2.compendium.subscribe(c=>{this.changeDetector2.markForCheck(),this.compendium=c})),this.subscriptions.push(this.fusionDataService2.fusionSettings.subscribe(c=>{this.fusionSettings=c}))}ngOnDestroy(){for(const c of this.subscriptions)c.unsubscribe()}toggleAll(c){const g={};for(const D of this.fusionSettings.displayHeaders)for(const T of D.settings)g[T.name]=c;this.fusionDataService2.updateFusionSettings(g)}toggleName(c){const g={};g[c]=!this.fusionSettings.isEnabled(c),this.fusionDataService2.updateFusionSettings(g)}static#e=this.\u0275fac=function(g){o.$Z()};static#t=this.\u0275dir=o.lG2({type:r})}return r})()},9778:(L,F,a)=>{a.d(F,{V:()=>o});class o{constructor(r,e,c=","){this.separator=c,this._displayHeaders=[],this._demonToggles={},this._subappToggles={};for(const{category:D,unlocked:T,conditions:d}of r){const Z=[];this._displayHeaders.push({category:D,settings:Z});for(const l of Object.keys(d))this._demonToggles[l]=T,Z.push({name:l,caption:l.split(c).join(", "),enabled:T})}const g=[];e.length>0&&this._displayHeaders.push({category:"Subapps",settings:g});for(const D of e)this._subappToggles[D]=!1,g.push({name:D,caption:D,enabled:!1})}get displayHeaders(){for(const r of this._displayHeaders)for(const e of r.settings)e.enabled=this.saveFile[e.name];return this._displayHeaders}get subappToggles(){return this._subappToggles}get demonToggles(){const r={};for(const[e,c]of Object.entries(this._demonToggles))for(const g of e.split(this.separator))r[g]=c;return r}get saveFile(){return Object.assign({},this._demonToggles,this._subappToggles)}isEnabled(r){return this._demonToggles[r]||this._subappToggles[r]||!1}updateSaveFile(r){for(const e of[this._demonToggles,this._subappToggles])for(const[c,g]of Object.entries(r))e[c]===!g&&(e[c]=g)}}},2812:(L,F,a)=>{a.d(F,{t:()=>O});var o=a(6262);class O extends o.g{constructor(e,c,g){super(),this.elementDemons=[],this.lvlModifier=.5,this.initCharts(e,g)}initCharts(e,c){const g=e.races,D=e.table,T=[];for(let d=0;d<g.length;d++)T.push(D[d].slice(c?0:d,c?d+1:g.length)),c||(T[d][0]="-");this.races=g,this.lvlModifier=c?4.25:.5,this.fissionChart=o.g.loadFissionTableJson(g,this.elementDemons,T),this.fusionChart=o.g.loadFusionTableJson(g,T),this.elementChart={}}}},5020:(L,F,a)=>{a.d(F,{V:()=>Fe});var o=a(4487),O=a(3184),r=a(627),e=a(4769),c=a(6660),g=a(6814),D=a(5390);let T=(()=>{class n{constructor(t){this.appCssClasses=t.compConfig.appCssClasses;const s=t.compConfig;this.otherLinks=[s.hasQrcodes?{title:"QR Code Generator",link:"qrcodes"}:{title:(0,O.y0)(r.e2.RecipGenerator,t.compConfig.lang),link:"recipes"}],s.hasEnemies&&this.otherLinks.unshift({title:(0,O.y0)(r.e2.ShadowList,t.compConfig.lang),link:"shadows"})}static#e=this.\u0275fac=function(s){return new(s||n)(e.Y36(c.Y))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-pq2-compendium"]],decls:1,vars:3,consts:[[3,"ngClass","mainList","otherLinks"]],template:function(s,i){1&s&&e._UZ(0,"app-demon-compendium",0),2&s&&e.Q6J("ngClass",i.appCssClasses)("mainList","persona")("otherLinks",i.otherLinks)},dependencies:[g.mk,D.e],styles:[".pq2 div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.pq2 div.element-icon.i2055,.pq2 div.element-icon.phy{background-image:url(/assets/images/p5/phys.png)}.pq2 div.element-icon.i3583,.pq2 div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.pq2 div.element-icon.i3071,.pq2 div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.pq2 div.element-icon.i3967,.pq2 div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.pq2 div.element-icon.i3839,.pq2 div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.pq2 div.element-icon.i4063,.pq2 div.element-icon.psy{background-image:url(/assets/images/p5/psy.png)}.pq2 div.element-icon.i4031,.pq2 div.element-icon.nuk{background-image:url(/assets/images/p5/nuke.png)}.pq2 div.element-icon.i4087,.pq2 div.element-icon.ble{background-image:url(/assets/images/p5/bless.png)}.pq2 div.element-icon.i4079,.pq2 div.element-icon.cur{background-image:url(/assets/images/p5/curse.png)}.pq2 div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.pq2 div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.pq2 div.element-icon.i4095,.pq2 div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.pq2 div.element-icon.i2047,.pq2 div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.pq2 div.element-icon.nav{background-image:url(/assets/images/p5/trait.png)}.pq2 div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.pq2 th.title,.pq2 th.nav.active,.pq2 th.nav.active a{color:#fff;background-color:#ff4800}.pq div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.pq div.element-icon.cut{background-image:url(/assets/images/p5/sword.png)}.pq div.element-icon.i3584,.pq div.element-icon.i3591,.pq div.element-icon.bas{background-image:url(/assets/images/p5/phys.png)}.pq div.element-icon.sta{background-image:url(/assets/images/p5/gun.png)}.pq div.element-icon.i376,.pq div.element-icon.i383,.pq div.element-icon.i3960,.pq div.element-icon.i3967,.pq div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.pq div.element-icon.i248,.pq div.element-icon.i255,.pq div.element-icon.i3832,.pq div.element-icon.i3839,.pq div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.pq div.element-icon.i472,.pq div.element-icon.i479,.pq div.element-icon.i4056,.pq div.element-icon.i4063,.pq div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.pq div.element-icon.i440,.pq div.element-icon.i447,.pq div.element-icon.i4024,.pq div.element-icon.i4031,.pq div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.pq div.element-icon.i496,.pq div.element-icon.i503,.pq div.element-icon.i4080,.pq div.element-icon.i4087,.pq div.element-icon.lig{background-image:url(/assets/images/p5/bless.png)}.pq div.element-icon.i488,.pq div.element-icon.i495,.pq div.element-icon.i4072,.pq div.element-icon.i4079,.pq div.element-icon.dar{background-image:url(/assets/images/p5/curse.png)}.pq div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.pq div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.pq div.element-icon.i504,.pq div.element-icon.i511,.pq div.element-icon.i4088,.pq div.element-icon.i4095,.pq div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.pq div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.pq div.element-icon.nav{background-image:url(/assets/images/p5/trait.png)}.pq div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.pq th.title,.pq th.nav.active,.pq th.nav.active a{color:#000;background-color:#aa1ca9}.p5t div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p5t div.element-icon.phy{background-image:url(/assets/images/p5/phys.png)}.p5t div.element-icon.gun{background-image:url(/assets/images/p5/gun.png)}.p5t div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p5t div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p5t div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p5t div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p5t div.element-icon.psy{background-image:url(/assets/images/p5/psy.png)}.p5t div.element-icon.nuk{background-image:url(/assets/images/p5/nuke.png)}.p5t div.element-icon.ble{background-image:url(/assets/images/p5/bless.png)}.p5t div.element-icon.cur{background-image:url(/assets/images/p5/curse.png)}.p5t div.element-icon.i1023,.p5t div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p5t div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p5t div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p5t div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.p5t th.title,.p5t th.nav.active,.p5t th.nav.active a{color:#fff;background-color:#f41000}.p3r th.title,.p3r th.nav.active,.p3r th.nav.active a{color:#000;background-color:#4372aa}.p3r div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p3r div.element-icon.i3583,.p3r div.element-icon.i3585,.p3r div.element-icon.sla{background-image:url(/assets/images/p5/sword.png)}.p3r div.element-icon.i2047,.p3r div.element-icon.i3615,.p3r div.element-icon.str{background-image:url(/assets/images/p5/phys.png)}.p3r div.element-icon.i3071,.p3r div.element-icon.i4065,.p3r div.element-icon.pie{background-image:url(/assets/images/p5/gun.png)}.p3r div.element-icon.i3967,.p3r div.element-icon.i3843,.p3r div.element-icon.i3955,.p3r div.element-icon.i3949,.p3r div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p3r div.element-icon.i3839,.p3r div.element-icon.i3715,.p3r div.element-icon.i3827,.p3r div.element-icon.i3821,.p3r div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p3r div.element-icon.i4063,.p3r div.element-icon.i3651,.p3r div.element-icon.i4051,.p3r div.element-icon.i4045,.p3r div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p3r div.element-icon.i4031,.p3r div.element-icon.i3619,.p3r div.element-icon.i4019,.p3r div.element-icon.i4013,.p3r div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p3r div.element-icon.i4083,.p3r div.element-icon.i3603,.p3r div.element-icon.lig{background-image:url(/assets/images/p5/bless.png)}.p3r div.element-icon.i4077,.p3r div.element-icon.i3597,.p3r div.element-icon.dar{background-image:url(/assets/images/p5/curse.png)}.p3r div.element-icon.i493,.p3r div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.p3r div.element-icon.i499,.p3r div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p3r div.element-icon.i4095,.p3r div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p3r div.element-icon.i511,.p3r div.element-icon.i4088,.p3r div.element-icon.spe{background-image:url(/assets/images/p5/trait.png)}.p3r div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p3r div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}\n"],encapsulation:2,changeDetection:0})}return n})();var d=a(1032),Z=a(6593),l=a(4101);let h=(()=>{class n extends d.l{constructor(t,s,i,v){super(t,i,v),this.showAllies=!s.snapshot.data.showShadows,this.showEnemies=!this.showAllies,this.compConfig=v.compConfig,this.defaultSortFun=(b,w)=>200*(this.compConfig.raceOrder[b.race]-this.compConfig.raceOrder[w.race])+w.lvl-b.lvl,this.appName=(0,O.y0)(r.B3.AppPersonas,this.compConfig.lang)+v.appName,this.statHeaders=this.compConfig.baseStats,this.resistHeaders=this.compConfig.hasDemonResists?this.compConfig.resistElems:[],this.inheritOrder=this.compConfig.elemOrder,this.showEnemies&&(this.appName=(0,O.y0)(r.B3.AppShadows,this.compConfig.lang)+v.appName,this.statHeaders=this.compConfig.enemyStats,this.resistHeaders=this.compConfig.resistElems,this.inheritOrder=null)}static#e=this.\u0275fac=function(s){return new(s||n)(e.Y36(Z.Dx),e.Y36(o.gz),e.Y36(e.sBO),e.Y36(c.Y))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-demon-list-container"]],features:[e.qOj],decls:2,vars:9,consts:[[3,"lang","isEnemy","raceOrder","statHeaders","resistHeaders","inheritOrder","rowData"]],template:function(s,i){1&s&&(e._UZ(0,"app-smt-demon-list",0),e.ALo(1,"async")),2&s&&e.Q6J("lang",i.compConfig.lang)("isEnemy",i.showEnemies)("raceOrder",i.compConfig.raceOrder)("statHeaders",i.statHeaders)("resistHeaders",i.resistHeaders)("inheritOrder",i.inheritOrder)("rowData",e.lcZ(1,7,i.demons))},dependencies:[l.Q,g.Ov],encapsulation:2,changeDetection:0})}return n})();var _=a(4330),P=a(3934);let u=(()=>{class n extends _.e{constructor(t,s,i){super(t,s,i),this.compConfig=i.compConfig,this.appName=(0,O.y0)(r.oI.AppTitle,this.compConfig.lang)+i.appName,this.defaultSortFun=(v,b)=>1e4*(this.compConfig.elemOrder[v.element]-this.compConfig.elemOrder[b.element])+v.rank-b.rank}static#e=this.\u0275fac=function(s){return new(s||n)(e.Y36(Z.Dx),e.Y36(e.sBO),e.Y36(c.Y))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-skill-list-container"]],features:[e.qOj],decls:2,vars:9,consts:[[3,"lang","elemOrder","hasRank","hasTarget","isPersona","transferTitle","rowData"]],template:function(s,i){1&s&&(e._UZ(0,"app-smt-skill-list",0),e.ALo(1,"async")),2&s&&e.Q6J("lang",i.compConfig.lang)("elemOrder",i.compConfig.elemOrder)("hasRank",i.compConfig.hasSkillRanks)("hasTarget",!0)("isPersona",!0)("transferTitle","Skill Card")("rowData",e.lcZ(1,7,i.skills))},dependencies:[P.J,g.Ov],encapsulation:2,changeDetection:0})}return n})();var p=a(7880),f=a(8520),y=a(1009),E=a(755),q=a(9012),S=a(4069),I=a(8711);let A=(()=>{class n{constructor(){this.lang="en"}static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-enemy-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig",lang:"lang"},decls:19,vars:14,consts:[[3,"title","statHeaders","stats"],[1,"entry-table"],["colspan","2",1,"title"],[3,"resistHeaders","resists","ailmentHeaders","ailments"],[3,"hasTarget","hasLvl","elemOrder","compendium","skillLevels"]],template:function(s,i){1&s&&(e._UZ(0,"app-demon-stats",0),e.TgZ(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),e._uU(5,"Appearances"),e.qZA()(),e.TgZ(6,"tr")(7,"th"),e._uU(8,"Areas"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Drops"),e.qZA()()(),e.TgZ(11,"tbody")(12,"tr")(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA()()()(),e._UZ(17,"app-demon-resists",3)(18,"app-demon-skills",4)),2&s&&(e.Q6J("title","Lvl "+i.demon.lvl+" "+i.demon.race+" "+i.demon.name)("statHeaders",i.compConfig.enemyStats)("stats",i.demon.stats),e.xp6(14),e.Oqu(i.demon.area),e.xp6(2),e.Oqu(i.demon.drop),e.xp6(1),e.Q6J("resistHeaders",i.compConfig.resistElems)("resists",i.demon.resists)("ailmentHeaders",i.compConfig.ailmentElems)("ailments",i.demon.ailments),e.xp6(1),e.Q6J("hasTarget",!0)("hasLvl",!1)("elemOrder",i.compConfig.elemOrder)("compendium",i.compendium)("skillLevels",i.demon.skills))},dependencies:[f.O,y.I,E.n],encapsulation:2,changeDetection:0})}return n})();function U(n,C){if(1&n&&e._UZ(0,"app-demon-resists",7),2&n){const t=e.oxw(2);e.Q6J("lang",t.lang)("resistHeaders",t.compConfig.resistElems)("resists",t.demon.resists)}}function N(n,C){if(1&n&&(e.ynx(0),e._UZ(1,"app-demon-stats",2),e.YNc(2,U,1,3,"app-demon-resists",3),e._UZ(3,"app-demon-inherits",4)(4,"app-demon-skills",5)(5,"app-smt-fusions",6),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("lang",t.lang)("title","Lvl "+t.demon.lvl+" "+t.demon.race+" "+t.demon.name)("price",t.demon.price)("statHeaders",t.compConfig.baseStats)("stats",t.demon.stats)("inherits",t.demon.inherits),e.xp6(1),e.Q6J("ngIf",t.compConfig.hasDemonResists),e.xp6(1),e.Q6J("lang",t.lang)("inheritHeaders",t.compConfig.inheritElems)("inherits",t.compendium.getInheritElems(t.demon.inherits)),e.xp6(1),e.Q6J("lang",t.lang)("hasTarget",!0)("elemOrder",t.compConfig.elemOrder)("compendium",t.compendium)("skillLevels",t.demon.skills),e.xp6(1),e.Q6J("lang",t.lang)("hasTripleFusion",t.compConfig.hasTripleFusion)("excludedDlc","excluded"===t.demon.fusion)}}function Y(n,C){if(1&n&&e._UZ(0,"app-demon-missing",8),2&n){const t=e.oxw();e.Q6J("name",t.name)}}function k(n,C){if(1&n&&e._UZ(0,"app-demon-entry",1),2&n){const t=e.oxw();e.Q6J("lang",t.compConfig.lang)("name",t.name)("demon",t.demon)("compConfig",t.compConfig)("compendium",t.compendium)}}function m(n,C){if(1&n&&e._UZ(0,"app-enemy-entry",1),2&n){const t=e.oxw();e.Q6J("lang",t.compConfig.lang)("name",t.name)("demon",t.demon)("compConfig",t.compConfig)("compendium",t.compendium)}}let x=(()=>{class n{constructor(){this.lang="en"}static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig",lang:"lang"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"lang","title","price","statHeaders","stats","inherits"],[3,"lang","resistHeaders","resists",4,"ngIf"],[3,"lang","inheritHeaders","inherits"],[3,"lang","hasTarget","elemOrder","compendium","skillLevels"],[3,"lang","hasTripleFusion","excludedDlc"],[3,"lang","resistHeaders","resists"],[3,"name"]],template:function(s,i){1&s&&(e.YNc(0,N,6,18,"ng-container",0),e.YNc(1,Y,1,1,"app-demon-missing",1)),2&s&&(e.Q6J("ngIf",i.demon),e.xp6(1),e.Q6J("ngIf",!i.demon))},dependencies:[g.O5,p.t,f.O,y.I,E.n,q.N,S.O],encapsulation:2,changeDetection:0})}return n})(),B=(()=>{class n{constructor(t,s,i,v){this.route=t,this.title=s,this.currentDemonService=i,this.fusionDataService=v,this.subscriptions=[],this.appName="Test App",this.appName=v.appName,this.compConfig=v.compConfig}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const t of this.subscriptions)t.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(t=>{this.compendium=t,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(t=>{this.name=t,this.getDemonEntry()})),this.route.params.subscribe(t=>{this.currentDemonService.nextCurrentDemon(t.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(`${this.name} - ${this.appName}`),this.demon=this.compendium.getDemon(this.name))}static#e=this.\u0275fac=function(s){return new(s||n)(e.Y36(o.gz),e.Y36(Z.Dx),e.Y36(I.s),e.Y36(c.Y))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-demon-entry-container"]],decls:2,vars:2,consts:[[3,"lang","name","demon","compConfig","compendium",4,"ngIf"],[3,"lang","name","demon","compConfig","compendium"]],template:function(s,i){1&s&&(e.YNc(0,k,1,5,"app-demon-entry",0),e.YNc(1,m,1,5,"app-enemy-entry",0)),2&s&&(e.Q6J("ngIf",!i.demon||!i.demon.isEnemy),e.xp6(1),e.Q6J("ngIf",i.demon&&i.demon.isEnemy))},dependencies:[g.O5,x,A],encapsulation:2,changeDetection:0})}return n})();const M=Array(24).fill(0);function Q(n,C){return n.split("").map(t=>t.charCodeAt(0)).concat(Array(C-n.length).fill(0))}M[0]=4,M[2]=50,M[4]=50,M[6]=50,M[7]=50,M[8]=50,M[12]=50,M[16]=50,M[20]=50;const G=[].concat(Q("aqiu384.github.io",21),Q("https://youtu.be/b1KfNEPKncQ",33)),j="kitaro",$="bancho",W=[].concat(Q(j,17),Q($,17)),X=[].concat(Q(j,29),Q($,29)),V=[].concat(Q(j,17),Q($,17),Q("renren",17),Q("hamuko",17)),z=[].concat([34,50],Array(36).fill(31),[31,0,31,0,0,0,1,128]),ee=[].concat([34,50],Array(54).fill(31),[31,0,1,0]);var J=a(95);let ie=(()=>{class n{constructor(){this.byteArray=[],this.errorLvl="L",this.typeNum=10,this.qrFactory=qrcode(this.typeNum,this.errorLvl),this.qrImg=null}ngOnChanges(){this.createQrcode()}createQrcode(){this.qrFactory=qrcode(this.typeNum,this.errorLvl),this.qrFactory.addData(this.byteArray.map(t=>String.fromCharCode(t)).join("")),this.qrFactory.make(),this.qrImg=this.qrFactory.createImgTag(5)}static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-qrcode"]],inputs:{byteArray:"byteArray",errorLvl:"errorLvl",typeNum:"typeNum"},features:[e.TTD],decls:1,vars:1,consts:[[3,"innerHtml"]],template:function(s,i){1&s&&e._UZ(0,"div",0),2&s&&e.Q6J("innerHtml",i.qrImg,e.oJD)},encapsulation:2,changeDetection:0})}return n})();var oe=a(2173);function ae(n,C){if(1&n&&(e.TgZ(0,"option",17),e._uU(1),e.qZA()),2&n){const t=C.index;e.Q6J("value",t+1),e.xp6(1),e.Oqu(t+1)}}function re(n,C){if(1&n&&(e.TgZ(0,"option",17),e._uU(1),e.qZA()),2&n){const t=C.index;e.Q6J("value",t+1),e.xp6(1),e.Oqu(t+1)}}function le(n,C){if(1&n&&(e.TgZ(0,"option",17),e._uU(1),e.qZA()),2&n){const t=C.index;e.Q6J("value",t+1),e.xp6(1),e.Oqu(t+1)}}function ce(n,C){if(1&n&&(e.TgZ(0,"option",17),e._uU(1),e.qZA()),2&n){const t=C.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function pe(n,C){if(1&n&&(e.TgZ(0,"option",17),e._uU(1),e.qZA()),2&n){const t=C.$implicit;e.Q6J("value",t.name),e.xp6(1),e.Oqu(t.name)}}function me(n,C){if(1&n&&(e.TgZ(0,"option",17),e._uU(1),e.qZA()),2&n){const t=C.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function ue(n,C){if(1&n&&(e.TgZ(0,"option",17),e._uU(1),e.qZA()),2&n){const t=C.$implicit;e.Q6J("value",t.name),e.xp6(1),e.Oqu(t.name)}}function ge(n,C){if(1&n&&(e.ynx(0),e.TgZ(1,"td"),e._uU(2),e.ALo(3,"skillCostToString"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.BQk()),2&n){const t=C.$implicit;e.xp6(1),e.Udp("color",t.cost?null:"transparent"),e.xp6(1),e.Oqu(e.lcZ(3,5,t.cost)),e.xp6(3),e.Oqu(t.effect),e.xp6(2),e.Oqu(t.target)}}function de(n,C){1&n&&(e.TgZ(0,"td"),e._uU(1,"-"),e.qZA(),e.TgZ(2,"td"),e._uU(3,"-"),e.qZA(),e.TgZ(4,"td"),e._uU(5,"-"),e.qZA())}const he=function(n){return{unique:n}};function fe(n,C){if(1&n){const t=e.EpF();e.ynx(0,18),e.TgZ(1,"tr",19)(2,"td")(3,"select",20),e.NdJ("change",function(){const v=e.CHM(t).$implicit,b=e.oxw();return e.KtG(v.controls.name.setValue(b.skills[v.controls.elem.value][0].name))}),e.TgZ(4,"option",21),e._uU(5,"-"),e.qZA(),e.YNc(6,me,2,2,"option",9),e.qZA()(),e.TgZ(7,"td")(8,"select",22),e.YNc(9,ue,2,2,"option",9),e.qZA()(),e.YNc(10,ge,8,7,"ng-container",23),e.YNc(11,de,6,0,"ng-template",null,24,e.W1O),e.qZA(),e.BQk()}if(2&n){const t=C.$implicit,s=C.index,i=e.MAs(12),v=e.oxw();e.Q6J("formGroupName",s),e.xp6(1),e.Q6J("ngClass",e.VKq(6,he,(v.compendium.getSkill(t.controls.name.value)||v.blankSkill).rank>90)),e.xp6(5),e.Q6J("ngForOf",v.elems),e.xp6(3),e.Q6J("ngForOf",v.skills[t.controls.elem.value]),e.xp6(1),e.Q6J("ngIf",v.compendium.getSkill(t.controls.name.value))("ngIfElse",i)}}let ve=(()=>{class n{constructor(t){this.fb=t,this.defaultRace="Fool",this.defaultDemon="Slime",this.demons={},this.skills={},this.dcodes={},this.scodes={},this.range99=Array(99),this.range299=Array(299),this.price=0,this.blankSkill={code:0,cost:0,level:0,rank:0,target:"Self",name:"-",element:"-",inherit:"-",effect:"-",learnedBy:[],transfer:[]},this.createForm()}ngOnChanges(){this.initDropdowns()}createForm(){const t=[];for(let s=0;s<6;s++)t.push(this.fb.group({elem:"-",name:"-"}));this.form=this.fb.group({language:"eng",lvl:1,hp:1,mp:1,race:this.defaultRace,demon:this.defaultDemon,skills:this.fb.array(t)}),this.form.valueChanges.subscribe(s=>{if(this.form.valid){const i=this.compendium.getDemon(s.demon),v=s.skills.map(R=>this.compendium.getSkill(R.name)||this.blankSkill),b={language:s.language,demonCode:i.code,lvl:parseInt(s.lvl,10),exp:-1,hp:parseInt(s.hp,10),mp:parseInt(s.mp,10),skillCodes:v.map(R=>R.code)},w=b.skillCodes.reduce((R,Pe)=>0!==Pe?R+1:R,0);this.price=10*Math.floor((800+120*b.lvl)*(1+.25*w)/10),this.passBytes=function te(n,C){return C&&C.includes("2")?function se(n){const C=M.slice(),t=Array(25).fill(0),s=n.lvl,i=Math.floor((((-.0479755766*s+9.28700353)*s+71.9694228)*s-81.1026214)*s+.120783542),v=n.exp<0?i:n.exp;"jpn"!==n.language&&(C[6]=256-C[6]),t[0]=n.demonCode%256,t[1]=2*n.lvl+Math.floor(n.demonCode/256),t[2]=v%256,t[3]=Math.floor(v/256)%256,t[4]=Math.floor(v/65536);for(let b=0;b<6;b++)t[6+2*b]=n.skillCodes[b]%256,t[6+2*b+1]=Math.floor(n.skillCodes[b]/256);return t[22]=10*n.hp%256,t[23]=10*n.mp%16*16+Math.floor(n.hp/25.6),t[24]=Math.floor(n.mp/1.6),[].concat(C,G,V,ee,t,Array(21).fill(0))}(n):function ne(n){const C="jpn"===n.language?W:X,t=Array(30).fill(0),s=n.lvl,i=Math.floor((((-.07600161*s+14.0603287)*s-.02256972)*s+.59031556)*s-1.87981906),v=n.exp<0?i:n.exp;t[0]=n.demonCode,t[2]=n.lvl,t[6]=v%256,t[7]=Math.floor(v/256)%256,t[8]=Math.floor(v/65536);for(let b=0;b<6;b++)t[10+2*b]=n.skillCodes[b]%256,t[10+2*b+1]=Math.floor(n.skillCodes[b]/256);return t[26]=10*n.hp%256,t[27]=Math.floor(n.hp/25.6),t[28]=10*n.mp%256,t[29]=Math.floor(n.mp/25.6),[].concat(M,G,C,z,t,Array(40).fill(0))}(n)}(b,this.compConfig.appTitle)}})}initDropdowns(){if(this.demons={},this.skills={"-":[this.blankSkill]},this.dcodes={},this.scodes={0:this.blankSkill},this.compConfig&&this.compendium){for(const t of this.compendium.allDemons.filter(s=>s.code))this.demons[t.race]||(this.demons[t.race]=[]),this.demons[t.race].push(t),this.dcodes[t.code]=t;for(const t of this.compendium.allSkills.filter(s=>s.code))this.skills[t.element]||(this.skills[t.element]=[]),this.skills[t.element].push(t),this.scodes[t.code]=t;for(const t of Object.values(this.demons))t.sort((s,i)=>i.lvl-s.lvl);for(const t of Object.values(this.skills))t.sort((s,i)=>s.rank-i.rank);this.races=this.compConfig.races.filter(t=>this.demons[t]),this.elems=this.compConfig.skillElems.filter(t=>this.skills[t]),this.setDefaultValues(this.defaultDemon)}}changeRace(t){const s=this.demons[t][0];this.form.controls.demon.setValue(s.name),this.setDefaultValues(s.name)}setDefaultValues(t){const s=Array(6).fill(this.blankSkill),i=this.compendium.getDemon(t);let v=0;for(const[b,w]of Object.entries(i.skills))0===w&&(s[v++]=this.compendium.getSkill(b));this.form.patchValue({lvl:Math.floor(i.lvl),hp:i.stats[0],mp:i.stats[1],race:i.race,demon:i.name,skills:s.map(b=>({elem:b.element,name:b.name}))})}static#e=this.\u0275fac=function(s){return new(s||n)(e.Y36(J.qu))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-password-generator"]],inputs:{defaultRace:"defaultRace",defaultDemon:"defaultDemon",compendium:"compendium",compConfig:"compConfig"},features:[e.TTD],decls:69,vars:9,consts:[[3,"formGroup"],[1,"entry-table"],["colspan","2",1,"title"],[3,"byteArray"],["colspan","7",1,"title"],["formControlName","language"],["value","jpn"],["value","eng"],["formControlName","lvl"],[3,"value",4,"ngFor","ngForOf"],["formControlName","hp"],["formControlName","mp"],["formControlName","race",3,"change"],["formControlName","demon",3,"change"],["formArrayName","skills",1,"list-table"],["colspan","5",1,"title"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"value"],[3,"formGroupName"],[3,"ngClass"],["formControlName","elem",3,"change"],["value","-"],["formControlName","name"],[4,"ngIf","ngIfElse"],["noEntry",""]],template:function(s,i){1&s&&(e.TgZ(0,"form",0)(1,"h2"),e._uU(2,"QR Code Generator"),e.qZA(),e.TgZ(3,"table",1)(4,"tr")(5,"th",2),e._uU(6,"QR Code"),e.qZA()(),e.TgZ(7,"tr")(8,"td"),e._UZ(9,"app-qrcode",3),e.qZA()()(),e.TgZ(10,"table",1)(11,"tr")(12,"th",4),e._uU(13,"Persona Entry"),e.qZA()(),e.TgZ(14,"tr")(15,"th"),e._uU(16,"Price"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Language"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Level"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"HP"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"MP"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"Race"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"Demon"),e.qZA()(),e.TgZ(29,"tr")(30,"td"),e._uU(31),e.qZA(),e.TgZ(32,"td")(33,"select",5)(34,"option",6),e._uU(35,"Japanese"),e.qZA(),e.TgZ(36,"option",7),e._uU(37,"English"),e.qZA()()(),e.TgZ(38,"td")(39,"select",8),e.YNc(40,ae,2,2,"option",9),e.qZA()(),e.TgZ(41,"td")(42,"select",10),e.YNc(43,re,2,2,"option",9),e.qZA()(),e.TgZ(44,"td")(45,"select",11),e.YNc(46,le,2,2,"option",9),e.qZA()(),e.TgZ(47,"td")(48,"select",12),e.NdJ("change",function(){return i.changeRace(i.form.controls.race.value)}),e.YNc(49,ce,2,2,"option",9),e.qZA()(),e.TgZ(50,"td")(51,"select",13),e.NdJ("change",function(){return i.setDefaultValues(i.form.controls.demon.value)}),e.YNc(52,pe,2,2,"option",9),e.qZA()()()(),e.TgZ(53,"table",14)(54,"tr")(55,"th",15),e._uU(56,"Learned Skills"),e.qZA()(),e.TgZ(57,"tr")(58,"th"),e._uU(59,"Element"),e.qZA(),e.TgZ(60,"th"),e._uU(61,"Name"),e.qZA(),e.TgZ(62,"th"),e._uU(63,"Cost"),e.qZA(),e.TgZ(64,"th"),e._uU(65,"Effect"),e.qZA(),e.TgZ(66,"th"),e._uU(67,"Target"),e.qZA()(),e.YNc(68,fe,13,8,"ng-container",16),e.qZA()()),2&s&&(e.Q6J("formGroup",i.form),e.xp6(9),e.Q6J("byteArray",i.passBytes),e.xp6(22),e.Oqu(i.price),e.xp6(9),e.Q6J("ngForOf",i.range99),e.xp6(3),e.Q6J("ngForOf",i.range299),e.xp6(3),e.Q6J("ngForOf",i.range99),e.xp6(3),e.Q6J("ngForOf",i.races),e.xp6(3),e.Q6J("ngForOf",i.demons[i.form.controls.race.value]),e.xp6(16),e.Q6J("ngForOf",i.form.controls.skills.controls))},dependencies:[g.mk,g.sg,g.O5,J._Y,J.YN,J.Kr,J.EJ,J.JJ,J.JL,J.sg,J.u,J.x0,J.CE,ie,oe.tq],styles:["td[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}input[_ngcontent-%COMP%]{width:95%;border-width:3px}input.ng-valid[_ngcontent-%COMP%]{border-color:#0f0}input.ng-invalid[_ngcontent-%COMP%]{border-color:red}"],changeDetection:0})}return n})(),_e=(()=>{class n{constructor(t,s){this.fusionDataService=t,this.title=s,this.subscriptions=[],this.compConfig=this.fusionDataService.compConfig}ngOnInit(){this.setTitle(),this.subscribeAll()}ngOnDestroy(){this.unsubscribeAll()}setTitle(){this.title.setTitle(`QR Code Generator - ${this.fusionDataService.appName}`)}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(t=>{this.compendium=t}))}unsubscribeAll(){for(const t of this.subscriptions)t.unsubscribe()}static#e=this.\u0275fac=function(s){return new(s||n)(e.Y36(c.Y),e.Y36(Z.Dx))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-password-generator-container"]],decls:1,vars:2,consts:[[3,"compendium","compConfig"]],template:function(s,i){1&s&&e._UZ(0,"app-password-generator",0),2&s&&e.Q6J("compendium",i.compendium)("compConfig",i.compConfig)},dependencies:[ve],encapsulation:2,changeDetection:0})}return n})();var Ce=a(103),be=a(9822);let Te=(()=>{class n extends Ce.s{constructor(t,s){super(t,s),this.changeDetector=t,this.fusionDataService=s,this.appTitle=s.appName,this.lang=s.compConfig.lang}static#e=this.\u0275fac=function(s){return new(s||n)(e.Y36(e.sBO),e.Y36(c.Y))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-fusion-settings-container"]],features:[e.qOj],decls:1,vars:3,consts:[[3,"lang","appTitle","fusionSettings","toggledName"]],template:function(s,i){1&s&&(e.TgZ(0,"app-fusion-settings",0),e.NdJ("toggledName",function(b){return i.toggleName(b)}),e.qZA()),2&s&&e.Q6J("lang",i.lang)("appTitle",i.appTitle)("fusionSettings",i.fusionSettings)},dependencies:[be.j],encapsulation:2,changeDetection:0})}return n})();var ye=a(4436);let ke=(()=>{class n{constructor(t,s){this.fusionDataService=t,this.title=s,this.subscriptions=[],this.lang="en";const i=this.fusionDataService.compConfig,v=i.translations.en.indexOf(i.lang);this.maxSkills=i.hasDemonResists?8:2,this.lang=i.lang,this.recipeConfig={fissionCalculator:this.fusionDataService.fissionCalculator,fusionCalculator:this.fusionDataService.fusionCalculator,races:i.races,skillElems:i.skillElems,inheritElems:i.inheritElems,displayElems:i.skillElems.reduce((w,R)=>(w[R]=(w=>-1===v?w:(i.translations[w]||[])[v]||w)(R),w),{}),restrictInherits:!0,triExclusiveRaces:i.hasTripleFusion?["Fool","Tower","Moon","Sun","Judgement"]:[],triFissionCalculator:this.fusionDataService.triFissionCalculator,triFusionCalculator:this.fusionDataService.triFusionCalculator,defaultDemon:i.defaultDemon}}ngOnInit(){this.setTitle(),this.subscribeAll()}ngOnDestroy(){this.unsubscribeAll()}setTitle(){this.title.setTitle((0,O.y0)(r.XE.AppTitle,this.lang)+this.fusionDataService.appName)}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(t=>{this.compendium=t})),this.subscriptions.push(this.fusionDataService.squareChart.subscribe(t=>{this.squareChart=t}))}unsubscribeAll(){for(const t of this.subscriptions)t.unsubscribe()}static#e=this.\u0275fac=function(s){return new(s||n)(e.Y36(c.Y),e.Y36(Z.Dx))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-recipe-generator-container"]],decls:1,vars:5,consts:[[3,"lang","maxSkills","compendium","squareChart","recipeConfig"]],template:function(s,i){1&s&&e._UZ(0,"app-recipe-generator",0),2&s&&e.Q6J("lang",i.lang)("maxSkills",i.maxSkills)("compendium",i.compendium)("squareChart",i.squareChart)("recipeConfig",i.recipeConfig)},dependencies:[ye.X],encapsulation:2,changeDetection:0})}return n})();var De=a(5939),Oe=a(5657),Ee=a(4689),Ae=a(6857),Se=a(4170);const qe=[{path:"",redirectTo:"personas",pathMatch:"full"},{path:"",component:T,data:{fusionTool:"chart"},children:[{path:"chart",component:a(9052).m}]},{path:"",component:T,children:[{path:"personas/:demonName",component:B,children:[{path:"fissions/triple",component:Ae.p},{path:"fusions/triple",component:Se.n},{path:"fissions",component:Oe.t},{path:"fusions",component:Ee.$},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"shadows/:demonName",component:B},{path:"personas",component:h},{path:"shadows",component:h,data:{showShadows:!0}},{path:"skills",component:u},{path:"qrcodes",component:_e},{path:"recipes",component:ke},{path:"settings",component:Te},{path:"previews",component:De.RL}]},{path:"**",redirectTo:"personas",pathMatch:"full"}];let Fe=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[o.Bz.forChild(qe),o.Bz]})}return n})()},6660:(L,F,a)=>{a.d(F,{Y:()=>P});var o=a(5619);class O{constructor(p,f){this.compConfig=p,this.specialRecipes={},this.initImportedData(),this.updateDerivedData(f)}initImportedData(){const p={},f={},y={},E={},q={},S={};for(const[k,m]of Object.entries(this.compConfig.resistCodes))S[k]=((m/1e4|0)<<10)+(m%1e4/2.5|0);const I="-".repeat(this.compConfig.resistElems.length),A="-".repeat(this.compConfig.ailmentElems.length),U=k=>(k||I).split("").map(m=>S[m]),N=k=>(k||A).split("").map(m=>S[m]),Y=this.compConfig.hasDemonResists;for(const[k,m]of Object.entries(this.compConfig.demonData)){const x=Object.values(m.skills).reduce((M,Q)=>0===Q?M+1:M,0),B=10*Math.floor((800+120*m.lvl)*(1+.25*x)/10);p[k]={name:k,race:m.race,lvl:m.lvl,currLvl:m.lvl,price:m.price||B,inherits:this.compConfig.inheritTypes[m.inherit||m.inherits],stats:m.stats,skills:m.skills,resists:Y?U(m.resists):[],ailments:Y?N(m.ailments):[],code:m.code||0,fusion:m.fusion||"normal",prereq:m.prereq||""}}for(const[k,m]of Object.entries(this.compConfig.enemyData))f[k]={name:k,race:m.race,lvl:m.lvl,currLvl:m.lvl,price:0,inherits:0,stats:m.stats,resists:U(m.resists),ailments:N(m.ailments),skills:m.skills.reduce((x,B)=>(x[B]=0,x),{}),area:m.area,drop:m.drops?.join(", ")||"-",code:0,fusion:"normal",isEnemy:!0};for(const[k,m]of Object.entries(this.compConfig.specialRecipes))E[k]=m,p[k].fusion="special";for(const[k,m]of Object.entries(this.compConfig.skillData))y[k]={name:k,element:m.elem||m.element,cost:m.cost||0,rank:m.unique?99:m.rank||(1023&m.cost)/100||1,effect:m.effect,target:m.target||"Self",learnedBy:[],transfer:[],code:m.code||0,level:0},m.card&&(y[k].transfer=m.card.split(", ").map(x=>({demon:x,level:-100})));for(const k of this.compConfig.races)q[k]={};for(const k of Object.values(p).sort((m,x)=>m.lvl-x.lvl)){"party"!==k.fusion&&(q[k.race][k.lvl]=k.name);for(const[m,x]of Object.entries(k.skills))y[m].learnedBy.push({demon:k.name,level:x})}this.demons=p,this.enemies=f,this.skills=y,this.specialRecipes=E,this.invertedDemons=q}updateDerivedData(p){const f=Object.assign({},this.demons),y=[],E={},q={};for(const A of Object.values(this.skills))A.learnedBy.length<1&&A.transfer.length<1?A.rank=99:y.push(A);for(const A of this.compConfig.races)E[A]=[],q[A]=[];for(const[A,U]of Object.entries(this.demons))"party"!==U.fusion&&(E[U.race].push(U.lvl),this.specialRecipes.hasOwnProperty(A)||q[U.race].push(U.lvl));for(const A of this.compConfig.races)E[A].sort((U,N)=>U-N),q[A].sort((U,N)=>U-N);for(const[A,U]of Object.entries(p))if(!U){const{race:N,lvl:Y}=this.demons[A];delete f[A],E[N]=E[N].filter(k=>k!==Y),q[N]=q[N].filter(k=>k!==Y)}const S=Object.keys(f).map(A=>f[A]),I=Object.keys(this.enemies).map(A=>this.enemies[A]);this._allDemons=I.concat(S),this._allSkills=y,this.allIngredients=E,this.allResults=q}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return Object.keys(this.specialRecipes).map(p=>this.demons[p])}getDemon(p){return this.demons[p]||this.enemies[p]}getSkill(p){return this.skills[p]}getSkills(p){const f=this.compConfig.elemOrder,y=p.map(E=>this.skills[E]);return y.sort((E,q)=>1e4*(f[E.element]-f[q.element])+E.rank-q.rank),y}getIngredientDemonLvls(p){return this.allIngredients[p]||[]}getResultDemonLvls(p){return this.allResults[p]||[]}getSpecialNameEntries(p){return this.specialRecipes[p]||[]}getSpecialNamePairs(p){return[]}getInheritElems(p){return p.toString(2).padStart(this.compConfig.inheritElems.length,"0").split("").map(f=>100*parseInt(f))}reverseLookupDemon(p,f){return this.invertedDemons[p][f]}reverseLookupSpecial(p){return[]}isElementDemon(p){return!1}updateFusionSettings(p){this.updateDerivedData(p)}}var r=a(2812),e=a(7548),c=a(3837),g=a(1139),D=a(7862),T=a(8664),d=a(9778),Z=a(3184),h=a(4769),_=a(4487);let P=(()=>{class u extends T.G{constructor(f,y){const E=y.url.split("/"),q=f.translations.en.includes(E[1])?E[1]:"en",S="en"===q?f:function l(u,p){const f=u.translations.en.indexOf(p);if(-1===f)return u;const y=Object.entries(u.translations).reduce((S,[I,A])=>(S[I]=A[f],S),{}),E=S=>y[S]||S,q=u.races.map(E);return{appTitle:E(u.appTitle),translations:u.translations,lang:p,races:q,raceOrder:u.raceOrder,appCssClasses:u.appCssClasses,skillData:(0,Z.B3)(u.skillData,y),skillElems:u.skillElems,ailmentElems:u.ailmentElems,elemOrder:u.elemOrder,resistCodes:u.resistCodes,demonData:(0,Z.k)(u.demonData,y),baseStats:u.baseStats.map(E),resistElems:u.resistElems,inheritTypes:u.inheritTypes,inheritElems:u.inheritElems,demonUnlocks:(0,Z.yH)(u.demonUnlocks,y),enemyData:(0,Z.k)(u.enemyData,y),enemyStats:u.enemyStats.map(E),normalTable:(0,Z.Qc)(u.normalTable,y),hasTripleFusion:u.hasTripleFusion,hasDemonResists:u.hasDemonResists,hasSkillRanks:u.hasSkillRanks,hasEnemies:u.hasEnemies,hasQrcodes:u.hasQrcodes,specialRecipes:(0,Z.yW)(u.specialRecipes,y),defaultDemon:E(u.defaultDemon),settingsKey:`${u.settingsKey}-${p}`,settingsVersion:u.settingsVersion}}(f,q),I=new r.t(S.normalTable,S.races),A=new d.V(S.demonUnlocks,[]);super(new O(S,A.demonToggles),I,A,S.settingsKey,S.settingsVersion),this.fissionCalculator=e.Bz,this.fusionCalculator=e.wC,this.triFissionCalculator=e.nL,this.triFusionCalculator=e.RD,this.compConfig=S,this.appName=S.appTitle+" Fusion Calculator",this._tripleChart=new r.t(S.normalTable,S.races,!0),this._squareChart$=new o.X({normalChart:I,tripleChart:this._tripleChart,raceOrder:S.raceOrder}),this.squareChart=this._squareChart$.asObservable(),S.appCssClasses.includes("p5t")&&(this.fissionCalculator=new c.N([D.Mg],[]),this.fusionCalculator=new c.N([g.ne],[]))}static#e=this.\u0275fac=function(y){return new(y||u)(h.LFG(e.I7),h.LFG(_.F0))};static#t=this.\u0275prov=h.Yz7({token:u,factory:u.\u0275fac})}return u})()},159:(L,F,a)=>{a.d(F,{G:()=>D});var o=a(95),O=a(6814),r=a(6208),e=a(8325),c=a(5020),g=a(4769);let D=(()=>{class T{static forRoot(){return{ngModule:T}}static#e=this.\u0275fac=function(l){return new(l||T)};static#t=this.\u0275mod=g.oAB({type:T});static#n=this.\u0275inj=g.cJS({imports:[O.ez,r.m,o.UX,e.SharedCompendiumModule,c.V]})}return T})()}}]);