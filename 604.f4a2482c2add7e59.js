"use strict";(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[604],{8615:(G,B,d)=>{d.d(B,{R:()=>S});var E=d(3184),e=d(627),i=d(4769),M=d(6593),w=d(4487),A=d(6814);function x(_,b){if(1&_&&(i.TgZ(0,"th"),i._uU(1),i.qZA()),2&_){const k=b.$implicit,T=i.oxw();i.xp6(1),i.Oqu(k.slice(0,T.nameCut))}}function N(_,b){if(1&_&&(i.TgZ(0,"td",4),i._uU(1),i.qZA()),2&_){const k=b.$implicit,T=i.oxw(2);i.Q6J("ngClass",k.slice(0,4)),i.xp6(1),i.Oqu(k.slice(4,T.nameCut+4))}}function I(_,b){if(1&_&&(i.TgZ(0,"tr")(1,"th"),i._uU(2),i.qZA(),i.YNc(3,N,2,2,"td",3),i.TgZ(4,"th"),i._uU(5),i.qZA()()),2&_){const k=b.$implicit;i.xp6(2),i.Oqu(k[0]),i.xp6(1),i.Q6J("ngForOf",k.slice(1,k.length-1)),i.xp6(2),i.Oqu(k[k.length-1])}}function H(_,b){if(1&_&&(i.TgZ(0,"th"),i._uU(1),i.qZA()),2&_){const k=b.$implicit,T=i.oxw();i.xp6(1),i.Oqu(k.slice(0,T.nameCut))}}function W(_,b){if(1&_&&(i.TgZ(0,"tr")(1,"th",0),i._uU(2),i.qZA()()),2&_){const k=i.oxw();i.xp6(1),i.uIk("colspan",k.table[0].length),i.xp6(1),i.AsE("",k.appName," ",k.tripTitle,"")}}class S{static#e=this.RESULT_COLORS=Object.entries({oran:["-2","Erthys","Gnome","Saki","Saki Mitama","Random","\u30a2\u30fc\u30b7\u30fc\u30ba","\u30ce\u30fc\u30e0","\u30b5\u30ad\u30df\u30bf\u30de"],redd:["-1","Flaemis","Salamander","Ara ","Ara Mitama","Fiend","\u30d5\u30ec\u30a4\u30df\u30fc\u30ba","\u30b5\u30e9\u30de\u30f3\u30c0\u30fc","\u30a2\u30e9\u30df\u30bf\u30de"],gree:["1","Aeros","Sylph","Kusi","Kusi Mitama","UMA","\u30a8\u30a2\u30ed\u30b9","\u30b7\u30eb\u30ad\u30fc","\u30af\u30b7\u30df\u30bf\u30de"],blue:["2","Aquans","Undine","Nigi","Nigi Mitama","Enigma","\u30a2\u30af\u30a2\u30f3\u30ba","\u30a6\u30f3\u30c7\u30a3\u30fc\u30cd","\u30cb\u30ae\u30df\u30bf\u30de"]});constructor(b,k){this.title2=b,this.route=k,this.normTitle="Normal Fusions",this.tripTitle="",this.isPersona=!1,this.filterDarks=!0,this.lang="en",this.msgs=e.R9,this.subscriptions=[],this.table=[],this.nameCut=4}ngOnInit(){this.subscriptions.push(this.route.parent.data.subscribe(b=>{this.appName=b.appName||"Shin Megami Tensei",this.nameCut=parseInt((0,E.y0)(this.msgs.NameCut,b.lang)),this.title2.setTitle((0,E.y0)(this.msgs.AppTitle,b.lang).replace("$APP",this.appName))}))}ngOnChanges(){this.normChart&&this.fillFusionChart()}ngOnDestroy(){for(const b of this.subscriptions)b.unsubscribe()}fillFusionChart(){const b="noneNone",T=S.RESULT_COLORS.reduce((t,[n,m])=>m.reduce((l,g)=>(l[g]=n,l),t),{}),j=this.normChart.elementDemons;let Z=[],U=this.normChart.races,y=[];this.filterDarks&&(Z=this.normChart.races.filter(t=>this.normChart.getLightDark(t)>0),U=this.normChart.races.filter(t=>0===this.normChart.getLightDark(t)),y=this.normChart.races.filter(t=>-1===this.normChart.getLightDark(t)),0===y.length&&Z.length>0&&(Z=this.normChart.races.filter(t=>this.normChart.getLightDark(t)>-1),U=[],y=this.normChart.races.filter(t=>this.normChart.getLightDark(t)<-1)));const X=Z.length-y.length,F=Z.concat(U,j),K=y.length?y.concat(Array(F.length-y.length).fill("")):F,z=this.mitaTable?F:Z.concat(U,Array(j.length).fill("")),O=this.mitaTable||y.length?Array(X).fill("").concat(y,U,j):F;this.table=[[""].concat(F,[""])];for(let t=0;t<O.length;t++){const n=Array(F.length+2).fill("empt-"),m=O[t],l=z[t],g=-1!==j.indexOf(m),f=-1!==j.indexOf(l);this.table.push(n),n[0]=m,n[n.length-1]=l;for(let r=t;r<F.length;r++){const p=F[r],c=-1!==j.indexOf(p);if(c&&f){const o=j.indexOf(l),v=j.indexOf(p),C=this.mitaTable[o][v-o-1];n[r+1]=C?(T[C]||"norm")+C:b}else if(c&&l){const o=this.normChart.getElemFusions(p)[l];n[r+1]=o?(T[o]||"rank")+(o>0?"+":"")+o.toString():b}else if(p&&l){const o=this.isPersona&&p===l?p:this.normChart.getRaceFusion(p,l);n[r+1]=o?(T[o]||(p===l?"elem":"norm"))+o:b}}if(this.tripChart)for(let r=0;r<=t-X;r++){const p=K[r];if(p&&g){const c=this.tripChart.getElemFusions(m)[p];n[r+1]=c?(T[c]||"rank")+(c>0?"+":"")+c.toString():b}else if(p&&m){const c=this.tripChart.getRaceFusion(p,m);n[r+1]=c?(T[c]||(p===m?"elem":"trip"))+c:b}}if(-1!==m.indexOf(" x ")){const[r,p]=m.split(" x "),c=r.slice(0,3)+"x"+p.slice(0,3);n[0]=c,n[n.length-1]=c}else if(-1!==m.indexOf(" ")){const r=m.split(" ")[0];n[0]=r,n[n.length-1]=r}}for(let t=0;t<this.table[0].length;t++){const n=this.table[0][t];if(-1!==n.indexOf(" x ")){const[m,l]=n.split(" x ");this.table[0][t]=m.slice(0,2)+l.slice(0,2)}}this.table.push([""].concat(K,[""]))}static#t=this.\u0275fac=function(k){return new(k||S)(i.Y36(M.Dx),i.Y36(w.gz))};static#s=this.\u0275cmp=i.Xpm({type:S,selectors:[["app-fusion-chart"]],inputs:{normChart:"normChart",tripChart:"tripChart",mitaTable:"mitaTable",normTitle:"normTitle",tripTitle:"tripTitle",isPersona:"isPersona",filterDarks:"filterDarks",lang:"lang",counter:"counter"},features:[i.TTD],decls:12,vars:7,consts:[[1,"title"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(k,T){1&k&&(i.TgZ(0,"table")(1,"tbody")(2,"tr")(3,"th",0),i._uU(4),i.qZA()(),i.TgZ(5,"tr"),i.YNc(6,x,2,1,"th",1),i.qZA(),i.YNc(7,I,6,3,"tr",1),i.TgZ(8,"tr"),i.YNc(9,H,2,1,"th",1),i.qZA(),i.YNc(10,W,3,3,"tr",2),i.qZA(),i._UZ(11,"tbody"),i.qZA()),2&k&&(i.xp6(3),i.uIk("colspan",T.table[0].length),i.xp6(1),i.AsE("",T.appName," ",T.normTitle,""),i.xp6(2),i.Q6J("ngForOf",T.table[0]),i.xp6(1),i.Q6J("ngForOf",T.table.slice(1,T.table.length-1)),i.xp6(2),i.Q6J("ngForOf",T.table[T.table.length-1]),i.xp6(1),i.Q6J("ngIf",T.tripTitle))},dependencies:[A.mk,A.sg,A.O5],styles:["table[_ngcontent-%COMP%]{width:auto;margin:0 auto;white-space:nowrap}td.elem[_ngcontent-%COMP%]{color:#0f0}td.trip[_ngcontent-%COMP%]{color:#d3d3d3}td.oran[_ngcontent-%COMP%]{color:orange}td.redd[_ngcontent-%COMP%]{color:red}td.gree[_ngcontent-%COMP%]{color:#0f0}td.blue[_ngcontent-%COMP%]{color:#0ff}td.none[_ngcontent-%COMP%]{color:transparent}td.empt[_ngcontent-%COMP%]{background-color:transparent;color:transparent}"],changeDetection:0})}},6829:(G,B,d)=>{d.d(B,{V:()=>Y});var E=d(4487),e=d(4769),i=d(7601),M=d(6814),w=d(5390);let A=(()=>{class a{constructor(s){this.appCssClasses=["smtnes","smt1"],this.appCssClasses=s.compConfig.appCssClasses}static#e=this.\u0275fac=function(u){return new(u||a)(e.Y36(i.Y))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-smt1-compendium"]],decls:1,vars:2,consts:[[3,"ngClass","hasSettings"]],template:function(u,h){1&u&&e._UZ(0,"app-demon-compendium",0),2&u&&e.Q6J("ngClass",h.appCssClasses)("hasSettings",!1)},dependencies:[M.mk,w.e],styles:[".devilsum div.element-icon,.smtnes div.element-icon{height:12px;background-size:12px;background-repeat:no-repeat;background-position:center;color:transparent}.smtnes div.element-icon.sword{background-image:url(/assets/images/smt4f/sword.png)}.smtnes div.element-icon.gun{background-image:url(/assets/images/smtsj/gun.png)}.smtnes div.element-icon.fire{background-image:url(/assets/images/smtsj/fir.png)}.smtnes div.element-icon.i4{background-image:url(/assets/images/smtsj/fir.png)}.smtnes div.element-icon.ice{background-image:url(/assets/images/smtsj/ice.png)}.smtnes div.element-icon.i5{background-image:url(/assets/images/smtsj/ice.png)}.smtnes div.element-icon.elec{background-image:url(/assets/images/smtsj/ele.png)}.smtnes div.element-icon.i6{background-image:url(/assets/images/smtsj/ele.png)}.smtnes div.element-icon.force{background-image:url(/assets/images/smtsj/win.png)}.smtnes div.element-icon.i7{background-image:url(/assets/images/smtsj/win.png)}.smtnes div.element-icon.nerve{background-image:url(/assets/images/smt4f/panic.png)}.smtnes div.element-icon.almighty{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.i13{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.expel{background-image:url(/assets/images/smtsj/exp.png)}.smtnes div.element-icon.i8{background-image:url(/assets/images/smtsj/exp.png)}.smtnes div.element-icon.death{background-image:url(/assets/images/smtsj/cur.png)}.smtnes div.element-icon.i9{background-image:url(/assets/images/smtsj/cur.png)}.smtnes div.element-icon.curse{background-image:url(/assets/images/smt4f/poison.png)}.smtnes div.element-icon.bind{background-image:url(/assets/images/smt4f/bind.png)}.smtnes div.element-icon.rush{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.punch{background-image:url(/assets/images/smt4f/sword.png)}.smtnes div.element-icon.kick{background-image:url(/assets/images/smtsj/gun.png)}.smtnes div.element-icon.flying{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.energy{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.recovery{background-image:url(/assets/images/smtsj/rec.png)}.smtnes div.element-icon.support{background-image:url(/assets/images/smtsj/sup.png)}.smtnes div.element-icon.special{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.attack{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.tech{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.slash{background-image:url(/assets/images/smt4f/sword.png)}.smtnes div.element-icon.charge{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.blunt{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.handgun{background-image:url(/assets/images/smtsj/gun.png)}.smtnes div.element-icon.penetrate{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.spread{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.mystic{background-image:url(/assets/images/smt4f/poison.png)}.smtnes div.element-icon.mind{background-image:url(/assets/images/smt4f/bind.png)}.smtnes div.element-icon.suicide{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.passive{background-image:url(/assets/images/smtsj/pas.png)}.smtnes div.element-icon.defend{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.phys{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.gro{background-image:url(/assets/images/smt4f/sword.png)}.smtnes div.element-icon.air{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.fir{background-image:url(/assets/images/smtsj/fir.png)}.smtnes div.element-icon.ele{background-image:url(/assets/images/smtsj/ele.png)}.smtnes div.element-icon.for{background-image:url(/assets/images/smtsj/win.png)}.smtnes div.element-icon.gig{background-image:url(/assets/images/smt4f/bind.png)}.smtnes div.element-icon.alm{background-image:url(/assets/images/smtsj/alm.png)}.smtnes div.element-icon.lig{background-image:url(/assets/images/smtsj/exp.png)}.smtnes div.element-icon.dar{background-image:url(/assets/images/smtsj/cur.png)}.smtnes div.element-icon.phy{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.ail{background-image:url(/assets/images/smtsj/ail.png)}.smtnes div.element-icon.rec{background-image:url(/assets/images/smtsj/rec.png)}.smtnes div.element-icon.sup{background-image:url(/assets/images/smtsj/sup.png)}.smtnes div.element-icon.psy{background-image:url(/assets/images/smt4f/panic.png)}.smtnes div.element-icon.spear{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.thrown{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.ailment{background-image:url(/assets/images/smtsj/ail.png)}.smtnes div.element-icon.quad{background-image:url(/assets/images/smt4f/curse.png)}.smtnes div.element-icon.elem{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.none{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.strike{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.i0{background-image:url(/assets/images/smtsj/phy.png)}.smtnes div.element-icon.skill{background-image:url(/assets/images/smt4f/gun.png)}.smtnes div.element-icon.temp{background-image:url(/assets/images/smt4f/smirk.png)}.smtnes div.element-icon.i17{background-image:url(/assets/images/smt4f/smirk.png)}.smtnes div.element-icon.dark{background-image:url(/assets/images/smt4f/curse.png)}.smtnes div.element-icon.i18{background-image:url(/assets/images/smt4f/curse.png)}.smtnes div.element-icon.witch{background-image:url(/assets/images/smtsj/ail.png)}.smtnes div.element-icon.i19{background-image:url(/assets/images/smtsj/ail.png)}.smtnes div.element-icon.rea{background-image:url(/assets/images/smtsj/rec.png)}.smtnes div.element-icon.i20{background-image:url(/assets/images/smtsj/rec.png)}.smtnes div.element-icon.reb{background-image:url(/assets/images/smtsj/sup.png)}.smtnes div.element-icon.i21{background-image:url(/assets/images/smtsj/sup.png)}.smtnes div.element-icon.element{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.hero{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.i22{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.i23{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.i24{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.starter{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.autorec{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.phase{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.explore{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.area{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.plugin{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.self{background-image:url(/assets/images/smtsj/spe.png)}.smtnes div.element-icon.universe{background-image:url(/assets/images/smtsj/spe.png)}.smtnes td.align.ll,.smtnes td.align.nl,.smtnes td.align.dl{color:#0ff}.smtnes td.align.lc,.smtnes td.align.nc,.smtnes td.align.dc{color:tomato}.smtnes td.align.el{color:#0f0}.smtnes td.align.ec{color:gold}.smt1 th.title,.smt1 th.nav.active,.smt1 th.nav.active a{background-color:#608341;color:#fff}.smt2 th.title,.smt2 th.nav.active,.smt2 th.nav.active a{background-color:#2f4f4f;color:#fff}.smtif th.title,.smtif th.nav.active,.smtif th.nav.active a{background-color:#8fbc8f;color:#000}.dsum th.title,.dsum th.nav.active,.dsum th.nav.active a{background-color:#4372aa;color:#fff}.dssh th.title,.dssh th.nav.active,.dssh th.nav.active a{background-color:#302878;color:#fff}.mjn2 th.title,.mjn2 th.nav.active,.mjn2 th.nav.active a{background-color:#514f7e;color:#fff}.smt9 th.title,.smt9 th.nav.active,.smt9 th.nav.active a{background-color:#693cbe;color:#fff}.smtim th.title,.smtim th.nav.active,.smtim th.nav.active a{background-color:#009d96;color:#fff}\n"],encapsulation:2,changeDetection:0})}return a})();var x=d(1032),N=d(6593),I=d(4101);let H=(()=>{class a extends x.l{constructor(s,u,h){super(s,u,h),this.appName=`List of Demons - ${h.appName}`,this.compConfig=h.compConfig,this.defaultSortFun=(L,$)=>200*(this.compConfig.raceOrder[L.race]-this.compConfig.raceOrder[$.race])+$.lvl-L.lvl}static#e=this.\u0275fac=function(u){return new(u||a)(e.Y36(N.Dx),e.Y36(e.sBO),e.Y36(i.Y))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-demon-list-container"]],features:[e.qOj],decls:2,vars:7,consts:[[3,"raceOrder","statHeaders","resistHeaders","inheritOrder","rowData"]],template:function(u,h){1&u&&(e._UZ(0,"app-smt-demon-list",0),e.ALo(1,"async")),2&u&&e.Q6J("raceOrder",h.compConfig.raceOrder)("statHeaders",h.compConfig.baseStats)("resistHeaders",h.compConfig.resistElems)("inheritOrder",h.compConfig.elemOrder)("rowData",e.lcZ(1,5,h.demons))},dependencies:[I.Q,M.Ov],encapsulation:2,changeDetection:0})}return a})();var W=d(4330),S=d(3934);let _=(()=>{class a extends W.e{constructor(s,u,h){super(s,u,h),this.appName=`List of Skills - ${h.appName}`,this.compConfig=h.compConfig,this.defaultSortFun=(L,$)=>1e4*(this.compConfig.elemOrder[L.element]-this.compConfig.elemOrder[$.element])+L.rank-$.rank}static#e=this.\u0275fac=function(u){return new(u||a)(e.Y36(N.Dx),e.Y36(e.sBO),e.Y36(i.Y))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-skill-list-container"]],features:[e.qOj],decls:2,vars:6,consts:[[3,"elemOrder","hasRank","hasTarget","rowData"]],template:function(u,h){1&u&&(e._UZ(0,"app-smt-skill-list",0),e.ALo(1,"async")),2&u&&e.Q6J("elemOrder",h.compConfig.elemOrder)("hasRank",!1)("hasTarget",!0)("rowData",e.lcZ(1,4,h.skills))},dependencies:[S.J,M.Ov],encapsulation:2,changeDetection:0})}return a})();var b=d(8615);function k(a,R){if(1&a&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&a){const s=R.$implicit;e.xp6(1),e.Oqu(s.slice(0,4))}}function T(a,R){if(1&a&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&a){const s=R.$implicit;e.xp6(1),e.Oqu(s.slice(0,4))}}function j(a,R){if(1&a&&(e.TgZ(0,"tr")(1,"th"),e._uU(2),e.qZA(),e.YNc(3,T,2,1,"td",1),e.TgZ(4,"th"),e._uU(5),e.qZA()()),2&a){const s=R.$implicit;e.xp6(2),e.Oqu(s[0]),e.xp6(1),e.Q6J("ngForOf",s.slice(1,s.length-1)),e.xp6(2),e.Oqu(s[s.length-1])}}function Z(a,R){if(1&a&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&a){const s=R.$implicit;e.xp6(1),e.Oqu(s.slice(0,4))}}let U=(()=>{class a{constructor(){this.table=[]}ngOnChanges(){this.fillFusionChart()}fillFusionChart(){this.table=[];const s=this.speciesChart.races,u=[""].concat(s,[""]);this.table.push(u);for(let h=0;h<s.length;h++)for(let L=h+1;L<s.length;L++){const $="3"+s[h]+"|3"+s[L];this.table.push([s[h]].concat(s.map(V=>this.speciesChart.getRaceFusion("3"+V,$)),[s[L]]))}this.table.push(u)}static#e=this.\u0275fac=function(u){return new(u||a)};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-species-triple-chart"]],inputs:{speciesChart:"speciesChart",title:"title"},features:[e.TTD],decls:9,vars:5,consts:[[1,"title"],[4,"ngFor","ngForOf"]],template:function(u,h){1&u&&(e.TgZ(0,"table")(1,"tr")(2,"th",0),e._uU(3),e.qZA()(),e.TgZ(4,"tr"),e.YNc(5,k,2,1,"th",1),e.qZA(),e.YNc(6,j,6,3,"tr",1),e.TgZ(7,"tr"),e.YNc(8,Z,2,1,"th",1),e.qZA()()),2&u&&(e.xp6(2),e.uIk("colspan",h.table[0].length),e.xp6(1),e.Oqu(h.title),e.xp6(2),e.Q6J("ngForOf",h.table[0]),e.xp6(1),e.Q6J("ngForOf",h.table.slice(1,h.table.length-1)),e.xp6(2),e.Q6J("ngForOf",h.table[h.table.length-1]))},dependencies:[M.sg],styles:["table[_ngcontent-%COMP%]{width:auto;margin:0 auto}td.elem[_ngcontent-%COMP%]{color:#0f0}td.trip[_ngcontent-%COMP%]{color:#d3d3d3}td.ra-2[_ngcontent-%COMP%]{color:orange}td.ra-1[_ngcontent-%COMP%]{color:red}td.ran1[_ngcontent-%COMP%]{color:#0f0}td.ran2[_ngcontent-%COMP%]{color:#0ff}td.None[_ngcontent-%COMP%]{color:#222}td.Sala[_ngcontent-%COMP%], td.Flae[_ngcontent-%COMP%], td.Ara[_ngcontent-%COMP%], td.Fien[_ngcontent-%COMP%]{color:red}td.Undi[_ngcontent-%COMP%], td.Aqua[_ngcontent-%COMP%], td.Nigi[_ngcontent-%COMP%], td.Enig[_ngcontent-%COMP%]{color:#0ff}td.Sylp[_ngcontent-%COMP%], td.Aero[_ngcontent-%COMP%], td.Kusi[_ngcontent-%COMP%], td.UMA[_ngcontent-%COMP%]{color:#0f0}td.Gnom[_ngcontent-%COMP%], td.Erth[_ngcontent-%COMP%], td.Saki[_ngcontent-%COMP%], td.Rand[_ngcontent-%COMP%]{color:orange}td.Empt[_ngcontent-%COMP%]{background-color:#000;color:transparent}"],changeDetection:0})}return a})();function y(a,R){if(1&a&&(e.ynx(0),e._UZ(1,"app-fusion-chart",1)(2,"app-fusion-chart",1),e.BQk()),2&a){const s=e.oxw();e.xp6(1),e.Q6J("normChart",s.normChart)("tripChart",s.normChart)("mitaTable",s.mitamaTable)("normTitle","Light and Neutral Normal Fusions")("tripTitle","Dark Normal Fusions"),e.xp6(1),e.Q6J("normChart",s.tripChart)("tripChart",s.tripChart)("mitaTable",s.tripleMitamaTable)("normTitle","Light and Neutral Triple Fusions")("tripTitle","Dark Triple Fusions")}}function X(a,R){if(1&a&&(e.ynx(0),e._UZ(1,"app-fusion-chart",2)(2,"app-species-triple-chart",3),e.BQk()),2&a){const s=e.oxw();e.xp6(1),e.Q6J("normChart",s.fullChart)("mitaTable",s.mitamaTable)("filterDarks",!1)("normTitle","Normal Fusions"),e.xp6(1),e.Q6J("speciesChart",s.tripChart)("title",s.appName+" - Triple Fusions")}}function F(a,R){if(1&a&&(e.ynx(0),e._UZ(1,"app-fusion-chart",1)(2,"app-species-triple-chart",3),e.BQk()),2&a){const s=e.oxw();e.xp6(1),e.Q6J("normChart",s.fullChart)("tripChart",s.fullChart)("mitaTable",s.mitamaTable)("normTitle","Light and Neutral Normal Fusions")("tripTitle","Dark Normal Fusions"),e.xp6(1),e.Q6J("speciesChart",s.tripChart)("title",s.appName+" - Triple Fusions")}}let K=(()=>{class a{constructor(s){this.fusionDataService=s,this.subscriptions=[]}ngOnInit(){const s=this.fusionDataService.compConfig;this.appName=s.appTitle,this.mitamaTable=s.mitamaTable,this.tripleMitamaTable=s.tripleMitamaTable,this.hasDarkRanks=s.darknessRecipes,this.fusionDataService.compConfig.useSpeciesFusion&&this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(u=>{this.fullChart=u})),this.subscriptions.push(this.fusionDataService.squareChart.subscribe(u=>{this.normChart=u.normalChart,this.tripChart=u.tripleChart}))}ngOnDestroy(){for(const s of this.subscriptions)s.unsubscribe()}static#e=this.\u0275fac=function(u){return new(u||a)(e.Y36(i.Y))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-fusion-chart-container"]],decls:3,vars:3,consts:[[4,"ngIf"],[3,"normChart","tripChart","mitaTable","normTitle","tripTitle"],[3,"normChart","mitaTable","filterDarks","normTitle"],[3,"speciesChart","title"]],template:function(u,h){1&u&&(e.YNc(0,y,3,10,"ng-container",0),e.YNc(1,X,3,6,"ng-container",0),e.YNc(2,F,3,7,"ng-container",0)),2&u&&(e.Q6J("ngIf",!h.fullChart),e.xp6(1),e.Q6J("ngIf",h.fullChart&&!h.hasDarkRanks),e.xp6(1),e.Q6J("ngIf",h.fullChart&&h.hasDarkRanks))},dependencies:[M.O5,b.R,U],encapsulation:2,changeDetection:0})}return a})();var z=d(7880),O=d(8520),t=d(1009),n=d(755),m=d(4069),l=d(8711);function g(a,R){if(1&a&&e._UZ(0,"app-demon-stats",8),2&a){const s=e.oxw(2);e.Q6J("title","Attacks")("statHeaders",s.compConfig.baseAtks)("stats",s.demon.atks)}}function f(a,R){if(1&a&&e._UZ(0,"app-demon-skills",5),2&a){const s=e.oxw(2);e.Q6J("title","Inheritable Skills")("hasTarget",!0)("hasLvl",!1)("elemOrder",s.compConfig.elemOrder)("compendium",s.compendium)("skillLevels",s.compConfig.inheritSkills[s.demon.inherits])}}const r=function(){return["Drop"]};function p(a,R){if(1&a&&(e.ynx(0),e.TgZ(1,"app-demon-stats",2)(2,"td"),e._uU(3),e.qZA()(),e.YNc(4,g,1,3,"app-demon-stats",3),e._UZ(5,"app-demon-resists",4)(6,"app-demon-skills",5),e.YNc(7,f,1,6,"app-demon-skills",6),e._UZ(8,"app-smt-fusions",7),e.BQk()),2&a){const s=e.oxw();e.xp6(1),e.Q6J("title","Lvl "+s.demon.lvl+" "+s.demon.race+" "+s.demon.name)("price",s.demon.price)("statHeaders",s.compConfig.baseStats)("fusionHeaders",e.DdM(18,r))("stats",s.demon.stats)("inherits",s.demon.inherits),e.xp6(2),e.Oqu(s.demon.drop),e.xp6(1),e.Q6J("ngIf",s.compConfig.baseAtks.length),e.xp6(1),e.Q6J("resistHeaders",s.compConfig.resistElems)("resists",s.demon.resists),e.xp6(1),e.Q6J("title","Innate Skills")("hasTarget",!0)("hasLvl",!1)("elemOrder",s.compConfig.elemOrder)("compendium",s.compendium)("skillLevels",s.demon.skills),e.xp6(1),e.Q6J("ngIf",s.compConfig.inheritSkills),e.xp6(1),e.Q6J("hasTripleFusion",!0)}}function c(a,R){if(1&a&&e._UZ(0,"app-demon-missing",9),2&a){const s=e.oxw();e.Q6J("name",s.name)}}let o=(()=>{class a{static#e=this.\u0275fac=function(u){return new(u||a)};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"title","price","statHeaders","fusionHeaders","stats","inherits"],[3,"title","statHeaders","stats",4,"ngIf"],[3,"resistHeaders","resists"],[3,"title","hasTarget","hasLvl","elemOrder","compendium","skillLevels"],[3,"title","hasTarget","hasLvl","elemOrder","compendium","skillLevels",4,"ngIf"],[3,"hasTripleFusion"],[3,"title","statHeaders","stats"],[3,"name"]],template:function(u,h){1&u&&(e.YNc(0,p,9,19,"ng-container",0),e.YNc(1,c,1,1,"app-demon-missing",1)),2&u&&(e.Q6J("ngIf",h.demon),e.xp6(1),e.Q6J("ngIf",!h.demon))},dependencies:[M.O5,z.t,O.O,t.I,n.n,m.O],encapsulation:2,changeDetection:0})}return a})(),v=(()=>{class a{constructor(s,u,h,L){this.route=s,this.title=u,this.currentDemonService=h,this.fusionDataService=L,this.subscriptions=[],this.appName="Test App",this.appName=L.appName,this.compConfig=L.compConfig}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const s of this.subscriptions)s.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(s=>{this.compendium=s,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(s=>{this.name=s,this.getDemonEntry()})),this.route.params.subscribe(s=>{this.currentDemonService.nextCurrentDemon(s.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(`${this.name} - ${this.appName}`),this.demon=this.compendium.getDemon(this.name))}static#e=this.\u0275fac=function(u){return new(u||a)(e.Y36(E.gz),e.Y36(N.Dx),e.Y36(l.s),e.Y36(i.Y))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-demon-entry-container"]],decls:1,vars:4,consts:[[3,"name","demon","compConfig","compendium"]],template:function(u,h){1&u&&e._UZ(0,"app-demon-entry",0),2&u&&e.Q6J("name",h.name)("demon",h.demon)("compConfig",h.compConfig)("compendium",h.compendium)},dependencies:[o],encapsulation:2,changeDetection:0})}return a})();var C=d(5657),D=d(4689),P=d(6857),J=d(4170);const Q=[{path:"",redirectTo:"demons",pathMatch:"full"},{path:"",component:A,data:{fusionTool:"chart"},children:[{path:"chart",component:K}]},{path:"",component:A,children:[{path:"demons/:demonName",component:v,children:[{path:"fissions/triple",component:P.p},{path:"fusions/triple",component:J.n},{path:"fissions",component:C.t},{path:"fusions",component:D.$},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"demons",component:H},{path:"skills",component:_}]},{path:"**",redirectTo:"demons",pathMatch:"full"}];let Y=(()=>{class a{static#e=this.\u0275fac=function(u){return new(u||a)};static#t=this.\u0275mod=e.oAB({type:a});static#s=this.\u0275inj=e.cJS({imports:[E.Bz.forChild(Q),E.Bz]})}return a})()},7601:(G,B,d)=>{d.d(B,{Y:()=>z});var E=d(5619);class e{constructor(t){this.pairRecipes={},this.initImportedData(t),this.updateDerivedData(t)}initImportedData(t){const n={},m={},l={},g={},f=t.baseStats.length,r=t.resistElems.length,p={};for(const[c,o]of Object.entries(t.resistCodes))p[c]=((o/1e3|8)<<10)+(o%1e3/2.5|0);for(const[c,o]of Object.entries(t.demonData)){const v="Shin Megami Tensei IMAGINE"!==t.appTitle?o.skills.reduce((C,D,P)=>(D&&(C[D.replace("*","")]=P-8),C),{}):o.skills;n[c]={name:c,race:o.race,lvl:o.lvl,currLvl:o.lvl,fusion:"normal",inherits:t.inheritSkills?t.skillElems.indexOf(o.inherit):24,drop:o.drop||"-",price:Math.pow(Math.floor(o.lvl),3),stats:o.stats.slice(0,f),atks:o.atks||[],resists:o.resists.substring(0,r).split("").map(C=>p[C]),align:o.align||t.alignData.races[o.race],skills:v}}for(const[c,o]of Object.entries(t.skillData)){const v="recovery"===o.element?" Rec ":" Dmg ";m[c]={name:c,element:o.element,power:o.power||0,cost:o.cost||0,rank:(o.enemy?99:0)+(1023&o.cost||0)/100,effect:(o.power?o.power.toString()+v:" ")+(o.effect||""),target:o.target,level:0,learnedBy:[]}}for(const c of Object.values(n).sort((o,v)=>o.lvl-v.lvl))for(const[o,v]of Object.entries(c.skills))m[o].learnedBy.push({demon:c.name,level:v});if(t.specialRecipes)for(const[c,o]of Object.entries(t.specialRecipes))n[c].fusion=o.fusion||"special",o.prereq&&(n[c].prereq=o.prereq),o.special&&(l[c]=o.special),o.pairs&&(g[c]=o.pairs.map(v=>{const[C,D]=v.split(" x ");return{name1:C,name2:D}}));this.demons=n,this.skills=m,this.elementDemons=t.elementTable.elems,this.specialRecipes=l,this.pairRecipes=g}updateDerivedData(t){const n={},m={},l={};for(const g of t.races)n[g]={},m[g]=[],l[g]=[];for(const[g,f]of Object.entries(this.demons))n[f.race][f.lvl]=g,m[f.race].push(f.lvl),"normal"===f.fusion&&l[f.race].push(f.lvl);for(const[g,f]of Object.entries(t.species)){const r="3"+g;n[g]={},m[g]=[],l[g]=[],n[r]={},m[r]=[],l[r]=[];for(let p=f.length;p>0;p--){const c=f[p-1];let o=f.length-p;"d"==t.alignData.races[c].charAt(0)?o-=400:(Object.assign(n[g],n[c]),m[g]=m[g].concat(m[c]),l[g]=l[g].concat(l[c]));for(const[v,C]of Object.entries(n[c])){const D=(100*parseInt(v)+o)/100;n[r][D]=C.toString(),m[r].push(D),l[r].push(D)}}}for(const g of Object.keys(m))m[g].sort((f,r)=>f-r),l[g].sort((f,r)=>f-r);this._allDemons=Object.values(this.demons),this._allSkills=Object.values(this.skills),this.invertedDemons=n,this.allIngredients=m,this.allResults=l}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return Object.keys(this.specialRecipes).map(t=>this.demons[t])}getDemon(t){return this.demons[t]}getSkill(t){return this.skills[t]}getSkills(t){const n=t.map(m=>this.skills[m]);return n.sort((m,l)=>1e4*(this.compConfig.elemOrder[m.element]-this.compConfig.elemOrder[l.element])+m.rank-l.rank),n}getIngredientDemonLvls(t){return this.allIngredients[t]||[]}getResultDemonLvls(t){return this.allResults[t]||[]}getSpecialNameEntries(t){return this.specialRecipes[t]||[]}getSpecialNamePairs(t){return this.pairRecipes[t]||[]}reverseLookupDemon(t,n){return this.invertedDemons[t][n]}reverseLookupSpecial(t){return[]}isElementDemon(t){return-1!==this.elementDemons.indexOf(t)}updateFusionSettings(t){}}var i=d(6262);class M extends i.g{constructor(t,n){super(),this.elementDemons=[],this.lvlModifier=1.5,this.hasDarkTable=!1,this.initCharts(t,n)}initCharts(t,n){this.alignments=t.alignData.races,this.speciesLookup=t.speciesLookup,this.elementDemons=n?t.tripleElementTable.elems:t.elementTable.elems;const m=n?t.tripleTable.races:t.normalTable.races,l=n?t.tripleTable.table:t.normalTable.table,g=i.g.loadFusionTableJson(m,l),f=i.g.loadFissionTableJson(m,[],l);if(this.lvlModifier=n?t.tripleLvlModifier:t.normalLvlModifier,t.darkTable){this.hasDarkTable=!0;const r=n&&t.tripleDarkTable?t.tripleDarkTable.races:t.darkTable.races,p=n&&t.tripleDarkTable?t.tripleDarkTable.table:t.darkTable.table,c=i.g.loadFusionTableJson(r,p),o=i.g.loadFissionTableJson(r,[],p);this.races=m.concat(r.filter(v=>this.getLightDark(v)<0)),this.fusionChart=i.g.mergeFusionTables(g,c),this.fissionChart=i.g.mergeFissionTables(f,o)}else this.races=m,this.fusionChart=g,this.fissionChart=f;if(t.darknessRecipes)for(const[r,p]of Object.entries(t.darknessRecipes)){const c=p;this.fusionChart[r]={},this.fusionChart[r][r]=c,this.fissionChart[c]={},this.fissionChart[c][r]=[r],this.races.includes(r)||this.races.push(r)}if(t.useSpeciesFusion)for(const r of this.races)if(this.fissionChart[r]){const p=this.speciesLookup[r];this.fissionChart[r]["2"+p]=["2"+p]}this.elementChart=i.g.loadElementTableJson(t.elementTable.races,this.elementDemons,n?t.tripleElementTable.table:t.elementTable.table)}getLightDark(t){return"l"==this.alignments[t].charAt(0)?1:"d"==this.alignments[t].charAt(0)?-1:"D"==this.alignments[t].charAt(0)?-2:0}getRaceFissions(t){return this.fissionChart[t]||{}}getRaceFusions(t){return this.fusionChart[t]||{}}getRaceFusion(t,n){return this.getRaceFusions(t)[n]||""}}class w{constructor(t){this.lvlModifier=7.5,this.elementDemons=[],this.initCharts(t)}initCharts(t){const n=t.tripleTable.races,m=t.tripleTable.table,l=n.map(f=>"3"+f);this.speciesLookup=t.speciesLookup,this.fissionChart={},this.fusionChart={},this.races=n;for(const f of l)this.fusionChart[f]={};let g=-1;for(let f=0;f<l.length;f++)for(let r=f+1;r<l.length;r++){const p=l[f],c=l[r],o=p+"|"+c;g+=1,this.fissionChart[o]={},this.fusionChart[o]={},this.fissionChart[o][p]=[c],this.fusionChart[p][c]=o,this.fusionChart[c][p]=o;for(let v=0;v<l.length;v++){const C=l[v],D=m[g][v];this.fissionChart[D]||(this.fissionChart[D]={}),this.fissionChart[D][o]=[C],this.fusionChart[o][C]=D,this.fusionChart[C][o]=D}}}getRaceFissions(t){return this.fissionChart[t]||{}}getRaceFusions(t){const n=this.speciesLookup[t];return n?this.fusionChart["3"+n]||{}:this.fusionChart[t]||{}}getRaceFusion(t,n){return this.getRaceFusions(t)[n]||""}getLightDark(t){return 0}getElemModifiers(t){return{}}getElemFusions(t){return{}}isConvertedRace(t){return!1}}var A=d(3837),x=d(6213),N=d(7548),I=d(7862),H=d(9015),W=d(2416);const S=["Deity","Megami","Fury","Lady"],_=["Vile","Tyrant","Reaper"],b=["Entity","Zealot"];function k(O,t,n){const m=[],{race:l,lvl:g}=t.getDemon(O),f=2*(n.lvlModifier-3),r=t.getResultDemonLvls(l),p=r.indexOf(g);if(-1===b.indexOf(l)||-1===p)return m;const c=r[p-1]?2*r[p-1]-f:0,o=r[p+1]?2*g-f:200;for(const v of S)for(const C of t.getIngredientDemonLvls(v)){const D=t.reverseLookupDemon(v,C),P=c-C,J=o-C;for(const Q of _)for(const Y of t.getIngredientDemonLvls(Q)){const a=t.reverseLookupDemon(Q,Y);P<Y&&Y<=J&&m.push({name1:D,name2:a})}}return m}function T(O,t,n){const m=[],{race:l,lvl:g}=t.getDemon(O),f=3*(n.tripleChart.lvlModifier-1),r=t.getResultDemonLvls(l),p=r.indexOf(g);if(-1===b.indexOf(l)||-1===p)return m;const c=r[p-1]?3*r[p-1]-f:0,o=3*g-f;for(const v of S)for(const C of t.getIngredientDemonLvls(v)){const D=t.reverseLookupDemon(v,C),P=c-C,J=o-C;for(const Q of _)for(const Y of t.getIngredientDemonLvls(Q)){const a=t.reverseLookupDemon(Q,Y),R=P-Y,s=J-Y;for(const u of S)for(const h of t.getIngredientDemonLvls(u)){const L=t.reverseLookupDemon(u,h);R<h&&h<=s&&D.localeCompare(L)<0&&m.push({name1:D,name2:a,name3:L})}for(const u of _)for(const h of t.getIngredientDemonLvls(u)){const L=t.reverseLookupDemon(u,h);R<h&&h<=s&&a.localeCompare(L)<0&&m.push({name1:D,name2:a,name3:L})}}}return m}var j=d(6748);function Z(O,t,n){const{normalChart:m,tripleChart:l,raceOrder:g}=n,f=[];for(const r of Object.keys(l.getRaceFissions(O)))for(const p of t.getIngredientDemonLvls(r)){const c=t.reverseLookupDemon(r,p);for(const[o,v]of Object.entries(m.getRaceFissions(r)))for(const C of t.getIngredientDemonLvls(o))if(p>C||p===C&&g[r]<g[o]){const D=t.reverseLookupDemon(o,C);for(const P of v)for(const J of t.getIngredientDemonLvls(P))if(p>J||p===J&&g[r]<g[P]){const Q=t.reverseLookupDemon(P,J);f.push({name1:c,name2:D,name3:Q})}}}return f}function U(O,t,n){const{tripleChart:m}=n,l=[];for(const g of Object.keys(m.getRaceFissions(O))){const f=t.getIngredientDemonLvls(g);for(let r=0;r<f.length;r++){const p=t.reverseLookupDemon(g,f[r]);for(let c=r+1;c<f.length;c++){const o=t.reverseLookupDemon(g,f[c]);for(let v=c+1;v<f.length;v++){const C=t.reverseLookupDemon(g,f[v]);l.push({name1:p,name2:o,name3:C})}}}}return l}var y=d(923);function X(O,t,n){const m=n.tripleChart.elementDemons.filter(g=>g.indexOf(O)>-1);let l=[];for(const g of m){const f=g.replace(O,"").replace(" x ",""),r=(0,y.Eh)(g,t,n.tripleChart).concat((0,y.s0)(g,t,n.tripleChart));l=l.concat(r.map(p=>({name1:f,name2:p.name1,name3:p.name2})))}return l}var F=d(6071),K=d(4769);let z=(()=>{class O{constructor(n){this.fusionCalculator=N.YP,this.fissionCalculator=N.uC,this.triFusionCalculator=new x.e([F.UN,F.jm],[]),this.triFissionCalculator=new x.e([j.Mg],[]),this.compConfig=n,this.appName=n.appTitle+" Fusion Calculator",this.compendium=new E.X(new e(n)).asObservable();const m=new M(n);let l,g;n.useSpeciesFusion?(l=new w(n),g=l):(l=m,g=new M(n,!0)),this.fusionChart=new E.X(new M(n)).asObservable(),this.squareChart=new E.X({normalChart:l,tripleChart:g,raceOrder:n.raceOrder}).asObservable(),n.darknessRecipes&&(this.fusionCalculator=N.Q0,this.fissionCalculator=N.oA),n.tripleElementTable&&(this.triFissionCalculator=new x.e([j.Mg,j.D4],[])),n.appCssClasses.includes("dssh")&&(this.fissionCalculator=new A.N([I.Mg,I.Aq,k],[W.Q]),this.triFusionCalculator=new x.e([F.UN,F.jm,F.e7,F.Hd],[X]),this.triFissionCalculator=new x.e([j.Mg,j.D4,T],[Z,U])),(n.appCssClasses.includes("smt1")||n.appCssClasses.includes("smt2"))&&(this.fissionCalculator=new A.N([I.Mg,I.Ii,H.f,I.Aq],[W.Q]))}updateFusionSettings(n){return{}}static#e=this.\u0275fac=function(m){return new(m||O)(K.LFG(N.I7))};static#t=this.\u0275prov=K.Yz7({token:O,factory:O.\u0275fac})}return O})()},604:(G,B,d)=>{d.d(B,{p:()=>A});var E=d(6814),e=d(6208),i=d(8325),M=d(6829),w=d(4769);let A=(()=>{class x{static forRoot(){return{ngModule:x}}static#e=this.\u0275fac=function(H){return new(H||x)};static#t=this.\u0275mod=w.oAB({type:x});static#s=this.\u0275inj=w.cJS({imports:[E.ez,e.m,i.SharedCompendiumModule,M.V]})}return x})()}}]);